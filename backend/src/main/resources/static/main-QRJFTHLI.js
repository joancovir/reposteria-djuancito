import{$ as Bt,$a as b,$b as oi,A as Jn,Aa as oc,Ab as zi,B as Mn,Ba as rc,Bb as Nt,C as qa,Ca as ac,Cb as ni,D as cn,Da as sc,Db as Z,E as Xn,Ea as An,Eb as en,F as dn,Fa as ve,Fb as l,G as Ya,Ga as lc,Gb as E,H as Hl,Ha as cc,Hb as g,I as Wl,Ia as ts,Ib as De,J as ql,Ja as d,Jb as ce,K as st,Ka as Tn,Kb as de,L as Ri,La as dc,Lb as ue,M as $e,Ma as Li,Mb as hc,N as j,Na as uc,Nb as Pt,O as mt,Oa as pn,Ob as Ee,P as I,Pa as He,Pb as qo,Q as Xe,Qa as x,Qb as Gt,R as Yl,Ra as ns,Rb as vc,S as W,Sa as ti,Sb as P,T as F,Ta as $o,Tb as ie,U as w,Ua as pc,Ub as A,V as Dn,Va as is,Vb as Yo,W as Zl,Wa as M,Wb as tn,X as un,Xa as Qe,Xb as bc,Y as bt,Ya as oe,Yb as ii,Z as C,Za as Qt,Zb as _c,_ as y,_a as We,_b as Ve,a as O,aa as Qn,ab as mc,ac as xc,b as ne,ba as lt,bb as le,bc as Cc,ca as me,cb as qe,cc as mn,d as Ll,da as On,db as os,dc as yc,e as Vl,ea as Za,eb as rs,ec as wc,f as Kn,fa as Ni,fb as Vi,fc as Ec,g as Ga,ga as Ft,gb as fc,gc as fn,h as $a,ha as Kl,hb as kn,i as at,ia as Jl,ib as _t,j as Ge,ja as Ka,jb as p,k as jl,ka as Et,kb as s,l as Xt,la as St,lb as a,m as pt,ma as Ja,mb as _,n as U,na as Pe,nb as be,o as Fi,oa as Xl,ob as ge,p as zl,pa as Xa,pb as Ho,q as Ul,qa as Ql,qb as Ne,r as Q,ra as Rt,rb as Le,s as Ha,sa as ec,sb as T,t as wt,ta as Qa,tb as gc,u as Bl,ua as es,ub as ft,v as Go,va as In,vb as Me,w as Gl,wa as ei,wb as v,x as Wa,xa as tc,xb as Wo,y as $l,ya as nc,yb as f,z as kt,za as ic,zb as ji}from"./chunk-VVNJ67U6.js";var Mc=null;function Mt(){return Mc}function as(n){Mc??=n}var Ui=class{},ss=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>w(Dc),providedIn:"platform"})}return n})();var Dc=(()=>{class n extends ss{_location;_history;_doc=w(me);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mt().getBaseHref(this._doc)}onPopState(e){let i=Mt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=Mt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,o){this._history.pushState(e,i,o)}replaceState(e,i,o){this._history.replaceState(e,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Oc(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function Sc(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function gn(n){return n&&n[0]!=="?"?`?${n}`:n}var ri=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>w(Ac),providedIn:"root"})}return n})(),Ic=new W(""),Ac=(()=>{class n extends ri{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??w(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Oc(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+gn(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${i}${o}`:i}pushState(e,i,o,r){let c=this.prepareExternalUrl(o+gn(r));this._platformLocation.pushState(e,i,c)}replaceState(e,i,o,r){let c=this.prepareExternalUrl(o+gn(r));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(F(ss),F(Ic,8))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gt=(()=>{class n{_subject=new at;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=Wp(Sc(Pc(i))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+gn(i))}normalize(e){return n.stripTrailingSlash(Hp(this._basePath,Pc(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",o=null){this._locationStrategy.pushState(o,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+gn(i)),o)}replaceState(e,i="",o=null){this._locationStrategy.replaceState(o,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+gn(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(o=>o(e,i))}subscribe(e,i,o){return this._subject.subscribe({next:e,error:i??void 0,complete:o??void 0})}static normalizeQueryParams=gn;static joinWithSlash=Oc;static stripTrailingSlash=Sc;static \u0275fac=function(i){return new(i||n)(F(ri))};static \u0275prov=I({token:n,factory:()=>$p(),providedIn:"root"})}return n})();function $p(){return new gt(F(ri))}function Hp(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function Pc(n){return n.replace(/\/index.html$/,"")}function Wp(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var Vc={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},or=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(or||{});var et=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(et||{}),he=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(he||{}),ht=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(ht||{}),Ye={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function jc(n){return ft(n)[Me.LocaleId]}function zc(n,t,e){let i=ft(n),o=[i[Me.DayPeriodsFormat],i[Me.DayPeriodsStandalone]],r=Dt(o,t);return Dt(r,e)}function Uc(n,t,e){let i=ft(n),o=[i[Me.DaysFormat],i[Me.DaysStandalone]],r=Dt(o,t);return Dt(r,e)}function Bc(n,t,e){let i=ft(n),o=[i[Me.MonthsFormat],i[Me.MonthsStandalone]],r=Dt(o,t);return Dt(r,e)}function Gc(n,t){let i=ft(n)[Me.Eras];return Dt(i,t)}function Bi(n,t){let e=ft(n);return Dt(e[Me.DateFormat],t)}function Gi(n,t){let e=ft(n);return Dt(e[Me.TimeFormat],t)}function $i(n,t){let i=ft(n)[Me.DateTimeFormat];return Dt(i,t)}function Vt(n,t){let e=ft(n),i=e[Me.NumberSymbols][t];if(typeof i>"u"){if(t===Ye.CurrencyDecimal)return e[Me.NumberSymbols][Ye.Decimal];if(t===Ye.CurrencyGroup)return e[Me.NumberSymbols][Ye.Group]}return i}function gs(n,t){return ft(n)[Me.NumberFormats][t]}function qp(n){return ft(n)[Me.Currencies]}function $c(n){if(!n[Me.ExtraData])throw new j(2303,!1)}function Hc(n){let t=ft(n);return $c(t),(t[Me.ExtraData][2]||[]).map(i=>typeof i=="string"?ls(i):[ls(i[0]),ls(i[1])])}function Wc(n,t,e){let i=ft(n);$c(i);let o=[i[Me.ExtraData][0],i[Me.ExtraData][1]],r=Dt(o,t)||[];return Dt(r,e)||[]}function Dt(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new j(2304,!1)}function ls(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}function qc(n,t,e="en"){let i=qp(e)[n]||Vc[n]||[],o=i[1];return t==="narrow"&&typeof o=="string"?o:i[0]||n}var Yp=2;function Yc(n){let t,e=Vc[n];return e&&(t=e[2]),typeof t=="number"?t:Yp}var Zp=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Zo={},Kp=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Zc(n,t,e,i){let o=rm(n);t=nn(e,t)||t;let c=[],u;for(;t;)if(u=Kp.exec(t),u){c=c.concat(u.slice(1));let S=c.pop();if(!S)break;t=S}else{c.push(t);break}let m=o.getTimezoneOffset();i&&(m=Jc(i,m),o=om(o,i));let h="";return c.forEach(S=>{let D=nm(S);h+=D?D(o,e,m):S==="''"?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}function er(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function nn(n,t){let e=jc(n);if(Zo[e]??={},Zo[e][t])return Zo[e][t];let i="";switch(t){case"shortDate":i=Bi(n,ht.Short);break;case"mediumDate":i=Bi(n,ht.Medium);break;case"longDate":i=Bi(n,ht.Long);break;case"fullDate":i=Bi(n,ht.Full);break;case"shortTime":i=Gi(n,ht.Short);break;case"mediumTime":i=Gi(n,ht.Medium);break;case"longTime":i=Gi(n,ht.Long);break;case"fullTime":i=Gi(n,ht.Full);break;case"short":let o=nn(n,"shortTime"),r=nn(n,"shortDate");i=Ko($i(n,ht.Short),[o,r]);break;case"medium":let c=nn(n,"mediumTime"),u=nn(n,"mediumDate");i=Ko($i(n,ht.Medium),[c,u]);break;case"long":let m=nn(n,"longTime"),h=nn(n,"longDate");i=Ko($i(n,ht.Long),[m,h]);break;case"full":let S=nn(n,"fullTime"),D=nn(n,"fullDate");i=Ko($i(n,ht.Full),[S,D]);break}return i&&(Zo[e][t]=i),i}function Ko(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function Lt(n,t,e="-",i,o){let r="";(n<0||o&&n<=0)&&(o?n=-n+1:(n=-n,r=e));let c=String(n);for(;c.length<t;)c="0"+c;return i&&(c=c.slice(c.length-t)),r+c}function Jp(n,t){return Lt(n,3).substring(0,t)}function Ae(n,t,e=0,i=!1,o=!1){return function(r,c){let u=Xp(n,r);if((e>0||u>-e)&&(u+=e),n===3)u===0&&e===-12&&(u=12);else if(n===6)return Jp(u,t);let m=Vt(c,Ye.MinusSign);return Lt(u,t,m,i,o)}}function Xp(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new j(2301,!1)}}function _e(n,t,e=et.Format,i=!1){return function(o,r){return Qp(o,r,n,t,e,i)}}function Qp(n,t,e,i,o,r){switch(e){case 2:return Bc(t,o,i)[n.getMonth()];case 1:return Uc(t,o,i)[n.getDay()];case 0:let c=n.getHours(),u=n.getMinutes();if(r){let h=Hc(t),S=Wc(t,o,i),D=h.findIndex(V=>{if(Array.isArray(V)){let[L,B]=V,ye=c>=L.hours&&u>=L.minutes,G=c<B.hours||c===B.hours&&u<B.minutes;if(L.hours<B.hours){if(ye&&G)return!0}else if(ye||G)return!0}else if(V.hours===c&&V.minutes===u)return!0;return!1});if(D!==-1)return S[D]}return zc(t,o,i)[c<12?0:1];case 3:return Gc(t,i)[n.getFullYear()<=0?0:1];default:let m=e;throw new j(2302,!1)}}function Jo(n){return function(t,e,i){let o=-1*i,r=Vt(e,Ye.MinusSign),c=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case 0:return(o>=0?"+":"")+Lt(c,2,r)+Lt(Math.abs(o%60),2,r);case 1:return"GMT"+(o>=0?"+":"")+Lt(c,1,r);case 2:return"GMT"+(o>=0?"+":"")+Lt(c,2,r)+":"+Lt(Math.abs(o%60),2,r);case 3:return i===0?"Z":(o>=0?"+":"")+Lt(c,2,r)+":"+Lt(Math.abs(o%60),2,r);default:throw new j(2310,!1)}}}var em=0,Qo=4;function tm(n){let t=er(n,em,1).getDay();return er(n,0,1+(t<=Qo?Qo:Qo+7)-t)}function Kc(n){let t=n.getDay(),e=t===0?-3:Qo-t;return er(n.getFullYear(),n.getMonth(),n.getDate()+e)}function cs(n,t=!1){return function(e,i){let o;if(t){let r=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,c=e.getDate();o=1+Math.floor((c+r)/7)}else{let r=Kc(e),c=tm(r.getFullYear()),u=r.getTime()-c.getTime();o=1+Math.round(u/6048e5)}return Lt(o,n,Vt(i,Ye.MinusSign))}}function Xo(n,t=!1){return function(e,i){let r=Kc(e).getFullYear();return Lt(r,n,Vt(i,Ye.MinusSign),t)}}var ds={};function nm(n){if(ds[n])return ds[n];let t;switch(n){case"G":case"GG":case"GGG":t=_e(3,he.Abbreviated);break;case"GGGG":t=_e(3,he.Wide);break;case"GGGGG":t=_e(3,he.Narrow);break;case"y":t=Ae(0,1,0,!1,!0);break;case"yy":t=Ae(0,2,0,!0,!0);break;case"yyy":t=Ae(0,3,0,!1,!0);break;case"yyyy":t=Ae(0,4,0,!1,!0);break;case"Y":t=Xo(1);break;case"YY":t=Xo(2,!0);break;case"YYY":t=Xo(3);break;case"YYYY":t=Xo(4);break;case"M":case"L":t=Ae(1,1,1);break;case"MM":case"LL":t=Ae(1,2,1);break;case"MMM":t=_e(2,he.Abbreviated);break;case"MMMM":t=_e(2,he.Wide);break;case"MMMMM":t=_e(2,he.Narrow);break;case"LLL":t=_e(2,he.Abbreviated,et.Standalone);break;case"LLLL":t=_e(2,he.Wide,et.Standalone);break;case"LLLLL":t=_e(2,he.Narrow,et.Standalone);break;case"w":t=cs(1);break;case"ww":t=cs(2);break;case"W":t=cs(1,!0);break;case"d":t=Ae(2,1);break;case"dd":t=Ae(2,2);break;case"c":case"cc":t=Ae(7,1);break;case"ccc":t=_e(1,he.Abbreviated,et.Standalone);break;case"cccc":t=_e(1,he.Wide,et.Standalone);break;case"ccccc":t=_e(1,he.Narrow,et.Standalone);break;case"cccccc":t=_e(1,he.Short,et.Standalone);break;case"E":case"EE":case"EEE":t=_e(1,he.Abbreviated);break;case"EEEE":t=_e(1,he.Wide);break;case"EEEEE":t=_e(1,he.Narrow);break;case"EEEEEE":t=_e(1,he.Short);break;case"a":case"aa":case"aaa":t=_e(0,he.Abbreviated);break;case"aaaa":t=_e(0,he.Wide);break;case"aaaaa":t=_e(0,he.Narrow);break;case"b":case"bb":case"bbb":t=_e(0,he.Abbreviated,et.Standalone,!0);break;case"bbbb":t=_e(0,he.Wide,et.Standalone,!0);break;case"bbbbb":t=_e(0,he.Narrow,et.Standalone,!0);break;case"B":case"BB":case"BBB":t=_e(0,he.Abbreviated,et.Format,!0);break;case"BBBB":t=_e(0,he.Wide,et.Format,!0);break;case"BBBBB":t=_e(0,he.Narrow,et.Format,!0);break;case"h":t=Ae(3,1,-12);break;case"hh":t=Ae(3,2,-12);break;case"H":t=Ae(3,1);break;case"HH":t=Ae(3,2);break;case"m":t=Ae(4,1);break;case"mm":t=Ae(4,2);break;case"s":t=Ae(5,1);break;case"ss":t=Ae(5,2);break;case"S":t=Ae(6,1);break;case"SS":t=Ae(6,2);break;case"SSS":t=Ae(6,3);break;case"Z":case"ZZ":case"ZZZ":t=Jo(0);break;case"ZZZZZ":t=Jo(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Jo(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=Jo(2);break;default:return null}return ds[n]=t,t}function Jc(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function im(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function om(n,t,e){let o=n.getTimezoneOffset(),r=Jc(t,o);return im(n,-1*(r-o))}function rm(n){if(Tc(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[o,r=1,c=1]=n.split("-").map(u=>+u);return er(o,r-1,c)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(Zp))return am(i)}let t=new Date(n);if(!Tc(t))throw new j(2311,!1);return t}function am(n){let t=new Date(0),e=0,i=0,o=n[8]?t.setUTCFullYear:t.setFullYear,r=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),o.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let c=Number(n[4]||0)-e,u=Number(n[5]||0)-i,m=Number(n[6]||0),h=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return r.call(t,c,u,m,h),t}function Tc(n){return n instanceof Date&&!isNaN(n.valueOf())}var sm=/^(\d+)?\.((\d+)(-(\d+))?)?$/,kc=22,tr=".",Hi="0",lm=";",cm=",",us="#",Fc="\xA4";function Xc(n,t,e,i,o,r,c=!1){let u="",m=!1;if(!isFinite(n))u=Vt(e,Ye.Infinity);else{let h=um(n);c&&(h=dm(h));let S=t.minInt,D=t.minFrac,V=t.maxFrac;if(r){let we=r.match(sm);if(we===null)throw new j(2306,!1);let ut=we[1],Ie=we[3],Ut=we[5];ut!=null&&(S=ps(ut)),Ie!=null&&(D=ps(Ie)),Ut!=null?V=ps(Ut):Ie!=null&&D>V&&(V=D)}pm(h,D,V);let L=h.digits,B=h.integerLen,ye=h.exponent,G=[];for(m=L.every(we=>!we);B<S;B++)L.unshift(0);for(;B<0;B++)L.unshift(0);B>0?G=L.splice(B,L.length):(G=L,L=[0]);let Y=[];for(L.length>=t.lgSize&&Y.unshift(L.splice(-t.lgSize,L.length).join(""));L.length>t.gSize;)Y.unshift(L.splice(-t.gSize,L.length).join(""));L.length&&Y.unshift(L.join("")),u=Y.join(Vt(e,i)),G.length&&(u+=Vt(e,o)+G.join("")),ye&&(u+=Vt(e,Ye.Exponential)+"+"+ye)}return n<0&&!m?u=t.negPre+u+t.negSuf:u=t.posPre+u+t.posSuf,u}function Qc(n,t,e,i,o){let r=gs(t,or.Currency),c=td(r,Vt(t,Ye.MinusSign));return c.minFrac=Yc(i),c.maxFrac=c.minFrac,Xc(n,c,t,Ye.CurrencyGroup,Ye.CurrencyDecimal,o).replace(Fc,e).replace(Fc,"").trim()}function ed(n,t,e){let i=gs(t,or.Decimal),o=td(i,Vt(t,Ye.MinusSign));return Xc(n,o,t,Ye.Group,Ye.Decimal,e)}function td(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(lm),o=i[0],r=i[1],c=o.indexOf(tr)!==-1?o.split(tr):[o.substring(0,o.lastIndexOf(Hi)+1),o.substring(o.lastIndexOf(Hi)+1)],u=c[0],m=c[1]||"";e.posPre=u.substring(0,u.indexOf(us));for(let S=0;S<m.length;S++){let D=m.charAt(S);D===Hi?e.minFrac=e.maxFrac=S+1:D===us?e.maxFrac=S+1:e.posSuf+=D}let h=u.split(cm);if(e.gSize=h[1]?h[1].length:0,e.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,r){let S=o.length-e.posPre.length-e.posSuf.length,D=r.indexOf(us);e.negPre=r.substring(0,D).replace(/'/g,""),e.negSuf=r.slice(D+S).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function dm(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function um(n){let t=Math.abs(n)+"",e=0,i,o,r,c,u;for((o=t.indexOf(tr))>-1&&(t=t.replace(tr,"")),(r=t.search(/e/i))>0?(o<0&&(o=r),o+=+t.slice(r+1),t=t.substring(0,r)):o<0&&(o=t.length),r=0;t.charAt(r)===Hi;r++);if(r===(u=t.length))i=[0],o=1;else{for(u--;t.charAt(u)===Hi;)u--;for(o-=r,i=[],c=0;r<=u;r++,c++)i[c]=Number(t.charAt(r))}return o>kc&&(i=i.splice(0,kc-1),e=o-1,o=1),{digits:i,exponent:e,integerLen:o}}function pm(n,t,e){if(t>e)throw new j(2307,!1);let i=n.digits,o=i.length-n.integerLen,r=Math.min(Math.max(t,o),e),c=r+n.integerLen,u=i[c];if(c>0){i.splice(Math.max(n.integerLen,c));for(let D=c;D<i.length;D++)i[D]=0}else{o=Math.max(0,o),n.integerLen=1,i.length=Math.max(1,c=r+1),i[0]=0;for(let D=1;D<c;D++)i[D]=0}if(u>=5)if(c-1<0){for(let D=0;D>c;D--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[c-1]++;for(;o<Math.max(0,r);o++)i.push(0);let m=r!==0,h=t+n.integerLen,S=i.reduceRight(function(D,V,L,B){return V=V+D,B[L]=V<10?V:V-10,m&&(B[L]===0&&L>=h?B.pop():m=!1),V>=10?1:0},0);S&&(i.unshift(S),n.integerLen++)}function ps(n){let t=parseInt(n);if(isNaN(t))throw new j(2305,!1);return t}var ms=/\s+/,Rc=[],Oe=(()=>{class n{_ngEl;_renderer;initialClasses=Rc;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(ms):Rc}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(ms):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let o=this.stateMap.get(e);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],o=e[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(ms).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static \u0275fac=function(i){return new(i||n)(x(Pe),x(He))};static \u0275dir=oe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var nr=class{$implicit;ngForOf;index;count;constructor(t,e,i,o){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},z=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,o){this._viewContainer=e,this._template=i,this._differs=o}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((o,r,c)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new nr(o.item,this._ngForOf,-1,-1),c===null?void 0:c);else if(c==null)i.remove(r===null?void 0:r);else if(r!==null){let u=i.get(r);i.move(u,c),Nc(u,o)}});for(let o=0,r=i.length;o<r;o++){let u=i.get(o).context;u.index=o,u.count=r,u.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{let r=i.get(o.currentIndex);Nc(r,o)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(x(ti),x(Li),x(yc))};static \u0275dir=oe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Nc(n,t){n.context.$implicit=t.item}var N=(()=>{class n{_viewContainer;_context=new ir;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Lc(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Lc(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(x(ti),x(Li))};static \u0275dir=oe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),ir=class{$implicit=null;ngIf=null};function Lc(n,t){if(n&&!n.createEmbeddedView)throw new j(2020,!1)}var hs=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,i,o){this._ngEl=e,this._differs=i,this._renderer=o}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[o,r]=e.split("."),c=o.indexOf("-")===-1?void 0:Tn.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,r?`${i}${r}`:i,c):this._renderer.removeStyle(this._ngEl.nativeElement,o,c)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static \u0275fac=function(i){return new(i||n)(x(Pe),x(wc),x(He))};static \u0275dir=oe({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();function ai(n,t){return new j(2100,!1)}var mm=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,xe=(()=>{class n{transform(e){if(e==null)return null;if(typeof e!="string")throw ai(n,e);return e.replace(mm,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Qt({name:"titlecase",type:n,pure:!0})}return n})(),vs=(()=>{class n{transform(e){if(e==null)return null;if(typeof e!="string")throw ai(n,e);return e.toUpperCase()}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Qt({name:"uppercase",type:n,pure:!0})}return n})(),fm="mediumDate",nd=new W(""),id=new W(""),re=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,i,o){this.locale=e,this.defaultTimezone=i,this.defaultOptions=o}transform(e,i,o,r){if(e==null||e===""||e!==e)return null;try{let c=i??this.defaultOptions?.dateFormat??fm,u=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Zc(e,c,r||this.locale,u)}catch(c){throw ai(n,c.message)}}static \u0275fac=function(i){return new(i||n)(x(ii,16),x(nd,24),x(id,24))};static \u0275pipe=Qt({name:"date",type:n,pure:!0})}return n})();var Ce=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,i,o){if(!od(e))return null;o||=this._locale;try{let r=rd(e);return ed(r,o,i)}catch(r){throw ai(n,r.message)}}static \u0275fac=function(i){return new(i||n)(x(ii,16))};static \u0275pipe=Qt({name:"number",type:n,pure:!0})}return n})();var bs=(()=>{class n{_locale;_defaultCurrencyCode;constructor(e,i="USD"){this._locale=e,this._defaultCurrencyCode=i}transform(e,i=this._defaultCurrencyCode,o="symbol",r,c){if(!od(e))return null;c||=this._locale,typeof o=="boolean"&&(o=o?"symbol":"code");let u=i||this._defaultCurrencyCode;o!=="code"&&(o==="symbol"||o==="symbol-narrow"?u=qc(u,o==="symbol"?"wide":"narrow",c):u=o);try{let m=rd(e);return Qc(m,c,u,i,r)}catch(m){throw ai(n,m.message)}}static \u0275fac=function(i){return new(i||n)(x(ii,16),x(_c,16))};static \u0275pipe=Qt({name:"currency",type:n,pure:!0})}return n})();function od(n){return!(n==null||n===""||n!==n)}function rd(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new j(2309,!1);return n}var Wi=(()=>{class n{transform(e,i,o){if(e==null)return null;if(!(typeof e=="string"||Array.isArray(e)))throw ai(n,e);return e.slice(i,o)}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Qt({name:"slice",type:n,pure:!1})}return n})();var k=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qe({type:n});static \u0275inj=Xe({})}return n})();function qi(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[o,r]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(o.trim()===t)return decodeURIComponent(r)}return null}var Fn=class{};function ld(n,t,e){return gc(n,t,e)}var _s="browser";function si(n){return n===_s}var ar=new W(""),Es=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,o,r){return this._findPluginFor(i).addEventListener(e,i,o,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(r=>r.supports(e)),!i)throw new j(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(F(ar),F(qe))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),Yi=class{_doc;constructor(t){this._doc=t}manager},xs="ng-app-id";function cd(n){for(let t of n)t.remove()}function dd(n,t){let e=t.createElement("style");return e.textContent=n,e}function hm(n,t,e,i){let o=n.head?.querySelectorAll(`style[${xs}="${t}"],link[${xs}="${t}"]`);if(o)for(let r of o)r.removeAttribute(xs),r instanceof HTMLLinkElement?i.set(r.href.slice(r.href.lastIndexOf("/")+1),{usage:0,elements:[r]}):r.textContent&&e.set(r.textContent,{usage:0,elements:[r]})}function ys(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Ss=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,i,o,r={}){this.doc=e,this.appId=i,this.nonce=o,hm(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let o of e)this.addUsage(o,this.inline,dd);i?.forEach(o=>this.addUsage(o,this.external,ys))}removeStyles(e,i){for(let o of e)this.removeUsage(o,this.inline);i?.forEach(o=>this.removeUsage(o,this.external))}addUsage(e,i,o){let r=i.get(e);r?r.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(c=>this.addElement(c,o(e,this.doc)))})}removeUsage(e,i){let o=i.get(e);o&&(o.usage--,o.usage<=0&&(cd(o.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])cd(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:o}]of this.inline)o.push(this.addElement(e,dd(i,this.doc)));for(let[i,{elements:o}]of this.external)o.push(this.addElement(e,ys(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(F(me),F(Xa),F(Qa,8),F(Rt))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),Cs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ps=/%COMP%/g;var pd="%COMP%",vm=`_nghost-${pd}`,bm=`_ngcontent-${pd}`,_m=!0,xm=new W("",{providedIn:"root",factory:()=>_m});function Cm(n){return bm.replace(Ps,n)}function ym(n){return vm.replace(Ps,n)}function md(n,t){return t.map(e=>e.replace(Ps,n))}var Ji=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,o,r,c,u,m,h=null,S=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=r,this.doc=c,this.platformId=u,this.ngZone=m,this.nonce=h,this.tracingService=S,this.platformIsServer=!1,this.defaultRenderer=new Zi(e,c,m,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;let o=this.getOrCreateRenderer(e,i);return o instanceof rr?o.applyToHost(e):o instanceof Ki&&o.applyStyles(),o}getOrCreateRenderer(e,i){let o=this.rendererByCompId,r=o.get(i.id);if(!r){let c=this.doc,u=this.ngZone,m=this.eventManager,h=this.sharedStylesHost,S=this.removeStylesOnCompDestroy,D=this.platformIsServer,V=this.tracingService;switch(i.encapsulation){case es.Emulated:r=new rr(m,h,i,this.appId,S,c,u,D,V);break;case es.ShadowDom:return new ws(m,h,e,i,c,u,this.nonce,D,V);default:r=new Ki(m,h,i,S,c,u,D,V);break}o.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||n)(F(Es),F(Ss),F(Xa),F(xm),F(me),F(Rt),F(qe),F(Qa),F(mc,8))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),Zi=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,o,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=o,this.tracingService=r}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Cs[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(ud(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(ud(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new j(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,o){if(o){e=o+":"+e;let r=Cs[o];r?t.setAttributeNS(r,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let o=Cs[i];o?t.removeAttributeNS(o,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,o){o&(Tn.DashCase|Tn.Important)?t.style.setProperty(e,i,o&Tn.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Tn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,o){if(typeof t=="string"&&(t=Mt().getGlobalEventTarget(this.doc,t),!t))throw new j(5102,!1);let r=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(r=this.tracingService.wrapEventListener(t,e,r)),this.eventManager.addEventListener(t,e,r,o)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function ud(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ws=class extends Zi{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,i,o,r,c,u,m,h){super(t,r,c,m,h),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let S=o.styles;S=md(o.id,S);for(let V of S){let L=document.createElement("style");u&&L.setAttribute("nonce",u),L.textContent=V,this.shadowRoot.appendChild(L)}let D=o.getExternalStyles?.();if(D)for(let V of D){let L=ys(V,r);u&&L.setAttribute("nonce",u),this.shadowRoot.appendChild(L)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ki=class extends Zi{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,o,r,c,u,m,h){super(t,r,c,u,m),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=o;let S=i.styles;this.styles=h?md(h,S):S,this.styleUrls=i.getExternalStyles?.(h)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&dc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},rr=class extends Ki{contentAttr;hostAttr;constructor(t,e,i,o,r,c,u,m,h){let S=o+"-"+i.id;super(t,e,i,r,c,u,m,h,S),this.contentAttr=Cm(S),this.hostAttr=ym(S)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}};var sr=class n extends Ui{supportsDOMEvents=!0;static makeCurrent(){as(new n)}onAndCancel(t,e,i,o){return t.addEventListener(e,i,o),()=>{t.removeEventListener(e,i,o)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=Em();return e==null?null:Sm(e)}resetBaseElement(){Xi=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return qi(document.cookie,t)}},Xi=null;function Em(){return Xi=Xi||document.head.querySelector("base"),Xi?Xi.getAttribute("href"):null}function Sm(n){return new URL(n,document.baseURI).pathname}var Pm=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),gd=(()=>{class n extends Yi{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,o,r){return e.addEventListener(i,o,r),()=>this.removeEventListener(e,i,o,r)}removeEventListener(e,i,o,r){return e.removeEventListener(i,o,r)}static \u0275fac=function(i){return new(i||n)(F(me))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),fd=["alt","control","meta","shift"],Mm={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dm={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},hd=(()=>{class n extends Yi{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,o,r){let c=n.parseEventName(i),u=n.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mt().onAndCancel(e,c.domEventName,u,r))}static parseEventName(e){let i=e.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let r=n._normalizeKey(i.pop()),c="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),c="code."),fd.forEach(h=>{let S=i.indexOf(h);S>-1&&(i.splice(S,1),c+=h+".")}),c+=r,i.length!=0||r.length===0)return null;let m={};return m.domEventName=o,m.fullKey=c,m}static matchEventFullKeyCode(e,i){let o=Mm[e.key]||e.key,r="";return i.indexOf("code.")>-1&&(o=e.code,r="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),fd.forEach(c=>{if(c!==o){let u=Dm[c];u(e)&&(r+=c+".")}}),r+=o,r===i)}static eventCallback(e,i,o){return r=>{n.matchEventFullKeyCode(r,e)&&o.runGuarded(()=>i(r))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(F(me))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})();function Ms(n,t,e){let i=O({rootComponent:n,platformRef:e?.platformRef},Om(t));return Ec(i)}function Om(n){return{appProviders:[...Fm,...n?.providers??[]],platformProviders:km}}function Im(){sr.makeCurrent()}function Am(){return new Za}function Tm(){return Xl(document),document}var km=[{provide:Rt,useValue:_s},{provide:Ql,useValue:Im,multi:!0},{provide:me,useFactory:Tm}];var Fm=[{provide:Zl,useValue:"root"},{provide:Za,useFactory:Am},{provide:ar,useClass:gd,multi:!0,deps:[me]},{provide:ar,useClass:hd,multi:!0,deps:[me]},Ji,Ss,Es,{provide:pn,useExisting:Ji},{provide:Fn,useClass:Pm},[]];var di=class{},Qi=class{},Ot=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let o=e.slice(0,i),r=e.slice(i+1).trim();this.addHeaderEntry(o,r)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let o=(t.op==="a"?this.headers.get(e):void 0)||[];o.push(...i),this.headers.set(e,o);break;case"d":let r=t.value;if(!r)this.headers.delete(e),this.normalizedNames.delete(e);else{let c=this.headers.get(e);if(!c)return;c=c.filter(u=>r.indexOf(u)===-1),c.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}break}}addHeaderEntry(t,e){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(r=>r.toString()),o=t.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(t,o)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var cr=class{encodeKey(t){return vd(t)}encodeValue(t){return vd(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function Rm(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let r=o.indexOf("="),[c,u]=r==-1?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,r)),t.decodeValue(o.slice(r+1))],m=e.get(c)||[];m.push(u),e.set(c,m)}),e}var Nm=/%(\d[a-f0-9])/gi,Lm={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function vd(n){return encodeURIComponent(n).replace(Nm,(t,e)=>Lm[e]??t)}function lr(n){return`${n}`}var on=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new cr,t.fromString){if(t.fromObject)throw new j(2805,!1);this.map=Rm(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],o=Array.isArray(i)?i.map(lr):[lr(i)];this.map.set(e,o)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let o=t[i];Array.isArray(o)?o.forEach(r=>{e.push({param:i,value:r,op:"a"})}):e.push({param:i,value:o,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(lr(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],o=i.indexOf(lr(t.value));o!==-1&&i.splice(o,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var dr=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Vm(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function bd(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function _d(n){return typeof Blob<"u"&&n instanceof Blob}function xd(n){return typeof FormData<"u"&&n instanceof FormData}function jm(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Cd="Content-Type",yd="Accept",wd="X-Request-URL",Ed="text/plain",Sd="application/json",zm=`${Sd}, ${Ed}, */*`,li=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,e,i,o){this.url=e,this.method=t.toUpperCase();let r;if(Vm(this.method)||o?(this.body=i!==void 0?i:null,r=o):r=i,r){if(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,this.keepalive=!!r.keepalive,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params),r.priority&&(this.priority=r.priority),r.cache&&(this.cache=r.cache),r.credentials&&(this.credentials=r.credentials),typeof r.timeout=="number"){if(r.timeout<1||!Number.isInteger(r.timeout))throw new j(2822,"");this.timeout=r.timeout}r.mode&&(this.mode=r.mode),r.redirect&&(this.redirect=r.redirect),r.integrity&&(this.integrity=r.integrity),r.referrer&&(this.referrer=r.referrer),this.transferCache=r.transferCache}if(this.headers??=new Ot,this.context??=new dr,!this.params)this.params=new on,this.urlWithParams=e;else{let c=this.params.toString();if(c.length===0)this.urlWithParams=e;else{let u=e.indexOf("?"),m=u===-1?"?":u<e.length-1?"&":"";this.urlWithParams=e+m+c}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||bd(this.body)||_d(this.body)||xd(this.body)||jm(this.body)?this.body:this.body instanceof on?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||xd(this.body)?null:_d(this.body)?this.body.type||null:bd(this.body)?null:typeof this.body=="string"?Ed:this.body instanceof on?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Sd:null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,o=t.responseType||this.responseType,r=t.keepalive??this.keepalive,c=t.priority||this.priority,u=t.cache||this.cache,m=t.mode||this.mode,h=t.redirect||this.redirect,S=t.credentials||this.credentials,D=t.referrer||this.referrer,V=t.integrity||this.integrity,L=t.transferCache??this.transferCache,B=t.timeout??this.timeout,ye=t.body!==void 0?t.body:this.body,G=t.withCredentials??this.withCredentials,Y=t.reportProgress??this.reportProgress,we=t.headers||this.headers,ut=t.params||this.params,Ie=t.context??this.context;return t.setHeaders!==void 0&&(we=Object.keys(t.setHeaders).reduce((Ut,Pn)=>Ut.set(Pn,t.setHeaders[Pn]),we)),t.setParams&&(ut=Object.keys(t.setParams).reduce((Ut,Pn)=>Ut.set(Pn,t.setParams[Pn]),ut)),new n(e,i,ye,{params:ut,headers:we,context:Ie,reportProgress:Y,responseType:o,withCredentials:G,transferCache:L,keepalive:r,cache:u,priority:c,timeout:B,mode:m,redirect:h,credentials:S,referrer:D,integrity:V})}},Rn=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Rn||{}),ui=class{headers;status;statusText;url;ok;type;redirected;constructor(t,e=200,i="OK"){this.headers=t.headers||new Ot,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.redirected=t.redirected,this.ok=this.status>=200&&this.status<300}},ur=class n extends ui{constructor(t={}){super(t)}type=Rn.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},eo=class n extends ui{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Rn.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected})}},ci=class extends ui{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Um=200,Bm=204;function Ds(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var K=(()=>{class n{handler;constructor(e){this.handler=e}request(e,i,o={}){let r;if(e instanceof li)r=e;else{let m;o.headers instanceof Ot?m=o.headers:m=new Ot(o.headers);let h;o.params&&(o.params instanceof on?h=o.params:h=new on({fromObject:o.params})),r=new li(e,i,o.body!==void 0?o.body:null,{headers:m,context:o.context,params:h,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache,keepalive:o.keepalive,priority:o.priority,cache:o.cache,mode:o.mode,redirect:o.redirect,credentials:o.credentials,referrer:o.referrer,integrity:o.integrity,timeout:o.timeout})}let c=U(r).pipe(Mn(m=>this.handler.handle(m)));if(e instanceof li||o.observe==="events")return c;let u=c.pipe(kt(m=>m instanceof eo));switch(o.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return u.pipe(Q(m=>{if(m.body!==null&&!(m.body instanceof ArrayBuffer))throw new j(2806,!1);return m.body}));case"blob":return u.pipe(Q(m=>{if(m.body!==null&&!(m.body instanceof Blob))throw new j(2807,!1);return m.body}));case"text":return u.pipe(Q(m=>{if(m.body!==null&&typeof m.body!="string")throw new j(2808,!1);return m.body}));case"json":default:return u.pipe(Q(m=>m.body))}case"response":return u;default:throw new j(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new on().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,o={}){return this.request("PATCH",e,Ds(o,i))}post(e,i,o={}){return this.request("POST",e,Ds(o,i))}put(e,i,o={}){return this.request("PUT",e,Ds(o,i))}static \u0275fac=function(i){return new(i||n)(F(di))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})();var Gm=new W("");function $m(n,t){return t(n)}function Hm(n,t,e){return(i,o)=>bt(e,()=>t(i,r=>n(r,o)))}var Is=new W(""),Pd=new W(""),Md=new W("",{providedIn:"root",factory:()=>!0});var pr=(()=>{class n extends di{backend;injector;chain=null;pendingTasks=w(Ka);contributeToStability=w(Md);constructor(e,i){super(),this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Is),...this.injector.get(Pd,[])]));this.chain=i.reduceRight((o,r)=>Hm(o,r,this.injector),$m)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,o=>this.backend.handle(o)).pipe(Xn(i))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(F(Qi),F(un))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})();var Wm=/^\)\]\}',?\n/,qm=RegExp(`^${wd}:`,"m");function Ym(n){return"responseURL"in n&&n.responseURL?n.responseURL:qm.test(n.getAllResponseHeaders())?n.getResponseHeader(wd):null}var Os=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new j(-2800,!1);let i=this.xhrFactory;return U(null).pipe(st(()=>new Kn(r=>{let c=i.build();if(c.open(e.method,e.urlWithParams),e.withCredentials&&(c.withCredentials=!0),e.headers.forEach((G,Y)=>c.setRequestHeader(G,Y.join(","))),e.headers.has(yd)||c.setRequestHeader(yd,zm),!e.headers.has(Cd)){let G=e.detectContentTypeHeader();G!==null&&c.setRequestHeader(Cd,G)}if(e.timeout&&(c.timeout=e.timeout),e.responseType){let G=e.responseType.toLowerCase();c.responseType=G!=="json"?G:"text"}let u=e.serializeBody(),m=null,h=()=>{if(m!==null)return m;let G=c.statusText||"OK",Y=new Ot(c.getAllResponseHeaders()),we=Ym(c)||e.url;return m=new ur({headers:Y,status:c.status,statusText:G,url:we}),m},S=()=>{let{headers:G,status:Y,statusText:we,url:ut}=h(),Ie=null;Y!==Bm&&(Ie=typeof c.response>"u"?c.responseText:c.response),Y===0&&(Y=Ie?Um:0);let Ut=Y>=200&&Y<300;if(e.responseType==="json"&&typeof Ie=="string"){let Pn=Ie;Ie=Ie.replace(Wm,"");try{Ie=Ie!==""?JSON.parse(Ie):null}catch(Gp){Ie=Pn,Ut&&(Ut=!1,Ie={error:Gp,text:Ie})}}Ut?(r.next(new eo({body:Ie,headers:G,status:Y,statusText:we,url:ut||void 0})),r.complete()):r.error(new ci({error:Ie,headers:G,status:Y,statusText:we,url:ut||void 0}))},D=G=>{let{url:Y}=h(),we=new ci({error:G,status:c.status||0,statusText:c.statusText||"Unknown Error",url:Y||void 0});r.error(we)},V=D;e.timeout&&(V=G=>{let{url:Y}=h(),we=new ci({error:new DOMException("Request timed out","TimeoutError"),status:c.status||0,statusText:c.statusText||"Request timeout",url:Y||void 0});r.error(we)});let L=!1,B=G=>{L||(r.next(h()),L=!0);let Y={type:Rn.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(Y.total=G.total),e.responseType==="text"&&c.responseText&&(Y.partialText=c.responseText),r.next(Y)},ye=G=>{let Y={type:Rn.UploadProgress,loaded:G.loaded};G.lengthComputable&&(Y.total=G.total),r.next(Y)};return c.addEventListener("load",S),c.addEventListener("error",D),c.addEventListener("timeout",V),c.addEventListener("abort",D),e.reportProgress&&(c.addEventListener("progress",B),u!==null&&c.upload&&c.upload.addEventListener("progress",ye)),c.send(u),r.next({type:Rn.Sent}),()=>{c.removeEventListener("error",D),c.removeEventListener("abort",D),c.removeEventListener("load",S),c.removeEventListener("timeout",V),e.reportProgress&&(c.removeEventListener("progress",B),u!==null&&c.upload&&c.upload.removeEventListener("progress",ye)),c.readyState!==c.DONE&&c.abort()}})))}static \u0275fac=function(i){return new(i||n)(F(Fn))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),Dd=new W(""),Zm="XSRF-TOKEN",Km=new W("",{providedIn:"root",factory:()=>Zm}),Jm="X-XSRF-TOKEN",Xm=new W("",{providedIn:"root",factory:()=>Jm}),to=class{},Qm=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,i){this.doc=e,this.cookieName=i}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=qi(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||n)(F(me),F(Km))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})();function ef(n,t){let e=n.url.toLowerCase();if(!w(Dd)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=w(to).getToken(),o=w(Xm);return i!=null&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,i)})),t(n)}var As=(function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n})(As||{});function tf(n,t){return{\u0275kind:n,\u0275providers:t}}function Ts(...n){let t=[K,Os,pr,{provide:di,useExisting:pr},{provide:Qi,useFactory:()=>w(Gm,{optional:!0})??w(Os)},{provide:Is,useValue:ef,multi:!0},{provide:Dd,useValue:!0},{provide:to,useClass:Qm}];for(let e of n)t.push(...e.\u0275providers);return Dn(t)}function ks(n){return tf(As.Interceptors,n.map(t=>({provide:Is,useValue:t,multi:!0})))}var Od=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(F(me))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Fs=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:function(i){let o=null;return i?o=new(i||n):o=F(rf),o},providedIn:"root"})}return n})(),rf=(()=>{class n extends Fs{_doc;constructor(e){super(),this._doc=e}sanitize(e,i){if(i==null)return null;switch(e){case An.NONE:return i;case An.HTML:return ei(i,"HTML")?In(i):sc(this._doc,String(i)).toString();case An.STYLE:return ei(i,"Style")?In(i):i;case An.SCRIPT:if(ei(i,"Script"))return In(i);throw new j(5200,!1);case An.URL:return ei(i,"URL")?In(i):ac(String(i));case An.RESOURCE_URL:if(ei(i,"ResourceURL"))return In(i);throw new j(5201,!1);default:throw new j(5202,!1)}}bypassSecurityTrustHtml(e){return tc(e)}bypassSecurityTrustStyle(e){return nc(e)}bypassSecurityTrustScript(e){return ic(e)}bypassSecurityTrustUrl(e){return oc(e)}bypassSecurityTrustResourceUrl(e){return rc(e)}static \u0275fac=function(i){return new(i||n)(F(me))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var q="primary",vo=Symbol("RouteTitle"),js=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Vn(n){return new js(n)}function Vd(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let o={};for(let r=0;r<i.length;r++){let c=i[r],u=n[r];if(c[0]===":")o[c.substring(1)]=u;else if(c!==u.path)return null}return{consumed:n.slice(0,i.length),posParams:o}}function af(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!$t(n[e],t[e]))return!1;return!0}function $t(n,t){let e=n?zs(n):void 0,i=t?zs(t):void 0;if(!e||!i||e.length!=i.length)return!1;let o;for(let r=0;r<e.length;r++)if(o=e[r],!jd(n[o],t[o]))return!1;return!0}function zs(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function jd(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((o,r)=>i[r]===o)}else return n===t}function zd(n){return n.length>0?n[n.length-1]:null}function an(n){return zl(n)?n:Vi(n)?pt(Promise.resolve(n)):U(n)}var sf={exact:Bd,subset:Gd},Ud={exact:lf,subset:cf,ignored:()=>!0};function Ad(n,t,e){return sf[e.paths](n.root,t.root,e.matrixParams)&&Ud[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function lf(n,t){return $t(n,t)}function Bd(n,t,e){if(!Nn(n.segments,t.segments)||!gr(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!Bd(n.children[i],t.children[i],e))return!1;return!0}function cf(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>jd(n[e],t[e]))}function Gd(n,t,e){return $d(n,t,t.segments,e)}function $d(n,t,e,i){if(n.segments.length>e.length){let o=n.segments.slice(0,e.length);return!(!Nn(o,e)||t.hasChildren()||!gr(o,e,i))}else if(n.segments.length===e.length){if(!Nn(n.segments,e)||!gr(n.segments,e,i))return!1;for(let o in t.children)if(!n.children[o]||!Gd(n.children[o],t.children[o],i))return!1;return!0}else{let o=e.slice(0,n.segments.length),r=e.slice(n.segments.length);return!Nn(n.segments,o)||!gr(n.segments,o,i)||!n.children[q]?!1:$d(n.children[q],t,r,i)}}function gr(n,t,e){return t.every((i,o)=>Ud[e](n[o].parameters,i.parameters))}var Wt=class{root;queryParams;fragment;_queryParamMap;constructor(t=new fe([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Vn(this.queryParams),this._queryParamMap}toString(){return pf.serialize(this)}},fe=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hr(this)}},hn=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Vn(this.parameters),this._parameterMap}toString(){return Wd(this)}};function df(n,t){return Nn(n,t)&&n.every((e,i)=>$t(e.parameters,t[i].parameters))}function Nn(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function uf(n,t){let e=[];return Object.entries(n.children).forEach(([i,o])=>{i===q&&(e=e.concat(t(o,i)))}),Object.entries(n.children).forEach(([i,o])=>{i!==q&&(e=e.concat(t(o,i)))}),e}var bo=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>new jn,providedIn:"root"})}return n})(),jn=class{parse(t){let e=new Bs(t);return new Wt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${no(t.root,!0)}`,i=gf(t.queryParams),o=typeof t.fragment=="string"?`#${mf(t.fragment)}`:"";return`${e}${i}${o}`}},pf=new jn;function hr(n){return n.segments.map(t=>Wd(t)).join("/")}function no(n,t){if(!n.hasChildren())return hr(n);if(t){let e=n.children[q]?no(n.children[q],!1):"",i=[];return Object.entries(n.children).forEach(([o,r])=>{o!==q&&i.push(`${o}:${no(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=uf(n,(i,o)=>o===q?[no(n.children[q],!1)]:[`${o}:${no(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[q]!=null?`${hr(n)}/${e[0]}`:`${hr(n)}/(${e.join("//")})`}}function Hd(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mr(n){return Hd(n).replace(/%3B/gi,";")}function mf(n){return encodeURI(n)}function Us(n){return Hd(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vr(n){return decodeURIComponent(n)}function Td(n){return vr(n.replace(/\+/g,"%20"))}function Wd(n){return`${Us(n.path)}${ff(n.parameters)}`}function ff(n){return Object.entries(n).map(([t,e])=>`;${Us(t)}=${Us(e)}`).join("")}function gf(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(o=>`${mr(e)}=${mr(o)}`).join("&"):`${mr(e)}=${mr(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var hf=/^[^\/()?;#]+/;function Rs(n){let t=n.match(hf);return t?t[0]:""}var vf=/^[^\/()?;=#]+/;function bf(n){let t=n.match(vf);return t?t[0]:""}var _f=/^[^=?&#]+/;function xf(n){let t=n.match(_f);return t?t[0]:""}var Cf=/^[^&#]+/;function yf(n){let t=n.match(Cf);return t?t[0]:""}var Bs=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[q]=new fe(t,e)),i}parseSegment(){let t=Rs(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(t),new hn(vr(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=bf(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=Rs(this.remaining);o&&(i=o,this.capture(i))}t[vr(e)]=vr(i)}parseQueryParam(t){let e=xf(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let c=yf(this.remaining);c&&(i=c,this.capture(i))}let o=Td(e),r=Td(i);if(t.hasOwnProperty(o)){let c=t[o];Array.isArray(c)||(c=[c],t[o]=c),c.push(r)}else t[o]=r}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Rs(this.remaining),o=this.remaining[i.length];if(o!=="/"&&o!==")"&&o!==";")throw new j(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=q);let c=this.parseChildren();e[r]=Object.keys(c).length===1?c[q]:new fe([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new j(4011,!1)}};function qd(n){return n.segments.length>0?new fe([],{[q]:n}):n}function Yd(n){let t={};for(let[i,o]of Object.entries(n.children)){let r=Yd(o);if(i===q&&r.segments.length===0&&r.hasChildren())for(let[c,u]of Object.entries(r.children))t[c]=u;else(r.segments.length>0||r.hasChildren())&&(t[i]=r)}let e=new fe(n.segments,t);return wf(e)}function wf(n){if(n.numberOfChildren===1&&n.children[q]){let t=n.children[q];return new fe(n.segments.concat(t.segments),t.children)}return n}function vn(n){return n instanceof Wt}function Zd(n,t,e=null,i=null){let o=Kd(n);return Jd(o,t,e,i)}function Kd(n){let t;function e(r){let c={};for(let m of r.children){let h=e(m);c[m.outlet]=h}let u=new fe(r.url,c);return r===n&&(t=u),u}let i=e(n.root),o=qd(i);return t??o}function Jd(n,t,e,i){let o=n;for(;o.parent;)o=o.parent;if(t.length===0)return Ns(o,o,o,e,i);let r=Ef(t);if(r.toRoot())return Ns(o,o,new fe([],{}),e,i);let c=Sf(r,o,n),u=c.processChildren?oo(c.segmentGroup,c.index,r.commands):Qd(c.segmentGroup,c.index,r.commands);return Ns(o,c.segmentGroup,u,e,i)}function br(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function so(n){return typeof n=="object"&&n!=null&&n.outlets}function Ns(n,t,e,i,o){let r={};i&&Object.entries(i).forEach(([m,h])=>{r[m]=Array.isArray(h)?h.map(S=>`${S}`):`${h}`});let c;n===t?c=e:c=Xd(n,t,e);let u=qd(Yd(c));return new Wt(u,r,o)}function Xd(n,t,e){let i={};return Object.entries(n.children).forEach(([o,r])=>{r===t?i[o]=e:i[o]=Xd(r,t,e)}),new fe(n.segments,i)}var _r=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&br(i[0]))throw new j(4003,!1);let o=i.find(so);if(o&&o!==zd(i))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Ef(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new _r(!0,0,n);let t=0,e=!1,i=n.reduce((o,r,c)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let u={};return Object.entries(r.outlets).forEach(([m,h])=>{u[m]=typeof h=="string"?h.split("/"):h}),[...o,{outlets:u}]}if(r.segmentPath)return[...o,r.segmentPath]}return typeof r!="string"?[...o,r]:c===0?(r.split("/").forEach((u,m)=>{m==0&&u==="."||(m==0&&u===""?e=!0:u===".."?t++:u!=""&&o.push(u))}),o):[...o,r]},[]);return new _r(e,t,i)}var fi=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function Sf(n,t,e){if(n.isAbsolute)return new fi(t,!0,0);if(!e)return new fi(t,!1,NaN);if(e.parent===null)return new fi(e,!0,0);let i=br(n.commands[0])?0:1,o=e.segments.length-1+i;return Pf(e,o,n.numberOfDoubleDots)}function Pf(n,t,e){let i=n,o=t,r=e;for(;r>o;){if(r-=o,i=i.parent,!i)throw new j(4005,!1);o=i.segments.length}return new fi(i,!1,o-r)}function Mf(n){return so(n[0])?n[0].outlets:{[q]:n}}function Qd(n,t,e){if(n??=new fe([],{}),n.segments.length===0&&n.hasChildren())return oo(n,t,e);let i=Df(n,t,e),o=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let r=new fe(n.segments.slice(0,i.pathIndex),{});return r.children[q]=new fe(n.segments.slice(i.pathIndex),n.children),oo(r,0,o)}else return i.match&&o.length===0?new fe(n.segments,{}):i.match&&!n.hasChildren()?Gs(n,t,e):i.match?oo(n,0,o):Gs(n,t,e)}function oo(n,t,e){if(e.length===0)return new fe(n.segments,{});{let i=Mf(e),o={};if(Object.keys(i).some(r=>r!==q)&&n.children[q]&&n.numberOfChildren===1&&n.children[q].segments.length===0){let r=oo(n.children[q],t,e);return new fe(n.segments,r.children)}return Object.entries(i).forEach(([r,c])=>{typeof c=="string"&&(c=[c]),c!==null&&(o[r]=Qd(n.children[r],t,c))}),Object.entries(n.children).forEach(([r,c])=>{i[r]===void 0&&(o[r]=c)}),new fe(n.segments,o)}}function Df(n,t,e){let i=0,o=t,r={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(i>=e.length)return r;let c=n.segments[o],u=e[i];if(so(u))break;let m=`${u}`,h=i<e.length-1?e[i+1]:null;if(o>0&&m===void 0)break;if(m&&h&&typeof h=="object"&&h.outlets===void 0){if(!Fd(m,h,c))return r;i+=2}else{if(!Fd(m,{},c))return r;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}function Gs(n,t,e){let i=n.segments.slice(0,t),o=0;for(;o<e.length;){let r=e[o];if(so(r)){let m=Of(r.outlets);return new fe(i,m)}if(o===0&&br(e[0])){let m=n.segments[t];i.push(new hn(m.path,kd(e[0]))),o++;continue}let c=so(r)?r.outlets[q]:`${r}`,u=o<e.length-1?e[o+1]:null;c&&u&&br(u)?(i.push(new hn(c,kd(u))),o+=2):(i.push(new hn(c,{})),o++)}return new fe(i,{})}function Of(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=Gs(new fe([],{}),0,i))}),t}function kd(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function Fd(n,t,e){return n==e.path&&$t(t,e.parameters)}var ro="imperative",je=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(je||{}),yt=class{id;url;constructor(t,e){this.id=t,this.url=e}},zn=class extends yt{type=je.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",o=null){super(t,e),this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},It=class extends yt{urlAfterRedirects;type=je.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ct=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(ct||{}),lo=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(lo||{}),Ht=class extends yt{reason;code;type=je.NavigationCancel;constructor(t,e,i,o){super(t,e),this.reason=i,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},rn=class extends yt{reason;code;type=je.NavigationSkipped;constructor(t,e,i,o){super(t,e),this.reason=i,this.code=o}},hi=class extends yt{error;target;type=je.NavigationError;constructor(t,e,i,o){super(t,e),this.error=i,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},co=class extends yt{urlAfterRedirects;state;type=je.RoutesRecognized;constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xr=class extends yt{urlAfterRedirects;state;type=je.GuardsCheckStart;constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cr=class extends yt{urlAfterRedirects;state;shouldActivate;type=je.GuardsCheckEnd;constructor(t,e,i,o,r){super(t,e),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},yr=class extends yt{urlAfterRedirects;state;type=je.ResolveStart;constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wr=class extends yt{urlAfterRedirects;state;type=je.ResolveEnd;constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Er=class{route;type=je.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Sr=class{route;type=je.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Pr=class{snapshot;type=je.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mr=class{snapshot;type=je.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dr=class{snapshot;type=je.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Or=class{snapshot;type=je.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var uo=class{},vi=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function If(n){return!(n instanceof uo)&&!(n instanceof vi)}function Af(n,t){return n.providers&&!n._injector&&(n._injector=is(n.providers,t,`Route: ${n.path}`)),n._injector??t}function jt(n){return n.outlet||q}function Tf(n,t){let e=n.filter(i=>jt(i)===t);return e.push(...n.filter(i=>jt(i)!==t)),e}function xi(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Ir=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return xi(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Ci(this.rootInjector)}},Ci=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let o=this.getOrCreateContext(e);o.outlet=i,this.contexts.set(e,o)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Ir(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(F(un))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ar=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=$s(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=$s(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Hs(t,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return Hs(t,this._root).map(e=>e.value)}};function $s(n,t){if(n===t.value)return t;for(let e of t.children){let i=$s(n,e);if(i)return i}return null}function Hs(n,t){if(n===t.value)return[t];for(let e of t.children){let i=Hs(n,e);if(i.length)return i.unshift(t),i}return[]}var Ct=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function mi(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var po=class extends Ar{snapshot;constructor(t,e){super(t),this.snapshot=e,Qs(this,t)}toString(){return this.snapshot.toString()}};function eu(n){let t=kf(n),e=new Ge([new hn("",{})]),i=new Ge({}),o=new Ge({}),r=new Ge({}),c=new Ge(""),u=new dt(e,i,r,c,o,q,n,t.root);return u.snapshot=t.root,new po(new Ct(u,[]),t)}function kf(n){let t={},e={},i={},r=new Ln([],t,i,"",e,q,n,null,{});return new mo("",new Ct(r,[]))}var dt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,o,r,c,u,m){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=o,this.dataSubject=r,this.outlet=c,this.component=u,this._futureSnapshot=m,this.title=this.dataSubject?.pipe(Q(h=>h[vo]))??U(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=o,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(t=>Vn(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(t=>Vn(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Tr(n,t,e="emptyOnly"){let i,{routeConfig:o}=n;return t!==null&&(e==="always"||o?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:O(O({},t.params),n.params),data:O(O({},t.data),n.data),resolve:O(O(O(O({},n.data),t.data),o?.data),n._resolvedData)}:i={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},o&&nu(o)&&(i.resolve[vo]=o.title),i}var Ln=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[vo]}constructor(t,e,i,o,r,c,u,m,h){this.url=t,this.params=e,this.queryParams=i,this.fragment=o,this.data=r,this.outlet=c,this.component=u,this.routeConfig=m,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vn(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},mo=class extends Ar{url;constructor(t,e){super(e),this.url=t,Qs(this,e)}toString(){return tu(this._root)}};function Qs(n,t){t.value._routerState=n,t.children.forEach(e=>Qs(n,e))}function tu(n){let t=n.children.length>0?` { ${n.children.map(tu).join(", ")} } `:"";return`${n.value}${t}`}function Ls(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,$t(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),$t(t.params,e.params)||n.paramsSubject.next(e.params),af(t.url,e.url)||n.urlSubject.next(e.url),$t(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ws(n,t){let e=$t(n.params,t.params)&&df(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||Ws(n.parent,t.parent))}function nu(n){return typeof n.title=="string"||n.title===null}var iu=new W(""),sn=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=q;activateEvents=new le;deactivateEvents=new le;attachEvents=new le;detachEvents=new le;routerOutletData=Cc(void 0);parentContexts=w(Ci);location=w(ti);changeDetector=w(mn);inputBinder=w(Nr,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:o}=e.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=e;let o=this.location,c=e.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,m=new qs(e,u,o.injector,this.routerOutletData);this.activated=o.createComponent(c,{index:o.length,injector:m,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=oe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Et]})}return n})(),qs=class{route;childContexts;parent;outletData;constructor(t,e,i,o){this.route=t,this.childContexts=e,this.parent=i,this.outletData=o}get(t,e){return t===dt?this.route:t===Ci?this.childContexts:t===iu?this.outletData:this.parent.get(t,e)}},Nr=new W("");var el=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=M({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,o){i&1&&_(0,"router-outlet")},dependencies:[sn],encapsulation:2})}return n})();function tl(n){let t=n.children&&n.children.map(tl),e=t?ne(O({},n),{children:t}):O({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==q&&(e.component=el),e}function Ff(n,t,e){let i=fo(n,t._root,e?e._root:void 0);return new po(i,t)}function fo(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let o=Rf(n,t,e);return new Ct(i,o)}else{if(n.shouldAttach(t.value)){let r=n.retrieve(t.value);if(r!==null){let c=r.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(u=>fo(n,u)),c}}let i=Nf(t.value),o=t.children.map(r=>fo(n,r));return new Ct(i,o)}}function Rf(n,t,e){return t.children.map(i=>{for(let o of e.children)if(n.shouldReuseRoute(i.value,o.value.snapshot))return fo(n,i,o);return fo(n,i)})}function Nf(n){return new dt(new Ge(n.url),new Ge(n.params),new Ge(n.queryParams),new Ge(n.fragment),new Ge(n.data),n.outlet,n.component,n)}var bi=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},ou="ngNavigationCancelingError";function kr(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=vn(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=ru(!1,ct.Redirect);return o.url=e,o.navigationBehaviorOptions=i,o}function ru(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[ou]=!0,e.cancellationCode=t,e}function Lf(n){return au(n)&&vn(n.url)}function au(n){return!!n&&n[ou]}var Vf=(n,t,e,i)=>Q(o=>(new Ys(t,o.targetRouterState,o.currentRouterState,e,i).activate(n),o)),Ys=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,o,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=o,this.inputBindingEnabled=r}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Ls(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let o=mi(e);t.children.forEach(r=>{let c=r.value.outlet;this.deactivateRoutes(r,o[c],i),delete o[c]}),Object.values(o).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(t,e,i){let o=t.value,r=e?e.value:null;if(o===r)if(o.component){let c=i.getContext(o.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else r&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),o=i&&t.value.component?i.children:e,r=mi(t);for(let c of Object.values(r))this.deactivateRouteAndItsChildren(c,o);if(i&&i.outlet){let c=i.outlet.detach(),u=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:u})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),o=i&&t.value.component?i.children:e,r=mi(t);for(let c of Object.values(r))this.deactivateRouteAndItsChildren(c,o);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let o=mi(e);t.children.forEach(r=>{this.activateRoutes(r,o[r.value.outlet],i),this.forwardEvent(new Or(r.value.snapshot))}),t.children.length&&this.forwardEvent(new Mr(t.value.snapshot))}activateRoutes(t,e,i){let o=t.value,r=e?e.value:null;if(Ls(o),o===r)if(o.component){let c=i.getOrCreateContext(o.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(o.component){let c=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let u=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),c.children.onOutletReAttached(u.contexts),c.attachRef=u.componentRef,c.route=u.route.value,c.outlet&&c.outlet.attach(u.componentRef,u.route.value),Ls(u.route.value),this.activateChildRoutes(t,null,c.children)}else c.attachRef=null,c.route=o,c.outlet&&c.outlet.activateWith(o,c.injector),this.activateChildRoutes(t,null,c.children)}else this.activateChildRoutes(t,null,i)}},Fr=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},gi=class{component;route;constructor(t,e){this.component=t,this.route=e}};function jf(n,t,e){let i=n._root,o=t?t._root:null;return io(i,o,e,[i.value])}function zf(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function yi(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!Yl(n)?n:t.get(n):i}function io(n,t,e,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let r=mi(t);return n.children.forEach(c=>{Uf(c,r[c.value.outlet],e,i.concat([c.value]),o),delete r[c.value.outlet]}),Object.entries(r).forEach(([c,u])=>ao(u,e.getContext(c),o)),o}function Uf(n,t,e,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let r=n.value,c=t?t.value:null,u=e?e.getContext(n.value.outlet):null;if(c&&r.routeConfig===c.routeConfig){let m=Bf(c,r,r.routeConfig.runGuardsAndResolvers);m?o.canActivateChecks.push(new Fr(i)):(r.data=c.data,r._resolvedData=c._resolvedData),r.component?io(n,t,u?u.children:null,i,o):io(n,t,e,i,o),m&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new gi(u.outlet.component,c))}else c&&ao(t,u,o),o.canActivateChecks.push(new Fr(i)),r.component?io(n,null,u?u.children:null,i,o):io(n,null,e,i,o);return o}function Bf(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Nn(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Nn(n.url,t.url)||!$t(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ws(n,t)||!$t(n.queryParams,t.queryParams);case"paramsChange":default:return!Ws(n,t)}}function ao(n,t,e){let i=mi(n),o=n.value;Object.entries(i).forEach(([r,c])=>{o.component?t?ao(c,t.children.getContext(r),e):ao(c,null,e):ao(c,t,e)}),o.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new gi(t.outlet.component,o)):e.canDeactivateChecks.push(new gi(null,o)):e.canDeactivateChecks.push(new gi(null,o))}function _o(n){return typeof n=="function"}function Gf(n){return typeof n=="boolean"}function $f(n){return n&&_o(n.canLoad)}function Hf(n){return n&&_o(n.canActivate)}function Wf(n){return n&&_o(n.canActivateChild)}function qf(n){return n&&_o(n.canDeactivate)}function Yf(n){return n&&_o(n.canMatch)}function su(n){return n instanceof Ul||n?.name==="EmptyError"}var fr=Symbol("INITIAL_VALUE");function _i(){return st(n=>Ha(n.map(t=>t.pipe(cn(1),ql(fr)))).pipe(Q(t=>{for(let e of t)if(e!==!0){if(e===fr)return fr;if(e===!1||Zf(e))return e}return!0}),kt(t=>t!==fr),cn(1)))}function Zf(n){return vn(n)||n instanceof bi}function Kf(n,t){return wt(e=>{let{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:r,canDeactivateChecks:c}}=e;return c.length===0&&r.length===0?U(ne(O({},e),{guardsResult:!0})):Jf(c,i,o,n).pipe(wt(u=>u&&Gf(u)?Xf(i,r,n,t):U(u)),Q(u=>ne(O({},e),{guardsResult:u})))})}function Jf(n,t,e,i){return pt(n).pipe(wt(o=>i0(o.component,o.route,e,t,i)),dn(o=>o!==!0,!0))}function Xf(n,t,e,i){return pt(t).pipe(Mn(o=>Bl(e0(o.route.parent,i),Qf(o.route,i),n0(n,o.path,e),t0(n,o.route,e))),dn(o=>o!==!0,!0))}function Qf(n,t){return n!==null&&t&&t(new Dr(n)),U(!0)}function e0(n,t){return n!==null&&t&&t(new Pr(n)),U(!0)}function t0(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return U(!0);let o=i.map(r=>Go(()=>{let c=xi(t)??e,u=yi(r,c),m=Hf(u)?u.canActivate(t,n):bt(c,()=>u(t,n));return an(m).pipe(dn())}));return U(o).pipe(_i())}function n0(n,t,e){let i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(c=>zf(c)).filter(c=>c!==null).map(c=>Go(()=>{let u=c.guards.map(m=>{let h=xi(c.node)??e,S=yi(m,h),D=Wf(S)?S.canActivateChild(i,n):bt(h,()=>S(i,n));return an(D).pipe(dn())});return U(u).pipe(_i())}));return U(r).pipe(_i())}function i0(n,t,e,i,o){let r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||r.length===0)return U(!0);let c=r.map(u=>{let m=xi(t)??o,h=yi(u,m),S=qf(h)?h.canDeactivate(n,t,e,i):bt(m,()=>h(n,t,e,i));return an(S).pipe(dn())});return U(c).pipe(_i())}function o0(n,t,e,i){let o=t.canLoad;if(o===void 0||o.length===0)return U(!0);let r=o.map(c=>{let u=yi(c,n),m=$f(u)?u.canLoad(t,e):bt(n,()=>u(t,e));return an(m)});return U(r).pipe(_i(),lu(i))}function lu(n){return Vl($e(t=>{if(typeof t!="boolean")throw kr(n,t)}),Q(t=>t===!0))}function r0(n,t,e,i){let o=t.canMatch;if(!o||o.length===0)return U(!0);let r=o.map(c=>{let u=yi(c,n),m=Yf(u)?u.canMatch(t,e):bt(n,()=>u(t,e));return an(m)});return U(r).pipe(_i(),lu(i))}var go=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},ho=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function pi(n){return Fi(new go(n))}function a0(n){return Fi(new j(4e3,!1))}function s0(n){return Fi(ru(!1,ct.GuardRejected))}var Zs=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],o=e.root;for(;;){if(i=i.concat(o.segments),o.numberOfChildren===0)return U(i);if(o.numberOfChildren>1||!o.children[q])return a0(`${t.redirectTo}`);o=o.children[q]}}applyRedirectCommands(t,e,i,o,r){return l0(e,o,r).pipe(Q(c=>{if(c instanceof Wt)throw new ho(c);let u=this.applyRedirectCreateUrlTree(c,this.urlSerializer.parse(c),t,i);if(c[0]==="/")throw new ho(u);return u}))}applyRedirectCreateUrlTree(t,e,i,o){let r=this.createSegmentGroup(t,e.root,i,o);return new Wt(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([o,r])=>{if(typeof r=="string"&&r[0]===":"){let u=r.substring(1);i[o]=e[u]}else i[o]=r}),i}createSegmentGroup(t,e,i,o){let r=this.createSegments(t,e.segments,i,o),c={};return Object.entries(e.children).forEach(([u,m])=>{c[u]=this.createSegmentGroup(t,m,i,o)}),new fe(r,c)}createSegments(t,e,i,o){return e.map(r=>r.path[0]===":"?this.findPosParam(t,r,o):this.findOrReturn(r,i))}findPosParam(t,e,i){let o=i[e.path.substring(1)];if(!o)throw new j(4001,!1);return o}findOrReturn(t,e){let i=0;for(let o of e){if(o.path===t.path)return e.splice(i),o;i++}return t}};function l0(n,t,e){if(typeof n=="string")return U(n);let i=n,{queryParams:o,fragment:r,routeConfig:c,url:u,outlet:m,params:h,data:S,title:D}=t;return an(bt(e,()=>i({params:h,data:S,queryParams:o,fragment:r,routeConfig:c,url:u,outlet:m,title:D})))}var Ks={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function c0(n,t,e,i,o){let r=cu(n,t,e);return r.matched?(i=Af(t,i),r0(i,t,e,o).pipe(Q(c=>c===!0?r:O({},Ks)))):U(r)}function cu(n,t,e){if(t.path==="**")return d0(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?O({},Ks):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let o=(t.matcher||Vd)(e,n,t);if(!o)return O({},Ks);let r={};Object.entries(o.posParams??{}).forEach(([u,m])=>{r[u]=m.path});let c=o.consumed.length>0?O(O({},r),o.consumed[o.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:c,positionalParamSegments:o.posParams??{}}}function d0(n){return{matched:!0,parameters:n.length>0?zd(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Rd(n,t,e,i){return e.length>0&&m0(n,e,i)?{segmentGroup:new fe(t,p0(i,new fe(e,n.children))),slicedSegments:[]}:e.length===0&&f0(n,e,i)?{segmentGroup:new fe(n.segments,u0(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new fe(n.segments,n.children),slicedSegments:e}}function u0(n,t,e,i){let o={};for(let r of e)if(Lr(n,t,r)&&!i[jt(r)]){let c=new fe([],{});o[jt(r)]=c}return O(O({},i),o)}function p0(n,t){let e={};e[q]=t;for(let i of n)if(i.path===""&&jt(i)!==q){let o=new fe([],{});e[jt(i)]=o}return e}function m0(n,t,e){return e.some(i=>Lr(n,t,i)&&jt(i)!==q)}function f0(n,t,e){return e.some(i=>Lr(n,t,i))}function Lr(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function g0(n,t,e){return t.length===0&&!n.children[e]}var Js=class{};function h0(n,t,e,i,o,r,c="emptyOnly"){return new Xs(n,t,e,i,o,c,r).recognize()}var v0=31,Xs=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,o,r,c,u){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=o,this.urlTree=r,this.paramsInheritanceStrategy=c,this.urlSerializer=u,this.applyRedirects=new Zs(this.urlSerializer,this.urlTree)}noMatchError(t){return new j(4002,`'${t.segmentGroup}'`)}recognize(){let t=Rd(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Q(({children:e,rootSnapshot:i})=>{let o=new Ct(i,e),r=new mo("",o),c=Zd(i,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(c),{state:r,tree:c}}))}match(t){let e=new Ln([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),q,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,q,e).pipe(Q(i=>({children:i,rootSnapshot:e})),Jn(i=>{if(i instanceof ho)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof go?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,o,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,r):this.processSegment(t,e,i,i.segments,o,!0,r).pipe(Q(c=>c instanceof Ct?[c]:[]))}processChildren(t,e,i,o){let r=[];for(let c of Object.keys(i.children))c==="primary"?r.unshift(c):r.push(c);return pt(r).pipe(Mn(c=>{let u=i.children[c],m=Tf(e,c);return this.processSegmentGroup(t,m,u,c,o)}),Wl((c,u)=>(c.push(...u),c)),qa(null),Hl(),wt(c=>{if(c===null)return pi(i);let u=du(c);return b0(u),U(u)}))}processSegment(t,e,i,o,r,c,u){return pt(e).pipe(Mn(m=>this.processSegmentAgainstRoute(m._injector??t,e,m,i,o,r,c,u).pipe(Jn(h=>{if(h instanceof go)return U(null);throw h}))),dn(m=>!!m),Jn(m=>{if(su(m))return g0(i,o,r)?U(new Js):pi(i);throw m}))}processSegmentAgainstRoute(t,e,i,o,r,c,u,m){return jt(i)!==c&&(c===q||!Lr(o,r,i))?pi(o):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,o,i,r,c,m):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(t,o,e,i,r,c,m):pi(o)}expandSegmentAgainstRouteUsingRedirect(t,e,i,o,r,c,u){let{matched:m,parameters:h,consumedSegments:S,positionalParamSegments:D,remainingSegments:V}=cu(e,o,r);if(!m)return pi(e);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>v0&&(this.allowRedirects=!1));let L=new Ln(r,h,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Nd(o),jt(o),o.component??o._loadedComponent??null,o,Ld(o)),B=Tr(L,u,this.paramsInheritanceStrategy);return L.params=Object.freeze(B.params),L.data=Object.freeze(B.data),this.applyRedirects.applyRedirectCommands(S,o.redirectTo,D,L,t).pipe(st(G=>this.applyRedirects.lineralizeSegments(o,G)),wt(G=>this.processSegment(t,i,e,G.concat(V),c,!1,u)))}matchSegmentAgainstRoute(t,e,i,o,r,c){let u=c0(e,i,o,t,this.urlSerializer);return i.path==="**"&&(e.children={}),u.pipe(st(m=>m.matched?(t=i._injector??t,this.getChildConfig(t,i,o).pipe(st(({routes:h})=>{let S=i._loadedInjector??t,{parameters:D,consumedSegments:V,remainingSegments:L}=m,B=new Ln(V,D,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Nd(i),jt(i),i.component??i._loadedComponent??null,i,Ld(i)),ye=Tr(B,c,this.paramsInheritanceStrategy);B.params=Object.freeze(ye.params),B.data=Object.freeze(ye.data);let{segmentGroup:G,slicedSegments:Y}=Rd(e,V,L,h);if(Y.length===0&&G.hasChildren())return this.processChildren(S,h,G,B).pipe(Q(ut=>new Ct(B,ut)));if(h.length===0&&Y.length===0)return U(new Ct(B,[]));let we=jt(i)===r;return this.processSegment(S,h,G,Y,we?q:r,!0,B).pipe(Q(ut=>new Ct(B,ut instanceof Ct?[ut]:[])))}))):pi(e)))}getChildConfig(t,e,i){return e.children?U({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?U({routes:e._loadedRoutes,injector:e._loadedInjector}):o0(t,e,i,this.urlSerializer).pipe(wt(o=>o?this.configLoader.loadChildren(t,e).pipe($e(r=>{e._loadedRoutes=r.routes,e._loadedInjector=r.injector})):s0(e))):U({routes:[],injector:t})}};function b0(n){n.sort((t,e)=>t.value.outlet===q?-1:e.value.outlet===q?1:t.value.outlet.localeCompare(e.value.outlet))}function _0(n){let t=n.value.routeConfig;return t&&t.path===""}function du(n){let t=[],e=new Set;for(let i of n){if(!_0(i)){t.push(i);continue}let o=t.find(r=>i.value.routeConfig===r.value.routeConfig);o!==void 0?(o.children.push(...i.children),e.add(o)):t.push(i)}for(let i of e){let o=du(i.children);t.push(new Ct(i.value,o))}return t.filter(i=>!e.has(i))}function Nd(n){return n.data||{}}function Ld(n){return n.resolve||{}}function x0(n,t,e,i,o,r){return wt(c=>h0(n,t,e,i,c.extractedUrl,o,r).pipe(Q(({state:u,tree:m})=>ne(O({},c),{targetSnapshot:u,urlAfterRedirects:m}))))}function C0(n,t){return wt(e=>{let{targetSnapshot:i,guards:{canActivateChecks:o}}=e;if(!o.length)return U(e);let r=new Set(o.map(m=>m.route)),c=new Set;for(let m of r)if(!c.has(m))for(let h of uu(m))c.add(h);let u=0;return pt(c).pipe(Mn(m=>r.has(m)?y0(m,i,n,t):(m.data=Tr(m,m.parent,n).resolve,U(void 0))),$e(()=>u++),Ya(1),wt(m=>u===c.size?U(e):Xt))})}function uu(n){let t=n.children.map(e=>uu(e)).flat();return[n,...t]}function y0(n,t,e,i){let o=n.routeConfig,r=n._resolve;return o?.title!==void 0&&!nu(o)&&(r[vo]=o.title),Go(()=>(n.data=Tr(n,n.parent,e).resolve,w0(r,n,t,i).pipe(Q(c=>(n._resolvedData=c,n.data=O(O({},n.data),c),null)))))}function w0(n,t,e,i){let o=zs(n);if(o.length===0)return U({});let r={};return pt(o).pipe(wt(c=>E0(n[c],t,e,i).pipe(dn(),$e(u=>{if(u instanceof bi)throw kr(new jn,u);r[c]=u}))),Ya(1),Q(()=>r),Jn(c=>su(c)?Xt:Fi(c)))}function E0(n,t,e,i){let o=xi(t)??i,r=yi(n,o),c=r.resolve?r.resolve(t,e):bt(o,()=>r(t,e));return an(c)}function Vs(n){return st(t=>{let e=n(t);return e?pt(e).pipe(Q(()=>t)):U(t)})}var nl=(()=>{class n{buildTitle(e){let i,o=e.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(r=>r.outlet===q);return i}getResolvedTitleForRoute(e){return e.data[vo]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>w(pu),providedIn:"root"})}return n})(),pu=(()=>{class n extends nl{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(F(Od))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wi=new W("",{providedIn:"root",factory:()=>({})}),xo=new W(""),mu=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=w(bc);loadComponent(e,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return U(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let o=an(bt(e,()=>i.loadComponent())).pipe(Q(gu),st(hu),$e(c=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=c}),Xn(()=>{this.componentLoaders.delete(i)})),r=new $a(o,()=>new at).pipe(Ga());return this.componentLoaders.set(i,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return U({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=fu(i,this.compiler,e,this.onLoadEndListener).pipe(Xn(()=>{this.childrenLoaders.delete(i)})),c=new $a(r,()=>new at).pipe(Ga());return this.childrenLoaders.set(i,c),c}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fu(n,t,e,i){return an(bt(e,()=>n.loadChildren())).pipe(Q(gu),st(hu),wt(o=>o instanceof pc||Array.isArray(o)?U(o):pt(t.compileModuleAsync(o))),Q(o=>{i&&i(n);let r,c,u=!1;return Array.isArray(o)?(c=o,u=!0):(r=o.create(e).injector,c=r.get(xo,[],{optional:!0,self:!0}).flat()),{routes:c.map(tl),injector:r}}))}function S0(n){return n&&typeof n=="object"&&"default"in n}function gu(n){return S0(n)?n.default:n}function hu(n){return U(n)}var Vr=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>w(P0),providedIn:"root"})}return n})(),P0=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vu=new W("");var bu=new W(""),_u=(()=>{class n{currentNavigation=Ft(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new at;transitionAbortWithErrorSubject=new at;configLoader=w(mu);environmentInjector=w(un);destroyRef=w(On);urlSerializer=w(bo);rootContexts=w(Ci);location=w(gt);inputBindingEnabled=w(Nr,{optional:!0})!==null;titleStrategy=w(nl);options=w(wi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=w(Vr);createViewTransition=w(vu,{optional:!0});navigationErrorHandler=w(bu,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>U(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=o=>this.events.next(new Er(o)),i=o=>this.events.next(new Sr(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;Ve(()=>{this.transitions?.next(ne(O({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))})}setupNavigations(e){return this.transitions=new Ge(null),this.transitions.pipe(kt(i=>i!==null),st(i=>{let o=!1;return U(i).pipe(st(r=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",ct.SupersededByNewNavigation),Xt;this.currentTransition=i,this.currentNavigation.set({id:r.id,initialUrl:r.rawUrl,extractedUrl:r.extractedUrl,targetBrowserUrl:typeof r.extras.browserUrl=="string"?this.urlSerializer.parse(r.extras.browserUrl):r.extras.browserUrl,trigger:r.source,extras:r.extras,previousNavigation:this.lastSuccessfulNavigation?ne(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>r.abortController.abort()});let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=r.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&u!=="reload")return this.events.next(new rn(r.id,this.urlSerializer.serialize(r.rawUrl),"",lo.IgnoredSameUrlNavigation)),r.resolve(!1),Xt;if(this.urlHandlingStrategy.shouldProcessUrl(r.rawUrl))return U(r).pipe(st(m=>(this.events.next(new zn(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),m.id!==this.navigationId?Xt:Promise.resolve(m))),x0(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),$e(m=>{i.targetSnapshot=m.targetSnapshot,i.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation.update(S=>(S.finalUrl=m.urlAfterRedirects,S));let h=new co(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(r.currentRawUrl)){let{id:m,extractedUrl:h,source:S,restoredState:D,extras:V}=r,L=new zn(m,this.urlSerializer.serialize(h),S,D);this.events.next(L);let B=eu(this.rootComponentType).snapshot;return this.currentTransition=i=ne(O({},r),{targetSnapshot:B,urlAfterRedirects:h,extras:ne(O({},V),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(ye=>(ye.finalUrl=h,ye)),U(i)}else return this.events.next(new rn(r.id,this.urlSerializer.serialize(r.extractedUrl),"",lo.IgnoredByUrlHandlingStrategy)),r.resolve(!1),Xt}),$e(r=>{let c=new xr(r.id,this.urlSerializer.serialize(r.extractedUrl),this.urlSerializer.serialize(r.urlAfterRedirects),r.targetSnapshot);this.events.next(c)}),Q(r=>(this.currentTransition=i=ne(O({},r),{guards:jf(r.targetSnapshot,r.currentSnapshot,this.rootContexts)}),i)),Kf(this.environmentInjector,r=>this.events.next(r)),$e(r=>{if(i.guardsResult=r.guardsResult,r.guardsResult&&typeof r.guardsResult!="boolean")throw kr(this.urlSerializer,r.guardsResult);let c=new Cr(r.id,this.urlSerializer.serialize(r.extractedUrl),this.urlSerializer.serialize(r.urlAfterRedirects),r.targetSnapshot,!!r.guardsResult);this.events.next(c)}),kt(r=>r.guardsResult?!0:(this.cancelNavigationTransition(r,"",ct.GuardRejected),!1)),Vs(r=>{if(r.guards.canActivateChecks.length!==0)return U(r).pipe($e(c=>{let u=new yr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),st(c=>{let u=!1;return U(c).pipe(C0(this.paramsInheritanceStrategy,this.environmentInjector),$e({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",ct.NoDataFromResolver)}}))}),$e(c=>{let u=new wr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),Vs(r=>{let c=u=>{let m=[];if(u.routeConfig?.loadComponent){let h=xi(u)??this.environmentInjector;m.push(this.configLoader.loadComponent(h,u.routeConfig).pipe($e(S=>{u.component=S}),Q(()=>{})))}for(let h of u.children)m.push(...c(h));return m};return Ha(c(r.targetSnapshot.root)).pipe(qa(null),cn(1))}),Vs(()=>this.afterPreactivation()),st(()=>{let{currentSnapshot:r,targetSnapshot:c}=i,u=this.createViewTransition?.(this.environmentInjector,r.root,c.root);return u?pt(u).pipe(Q(()=>i)):U(i)}),Q(r=>{let c=Ff(e.routeReuseStrategy,r.targetSnapshot,r.currentRouterState);return this.currentTransition=i=ne(O({},r),{targetRouterState:c}),this.currentNavigation.update(u=>(u.targetRouterState=c,u)),i}),$e(()=>{this.events.next(new uo)}),Vf(this.rootContexts,e.routeReuseStrategy,r=>this.events.next(r),this.inputBindingEnabled),cn(1),Ri(new Kn(r=>{let c=i.abortController.signal,u=()=>r.next();return c.addEventListener("abort",u),()=>c.removeEventListener("abort",u)}).pipe(kt(()=>!o&&!i.targetRouterState),$e(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",ct.Aborted)}))),$e({next:r=>{o=!0,this.lastSuccessfulNavigation=Ve(this.currentNavigation),this.events.next(new It(r.id,this.urlSerializer.serialize(r.extractedUrl),this.urlSerializer.serialize(r.urlAfterRedirects))),this.titleStrategy?.updateTitle(r.targetRouterState.snapshot),r.resolve(!0)},complete:()=>{o=!0}}),Ri(this.transitionAbortWithErrorSubject.pipe($e(r=>{throw r}))),Xn(()=>{o||this.cancelNavigationTransition(i,"",ct.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Jn(r=>{if(this.destroyed)return i.resolve(!1),Xt;if(o=!0,au(r))this.events.next(new Ht(i.id,this.urlSerializer.serialize(i.extractedUrl),r.message,r.cancellationCode)),Lf(r)?this.events.next(new vi(r.url,r.navigationBehaviorOptions)):i.resolve(!1);else{let c=new hi(i.id,this.urlSerializer.serialize(i.extractedUrl),r,i.targetSnapshot??void 0);try{let u=bt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof bi){let{message:m,cancellationCode:h}=kr(this.urlSerializer,u);this.events.next(new Ht(i.id,this.urlSerializer.serialize(i.extractedUrl),m,h)),this.events.next(new vi(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(c),r}catch(u){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(u)}}return Xt}))}))}cancelNavigationTransition(e,i,o){let r=new Ht(e.id,this.urlSerializer.serialize(e.extractedUrl),i,o);this.events.next(r),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=Ve(this.currentNavigation),o=i?.targetBrowserUrl??i?.extractedUrl;return e.toString()!==o?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function M0(n){return n!==ro}var xu=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>w(D0),providedIn:"root"})}return n})(),Rr=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},D0=(()=>{class n extends Rr{static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cu=(()=>{class n{urlSerializer=w(bo);options=w(wi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=w(gt);urlHandlingStrategy=w(Vr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Wt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:o}){let r=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,c=o??r;return c instanceof Wt?this.urlSerializer.serialize(c):c}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:o}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,o),this.routerState=e):this.rawUrlTree=o}routerState=eu(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>w(O0),providedIn:"root"})}return n})(),O0=(()=>{class n extends Cu{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof zn?this.updateStateMemento():e instanceof rn?this.commitTransition(i):e instanceof co?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof uo?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Ht&&e.code!==ct.SupersededByNewNavigation&&e.code!==ct.Redirect?this.restoreHistory(i):e instanceof hi?this.restoreHistory(i,!0):e instanceof It&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:o}){let{replaceUrl:r,state:c}=i;if(this.location.isCurrentPathEqualTo(e)||r){let u=this.browserPageId,m=O(O({},c),this.generateNgRouterState(o,u));this.location.replaceState(e,"",m)}else{let u=O(O({},c),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(e,"",u)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,r=this.currentPageId-o;r!==0?this.location.historyGo(r):this.getCurrentUrlTree()===e.finalUrl&&r===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function il(n,t){n.events.pipe(kt(e=>e instanceof It||e instanceof Ht||e instanceof hi||e instanceof rn),Q(e=>e instanceof It||e instanceof rn?0:(e instanceof Ht?e.code===ct.Redirect||e.code===ct.SupersededByNewNavigation:!1)?2:1),kt(e=>e!==2),cn(1)).subscribe(()=>{t()})}var I0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},A0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=w(rs);stateManager=w(Cu);options=w(wi,{optional:!0})||{};pendingTasks=w(Jl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=w(_u);urlSerializer=w(bo);location=w(gt);urlHandlingStrategy=w(Vr);injector=w(un);_events=new at;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=w(xu);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=w(xo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!w(Nr,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ll;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,r=Ve(this.navigationTransitions.currentNavigation);if(o!==null&&r!==null){if(this.stateManager.handleRouterEvent(i,r),i instanceof Ht&&i.code!==ct.Redirect&&i.code!==ct.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof It)this.navigated=!0;else if(i instanceof vi){let c=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),m=O({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||M0(o.source)},c);this.scheduleNavigation(u,ro,null,m,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}If(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ro,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,o)=>{this.navigateToSyncWithBrowser(e,o,i)})}navigateToSyncWithBrowser(e,i,o){let r={replaceUrl:!0},c=o?.navigationId?o:null;if(o){let m=O({},o);delete m.navigationId,delete m.\u0275routerPageId,Object.keys(m).length!==0&&(r.state=m)}let u=this.parseUrl(e);this.scheduleNavigation(u,i,c,r).catch(m=>{this.disposed||this.injector.get(Ni)(m)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ve(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(tl),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:o,queryParams:r,fragment:c,queryParamsHandling:u,preserveFragment:m}=i,h=m?this.currentUrlTree.fragment:c,S=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":S=O(O({},this.currentUrlTree.queryParams),r);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=r||null}S!==null&&(S=this.removeEmptyProps(S));let D;try{let V=o?o.snapshot:this.routerState.snapshot.root;D=Kd(V)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),D=this.currentUrlTree.root}return Jd(D,e,S,h??null)}navigateByUrl(e,i={skipLocationChange:!1}){let o=vn(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(r,ro,null,i)}navigate(e,i={skipLocationChange:!1}){return T0(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let o;if(i===!0?o=O({},I0):i===!1?o=O({},A0):o=i,vn(e))return Ad(this.currentUrlTree,e,o);let r=this.parseUrl(e);return Ad(this.currentUrlTree,r,o)}removeEmptyProps(e){return Object.entries(e).reduce((i,[o,r])=>(r!=null&&(i[o]=r),i),{})}scheduleNavigation(e,i,o,r,c){if(this.disposed)return Promise.resolve(!1);let u,m,h;c?(u=c.resolve,m=c.reject,h=c.promise):h=new Promise((D,V)=>{u=D,m=V});let S=this.pendingTasks.add();return il(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(S))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:r,resolve:u,reject:m,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(D=>Promise.reject(D))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function T0(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new j(4008,!1)}var ee=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ft(null);get href(){return Ve(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new at;applicationErrorHandler=w(Ni);options=w(wi,{optional:!0});constructor(e,i,o,r,c,u){this.router=e,this.route=i,this.tabIndexAttribute=o,this.renderer=r,this.el=c,this.locationStrategy=u,this.reactiveHref.set(w(new xc("href"),{optional:!0}));let m=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=m==="a"||m==="area"||!!(typeof customElements=="object"&&customElements.get(m)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,i=o=>o==="merge"||o==="preserve";e||=i(this.queryParamsHandling),e||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(o=>{o instanceof It&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(vn(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,o,r,c){let u=this.urlTree;if(u===null||this.isAnchorElement&&(e!==0||i||o||r||c||typeof this.target=="string"&&this.target!="_self"))return!0;let m={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,m)?.catch(h=>{this.applicationErrorHandler(h)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,i){let o=this.renderer,r=this.el.nativeElement;i!==null?o.setAttribute(r,e,i):o.removeAttribute(r,e)}get urlTree(){return this.routerLinkInput===null?null:vn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(x(pe),x(dt),Ja("tabindex"),x(He),x(Pe),x(ri))};static \u0275dir=oe({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,o){i&1&&v("click",function(c){return o.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),i&2&&_t("href",o.reactiveHref(),cc)("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",fn],skipLocationChange:[2,"skipLocationChange","skipLocationChange",fn],replaceUrl:[2,"replaceUrl","replaceUrl",fn],routerLink:"routerLink"},features:[Et]})}return n})();var F0=new W("");function ol(n,...t){return Dn([{provide:xo,multi:!0,useValue:n},[],{provide:dt,useFactory:R0,deps:[pe]},{provide:fc,multi:!0,useFactory:N0},t.map(e=>e.\u0275providers)])}function R0(n){return n.routerState.root}function N0(){let n=w(lt);return t=>{let e=n.get(kn);if(t!==e.components[0])return;let i=n.get(pe),o=n.get(L0);n.get(V0)===1&&i.initialNavigation(),n.get(j0,null,{optional:!0})?.setUpPreloading(),n.get(F0,null,{optional:!0})?.init(),i.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var L0=new W("",{factory:()=>new at}),V0=new W("",{providedIn:"root",factory:()=>1});var j0=new W("");var z0="@",U0=(()=>{class n{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=w(lt);loadingSchedulerFn=w(B0,{optional:!0});_engine;constructor(e,i,o,r,c){this.doc=e,this.delegate=i,this.zone=o,this.animationType=r,this.moduleImpl=c}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-F2OUPXYA.js").then(o=>o),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(e):i=e(),i.catch(o=>{throw new j(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:r})=>{this._engine=o(this.animationType,this.doc);let c=new r(this.delegate,this._engine,this.zone);return this.delegate=c,c})}createRenderer(e,i){let o=this.delegate.createRenderer(e,i);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let r=new rl(o);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let u=c.createRenderer(e,i);r.use(u),this.scheduler??=this.injector.get(Kl,null,{optional:!0}),this.scheduler?.notify(10)}).catch(c=>{r.use(o)}),r}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(i){ns()};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),rl=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,i,o){this.delegate.insertBefore(t,e,i,o)}removeChild(t,e,i){this.delegate.removeChild(t,e,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,o){this.delegate.setAttribute(t,e,i,o)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,o){this.delegate.setStyle(t,e,i,o)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){this.shouldReplay(e)&&this.replay.push(o=>o.setProperty(t,e,i)),this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i,o){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,i,o)),this.delegate.listen(t,e,i,o)}shouldReplay(t){return this.replay!==null&&t.startsWith(z0)}},B0=new W("");function yu(n="animations"){return $o("NgAsyncAnimations"),Dn([{provide:pn,useFactory:(t,e,i)=>new U0(t,e,i,n),deps:[me,Ji,qe]},{provide:ec,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Un=class extends Error{};Un.prototype.name="InvalidTokenError";function G0(n){return decodeURIComponent(atob(n).replace(/(.)/g,(t,e)=>{let i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}function $0(n){let t=n.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return G0(t)}catch{return atob(t)}}function al(n,t){if(typeof n!="string")throw new Un("Invalid token specified: must be a string");t||(t={});let e=t.header===!0?0:1,i=n.split(".")[e];if(typeof i!="string")throw new Un(`Invalid token specified: missing part #${e+1}`);let o;try{o=$0(i)}catch(r){throw new Un(`Invalid token specified: invalid base64 for part #${e+1} (${r.message})`)}try{return JSON.parse(o)}catch(r){throw new Un(`Invalid token specified: invalid json for part #${e+1} (${r.message})`)}}var ae=class n{constructor(t){this.router=t}guardarSesion(t){localStorage.setItem("jwt_token",t)}guardarUsuarioCompleto(t){localStorage.setItem("usuario_actual",JSON.stringify(t))}obtenerUsuarioCompleto(){let t=localStorage.getItem("usuario_actual");return t?JSON.parse(t):null}obtenerToken(){return localStorage.getItem("jwt_token")}estaLogueado(){let t=this.obtenerToken();if(!t)return!1;try{let i=al(t).exp*1e3;return Date.now()<i}catch{return!1}}obtenerUsuarioActual(){let t=this.obtenerUsuarioCompleto();if(t)return t;let e=this.obtenerToken();if(e)try{let i=al(e);return{usuarioId:i.usuarioId,nombre:i.nombre,email:i.sub,roles:i.roles}}catch(i){return console.error("Error al decodificar token",i),this.cerrarSesion(),null}return null}userHasRole(t){let e=this.obtenerUsuarioActual();if(!e||!Array.isArray(e.roles))return!1;let i=("ROLE_"+t).toUpperCase();return e.roles.map(r=>r.nombre?r.nombre.toUpperCase():"").filter(Boolean).includes(i)}cerrarSesion(){localStorage.removeItem("jwt_token"),localStorage.removeItem("usuario_actual"),this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||n)(F(pe))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ei=class n{constructor(t){this.authService=t}galeriaLink=[];ngOnInit(){this.actualizarRutaGaleria()}actualizarRutaGaleria(){this.authService.estaLogueado()?this.galeriaLink=["/cliente/productos-realizados"]:this.galeriaLink=["/productos-realizados"]}static \u0275fac=function(e){return new(e||n)(x(ae))};static \u0275cmp=M({type:n,selectors:[["app-productos-destacados"]],decls:15,vars:1,consts:[["id","productos-realizados",1,"featured-products"],[1,"subtitle"],[1,"options-container"],[1,"option-card"],["src","assets/imagenes/galeria-portada.png","alt","Galer\xEDa de productos realizados"],[1,"card-content"],[1,"btn",3,"routerLink"]],template:function(e,i){e&1&&(s(0,"section",0)(1,"h2"),l(2,"Productos Realizados"),a(),s(3,"p",1),l(4," Descubre algunas de las tortas personalizadas que hemos creado para nuestros clientes. "),a(),s(5,"div",2)(6,"div",3),_(7,"img",4),s(8,"div",5)(9,"h3"),l(10,"Ver Galer\xEDa Completa"),a(),s(11,"p"),l(12,"Explora nuestros dise\xF1os realizados y encuentra inspiraci\xF3n para tu pr\xF3xima torta personalizada."),a(),s(13,"a",6),l(14,"Ver Galer\xEDa"),a()()()()()),e&2&&(d(13),p("routerLink",i.galeriaLink))},dependencies:[k,ee],styles:[".featured-products[_ngcontent-%COMP%]{padding:60px 40px;text-align:center;font-family:Arial,sans-serif;background-color:#fff}.featured-products[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;color:#333;margin-bottom:10px}.featured-products[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:18px;color:#777;max-width:600px;margin:0 auto 40px}.options-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:40px;flex-wrap:wrap}.option-card[_ngcontent-%COMP%]{width:400px;border:1px solid #e0e0e0;border-radius:10px;overflow:hidden;box-shadow:0 4px 12px #00000014;transition:transform .3s ease,box-shadow .3s ease}.option-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 8px 20px #0000001f}.option-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:370px;height:370px;object-fit:cover}.card-content[_ngcontent-%COMP%]{padding:30px}.card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;margin-bottom:15px;color:#000}.card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000;line-height:1.6;margin-bottom:25px}.card-content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#eb7221;color:#fff;padding:12px 25px;border-radius:5px;text-decoration:none;font-weight:700;display:inline-block}"]})};var J={production:!0,apiUrl:"/api"};var Si=class n{http=w(K);apiUrl=J.apiUrl+"/resenas";getResenasPublicas(){return this.http.get(this.apiUrl)}obtenerTodasLasResenasAdmin(){return this.http.get(`${this.apiUrl}/todas`)}actualizarEstadoResena(t,e){let i={estado:e};return this.http.put(`${this.apiUrl}/${t}/estado`,i)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function W0(n,t){if(n&1){let e=T();s(0,"div",2)(1,"button",3),v("click",function(){C(e);let o=f();return y(o.anterior())}),l(2," \u276E "),a(),s(3,"div",4)(4,"div",5),_(5,"img",6),a(),s(6,"div",7)(7,"blockquote"),l(8),a(),s(9,"div",8)(10,"span"),l(11),a()(),s(12,"cite")(13,"span",9),l(14),a(),s(15,"span",10),l(16),P(17,"date"),a()()()(),s(18,"button",11),v("click",function(){C(e);let o=f();return y(o.siguiente())}),l(19," \u276F "),a()()}if(n&2){let e=f();d(5),p("src",e.resenaActual.fotoUrl,ve),d(3),g(" \u201C",e.resenaActual.comentario,"\u201D "),d(3),E("\u2605".repeat(e.resenaActual.valoracion)),d(3),E(e.resenaActual.usuario),d(2),g("Pedido realizado el ",A(17,5,e.resenaActual.fecha,"mediumDate"))}}var jr=class n{constructor(t){this.resenaService=t}listaDeResenas=[];indiceActual=0;ngOnInit(){this.resenaService.getResenasPublicas().subscribe(t=>{this.listaDeResenas=t},t=>console.error("Error al obtener rese\xF1as:",t))}get resenaActual(){return this.listaDeResenas.length?this.listaDeResenas[this.indiceActual]:null}siguiente(){this.indiceActual<this.listaDeResenas.length-1?this.indiceActual++:this.indiceActual=0}anterior(){this.indiceActual>0?this.indiceActual--:this.indiceActual=this.listaDeResenas.length-1}static \u0275fac=function(e){return new(e||n)(x(Si))};static \u0275cmp=M({type:n,selectors:[["app-resenas"]],decls:4,vars:1,consts:[["id","resenas",1,"reviews-section"],["class","review-wrapper",4,"ngIf"],[1,"review-wrapper"],["aria-label","Anterior",1,"nav-arrow","left",3,"click"],[1,"review-card","fade"],[1,"review-image"],["alt","Foto del producto rese\xF1ado",3,"src"],[1,"review-content"],[1,"review-rating"],[1,"author"],[1,"product"],["aria-label","Siguiente",1,"nav-arrow","right",3,"click"]],template:function(e,i){e&1&&(s(0,"section",0)(1,"h2"),l(2,"Rese\xF1as de Nuestros Clientes"),a(),b(3,W0,20,8,"div",1),a()),e&2&&(d(3),p("ngIf",i.resenaActual))},dependencies:[k,N,re],styles:[".reviews-section[_ngcontent-%COMP%]{padding:60px 40px;background-color:#fafafa;font-family:Arial,sans-serif;text-align:center}.reviews-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;color:#333;margin-bottom:40px}.review-card[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;display:flex;align-items:center;gap:40px;background-color:#fff;padding:40px;border-radius:10px;box-shadow:0 4px 12px #00000014;text-align:left}.review-content[_ngcontent-%COMP%]   blockquote[_ngcontent-%COMP%]{font-size:18px;color:#555;line-height:1.7;border-left:4px solid #eb7221;padding-left:20px;margin:0 0 20px;font-style:italic}.review-content[_ngcontent-%COMP%]   cite[_ngcontent-%COMP%]{font-weight:700;color:#333;display:block}.review-rating[_ngcontent-%COMP%]{color:#ffc107;font-size:20px;margin-bottom:15px}.review-content[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{color:#eb7221}.review-content[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{color:#777;font-weight:400}.reviews-section[_ngcontent-%COMP%]{padding:60px 40px;background-color:#fafafa;font-family:Arial,sans-serif;text-align:center;position:relative}.reviews-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;color:#333;margin-bottom:50px}.review-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.review-card[_ngcontent-%COMP%]{max-width:900px;display:flex;align-items:center;gap:40px;background-color:#fff;padding:40px;border-radius:12px;box-shadow:0 6px 18px #00000014;text-align:left;transition:all .5s ease;opacity:1}.review-card.fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .6s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.97)}to{opacity:1;transform:scale(1)}}.review-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px;height:250px;object-fit:cover;border-radius:10px}.review-content[_ngcontent-%COMP%]   blockquote[_ngcontent-%COMP%]{font-size:18px;color:#555;line-height:1.7;border-left:4px solid #eb7221;padding-left:20px;margin-bottom:20px;font-style:italic}.review-rating[_ngcontent-%COMP%]{color:#ffc107;font-size:22px;margin-bottom:15px}.review-content[_ngcontent-%COMP%]   cite[_ngcontent-%COMP%]{display:block;font-weight:700;color:#333}.review-content[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{color:#eb7221;display:block}.review-content[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{color:#777;font-weight:400;font-size:14px}.nav-arrow[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background-color:#eb7221e6;color:#fff;border:none;border-radius:50%;font-size:28px;width:50px;height:50px;cursor:pointer;transition:background-color .3s,transform .2s;z-index:10}.nav-arrow[_ngcontent-%COMP%]:hover{background-color:#d55f15;transform:translateY(-50%) scale(1.1)}.nav-arrow.left[_ngcontent-%COMP%]{left:10px}.nav-arrow.right[_ngcontent-%COMP%]{right:10px}@media (max-width: 768px){.review-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:20px;padding:30px}.review-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px}.nav-arrow[_ngcontent-%COMP%]{font-size:24px;width:45px;height:45px}}"]})};var Tu=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(x(He),x(Pe))};static \u0275dir=oe({type:n})}return n})(),Ii=(()=>{class n extends Tu{static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=oe({type:n,features:[We]})}return n})(),xn=new W(""),q0={provide:xn,useExisting:mt(()=>Mo),multi:!0},Mo=(()=>{class n extends Ii{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=oe({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&v("change",function(c){return o.onChange(c.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[Ee([q0]),We]})}return n})(),Y0={provide:xn,useExisting:mt(()=>te),multi:!0};function Z0(){let n=Mt()?Mt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var K0=new W(""),te=(()=>{class n extends Tu{_compositionMode;_composing=!1;constructor(e,i,o){super(e,i),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!Z0())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(x(He),x(Pe),x(K0,8))};static \u0275dir=oe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&v("input",function(c){return o._handleInput(c.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(c){return o._compositionEnd(c.target.value)})},standalone:!1,features:[Ee([Y0]),We]})}return n})();function dl(n){return n==null||ul(n)===0}function ul(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Gn=new W(""),Kr=new W(""),J0=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,$=class{static min(t){return ku(t)}static max(t){return Fu(t)}static required(t){return Ru(t)}static requiredTrue(t){return X0(t)}static email(t){return Q0(t)}static minLength(t){return eg(t)}static maxLength(t){return tg(t)}static pattern(t){return ng(t)}static nullValidator(t){return Ur()}static compose(t){return Uu(t)}static composeAsync(t){return Bu(t)}};function ku(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function Fu(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function Ru(n){return dl(n.value)?{required:!0}:null}function X0(n){return n.value===!0?null:{required:!0}}function Q0(n){return dl(n.value)||J0.test(n.value)?null:{email:!0}}function eg(n){return t=>{let e=t.value?.length??ul(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function tg(n){return t=>{let e=t.value?.length??ul(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function ng(n){if(!n)return Ur;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(dl(i.value))return null;let o=i.value;return t.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}function Ur(n){return null}function Nu(n){return n!=null}function Lu(n){return Vi(n)?pt(n):n}function Vu(n){let t={};return n.forEach(e=>{t=e!=null?O(O({},t),e):t}),Object.keys(t).length===0?null:t}function ju(n,t){return t.map(e=>e(n))}function ig(n){return!n.validate}function zu(n){return n.map(t=>ig(t)?t:e=>t.validate(e))}function Uu(n){if(!n)return null;let t=n.filter(Nu);return t.length==0?null:function(e){return Vu(ju(e,t))}}function pl(n){return n!=null?Uu(zu(n)):null}function Bu(n){if(!n)return null;let t=n.filter(Nu);return t.length==0?null:function(e){let i=ju(e,t).map(Lu);return Gl(i).pipe(Q(Vu))}}function ml(n){return n!=null?Bu(zu(n)):null}function wu(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Gu(n){return n._rawValidators}function $u(n){return n._rawAsyncValidators}function sl(n){return n?Array.isArray(n)?n:[n]:[]}function Br(n,t){return Array.isArray(n)?n.includes(t):n===t}function Eu(n,t){let e=sl(t);return sl(n).forEach(o=>{Br(e,o)||e.push(o)}),e}function Su(n,t){return sl(t).filter(e=>!Br(n,e))}var Gr=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=pl(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ml(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ln=class extends Gr{name;get formDirective(){return null}get path(){return null}},bn=class extends Gr{_parent=null;name=null;valueAccessor=null},$r=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},og={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ow=ne(O({},og),{"[class.ng-submitted]":"isSubmitted"}),se=(()=>{class n extends $r{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(x(bn,2))};static \u0275dir=oe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Z("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[We]})}return n})(),ze=(()=>{class n extends $r{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(x(ln,10))};static \u0275dir=oe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Z("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},standalone:!1,features:[We]})}return n})();var Co="VALID",zr="INVALID",Pi="PENDING",yo="DISABLED",_n=class{},Hr=class extends _n{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Eo=class extends _n{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},So=class extends _n{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Mi=class extends _n{status;source;constructor(t,e){super(),this.status=t,this.source=e}},Wr=class extends _n{source;constructor(t){super(),this.source=t}},Po=class extends _n{source;constructor(t){super(),this.source=t}};function fl(n){return(Jr(n)?n.validators:n)||null}function rg(n){return Array.isArray(n)?pl(n):n||null}function gl(n,t){return(Jr(t)?t.asyncValidators:n)||null}function ag(n){return Array.isArray(n)?ml(n):n||null}function Jr(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Hu(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new j(1e3,"");if(!i[e])throw new j(1001,"")}function Wu(n,t,e){n._forEachChild((i,o)=>{if(e[o]===void 0)throw new j(1002,"")})}var Di=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Ve(this.statusReactive)}set status(t){Ve(()=>this.statusReactive.set(t))}_status=oi(()=>this.statusReactive());statusReactive=Ft(void 0);get valid(){return this.status===Co}get invalid(){return this.status===zr}get pending(){return this.status==Pi}get disabled(){return this.status===yo}get enabled(){return this.status!==yo}errors;get pristine(){return Ve(this.pristineReactive)}set pristine(t){Ve(()=>this.pristineReactive.set(t))}_pristine=oi(()=>this.pristineReactive());pristineReactive=Ft(!0);get dirty(){return!this.pristine}get touched(){return Ve(this.touchedReactive)}set touched(t){Ve(()=>this.touchedReactive.set(t))}_touched=oi(()=>this.touchedReactive());touchedReactive=Ft(!1);get untouched(){return!this.touched}_events=new at;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Eu(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Eu(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Su(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Su(t,this._rawAsyncValidators))}hasValidator(t){return Br(this._rawValidators,t)}hasAsyncValidator(t){return Br(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(ne(O({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new So(!0,i))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new So(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(ne(O({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Eo(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new Eo(!0,i))}markAsPending(t={}){this.status=Pi;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Mi(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(ne(O({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=yo,this.errors=null,this._forEachChild(o=>{o.disable(ne(O({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Hr(this.value,i)),this._events.next(new Mi(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ne(O({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Co,this._forEachChild(i=>{i.enable(ne(O({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ne(O({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Co||this.status===Pi)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Hr(this.value,e)),this._events.next(new Mi(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(ne(O({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yo:Co}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Pi,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let i=Lu(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,o)=>i&&i._find(o),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Mi(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new le,this.statusChanges=new le}_calculateStatus(){return this._allControlsDisabled()?yo:this.errors?zr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pi)?Pi:this._anyControlsHaveStatus(zr)?zr:Co}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),o=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),o&&this._events.next(new Eo(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new So(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Jr(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=rg(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=ag(this._rawAsyncValidators)}},Oi=class extends Di{constructor(t,e,i){super(fl(e),gl(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Wu(this,!0,t),Object.keys(t).forEach(i=>{Hu(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let o=this.controls[i];o&&o.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,o)=>{i.reset(t?t[o]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new Po(this))}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,o)=>((i.enabled||this.disabled)&&(e[o]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((o,r)=>{i=e(i,o,r)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var ll=class extends Oi{};var Ai=new W("",{providedIn:"root",factory:()=>Do}),Do="always";function qu(n,t){return[...t.path,n]}function qr(n,t,e=Do){hl(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),lg(n,t),dg(n,t),cg(n,t),sg(n,t)}function Pu(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Zr(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Yr(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function sg(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function hl(n,t){let e=Gu(n);t.validator!==null?n.setValidators(wu(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=$u(n);t.asyncValidator!==null?n.setAsyncValidators(wu(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let o=()=>n.updateValueAndValidity();Yr(t._rawValidators,o),Yr(t._rawAsyncValidators,o)}function Zr(n,t){let e=!1;if(n!==null){if(t.validator!==null){let o=Gu(n);if(Array.isArray(o)&&o.length>0){let r=o.filter(c=>c!==t.validator);r.length!==o.length&&(e=!0,n.setValidators(r))}}if(t.asyncValidator!==null){let o=$u(n);if(Array.isArray(o)&&o.length>0){let r=o.filter(c=>c!==t.asyncValidator);r.length!==o.length&&(e=!0,n.setAsyncValidators(r))}}}let i=()=>{};return Yr(t._rawValidators,i),Yr(t._rawAsyncValidators,i),e}function lg(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Yu(n,t)})}function cg(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Yu(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Yu(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function dg(n,t){let e=(i,o)=>{t.valueAccessor.writeValue(i),o&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Zu(n,t){n==null,hl(n,t)}function ug(n,t){return Zr(n,t)}function Ku(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function pg(n){return Object.getPrototypeOf(n.constructor)===Ii}function Ju(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Xu(n,t){if(!t)return null;Array.isArray(t);let e,i,o;return t.forEach(r=>{r.constructor===te?e=r:pg(r)?i=r:o=r}),o||i||e||null}function mg(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var fg={provide:ln,useExisting:mt(()=>vl)},wo=Promise.resolve(),vl=(()=>{class n extends ln{callSetDisabledState;get submitted(){return Ve(this.submittedReactive)}_submitted=oi(()=>this.submittedReactive());submittedReactive=Ft(!1);_directives=new Set;form;ngSubmit=new le;options;constructor(e,i,o){super(),this.callSetDisabledState=o,this.form=new Oi({},pl(e),ml(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){wo.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),qr(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){wo.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){wo.then(()=>{let i=this._findContainer(e.path),o=new Oi({});Zu(o,e),i.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){wo.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){wo.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Ju(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new Wr(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(x(Gn,10),x(Kr,10),x(Ai,8))};static \u0275dir=oe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&v("submit",function(c){return o.onSubmit(c)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ee([fg]),We]})}return n})();function Mu(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Du(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Bn=class extends Di{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(fl(e),gl(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jr(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Du(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new Po(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Mu(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Mu(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Du(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var gg=n=>n instanceof Bn;var hg={provide:bn,useExisting:mt(()=>Re)},Ou=Promise.resolve(),Re=(()=>{class n extends bn{_changeDetectorRef;callSetDisabledState;control=new Bn;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new le;constructor(e,i,o,r,c,u){super(),this._changeDetectorRef=c,this.callSetDisabledState=u,this._parent=e,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Xu(this,r)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Ku(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){qr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Ou.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,o=i!==0&&fn(i);Ou.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?qu(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(x(ln,9),x(Gn,10),x(Kr,10),x(xn,10),x(mn,8),x(Ai,8))};static \u0275dir=oe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ee([hg]),We,Et]})}return n})();var Ue=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=oe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),vg={provide:xn,useExisting:mt(()=>$n),multi:!0},$n=(()=>{class n extends Ii{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=oe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&v("input",function(c){return o.onChange(c.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[Ee([vg]),We]})}return n})(),bg={provide:xn,useExisting:mt(()=>Hn),multi:!0};var _g=(()=>{class n{_accessors=[];add(e,i){this._accessors.push([e,i])}remove(e){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===e){this._accessors.splice(i,1);return}}select(e){this._accessors.forEach(i=>{this._isSameGroup(i,e)&&i[1]!==e&&i[1].fireUncheck(e.value)})}_isSameGroup(e,i){return e[0].control?e[0]._parent===i._control._parent&&e[1].name===i.name:!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hn=(()=>{class n extends Ii{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=w(Ai,{optional:!0})??Do;constructor(e,i,o,r){super(e,i),this._registry=o,this._injector=r}ngOnInit(){this._control=this._injector.get(bn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(i){return new(i||n)(x(He),x(Pe),x(_g),x(lt))};static \u0275dir=oe({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,o){i&1&&v("change",function(){return o.onChange()})("blur",function(){return o.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[Ee([bg]),We]})}return n})();var Qu=new W("");var xg={provide:ln,useExisting:mt(()=>Ze)},Ze=(()=>{class n extends ln{callSetDisabledState;get submitted(){return Ve(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=oi(()=>this._submittedReactive());_submittedReactive=Ft(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new le;constructor(e,i,o){super(),this.callSetDisabledState=o,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Zr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return qr(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Pu(e.control||null,e,!1),mg(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),Ju(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Wr(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0,i={}){this.form.reset(e,i),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,o=this.form.get(e.path);i!==o&&(Pu(i||null,e),gg(o)&&(qr(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);Zu(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&ug(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){hl(this.form,this),this._oldForm&&Zr(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(x(Gn,10),x(Kr,10),x(Ai,8))};static \u0275dir=oe({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&v("submit",function(c){return o.onSubmit(c)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ee([xg]),We,Et]})}return n})();var Cg={provide:bn,useExisting:mt(()=>Ke)},Ke=(()=>{class n extends bn{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new le;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,i,o,r,c){super(),this._ngModelWarningConfig=c,this._parent=e,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Xu(this,r)}ngOnChanges(e){this._added||this._setUpControl(),Ku(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return qu(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(x(ln,13),x(Gn,10),x(Kr,10),x(xn,10),x(Qu,8))};static \u0275dir=oe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ee([Cg]),We,Et]})}return n})();var yg={provide:xn,useExisting:mt(()=>tt),multi:!0};function ep(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function wg(n){return n.split(":")[0]}var tt=(()=>{class n extends Ii{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;appRefInjector=w(kn).injector;destroyRef=w(On);cdr=w(mn);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,os({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(e){this.cdr.markForCheck(),this.value=e;let i=this._getOptionId(e),o=ep(i,e);this.setProperty("value",o)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=wg(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=oe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&v("change",function(c){return o.onChange(c.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ee([yg]),We]})}return n})(),nt=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,o){this._element=e,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(ep(this.id,e)),this._select._writeValueAfterRender())}set value(e){this._setElementValue(e),this._select&&this._select._writeValueAfterRender()}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(x(Pe),x(He),x(tt,9))};static \u0275dir=oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Eg={provide:xn,useExisting:mt(()=>tp),multi:!0};function Iu(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function Sg(n){return n.split(":")[0]}var tp=(()=>{class n extends Ii{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let o=e.map(r=>this._getOptionId(r));i=(r,c)=>{r._setSelected(o.indexOf(c.toString())>-1)}}else i=(o,r)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let o=[],r=i.selectedOptions;if(r!==void 0){let c=r;for(let u=0;u<c.length;u++){let m=c[u],h=this._getOptionValue(m.value);o.push(h)}}else{let c=i.options;for(let u=0;u<c.length;u++){let m=c[u];if(m.selected){let h=this._getOptionValue(m.value);o.push(h)}}}this.value=o,e(o)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=Sg(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=oe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&v("change",function(c){return o.onChange(c.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ee([Eg]),We]})}return n})(),it=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,o){this._element=e,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(Iu(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Iu(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(x(Pe),x(He),x(tp,9))};static \u0275dir=oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function np(n){return typeof n=="number"?n:parseFloat(n)}var bl=(()=>{class n{_validator=Ur;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Ur,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=oe({type:n,features:[Et]})}return n})(),Pg={provide:Gn,useExisting:mt(()=>_l),multi:!0},_l=(()=>{class n extends bl{max;inputName="max";normalizeInput=e=>np(e);createValidator=e=>Fu(e);static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=oe({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,o){i&2&&_t("max",o._enabled?o.max:null)},inputs:{max:"max"},standalone:!1,features:[Ee([Pg]),We]})}return n})(),Mg={provide:Gn,useExisting:mt(()=>Oo),multi:!0},Oo=(()=>{class n extends bl{min;inputName="min";normalizeInput=e=>np(e);createValidator=e=>ku(e);static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=oe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,o){i&2&&_t("min",o._enabled?o.min:null)},inputs:{min:"min"},standalone:!1,features:[Ee([Mg]),We]})}return n})(),Dg={provide:Gn,useExisting:mt(()=>Wn),multi:!0};var Wn=(()=>{class n extends bl{required;inputName="required";normalizeInput=fn;createValidator=e=>Ru;enabled(e){return e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=oe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&_t("required",o._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Ee([Dg]),We]})}return n})();var ip=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qe({type:n});static \u0275inj=Xe({})}return n})(),cl=class extends Di{constructor(t,e,i){super(fl(e),gl(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){Array.isArray(t)?t.forEach(i=>{this.controls.push(i),this._registerControl(i)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let o=this._adjustIndex(t);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),e&&(this.controls.splice(o,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){Wu(this,!1,t),t.forEach((i,o)=>{Hu(this,!1,o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,o)=>{i.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new Po(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function Au(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var ot=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,i=null){let o=this._reduceControls(e),r={};return Au(i)?r=i:i!==null&&(r.validators=i.validator,r.asyncValidators=i.asyncValidator),new Oi(o,r)}record(e,i=null){let o=this._reduceControls(e);return new ll(o,i)}control(e,i,o){let r={};return this.useNonNullable?(Au(i)?r=i:(r.validators=i,r.asyncValidators=o),new Bn(e,ne(O({},r),{nonNullable:!0}))):new Bn(e,i,o)}array(e,i,o){let r=e.map(c=>this._createControl(c));return new cl(r,i,o)}_reduceControls(e){let i={};return Object.keys(e).forEach(o=>{i[o]=this._createControl(e[o])}),i}_createControl(e){if(e instanceof Bn)return e;if(e instanceof Di)return e;if(Array.isArray(e)){let i=e[0],o=e.length>1?e[1]:null,r=e.length>2?e[2]:null;return this.control(i,o,r)}else return this.control(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Te=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ai,useValue:e.callSetDisabledState??Do}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qe({type:n});static \u0275inj=Xe({imports:[ip]})}return n})(),rt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Qu,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Ai,useValue:e.callSetDisabledState??Do}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Qe({type:n});static \u0275inj=Xe({imports:[ip]})}return n})();var Yt=class n{http=w(K);apiUrl=J.apiUrl+"/contacto";obtenerMiHistorial(){return this.http.get(`${this.apiUrl}/mi-historial`)}obtenerPorId(t){return this.http.get(`${this.apiUrl}/${t}`)}enviarMensaje(t){return this.http.post(this.apiUrl,t)}obtenerTodasLasConsultas(){return this.http.get(`${this.apiUrl}/todos`)}registrar(t){return this.http.post(this.apiUrl,t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function Og(n,t){n&1&&(s(0,"div",7),l(1," \xA1Mensaje enviado! Te responderemos pronto. "),a())}function Ig(n,t){if(n&1){let e=T();s(0,"form",8),v("ngSubmit",function(){C(e);let o=f();return y(o.enviarMensaje())}),s(1,"div",9)(2,"label",10),l(3,"Nombre completo"),a(),_(4,"input",11),a(),s(5,"div",9)(6,"label",12),l(7,"Correo Electr\xF3nico"),a(),_(8,"input",13),a(),s(9,"div",9)(10,"label",14),l(11,"Tel\xE9fono"),a(),_(12,"input",15),a(),s(13,"div",9)(14,"label",16),l(15,"Motivo de la consulta:"),a(),_(16,"textarea",17),a(),s(17,"button",18),l(18,"Enviar Mensaje"),a()()}if(n&2){let e=f();p("formGroup",e.contactoForm),d(17),p("disabled",e.contactoForm.invalid)}}var Xr=class n{contactoForm;estaLogueado=!1;mensajeEnviado=!1;fb=w(ot);authService=w(ae);contactoService=w(Yt);constructor(){this.contactoForm=this.fb.group({nombre:["",$.required],email:["",[$.required,$.email]],telefono:[""],mensaje:["",$.required]})}ngOnInit(){if(this.estaLogueado=this.authService.estaLogueado(),this.estaLogueado){let t=this.authService.obtenerUsuarioActual();this.contactoForm.patchValue({nombre:t.nombre,email:t.email}),this.contactoForm.get("nombre")?.disable(),this.contactoForm.get("email")?.disable()}}enviarMensaje(){if(this.contactoForm.invalid){alert("Por favor, completa todos los campos requeridos.");return}let t=this.contactoForm.getRawValue();this.contactoService.enviarMensaje(t).subscribe({next:e=>{this.mensajeEnviado=!0,this.contactoForm.reset(),this.estaLogueado&&this.ngOnInit()},error:e=>{console.error("Error al enviar consulta:",e),alert("Hubo un error al enviar tu mensaje. Intenta m\xE1s tarde.")}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-contacto"]],decls:13,vars:2,consts:[["id","contacto",1,"contact-section"],[1,"contact-container"],[1,"contact-image"],["src","assets/imagenes/contacto.png","alt","Imagen de contacto con postres"],[1,"contact-form-wrapper"],["class","alert-success",4,"ngIf"],["class","contact-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert-success"],[1,"contact-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","formControlName","nombre"],["for","email"],["type","email","id","email","formControlName","email"],["for","telefono"],["type","tel","id","telefono","formControlName","telefono"],["for","mensaje"],["id","mensaje","formControlName","mensaje","rows","4"],["type","submit",1,"btn",3,"disabled"]],template:function(e,i){e&1&&(s(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),l(4,"\xBFTienes alguna duda?"),a(),s(5,"p"),l(6,"Consulta y nos pondremos en contacto contigo. O reg\xEDstrate y realiza un pedido con nosotros."),a(),_(7,"img",3),a(),s(8,"div",4)(9,"h3"),l(10,"CONTACTO"),a(),b(11,Og,2,0,"div",5)(12,Ig,19,2,"form",6),a()()()),e&2&&(d(11),p("ngIf",i.mensajeEnviado),d(),p("ngIf",!i.mensajeEnviado))},dependencies:[k,N,rt,Ue,te,se,ze,Ze,Ke],styles:[".contact-section[_ngcontent-%COMP%]{padding:80px 40px;background-color:#fff;font-family:Arial,sans-serif}.contact-container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;display:flex;align-items:center;gap:60px}.contact-image[_ngcontent-%COMP%]{flex:1}.contact-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:10px;display:block}.contact-form-wrapper[_ngcontent-%COMP%]{flex:1}.contact-form-wrapper[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#eb7221;font-size:16px;margin-bottom:10px}.contact-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;color:#333;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#555;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ccc;border-radius:5px;font-size:16px;box-sizing:border-box}.btn[_ngcontent-%COMP%]{background-color:#eb7221;color:#fff;padding:15px 30px;border-radius:5px;text-decoration:none;font-weight:700;border:none;cursor:pointer;font-size:16px}.alert-success[_ngcontent-%COMP%]{padding:1rem;background-color:#d4edda;color:#155724;border:1px solid #c3e6cb;border-radius:5px;text-align:center;margin-bottom:1rem;font-weight:600}.contact-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#e9ecef;opacity:.7}"]})};var Qr=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-llamada-a-catalogo"]],decls:27,vars:0,consts:[[1,"call-to-action-section"],[1,"cta-content"],[1,"cta-icon"],[1,"cta-subtitle"],[1,"features-block"],[1,"feature-item"],[1,"cta-buttons"],["routerLink","/catalogo",1,"btn","btn-primary"]],template:function(e,i){e&1&&(s(0,"section",0)(1,"div",1)(2,"span",2),l(3,"\u{1F370}"),a(),s(4,"h2"),l(5,"Transforma un D\xEDa Com\xFAn en un Momento Dulce"),a(),s(6,"p",3),l(7," En D'Juancito, cada creaci\xF3n es una obra de arte. Explora nuestro men\xFA y descubre por qu\xE9 somos la elecci\xF3n perfecta para tus celebraciones. "),a(),s(8,"div",4)(9,"div",5)(10,"h3"),l(11,"Dise\xF1o a tu Medida"),a(),s(12,"p"),l(13,"Personaliza cada capa, relleno y decoraci\xF3n para crear la torta de tus sue\xF1os."),a()(),s(14,"div",5)(15,"h3"),l(16,"Frescura Garantizada"),a(),s(17,"p"),l(18,"Horneamos solo con ingredientes de alta calidad y entregamos en la fecha exacta."),a()(),s(19,"div",5)(20,"h3"),l(21,"Precios Transparentes"),a(),s(22,"p"),l(23,"Calcula el costo de tu dise\xF1o en tiempo real, sin sorpresas."),a()()(),s(24,"div",6)(25,"a",7),l(26,"Ver Cat\xE1logo Completo"),a()()()())},dependencies:[ee],styles:[".call-to-action-section[_ngcontent-%COMP%]{background-color:#f7e0d8;padding:80px 40px;text-align:center;font-family:Arial,sans-serif;border-top:1px solid #eb7221}.cta-content[_ngcontent-%COMP%]{max-width:850px;margin:0 auto}.cta-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:40px;color:#555;margin-bottom:10px;font-weight:700;letter-spacing:1px}.cta-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:17px;color:#777;line-height:1.6;margin-bottom:35px}.cta-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px}.btn[_ngcontent-%COMP%]{padding:16px 35px;border-radius:4px;text-decoration:none;font-weight:700;font-size:15px;transition:all .3s ease;border:2px solid transparent;text-transform:uppercase}.btn-primary[_ngcontent-%COMP%]{background-color:#eb7221;color:#fff;border-color:#eb7221}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#eb7221;transform:translateY(-1px)}.cta-icon[_ngcontent-%COMP%]{font-size:60px;display:block;margin-bottom:20px}.features-block[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;margin-bottom:50px;margin-top:40px}.feature-item[_ngcontent-%COMP%]{flex:1;text-align:center;padding:15px;border-radius:8px;background-color:#ffffffb3;box-shadow:0 2px 5px #0000000d}.feature-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;color:#eb7221;margin-bottom:5px}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#777}"]})};var xl=class{constructor(t,e){this.open=t,this.close=e||t}isManual(){return this.open==="manual"||this.close==="manual"}},Ag={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};function Tg(n,t=Ag){let e=(n||"").trim();if(e.length===0)return[];let i=e.split(/\s+/).map(r=>r.split(":")).map(r=>{let c=t[r[0]]||r;return new xl(c[0],c[1])}),o=i.filter(r=>r.isManual());if(o.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(o.length===1&&i.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return i}function op(n,t){let e=Tg(t.triggers),i=t.target;if(e.length===1&&e[0].isManual())return Function.prototype;let o=[],r=[],c=()=>{r.forEach(u=>o.push(u())),r.length=0};return e.forEach(u=>{let m=u.open===u.close,h=m?t.toggle:t.show;if(!m&&u.close&&t.hide){let S=u.close,D=t.hide,V=()=>n.listen(i,S,D);r.push(V)}h&&o.push(n.listen(i,u.open,()=>h(c)))}),()=>{o.forEach(u=>u())}}function rp(n,t){return t.outsideClick?n.listen("document","click",e=>{t.target&&t.target.contains(e.target)||t.targets&&t.targets.some(i=>i.contains(e.target))||t.hide&&t.hide()}):Function.prototype}function ap(n,t){return t.outsideEsc?n.listen("document","keyup.esc",e=>{t.target&&t.target.contains(e.target)||t.targets&&t.targets.some(i=>i.contains(e.target))||t.hide&&t.hide()}):Function.prototype}var ke=typeof window<"u"&&window||{},Fe=ke.document,ww=ke.location,Ew=ke.gc?()=>ke.gc():()=>null,Sw=ke.performance?ke.performance:null,Pw=ke.Event,Mw=ke.MouseEvent,Dw=ke.KeyboardEvent,Ow=ke.EventTarget,Iw=ke.History,Aw=ke.Location,Tw=ke.EventListener,sp=(function(n){return n.isBs4="bs4",n.isBs5="bs5",n})(sp||{}),Cn;function lp(){let n=ke.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),ke.document.head.appendChild(n);let t=ke.getComputedStyle(n).paddingLeft;return t&&parseFloat(t)?(ke.document.head.removeChild(n),"bs4"):(ke.document.head.removeChild(n),"bs5")}function kg(){return Cn||(Cn=lp()),Cn==="bs4"}function Fg(){return Cn||(Cn=lp()),Cn==="bs5"}function yn(){return{isBs4:kg(),isBs5:Fg()}}function Rg(){let n=yn(),t=Object.keys(n).find(e=>n[e]);return sp[t]}var ea=class{constructor(){this.length=0,this.asArray=[]}get(t){if(this.length===0||t<0||t>=this.length)return;let e=this.head;for(let i=0;i<t;i++)e=e?.next;return e?.value}add(t,e=this.length){if(e<0||e>this.length)throw new Error("Position is out of the list");let i={value:t,next:void 0,previous:void 0};if(this.length===0)this.head=i,this.tail=i,this.current=i;else if(e===0&&this.head)i.next=this.head,this.head.previous=i,this.head=i;else if(e===this.length&&this.tail)this.tail.next=i,i.previous=this.tail,this.tail=i;else{let o=this.getNode(e-1),r=o?.next;o&&r&&(o.next=i,r.previous=i,i.previous=o,i.next=r)}this.length++,this.createInternalArrayRepresentation()}remove(t=0){if(this.length===0||t<0||t>=this.length)throw new Error("Position is out of the list");if(t===0&&this.head)this.head=this.head.next,this.head?this.head.previous=void 0:this.tail=void 0;else if(t===this.length-1&&this.tail?.previous)this.tail=this.tail.previous,this.tail.next=void 0;else{let e=this.getNode(t);e?.next&&e.previous&&(e.next.previous=e.previous,e.previous.next=e.next)}this.length--,this.createInternalArrayRepresentation()}set(t,e){if(this.length===0||t<0||t>=this.length)throw new Error("Position is out of the list");let i=this.getNode(t);i&&(i.value=e,this.createInternalArrayRepresentation())}toArray(){return this.asArray}findAll(t){let e=this.head,i=[];if(!e)return i;for(let o=0;o<this.length;o++){if(!e)return i;t(e.value,o)&&i.push({index:o,value:e.value}),e=e.next}return i}push(...t){return t.forEach(e=>{this.add(e)}),this.length}pop(){if(this.length===0)return;let t=this.tail;return this.remove(this.length-1),t?.value}unshift(...t){return t.reverse(),t.forEach(e=>{this.add(e,0)}),this.length}shift(){if(this.length===0)return;let t=this.head?.value;return this.remove(),t}forEach(t){let e=this.head;for(let i=0;i<this.length;i++){if(!e)return;t(e.value,i),e=e.next}}indexOf(t){let e=this.head,i=-1;for(let o=0;o<this.length;o++){if(!e)return i;if(e.value===t){i=o;break}e=e.next}return i}some(t){let e=this.head,i=!1;for(;e&&!i;){if(t(e.value)){i=!0;break}e=e.next}return i}every(t){let e=this.head,i=!0;for(;e&&i;)t(e.value)||(i=!1),e=e.next;return i}toString(){return"[Linked List]"}find(t){let e=this.head;for(let i=0;i<this.length;i++){if(!e)return;if(t(e.value,i))return e.value;e=e.next}}findIndex(t){let e=this.head;for(let i=0;i<this.length;i++){if(!e)return-1;if(t(e.value,i))return i;e=e.next}return-1}getNode(t){if(this.length===0||t<0||t>=this.length)throw new Error("Position is out of the list");let e=this.head;for(let i=0;i<t;i++)e=e?.next;return e}createInternalArrayRepresentation(){let t=[],e=this.head;for(;e;)t.push(e.value),e=e.next;this.asArray=t}};var ta=class{static reflow(t){t.offsetHeight}static getStyles(t){let e=t.ownerDocument.defaultView;return(!e||!e.opener)&&(e=ke),e.getComputedStyle(t)}static stackOverflowConfig(){let t=Rg();return{crossorigin:"anonymous",integrity:t==="bs5"?"sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65":"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2",cdnLink:t==="bs5"?"https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css":"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"}}};var kw=typeof console>"u"||!("warn"in console);var cp=["*"],Ng=n=>({display:n});function Lg(n,t){if(n&1){let e=T();s(0,"li",7),v("click",function(){let o=C(e).index,r=f(2);return y(r.selectSlide(o))}),a()}if(n&2){let e=t.$implicit;Z("active",e.active===!0)}}function Vg(n,t){if(n&1&&(Ne(0),s(1,"ol",5),b(2,Lg,1,2,"li",6),a(),Le()),n&2){let e=f();d(2),p("ngForOf",e.indicatorsSlides())}}function jg(n,t){if(n&1){let e=T();s(0,"button",9),v("click",function(){let o=C(e).index,r=f(2);return y(r.selectSlide(o))}),a()}if(n&2){let e=t.$implicit,i=t.index,o=f(2);Z("active",e.active===!0),_t("data-bs-target","#carousel"+o.currentId)("data-bs-slide-to",i)}}function zg(n,t){if(n&1&&(Ne(0),s(1,"div",5),b(2,jg,1,4,"button",8),a(),Le()),n&2){let e=f();d(2),p("ngForOf",e.indicatorsSlides())}}function Ug(n,t){if(n&1){let e=T();s(0,"a",10),v("click",function(){C(e);let o=f();return y(o.previousSlide())}),_(1,"span",11),s(2,"span",12),l(3,"Previous"),a()()}if(n&2){let e=f();Z("disabled",e.checkDisabledClass("prev")),_t("data-bs-target","#carousel"+e.currentId)}}function Bg(n,t){if(n&1){let e=T();s(0,"a",13),v("click",function(){C(e);let o=f();return y(o.nextSlide())}),_(1,"span",14),s(2,"span",12),l(3,"Next"),a()()}if(n&2){let e=f();Z("disabled",e.checkDisabledClass("next")),_t("data-bs-target","#carousel"+e.currentId)}}var Gg=(()=>{let t=class t{constructor(){this.interval=5e3,this.noPause=!1,this.noWrap=!1,this.showIndicators=!0,this.pauseOnFocus=!1,this.indicatorsByChunk=!1,this.itemsPerSlide=1,this.singleSlideOffset=!1}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function $g(n,t){let e=n.length;for(;e--;)if(t(n[e],e,n))return e;return-1}function Hg(n,t){let e=[],i=Math.ceil(n.length/t),o=0;for(;o<i;){let r=n.splice(0,o===i-1&&t<n.length?n.length:t);e.push(r),o++}return e}function Wg(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}var vt=(function(n){return n[n.UNKNOWN=0]="UNKNOWN",n[n.NEXT=1]="NEXT",n[n.PREV=2]="PREV",n})(vt||{}),qg=1,Cl=(()=>{let t=class t{set activeSlide(i){this.multilist||(Wg(i)&&(this.customActiveSlide=i),this._slides.length&&i!==this._currentActiveSlide&&this._select(i))}get activeSlide(){return this._currentActiveSlide||0}get interval(){return this._interval}set interval(i){this._interval=i,this.restartTimer()}get slides(){return this._slides.toArray()}get isFirstSlideVisible(){let i=this.getVisibleIndexes();return!i||i instanceof Array&&!i.length?!1:i.includes(0)}get isLastSlideVisible(){let i=this.getVisibleIndexes();return!i||i instanceof Array&&!i.length?!1:i.includes(this._slides.length-1)}get _bsVer(){return yn()}constructor(i,o,r){this.ngZone=o,this.platformId=r,this.noWrap=!1,this.noPause=!1,this.showIndicators=!0,this.pauseOnFocus=!1,this.indicatorsByChunk=!1,this.itemsPerSlide=1,this.singleSlideOffset=!1,this.isAnimated=!1,this.activeSlideChange=new le(!1),this.slideRangeChange=new le,this.startFromIndex=0,this._interval=5e3,this._slides=new ea,this._currentVisibleSlidesIndex=0,this.isPlaying=!1,this.destroyed=!1,this.currentId=0,this.getActive=c=>c.active,this.makeSlidesConsistent=c=>{c.forEach((u,m)=>u.item.order=m)},Object.assign(this,i),this.currentId=qg++}ngAfterViewInit(){setTimeout(()=>{this.singleSlideOffset&&(this.indicatorsByChunk=!1),this.multilist&&(this._chunkedSlides=Hg(this.mapSlidesAndIndexes(),this.itemsPerSlide),this.selectInitialSlides()),this.customActiveSlide&&!this.multilist&&this._select(this.customActiveSlide)},0)}ngOnDestroy(){this.destroyed=!0}addSlide(i){this._slides.add(i),this.multilist&&this._slides.length<=this.itemsPerSlide&&(i.active=!0),!this.multilist&&this.isAnimated&&(i.isAnimated=!0),!this.multilist&&this._slides.length===1&&(this._currentActiveSlide=void 0,this.customActiveSlide||(this.activeSlide=0),this.play()),this.multilist&&this._slides.length>this.itemsPerSlide&&this.play()}removeSlide(i){let o=this._slides.indexOf(i);if(this._currentActiveSlide===o){let r;this._slides.length>1&&(r=this.isLast(o)?this.noWrap?o-1:0:o),this._slides.remove(o),setTimeout(()=>{this._select(r)},0)}else{this._slides.remove(o);let r=this.getCurrentSlideIndex();setTimeout(()=>{this._currentActiveSlide=r,this.activeSlideChange.emit(this._currentActiveSlide)},0)}}nextSlideFromInterval(i=!1){this.move(vt.NEXT,i)}nextSlide(i=!1){this.isPlaying&&this.restartTimer(),this.move(vt.NEXT,i)}previousSlide(i=!1){this.isPlaying&&this.restartTimer(),this.move(vt.PREV,i)}getFirstVisibleIndex(){return this.slides.findIndex(this.getActive)}getLastVisibleIndex(){return $g(this.slides,this.getActive)}move(i,o=!1){let r=this.getFirstVisibleIndex(),c=this.getLastVisibleIndex();this.noWrap&&(i===vt.NEXT&&this.isLast(c)||i===vt.PREV&&r===0)||(this.multilist?this.moveMultilist(i):this.activeSlide=this.findNextSlideIndex(i,o)||0)}keydownPress(i){if(i.keyCode===13||i.key==="Enter"||i.keyCode===32||i.key==="Space"){this.nextSlide(),i.preventDefault();return}if(i.keyCode===37||i.key==="LeftArrow"){this.previousSlide();return}if(i.keyCode===39||i.key==="RightArrow"){this.nextSlide();return}}onMouseLeave(){this.pauseOnFocus||this.play()}onMouseUp(){this.pauseOnFocus||this.play()}pauseFocusIn(){this.pauseOnFocus&&(this.isPlaying=!1,this.resetTimer())}pauseFocusOut(){this.play()}selectSlide(i){this.isPlaying&&this.restartTimer(),this.multilist?this.selectSlideRange(this.indicatorsByChunk?i*this.itemsPerSlide:i):this.activeSlide=this.indicatorsByChunk?i*this.itemsPerSlide:i}play(){this.isPlaying||(this.isPlaying=!0,this.restartTimer())}pause(){this.noPause||(this.isPlaying=!1,this.resetTimer())}getCurrentSlideIndex(){return this._slides.findIndex(this.getActive)}isLast(i){return i+1>=this._slides.length}isFirst(i){return i===0}indicatorsSlides(){return this.slides.filter((i,o)=>!this.indicatorsByChunk||o%this.itemsPerSlide===0)}selectInitialSlides(){let i=this.startFromIndex<=this._slides.length?this.startFromIndex:0;if(this.hideSlides(),this.singleSlideOffset){if(this._slidesWithIndexes=this.mapSlidesAndIndexes(),this._slides.length-i<this.itemsPerSlide){let o=this._slidesWithIndexes.slice(0,i);this._slidesWithIndexes=[...this._slidesWithIndexes,...o].slice(o.length).slice(0,this.itemsPerSlide)}else this._slidesWithIndexes=this._slidesWithIndexes.slice(i,i+this.itemsPerSlide);this._slidesWithIndexes.forEach(o=>o.item.active=!0),this.makeSlidesConsistent(this._slidesWithIndexes)}else this.selectRangeByNestedIndex(i);this.slideRangeChange.emit(this.getVisibleIndexes())}findNextSlideIndex(i,o){let r=0;if(!(!o&&this.isLast(this.activeSlide)&&i!==vt.PREV&&this.noWrap)){switch(i){case vt.NEXT:if(typeof this._currentActiveSlide>"u"){r=0;break}if(!this.isLast(this._currentActiveSlide)){r=this._currentActiveSlide+1;break}r=!o&&this.noWrap?this._currentActiveSlide:0;break;case vt.PREV:if(typeof this._currentActiveSlide>"u"){r=0;break}if(this._currentActiveSlide>0){r=this._currentActiveSlide-1;break}if(!o&&this.noWrap){r=this._currentActiveSlide;break}r=this._slides.length-1;break;default:throw new Error("Unknown direction")}return r}}mapSlidesAndIndexes(){return this.slides.slice().map((i,o)=>({index:o,item:i}))}selectSlideRange(i){if(!this.isIndexInRange(i)){if(this.hideSlides(),!this.singleSlideOffset)this.selectRangeByNestedIndex(i);else{let o=this.isIndexOnTheEdges(i)?i:i-this.itemsPerSlide+1,r=this.isIndexOnTheEdges(i)?i+this.itemsPerSlide:i+1;this._slidesWithIndexes=this.mapSlidesAndIndexes().slice(o,r),this.makeSlidesConsistent(this._slidesWithIndexes),this._slidesWithIndexes.forEach(c=>c.item.active=!0)}this.slideRangeChange.emit(this.getVisibleIndexes())}}selectRangeByNestedIndex(i){if(!this._chunkedSlides)return;let o=this._chunkedSlides.map((r,c)=>({index:c,list:r})).find(r=>r.list.find(c=>c.index===i)!==void 0);o&&(this._currentVisibleSlidesIndex=o.index,this._chunkedSlides[o.index].forEach(r=>{r.item.active=!0}))}isIndexOnTheEdges(i){return i+1-this.itemsPerSlide<=0||i+this.itemsPerSlide<=this._slides.length}isIndexInRange(i){return this.singleSlideOffset&&this._slidesWithIndexes?this._slidesWithIndexes.map(r=>r.index).indexOf(i)>=0:i<=this.getLastVisibleIndex()&&i>=this.getFirstVisibleIndex()}hideSlides(){this.slides.forEach(i=>i.active=!1)}isVisibleSlideListLast(){return this._chunkedSlides?this._currentVisibleSlidesIndex===this._chunkedSlides.length-1:!1}isVisibleSlideListFirst(){return this._currentVisibleSlidesIndex===0}moveSliderByOneItem(i){let o,r,c,u;if(this.noWrap){o=this.getFirstVisibleIndex(),r=this.getLastVisibleIndex(),c=i===vt.NEXT?o:r,u=i!==vt.NEXT?o-1:this.isLast(r)?0:r+1;let h=this._slides.get(c);h&&(h.active=!1);let S=this._slides.get(u);S&&(S.active=!0);let D=this.mapSlidesAndIndexes().filter(V=>V.item.active);this.makeSlidesConsistent(D),this.singleSlideOffset&&(this._slidesWithIndexes=D),this.slideRangeChange.emit(this.getVisibleIndexes());return}if(!this._slidesWithIndexes||!this._slidesWithIndexes[0])return;let m;if(o=this._slidesWithIndexes[0].index,r=this._slidesWithIndexes[this._slidesWithIndexes.length-1].index,i===vt.NEXT){this._slidesWithIndexes.shift(),m=this.isLast(r)?0:r+1;let h=this._slides.get(m);h&&this._slidesWithIndexes.push({index:m,item:h})}else{this._slidesWithIndexes.pop(),m=this.isFirst(o)?this._slides.length-1:o-1;let h=this._slides.get(m);h&&(this._slidesWithIndexes=[{index:m,item:h},...this._slidesWithIndexes])}this.hideSlides(),this._slidesWithIndexes.forEach(h=>h.item.active=!0),this.makeSlidesConsistent(this._slidesWithIndexes),this.slideRangeChange.emit(this._slidesWithIndexes.map(h=>h.index))}moveMultilist(i){this.singleSlideOffset?this.moveSliderByOneItem(i):(this.hideSlides(),this.noWrap?this._currentVisibleSlidesIndex=i===vt.NEXT?this._currentVisibleSlidesIndex+1:this._currentVisibleSlidesIndex-1:i===vt.NEXT?this._currentVisibleSlidesIndex=this.isVisibleSlideListLast()?0:this._currentVisibleSlidesIndex+1:this.isVisibleSlideListFirst()?this._currentVisibleSlidesIndex=this._chunkedSlides?this._chunkedSlides.length-1:0:this._currentVisibleSlidesIndex=this._currentVisibleSlidesIndex-1,this._chunkedSlides&&this._chunkedSlides[this._currentVisibleSlidesIndex].forEach(o=>o.item.active=!0),this.slideRangeChange.emit(this.getVisibleIndexes()))}getVisibleIndexes(){if(!this.singleSlideOffset&&this._chunkedSlides)return this._chunkedSlides[this._currentVisibleSlidesIndex].map(i=>i.index);if(this._slidesWithIndexes)return this._slidesWithIndexes.map(i=>i.index)}_select(i){if(isNaN(i)){this.pause();return}if(!this.multilist&&typeof this._currentActiveSlide<"u"){let r=this._slides.get(this._currentActiveSlide);typeof r<"u"&&(r.active=!1)}let o=this._slides.get(i);typeof o<"u"&&(this._currentActiveSlide=i,o.active=!0,this.activeSlide=i,this.activeSlideChange.emit(i))}restartTimer(){this.resetTimer();let i=+this.interval;!isNaN(i)&&i>0&&si(this.platformId)&&(this.currentInterval=this.ngZone.runOutsideAngular(()=>window.setInterval(()=>{let o=+this.interval;this.ngZone.run(()=>{this.isPlaying&&!isNaN(this.interval)&&o>0&&this.slides.length?this.nextSlideFromInterval():this.pause()})},i)))}get multilist(){return this.itemsPerSlide>1}resetTimer(){this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0)}checkDisabledClass(i){return i==="prev"?this.activeSlide===0&&this.noWrap&&!this.multilist||this.isFirstSlideVisible&&this.noWrap&&this.multilist:this.isLast(this.activeSlide)&&this.noWrap&&!this.multilist||this.isLastSlideVisible&&this.noWrap&&this.multilist}};t.\u0275fac=function(o){return new(o||t)(x(Gg),x(qe),x(Rt))},t.\u0275cmp=M({type:t,selectors:[["carousel"]],inputs:{noWrap:"noWrap",noPause:"noPause",showIndicators:"showIndicators",pauseOnFocus:"pauseOnFocus",indicatorsByChunk:"indicatorsByChunk",itemsPerSlide:"itemsPerSlide",singleSlideOffset:"singleSlideOffset",isAnimated:"isAnimated",activeSlide:"activeSlide",startFromIndex:"startFromIndex",interval:"interval"},outputs:{activeSlideChange:"activeSlideChange",slideRangeChange:"slideRangeChange"},ngContentSelectors:cp,decls:7,vars:8,consts:[["tabindex","0",1,"carousel","slide",3,"mouseenter","mouseleave","mouseup","keydown","focusin","focusout","id"],[4,"ngIf"],[1,"carousel-inner",3,"ngStyle"],["class","left carousel-control carousel-control-prev","href","javascript:void(0);","tabindex","0","role","button",3,"disabled","click",4,"ngIf"],["class","right carousel-control carousel-control-next","href","javascript:void(0);","tabindex","0","role","button",3,"disabled","click",4,"ngIf"],[1,"carousel-indicators"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],["type","button","aria-current","true",3,"active","click",4,"ngFor","ngForOf"],["type","button","aria-current","true",3,"click"],["href","javascript:void(0);","tabindex","0","role","button",1,"left","carousel-control","carousel-control-prev",3,"click"],["aria-hidden","true",1,"icon-prev","carousel-control-prev-icon"],[1,"sr-only","visually-hidden"],["href","javascript:void(0);","tabindex","0","role","button",1,"right","carousel-control","carousel-control-next",3,"click"],["aria-hidden","true",1,"icon-next","carousel-control-next-icon"]],template:function(o,r){o&1&&(ji(),s(0,"div",0),v("mouseenter",function(){return r.pause()})("mouseleave",function(){return r.onMouseLeave()})("mouseup",function(){return r.onMouseUp()})("keydown",function(u){return r.keydownPress(u)})("focusin",function(){return r.pauseFocusIn()})("focusout",function(){return r.pauseFocusOut()}),b(1,Vg,3,1,"ng-container",1)(2,zg,3,1,"ng-container",1),s(3,"div",2),zi(4),a(),b(5,Ug,4,3,"a",3)(6,Bg,4,3,"a",4),a()),o&2&&(p("id","carousel"+r.currentId),d(),p("ngIf",!r._bsVer.isBs5&&r.showIndicators&&r.slides.length>1),d(),p("ngIf",r._bsVer.isBs5&&r.showIndicators&&r.slides.length>1),d(),p("ngStyle",Gt(6,Ng,r.multilist?"flex":"block")),d(2),p("ngIf",r.slides.length>1),d(),p("ngIf",r.slides.length>1))},dependencies:[N,z,hs],encapsulation:2});let n=t;return n})(),dp=(()=>{let t=class t{constructor(i){this.active=!1,this.itemWidth="100%",this.order=0,this.isAnimated=!1,this.addClass=!0,this.multilist=!1,this.carousel=i}ngOnInit(){this.carousel.addSlide(this),this.itemWidth=`${100/this.carousel.itemsPerSlide}%`,this.multilist=this.carousel?.itemsPerSlide>1}ngOnDestroy(){this.carousel.removeSlide(this)}};t.\u0275fac=function(o){return new(o||t)(x(Cl))},t.\u0275cmp=M({type:t,selectors:[["slide"]],hostVars:15,hostBindings:function(o,r){o&2&&(_t("aria-hidden",!r.active),ni("width",r.itemWidth)("order",r.order),Z("multilist-margin",r.multilist)("active",r.active)("carousel-animation",r.isAnimated)("item",r.addClass)("carousel-item",r.addClass))},inputs:{active:"active"},ngContentSelectors:cp,decls:2,vars:2,consts:[[1,"item"]],template:function(o,r){o&1&&(ji(),be(0,"div",0),zi(1),ge()),o&2&&Z("active",r.active)},styles:[".carousel-animation[_nghost-%COMP%]{transition:opacity .6s ease,visibility .6s ease;float:left}.carousel-animation.active[_nghost-%COMP%]{opacity:1;visibility:visible}.carousel-animation[_nghost-%COMP%]:not(.active){display:block;position:absolute;opacity:0;visibility:hidden}.multilist-margin[_nghost-%COMP%]{margin-right:auto}.carousel-item[_nghost-%COMP%]{perspective:1000px}"]});let n=t;return n})(),up=(()=>{let t=class t{static forRoot(){return{ngModule:t,providers:[]}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Qe({type:t}),t.\u0275inj=Xe({});let n=t;return n})();var Zt=class n{constructor(t){this.http=t}apiUrl=J.apiUrl+"/promociones";getPromocionesActivas(){return this.http.get(`${this.apiUrl}/activas`)}getPromocionById(t){return this.http.get(`${this.apiUrl}/${t}`)}obtenerTodasLasPromociones(){return this.http.get(`${this.apiUrl}/todas`)}crearPromocion(t){return this.http.post(this.apiUrl,t)}actualizarPromocion(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}eliminarPromocion(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var Zg=()=>["/ofertas"];function Kg(n,t){if(n&1&&_(0,"img",7),n&2){let e=f().$implicit;p("src",e.imagenUrl,ve)}}function Jg(n,t){if(n&1&&(s(0,"slide"),b(1,Kg,1,1,"img",4),s(2,"div",5)(3,"h1"),l(4),a(),s(5,"p"),l(6),a(),s(7,"a",6),l(8,"Ver M\xE1s"),a()()()),n&2){let e=t.$implicit;d(),p("ngIf",e.imagenUrl),d(3),E(e.titulo),d(2),E(e.descripcion),d(),p("routerLink",qo(4,Zg))}}function Xg(n,t){if(n&1&&(s(0,"div",1)(1,"carousel",2),b(2,Jg,9,5,"slide",3),a()()),n&2){let e=f();d(),p("isAnimated",!0)("showIndicators",!0)("interval",5e3),d(),p("ngForOf",e.promociones)}}var na=class n{constructor(t){this.promocionService=t}promociones=[];ngOnInit(){this.promocionService.getPromocionesActivas().subscribe(t=>{this.promociones=t})}static \u0275fac=function(e){return new(e||n)(x(Zt))};static \u0275cmp=M({type:n,selectors:[["app-carrusel-principal"]],decls:1,vars:1,consts:[["class","announcement-bar","id","carrusel",4,"ngIf"],["id","carrusel",1,"announcement-bar"],[3,"isAnimated","showIndicators","interval"],[4,"ngFor","ngForOf"],["alt","slide de promoci\xF3n","class","slide-image",3,"src",4,"ngIf"],[1,"carousel-caption"],[1,"btn","btn-primary",3,"routerLink"],["alt","slide de promoci\xF3n",1,"slide-image",3,"src"]],template:function(e,i){e&1&&b(0,Xg,3,4,"div",0),e&2&&p("ngIf",i.promociones.length>0)},dependencies:[k,z,N,up,dp,Cl,ee],styles:["[_nghost-%COMP%]     .carousel{height:500px}.slide-image[_ngcontent-%COMP%]{width:100%;height:500px;object-fit:cover;filter:brightness(.6)}.carousel-caption[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;color:#fff;width:80%;max-width:700px}.carousel-caption[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;font-weight:700;margin-bottom:20px;text-shadow:2px 2px 8px rgba(0,0,0,.7)}.carousel-caption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;margin-bottom:30px;text-shadow:1px 1px 6px rgba(0,0,0,.7)}.carousel-caption[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:2px solid white;padding:12px 30px;font-size:16px;font-weight:700;text-decoration:none;border-radius:5px;transition:all .3s ease}.carousel-caption[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#fff;color:#333}[_nghost-%COMP%]     .carousel-indicators button{width:12px;height:12px;border-radius:50%;margin:0 8px;background-color:#ffffff80}[_nghost-%COMP%]     .carousel-indicators .active{background-color:#fff}"]})};var ia=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-inicio"]],decls:19,vars:0,consts:[[1,"hero-section"],[1,"hero-container"],[1,"hero-text"],[1,"hero-buttons"],["routerLink","/catalogo",1,"btn","btn-primary"],["href","#contacto",1,"btn","btn-secondary"],[1,"hero-image"],["src","assets/imagenes/logo.png","alt","Emblema de Reposter\xEDa D'Juancito"]],template:function(e,i){e&1&&(_(0,"app-carrusel-principal"),s(1,"section",0)(2,"div",1)(3,"div",2)(4,"h1"),l(5,'"Donde el Sabor se Convierte en Recuerdo"'),a(),s(6,"p"),l(7," Bienvenidos a nuestro rinc\xF3n dulce, donde cada pastel, torta y postre se hace con amor y dedicaci\xF3n. Aqu\xED horneamos momentos especiales, combinando sabor, creatividad y detalles \xFAnicos que transforman cualquier ocasi\xF3n en un recuerdo inolvidable. "),a(),s(8,"div",3)(9,"a",4),l(10,"Realiza tu pedido"),a(),s(11,"a",5),l(12,"Env\xEDanos un Mensaje"),a()()(),s(13,"div",6),_(14,"img",7),a()()(),_(15,"app-productos-destacados")(16,"app-resenas")(17,"app-llamada-a-catalogo")(18,"app-contacto"))},dependencies:[ee,Ei,jr,Xr,Qr,na],styles:[".hero-section[_ngcontent-%COMP%]{background-color:#fdf6f2;padding:80px 40px;font-family:Arial,sans-serif}.hero-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:60px}.hero-text[_ngcontent-%COMP%]{flex:1}.hero-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:52px;color:#333;margin-bottom:25px;line-height:1.2}.hero-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#3d3d3d;line-height:1.7;margin-bottom:35px}.hero-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.hero-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:15px 30px;border-radius:8px;text-decoration:none;font-weight:700;font-size:16px;transition:all .3s ease}.hero-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#eb7221;color:#fff}.hero-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#eb7221}.hero-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:transparent;color:#333;border:2px solid #333}.hero-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background-color:#eb7221;color:#fff;border-color:#eb7221}.hero-image[_ngcontent-%COMP%]{flex-basis:400px}.hero-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:50%}"]})};var Ti=class n{constructor(t){this.http=t}baseUrl=J.apiUrl;subirImagen(t){let e=new FormData;return e.append("file",t),this.http.post(`${this.baseUrl}/cloudinary/subir`,e)}getProductos(){return this.http.get(`${this.baseUrl}/productos`)}getProductosPorCategoria(t){return this.http.get(`${this.baseUrl}/productos/categoria/${t}`)}getProductosPersonalizables(){return this.http.get(`${this.baseUrl}/productos/personalizables`)}getProductosPredeterminados(){return this.http.get(`${this.baseUrl}/productos/predeterminados`)}getProductosPorNombre(t){return this.http.get(`${this.baseUrl}/productos/buscar/${t}`)}crearProducto(t){return this.http.post(`${this.baseUrl}/productos`,t)}actualizarProducto(t,e){return this.http.put(`${this.baseUrl}/productos/${t}`,e)}eliminarProducto(t){return this.http.delete(`${this.baseUrl}/productos/${t}`)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var Be=class n{items=new Ge([]);items$=this.items.asObservable();constructor(){this.cargar()}agregarAlCarrito(t){if("precioUnitario"in t)this.agregarItem(t);else{let e=t,i={productoId:e.productoId,nombre:e.nombre,imagenUrl:e.imagenUrl,precioBase:e.precioBase,precioUnitario:e.precioBase,cantidad:1,subtotal:e.precioBase,personalizable:e.personalizable,personalizacion:e.personalizacion};this.agregarItem(i)}}agregarItem(t){let e=this.items.getValue(),i=e.find(o=>o.productoId===t.productoId);i?(i.cantidad+=t.cantidad,i.subtotal=i.precioUnitario*i.cantidad):(t.subtotal=t.precioUnitario*t.cantidad,e.push(t)),this.items.next(e),this.guardar()}cambiarCantidad(t,e){if(e<1)return;let i=this.items.getValue(),o=i.find(r=>r.productoId===t);o&&(o.cantidad=e,o.subtotal=o.precioUnitario*e,this.items.next(i),this.guardar())}eliminar(t){let e=this.items.getValue().filter(i=>i.productoId!==t);this.items.next(e),this.guardar()}obtenerItems(){return this.items.getValue()}calcularTotal(){return this.items.getValue().reduce((t,e)=>t+e.subtotal,0)}calcularAhorroTotal(){return this.items.getValue().reduce((t,e)=>t+(e.precioBase-e.precioUnitario)*e.cantidad,0)}vaciar(){this.items.next([]),localStorage.removeItem("carrito_djuancito")}limpiar(){this.vaciar()}guardar(){localStorage.setItem("carrito_djuancito",JSON.stringify(this.items.getValue()))}cargar(){let t=localStorage.getItem("carrito_djuancito");if(t)try{this.items.next(JSON.parse(t))}catch(e){console.error("Error cargando carrito",e)}}actualizarPersonalizacion(t,e){let i=this.items.getValue(),o=i.find(r=>r.productoId===t);if(o){o.personalizacion=e;let r=e.costoAdicional||0;o.precioUnitario=o.precioBase+r,o.subtotal=o.precioUnitario*o.cantidad,this.items.next(i),this.guardar()}else console.error(`No se encontr\xF3 el producto con ID ${t} en el carrito.`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function pp(n){n||(n=w(On));let t=new Kn(e=>{if(n.destroyed){e.next();return}return n.onDestroy(e.next.bind(e))});return e=>e.pipe(Ri(t))}var bp=(function(n){return n.top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top",n})(bp||{}),Pl=(function(n){return n.top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top",n})(Pl||{});function Yn(n,t){if(n.nodeType!==1)return[];let i=n.ownerDocument.defaultView?.getComputedStyle(n,null);return t?i&&i[t]:i}function Ml(n){if(!n)return document.documentElement;let t=null,e=n?.offsetParent,i;for(;e===t&&n.nextElementSibling&&i!==n.nextElementSibling;)i=n.nextElementSibling,e=i.offsetParent;let o=e&&e.nodeName;return!o||o==="BODY"||o==="HTML"?i?i.ownerDocument.documentElement:document.documentElement:e&&["TH","TD","TABLE"].indexOf(e.nodeName)!==-1&&Yn(e,"position")==="static"?Ml(e):e}function Qg(n){let{nodeName:t}=n;return t==="BODY"?!1:t==="HTML"||Ml(n.firstElementChild)===n}function wl(n){return n.parentNode!==null?wl(n.parentNode):n}function sa(n,t){if(!n||!n.nodeType||!t||!t.nodeType)return document.documentElement;let e=n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=e?n:t,o=e?t:n,r=document.createRange();r.setStart(i,0),r.setEnd(o,0);let c=r.commonAncestorContainer;if(n!==c&&t!==c||i.contains(o))return Qg(c)?c:Ml(c);let u=wl(n);return u.host?sa(u.host,t):sa(n,wl(t).host)}function _p(n){if(!n||!n.parentElement)return document.documentElement;let t=n.parentElement;for(;t?.parentElement&&Yn(t,"transform")==="none";)t=t.parentElement;return t||document.documentElement}function mp(n,t){let e=t==="x"?"Left":"Top",i=e==="Left"?"Right":"Bottom";return parseFloat(n[`border${e}Width`])+parseFloat(n[`border${i}Width`])}function fp(n,t,e){let i=t,o=e;return Math.max(i[`offset${n}`],i[`scroll${n}`],o[`client${n}`],o[`offset${n}`],o[`scroll${n}`],0)}function xp(n){let t=n.body,e=n.documentElement;return{height:fp("Height",t,e),width:fp("Width",t,e)}}function Io(n){return ne(O({},n),{right:(n.left||0)+n.width,bottom:(n.top||0)+n.height})}function eh(n){return n!==""&&!isNaN(parseFloat(n))&&isFinite(Number(n))}function Se(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function gp(n){let t=n.getBoundingClientRect();if(!(t&&Se(t.top)&&Se(t.left)&&Se(t.bottom)&&Se(t.right)))return t;let e={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},i=n.nodeName==="HTML"?xp(n.ownerDocument):void 0,o=i?.width||n.clientWidth||Se(t.right)&&Se(e.left)&&t.right-e.left||0,r=i?.height||n.clientHeight||Se(t.bottom)&&Se(e.top)&&t.bottom-e.top||0,c=n.offsetWidth-o,u=n.offsetHeight-r;if(c||u){let m=Yn(n);c-=mp(m,"x"),u-=mp(m,"y"),e.width-=c,e.height-=u}return Io(e)}function Dl(n,t,e=!1){let i=t.nodeName==="HTML",o=gp(n),r=gp(t),c=Yn(t),u=parseFloat(c.borderTopWidth),m=parseFloat(c.borderLeftWidth);e&&i&&(r.top=Math.max(r.top??0,0),r.left=Math.max(r.left??0,0));let h=Io({top:(o.top??0)-(r.top??0)-u,left:(o.left??0)-(r.left??0)-m,width:o.width,height:o.height});if(h.marginTop=0,h.marginLeft=0,i){let S=parseFloat(c.marginTop),D=parseFloat(c.marginLeft);Se(h.top)&&(h.top-=u-S),Se(h.bottom)&&(h.bottom-=u-S),Se(h.left)&&(h.left-=m-D),Se(h.right)&&(h.right-=m-D),h.marginTop=S,h.marginLeft=D}return h}function Ol(n){return n.nodeName==="HTML"?n:n.parentNode||n.host}function Cp(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body;default:}let{overflow:t,overflowX:e,overflowY:i}=Yn(n);return/(auto|scroll|overlay)/.test(String(t)+String(i)+String(e))?n:Cp(Ol(n))}function hp(n,t="top"){let e=t==="top"?"scrollTop":"scrollLeft",i=n.nodeName;if(i==="BODY"||i==="HTML"){let o=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||o)[e]}return n[e]}function th(n,t=!1){let e=n.ownerDocument.documentElement,i=Dl(n,e),o=Math.max(e.clientWidth,window.innerWidth||0),r=Math.max(e.clientHeight,window.innerHeight||0),c=t?0:hp(e),u=t?0:hp(e,"left"),m={top:c-Number(i?.top)+Number(i?.marginTop),left:u-Number(i?.left)+Number(i?.marginLeft),width:o,height:r};return Io(m)}function yp(n){let t=n.nodeName;return t==="BODY"||t==="HTML"?!1:Yn(n,"position")==="fixed"?!0:yp(Ol(n))}function Il(n,t,e=0,i,o=!1){let r={top:0,left:0},c=o?_p(n):sa(n,t);if(i==="viewport")r=th(c,o);else{let u;i==="scrollParent"?(u=Cp(Ol(t)),u.nodeName==="BODY"&&(u=n.ownerDocument.documentElement)):i==="window"?u=n.ownerDocument.documentElement:u=i;let m=Dl(u,c,o);if(m&&u.nodeName==="HTML"&&!yp(c)){let{height:h,width:S}=xp(n.ownerDocument);Se(r.top)&&Se(m.top)&&Se(m.marginTop)&&(r.top+=m.top-m.marginTop),Se(r.top)&&(r.bottom=Number(h)+Number(m.top)),Se(r.left)&&Se(m.left)&&Se(m.marginLeft)&&(r.left+=m.left-m.marginLeft),Se(r.top)&&(r.right=Number(S)+Number(m.left))}else m&&(r=m)}return Se(r.left)&&(r.left+=e),Se(r.top)&&(r.top+=e),Se(r.right)&&(r.right-=e),Se(r.bottom)&&(r.bottom-=e),r}function nh({width:n,height:t}){return n*t}function wp(n,t,e,i,o=["top","bottom","right","left"],r="viewport",c=0){if(n.indexOf("auto")===-1)return n;let u=Il(e,i,c,r),m={top:{width:u?.width??0,height:(t?.top??0)-(u?.top??0)},right:{width:(u?.right??0)-(t?.right??0),height:u?.height??0},bottom:{width:u?.width??0,height:(u?.bottom??0)-(t?.bottom??0)},left:{width:(t.left??0)-(u?.left??0),height:u?.height??0}},h=Object.keys(m).map(L=>ne(O({position:L},m[L]),{area:nh(m[L])})).sort((L,B)=>B.area-L.area),S=h.filter(({width:L,height:B})=>L>=e.clientWidth&&B>=e.clientHeight);S=S.filter(({position:L})=>o.some(B=>B===L));let D=S.length>0?S[0].position:h[0].position,V=n.split(" ")[1];return e.className=e.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${yn().isBs5?Pl[D]:D}`),D+(V?`-${V}`:"")}function ih(n){return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(n.offsets.target.left??0),top:Math.round(n.offsets.target.top??0),bottom:Math.round(n.offsets.target.bottom??0),right:Math.floor(n.offsets.target.right??0)}}function oh(n){let t={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,e=>t[e])}function rh(n){return n==="right"?"left":n==="left"?"right":n}var oa=(n,t=0)=>n?parseFloat(n):t;function Ep(n){let e=n.ownerDocument.defaultView?.getComputedStyle(n),i=oa(e?.marginTop)+oa(e?.marginBottom),o=oa(e?.marginLeft)+oa(e?.marginRight);return{width:Number(n.offsetWidth)+o,height:Number(n.offsetHeight)+i}}function Sp(n,t,e){let i=e?_p(n):sa(n,t);return Dl(t,i,e)}function El(n,t,e){let i=e.split(" ")[0],o=Ep(n),r={width:o.width,height:o.height},c=["right","left"].indexOf(i)!==-1,u=c?"top":"left",m=c?"left":"top",h=c?"height":"width",S=c?"width":"height";return r[u]=(t[u]??0)+t[h]/2-o[h]/2,r[m]=i===m?(t[m]??0)-o[S]:t[oh(m)]??0,r}function Pp(n,t){return!!n.modifiers[t]?.enabled}var ah={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function ra(n,t){return yn().isBs5?ah[t].includes(n):!1}function sh(n){return yn().isBs5?ra(n,"end")?"ms-2":ra(n,"start")?"me-2":ra(n,"top")?"mb-2":ra(n,"bottom")?"mt-2":"":""}function lh(n,t){let e=n.instance.target,i=e.className,o=yn().isBs5?Pl[n.placement]:n.placement;if(n.placementAuto&&(i=i.replace(/bs-popover-auto/g,`bs-popover-${o}`),i=i.replace(/ms-2|me-2|mb-2|mt-2/g,""),i=i.replace(/bs-tooltip-auto/g,`bs-tooltip-${o}`),i=i.replace(/\sauto/g,` ${o}`),i.indexOf("popover")!==-1&&(i=i+" "+sh(o)),i.indexOf("popover")!==-1&&i.indexOf("popover-auto")===-1&&(i+=" popover-auto"),i.indexOf("tooltip")!==-1&&i.indexOf("tooltip-auto")===-1&&(i+=" tooltip-auto")),i=i.replace(/left|right|top|bottom|end|start/g,`${o.split(" ")[0]}`),t){t.setAttribute(e,"class",i);return}e.className=i}function vp(n,t,e){!n||!t||Object.keys(t).forEach(i=>{let o="";if(["width","height","top","right","bottom","left"].indexOf(i)!==-1&&eh(t[i])&&(o="px"),e){e.setStyle(n,i,`${String(t[i])}${o}`);return}n.style[i]=String(t[i])+o})}function ch(n){let t=n.offsets.target,e=n.instance.target.querySelector(".arrow");if(!e)return n;let i=["left","right"].indexOf(n.placement.split(" ")[0])!==-1,o=i?"height":"width",r=i?"Top":"Left",c=r.toLowerCase(),u=i?"left":"top",m=i?"bottom":"right",h=Ep(e)[o],S=n.placement.split(" ")[1];(n.offsets.host[m]??0)-h<(t[c]??0)&&(t[c]-=(t[c]??0)-((n.offsets.host[m]??0)-h)),Number(n.offsets.host[c])+Number(h)>(t[m]??0)&&(t[c]+=Number(n.offsets.host[c])+Number(h)-Number(t[m])),t=Io(t);let D=Yn(n.instance.target),V=parseFloat(D[`margin${r}`])||0,L=parseFloat(D[`border${r}Width`])||0,B;if(!S)B=Number(n.offsets.host[c])+Number(n.offsets.host[o]/2-h/2);else{let G=parseFloat(D.borderRadius)||0,Y=Number(V+L+G);B=c===S?Number(n.offsets.host[c])+Y:Number(n.offsets.host[c])+Number(n.offsets.host[o]-Y)}let ye=B-(t[c]??0)-V-L;return ye=Math.max(Math.min(t[o]-(h+5),ye),0),n.offsets.arrow={[c]:Math.round(ye),[u]:""},n.instance.arrow=e,n}function dh(n){if(n.offsets.target=Io(n.offsets.target),!Pp(n.options,"flip"))return n.offsets.target=O(O({},n.offsets.target),El(n.instance.target,n.offsets.host,n.placement)),n;let t=Il(n.instance.target,n.instance.host,0,"viewport",!1),e=n.placement.split(" ")[0],i=n.placement.split(" ")[1]||"",o=n.offsets.host,r=n.instance.target,c=n.instance.host,u=wp("auto",o,r,c,n.options.allowedPositions),m=[e,u];return m.forEach((h,S)=>{if(e!==h||m.length===S+1)return;e=n.placement.split(" ")[0];let D=e==="left"&&Math.floor(n.offsets.target.right??0)>Math.floor(n.offsets.host.left??0)||e==="right"&&Math.floor(n.offsets.target.left??0)<Math.floor(n.offsets.host.right??0)||e==="top"&&Math.floor(n.offsets.target.bottom??0)>Math.floor(n.offsets.host.top??0)||e==="bottom"&&Math.floor(n.offsets.target.top??0)<Math.floor(n.offsets.host.bottom??0),V=Math.floor(n.offsets.target.left??0)<Math.floor(t.left??0),L=Math.floor(n.offsets.target.right??0)>Math.floor(t.right??0),B=Math.floor(n.offsets.target.top??0)<Math.floor(t.top??0),ye=Math.floor(n.offsets.target.bottom??0)>Math.floor(t.bottom??0),G=e==="left"&&V||e==="right"&&L||e==="top"&&B||e==="bottom"&&ye,Y=["top","bottom"].indexOf(e)!==-1,we=Y&&i==="left"&&V||Y&&i==="right"&&L||!Y&&i==="left"&&B||!Y&&i==="right"&&ye;(D||G||we)&&((D||G)&&(e=m[S+1]),we&&(i=rh(i)),n.placement=e+(i?` ${i}`:""),n.offsets.target=O(O({},n.offsets.target),El(n.instance.target,n.offsets.host,n.placement)))}),n}function uh(n,t,e,i){if(!n||!t)return;let o=Sp(n,t);!e.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!e.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(e="auto");let r=!!e.match(/auto/g),c=e.match(/auto\s(left|right|top|bottom|start|end)/)?e.split(" ")[1]||"auto":e,u=c.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);u&&(c=u[1]+(u[2]?` ${u[2]}`:"")),["left right","right left","top bottom","bottom top"].indexOf(c)!==-1&&(c="auto"),c=wp(c,o,n,t,i?i.allowedPositions:void 0);let m=El(n,o,c);return{options:i||{modifiers:{}},instance:{target:n,host:t,arrow:void 0},offsets:{target:m,host:o,arrow:void 0},positionFixed:!1,placement:c,placementAuto:r}}function ph(n){if(!Pp(n.options,"preventOverflow"))return n;let t="transform",e=n.instance.target.style,{top:i,left:o,[t]:r}=e;e.top="",e.left="",e[t]="";let c=Il(n.instance.target,n.instance.host,0,n.options.modifiers.preventOverflow?.boundariesElement||"scrollParent",!1);e.top=i,e.left=o,e[t]=r;let u=["left","right","top","bottom"],m={primary(h){let S=n.offsets.target[h];return(n.offsets.target[h]??0)<(c[h]??0)&&(S=Math.max(n.offsets.target[h]??0,c[h]??0)),{[h]:S}},secondary(h){let S=h==="right",D=S?"left":"top",V=S?"width":"height",L=n.offsets.target[D];return(n.offsets.target[h]??0)>(c[h]??0)&&(L=Math.min(n.offsets.target[D]??0,(c[h]??0)-n.offsets.target[V])),{[D]:L}}};return u.forEach(h=>{let S=["left","top","start"].indexOf(h)!==-1?m.primary:m.secondary;n.offsets.target=O(O({},n.offsets.target),S(h))}),n}function mh(n){let t=n.placement,e=t.split(" ")[0],i=t.split(" ")[1];if(i){let{host:o,target:r}=n.offsets,c=["bottom","top"].indexOf(e)!==-1,u=c?"left":"top",m=c?"width":"height",h={start:{[u]:o[u]},end:{[u]:(o[u]??0)+o[m]-r[m]}};n.offsets.target=ne(O({},r),{[u]:u===i?h.start[u]:h.end[u]})}return n}var Sl=class{position(t,e){return this.offset(t,e)}offset(t,e){return Sp(e,t)}positionElements(t,e,i,o,r){let c=[dh,mh,ph,ch],u=bp[i],m=uh(e,t,u,r);if(m)return c.reduce((h,S)=>S(h),m)}},fh=new Sl;function gh(n,t,e,i,o,r){let c=fh.positionElements(n,t,e,i,o);if(!c)return;let u=ih(c);vp(t,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${u.left}px, ${u.top}px, 0px)`},r),c.instance.arrow&&vp(c.instance.arrow,c.offsets.arrow,r),lh(c,r)}var Ao=(()=>{let t=class t{constructor(i,o,r){this.update$$=new at,this.positionElements=new Map,this.isDisabled=!1,si(r)&&i.runOutsideAngular(()=>{this.triggerEvent$=$l(Wa(window,"scroll",{passive:!0}),Wa(window,"resize",{passive:!0}),U(0,jl),this.update$$),this.triggerEvent$.pipe(pp()).subscribe(()=>{this.isDisabled||this.positionElements.forEach(c=>{gh(aa(c.target),aa(c.element),c.attachment,c.appendToBody,this.options,o.createRenderer(null,null))})})})}position(i){this.addPositionElement(i)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(i){this.positionElements.set(aa(i.element),i)}calcPosition(){this.update$$.next(null)}deletePositionElement(i){this.positionElements.delete(aa(i))}setOptions(i){this.options=i}};t.\u0275fac=function(o){return new(o||t)(F(qe),F(pn),F(Rt))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function aa(n){return typeof n=="string"?document.querySelector(n):n instanceof Pe?n.nativeElement:n??null}var Zn=class{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}},Al=class{constructor(t,e,i,o,r,c,u,m,h){this._viewContainerRef=t,this._renderer=e,this._elementRef=i,this._injector=o,this._componentFactoryResolver=r,this._ngZone=c,this._applicationRef=u,this._posService=m,this._document=h,this.onBeforeShow=new le,this.onShown=new le,this.onBeforeHide=new le,this.onHidden=new le,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return this._isHiding?!1:!!this._componentRef}attach(t){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(t),this}to(t){return this.container=t||this.container,this}position(t){return t?(this.attachment=t.attachment||this.attachment,this._elementRef=t.target||this._elementRef,this):this}provide(t){return this._providers.push(t),this}show(t={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(t.content,t.context,t.initialState);let e=lt.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(e,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,t),this.container instanceof Pe&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),typeof this.container=="string"&&typeof this._document<"u"){let i=this._document.querySelector(this.container)||this._document.querySelector(this.containerDefaultSelector);if(!i)return;i.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(t.id?{id:t.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(t){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);let e=this._componentRef.location.nativeElement;return e.parentNode?.removeChild(e),this._contentRef?.componentRef?.destroy(),this._viewContainerRef&&this._contentRef?.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef?.viewRef?.destroy(),this._componentRef?.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(t?{id:t}:null),this}toggle(){if(this.isShown){this.hide();return}this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(t){this.triggers=t.triggers||this.triggers,this._listenOpts.outsideClick=t.outsideClick,this._listenOpts.outsideEsc=t.outsideEsc,t.target=t.target||this._elementRef?.nativeElement;let e=this._listenOpts.hide=()=>t.hide?t.hide():void this.hide(),i=this._listenOpts.show=r=>{t.show?t.show(r):this.show(r),r()},o=r=>{this.isShown?e():i(r)};return this._renderer&&(this._unregisterListenersFn=op(this._renderer,{target:t.target,triggers:t.triggers,show:i,hide:e,toggle:o})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(t,e){return t&&e&&(this._inlineViewRef=t.createEmbeddedView(e)),this}_registerOutsideClick(){if(!this._componentRef||!this._componentRef.location)return;let t=Function.prototype,e=Function.prototype;if(this._listenOpts.outsideClick){let i=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(t=rp(this._renderer,{targets:[i,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}if(this._listenOpts.outsideEsc&&this._renderer&&this._elementRef){let i=this._componentRef.location.nativeElement;e=ap(this._renderer,{targets:[i,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()})}this._globalListener=()=>{t(),e()}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef?.location,target:this._elementRef,attachment:this.attachment,appendToBody:this.container==="body"})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{this._componentRef&&this._posService.calcPosition()}))}_unsubscribePositioning(){this._zoneSubscription&&(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(t,e,i){if(!t)return new Zn([]);if(t instanceof Li){if(this._viewContainerRef){let c=this._viewContainerRef.createEmbeddedView(t,e);return c.markForCheck(),new Zn([c.rootNodes],c)}let r=t.createEmbeddedView({});return this._applicationRef.attachView(r),new Zn([r.rootNodes],r)}if(typeof t=="function"){let r=this._componentFactoryResolver.resolveComponentFactory(t),c=lt.create({providers:this._providers,parent:this._injector}),u=r.create(c);return Object.assign(u.instance,i),this._applicationRef.attachView(u.hostView),new Zn([[u.location.nativeElement]],u.hostView,u)}let o=this._renderer?[this._renderer.createText(`${t}`)]:[];return new Zn([o])}},To=(()=>{let t=class t{constructor(i,o,r,c,u,m){this._componentFactoryResolver=i,this._ngZone=o,this._injector=r,this._posService=c,this._applicationRef=u,this._document=m}createLoader(i,o,r){return new Al(o,r,i,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService,this._document)}};t.\u0275fac=function(o){return new(o||t)(F(uc),F(qe),F(lt),F(Ao),F(kn),F(me))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function Mp(n){return n!=null&&`${n}`!="false"}var Tl;try{Tl=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Tl=!1}var Op=(()=>{let t=class t{constructor(i){this._platformId=i,this.isBrowser=this._platformId?si(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Tl)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(o){return new(o||t)(F(Rt))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Ip=(()=>{let t=class t{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return _h(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let o=bh(Mh(i));if(o&&(Dp(o)===-1||!this.isVisible(o)))return!1;let r=i.nodeName.toLowerCase(),c=Dp(i);return i.hasAttribute("contenteditable")?c!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!Sh(i)?!1:r==="audio"?i.hasAttribute("controls")?c!==-1:!1:r==="video"?c===-1?!1:c!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,o){return Ph(i)&&!this.isDisabled(i)&&(o?.ignoreVisibility||this.isVisible(i))}};t.\u0275fac=function(o){return new(o||t)(F(Op))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function bh(n){try{return n.frameElement}catch{return null}}function _h(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function xh(n){let t=n.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function Ch(n){return wh(n)&&n.type=="hidden"}function yh(n){return Eh(n)&&n.hasAttribute("href")}function wh(n){return n.nodeName.toLowerCase()=="input"}function Eh(n){return n.nodeName.toLowerCase()=="a"}function Ap(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let t=n.getAttribute("tabindex");return t=="-32768"?!1:!!(t&&!isNaN(parseInt(t,10)))}function Dp(n){if(!Ap(n))return null;let t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function Sh(n){let t=n.nodeName.toLowerCase(),e=t==="input"&&n.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function Ph(n){return Ch(n)?!1:xh(n)||yh(n)||n.hasAttribute("contenteditable")||Ap(n)}function Mh(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var Dh=(()=>{let t=class t{constructor(){this._focusTrapStack=[]}register(i){this._focusTrapStack=this._focusTrapStack.filter(r=>r!==i);let o=this._focusTrapStack;o.length&&o[o.length-1]._disable(),o.push(i),i._enable()}deregister(i){i._disable();let o=this._focusTrapStack,r=o.indexOf(i);r!==-1&&(o.splice(r,1),o.length&&o[o.length-1]._enable())}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var kl=class{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,i,o,r=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let i=0;i<e.length;i++)e[i].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[i]):e[i].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[i]);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){let t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){let e=this._getFirstTabbableElement(t);return e?.focus(),!!e}return t.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){let t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){let t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let i=0;i<e.length;i++){let o=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(o)return o}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let i=e.length-1;i>=0;i--){let o=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(o)return o}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(cn(1)).subscribe(t)}},Oh=(()=>{let t=class t{constructor(i,o,r){this._checker=i,this._ngZone=o,this._document=r}create(i,o=!1){return new kl(i,this._checker,this._ngZone,this._document,o)}};t.\u0275fac=function(o){return new(o||t)(F(Ip),F(qe),F(me))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Tp=(()=>{let t=class t{get enabled(){return this.focusTrap.enabled}set enabled(i){this.focusTrap.enabled=Mp(i)}get autoCapture(){return this._autoCapture}set autoCapture(i){this._autoCapture=Mp(i)}constructor(i,o,r){this._elementRef=i,this._focusTrapFactory=o,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=r,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(i){let o=i.autoCapture;o&&!o.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}};t.\u0275fac=function(o){return new(o||t)(x(Pe),x(Oh),x(me))},t.\u0275dir=oe({type:t,selectors:[["","focusTrap",""]],inputs:{enabled:[0,"cdkTrapFocus","enabled"],autoCapture:[0,"cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[Ee([Dh,Op,Ip]),Et]});let n=t;return n})(),kp=(()=>{let t=class t{static forRoot(){return{ngModule:t,providers:[]}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Qe({type:t}),t.\u0275inj=Xe({imports:[k]});let n=t;return n})();var Ih=["*"],wn=(()=>{let t=class t{constructor(){this.hide=()=>{},this.setClass=()=>{}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"platform"});let n=t;return n})();var Fp=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"platform"});let n=t;return n})(),la={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},Ah=new W("override-default-config"),Kt={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",IN:"in",SHOW:"show"};var ca={MODAL:300,BACKDROP:150},Fl={BACKRDOP:"backdrop-click",ESC:"esc",BACK:"browser-back-navigation-clicked"},Th=(()=>{let t=class t{get isAnimated(){return this._isAnimated}set isAnimated(i){this._isAnimated=i}get isShown(){return this._isShown}set isShown(i){this._isShown=i,i?this.renderer.addClass(this.element.nativeElement,`${Kt.SHOW}`):this.renderer.removeClass(this.element.nativeElement,`${Kt.SHOW}`)}constructor(i,o){this._isAnimated=!1,this._isShown=!1,this.element=i,this.renderer=o}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,`${Kt.FADE}`),ta.reflow(this.element.nativeElement)),this.isShown=!0}};t.\u0275fac=function(o){return new(o||t)(x(Pe),x(He))},t.\u0275cmp=M({type:t,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(o,r){},encapsulation:2});let n=t;return n})(),kh=1,zt=(()=>{let t=class t{constructor(i,o,r){this.clf=o,this.modalDefaultOption=r,this.onShow=new le,this.onShown=new le,this.onHide=new le,this.onHidden=new le,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.lastHiddenId=null,this.loaders=[],this._focusEl=null,this._backdropLoader=this.clf.createLoader(),this._renderer=i.createRenderer(null,null),this.config=r?Object.assign({},la,r):la}show(i,o){this._focusEl=Fe.activeElement,this.modalsCount++,this.lastHiddenId=null,this._createLoaders();let r=o?.id||kh++;return this.config=this.modalDefaultOption?Object.assign({},la,this.modalDefaultOption,o):Object.assign({},la,o),this.config.id=r,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(i)}hide(i){this.lastHiddenId!==i&&(this.lastHiddenId=i,(this.modalsCount===1||i==null)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&i!=null?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(i),this.removeLoaders(i)},this.config.animated?ca.BACKDROP:0),this._focusEl&&this._focusEl.focus())}_showBackdrop(){let i=this.config.backdrop===!0||this.config.backdrop==="static",o=!this.backdropRef||!this.backdropRef.instance.isShown;this.modalsCount===1&&(this.removeBackdrop(),i&&o&&(this._backdropLoader.attach(Th).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){if(!this.backdropRef)return;this.backdropRef.instance.isShown=!1;let i=this.config.animated?ca.BACKDROP:0;setTimeout(()=>this.removeBackdrop(),i)}_showModal(i){let o=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(let u of this.config.providers)o.provide(u);let r=new wn,c=o.provide({provide:Fp,useValue:this.config}).provide({provide:wn,useValue:r}).attach(Fh).to("body");return r.hide=()=>c.instance?.hide(),r.setClass=u=>{c.instance&&(c.instance.config.class=u)},r.onHidden=new le,r.onHide=new le,this.copyEvent(o.onBeforeHide,r.onHide),this.copyEvent(o.onHidden,r.onHidden),c.show({content:i,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),c.instance&&(c.instance.level=this.getModalsCount(),r.content=o.getInnerComponent(),r.id=c.instance.config?.id),r}_hideModal(i){if(i!=null){let o=this.loaders.findIndex(c=>c.instance?.config.id===i),r=this.loaders[o];r&&r.hide(i)}else this.loaders.forEach(o=>{o.instance&&o.hide(o.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(i){this.lastDismissReason=i}removeBackdrop(){this._renderer.removeClass(Fe.body,Kt.OPEN),this._renderer.setStyle(Fe.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=Fe.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){Fe&&(this.originalBodyPadding=parseInt(window.getComputedStyle(Fe.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(Fe.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){Fe.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){let i=this._renderer.createElement("div");this._renderer.addClass(i,Kt.SCROLLBAR_MEASURER),this._renderer.appendChild(Fe.body,i);let o=i.offsetWidth-i.clientWidth;return this._renderer.removeChild(Fe.body,i),o}_createLoaders(){let i=this.clf.createLoader();this.copyEvent(i.onBeforeShow,this.onShow),this.copyEvent(i.onShown,this.onShown),this.copyEvent(i.onBeforeHide,this.onHide),this.copyEvent(i.onHidden,this.onHidden),this.loaders.push(i)}removeLoaders(i){if(i!=null){let o=this.loaders.findIndex(r=>r.instance?.config.id===i);o>=0&&(this.loaders.splice(o,1),this.loaders.forEach((r,c)=>{r.instance&&(r.instance.level=c+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(i,o){i.subscribe(r=>{o.emit(this.lastDismissReason||r)})}};t.\u0275fac=function(o){return new(o||t)(F(pn),F(To),F(Ah,8))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"platform"});let n=t;return n})(),Fh=(()=>{let t=class t{constructor(i,o,r){this._element=o,this._renderer=r,this.isShown=!1,this.isAnimated=!1,this._focusEl=null,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},i)}ngOnInit(){this._focusEl=Fe.activeElement,this.isAnimated&&this._renderer.addClass(this._element.nativeElement,Kt.FADE),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,Kt.SHOW)},this.isAnimated?ca.BACKDROP:0),Fe&&Fe.body&&(this.bsModalService&&this.bsModalService.getModalsCount()===1&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(Fe.body,Kt.OPEN),this._renderer.setStyle(Fe.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(i){this.clickStartedInContent=i.target!==this._element.nativeElement}onClickStop(i){let o=i.target===this._element.nativeElement&&!this.clickStartedInContent;if(this.config.ignoreBackdropClick||this.config.backdrop==="static"||!o){this.clickStartedInContent=!1;return}this.bsModalService?.setDismissReason(Fl.BACKRDOP),this.hide()}onPopState(){this.bsModalService?.setDismissReason(Fl.BACK),this.hide()}onEsc(i){this.isShown&&((i.keyCode===27||i.key==="Escape")&&i.preventDefault(),this.config.keyboard&&this.level===this.bsModalService?.getModalsCount()&&(this.bsModalService?.setDismissReason(Fl.ESC),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding){if(this.config.closeInterceptor){this.config.closeInterceptor().then(()=>this._hide(),()=>{});return}this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,Kt.SHOW),setTimeout(()=>{this.isShown=!1,this.bsModalService?.hide(this.config.id),Fe&&Fe.body&&this.bsModalService?.getModalsCount()===0&&(this._renderer.removeClass(Fe.body,Kt.OPEN),this._renderer.setStyle(Fe.body,"overflow-y","")),this.bsModalService?.hide(this.config.id),this.isModalHiding=!1,this._focusEl&&this._focusEl.focus()},this.isAnimated?ca.MODAL:0)}};t.\u0275fac=function(o){return new(o||t)(x(Fp),x(Pe),x(He))},t.\u0275cmp=M({type:t,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(o,r){o&1&&v("mousedown",function(u){return r.onClickStarted(u)})("click",function(u){return r.onClickStop(u)})("popstate",function(){return r.onPopState()},ts)("keydown.esc",function(u){return r.onEsc(u)},ts),o&2&&_t("aria-modal",!0)("aria-labelledby",r.config.ariaLabelledBy)("aria-describedby",r.config.ariaDescribedby)},features:[Ee([zt])],ngContentSelectors:Ih,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(o,r){o&1&&(ji(),s(0,"div",0)(1,"div",1),zi(2),a()()),o&2&&en("modal-dialog"+(r.config.class?" "+r.config.class:""))},dependencies:[Tp],encapsulation:2});let n=t;return n})();var Rp=(()=>{let t=class t{static forRoot(){return{ngModule:t,providers:[zt,To,Ao]}}static forChild(){return{ngModule:t,providers:[zt,To,Ao]}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Qe({type:t}),t.\u0275inj=Xe({imports:[kp]});let n=t;return n})();function Nh(n,t){if(n&1){let e=T();s(0,"label",14)(1,"div",15)(2,"input",16),v("change",function(o){let r=C(e).$implicit,c=f();return y(c.manejarSeleccion(r,o))}),a(),s(3,"div")(4,"div",17),l(5),a(),s(6,"small",18),l(7),a()()(),s(8,"span",19),l(9),P(10,"number"),a()()}if(n&2){let e=t.$implicit;d(2),p("id","adicional-"+e.adicionalId),d(3),E(e.nombre),d(2),E(e.categoria),d(2),g("+ S/ ",A(10,4,e.costoAdicional,"1.2-2"))}}var da=class n{constructor(t,e){this.bsModalRef=t;this.carritoService=e}adicionales=[];productoId;seleccionados=[];instruccionesEspeciales="";ngOnInit(){if(!this.productoId){console.warn("Advertencia: productoId no se ha asignado al modal. No se inicializar\xE1 el estado.");return}let t=this.carritoService.obtenerItems().find(e=>e.productoId===this.productoId);t?.personalizacion&&(this.instruccionesEspeciales=t.personalizacion.descripcionExtra||"",this.seleccionados=this.adicionales.filter(e=>t.personalizacion.adicionalesSeleccionados.includes(e.adicionalId)))}manejarSeleccion(t,e){e.target.checked?this.seleccionados.push(t):this.seleccionados=this.seleccionados.filter(o=>o.adicionalId!==t.adicionalId)}agregarAlCarrito(){if(!this.productoId){console.error("ERROR CR\xCDTICO: productoId es undefined. La personalizaci\xF3n no se puede guardar."),this.bsModalRef.hide();return}let t=this.seleccionados.reduce((i,o)=>i+(o.costoAdicional||0),0),e={descripcionExtra:this.instruccionesEspeciales,costoAdicional:t,adicionalesSeleccionados:this.seleccionados.map(i=>i.adicionalId)};this.carritoService.actualizarPersonalizacion(this.productoId,e),this.bsModalRef.hide()}static \u0275fac=function(e){return new(e||n)(x(wn),x(Be))};static \u0275cmp=M({type:n,selectors:[["app-modal-adicionales"]],inputs:{adicionales:"adicionales",productoId:"productoId"},decls:20,vars:2,consts:[[1,"modal-header","bg-primary","text-white"],[1,"modal-title","fw-bold","mb-0"],["type","button","aria-label","Close",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body","py-4"],[1,"text-primary","fw-bold","mb-3"],[1,"list-group","list-group-flush"],["class","list-group-item adicional-item",4,"ngFor","ngForOf"],[1,"my-4"],[1,"form-group"],["for","instrucciones",1,"form-label","fw-bold","text-primary"],["id","instrucciones","rows","4","placeholder","Ej: 'Feliz Cumplea\xF1os, 'Sin nueces'...",1,"form-control","rounded-3","shadow-sm",3,"ngModelChange","ngModel"],[1,"modal-footer","border-0","pt-3"],["type","button",1,"btn","btn-outline-secondary","px-5",3,"click"],["type","button",1,"btn","btn-success","btn-lg","px-5","fw-bold","shadow",3,"click"],[1,"list-group-item","adicional-item"],[1,"d-flex","align-items-center","flex-grow-1"],["type","checkbox",1,"form-check-input","me-3",3,"change","id"],[1,"fw-bold"],[1,"text-muted"],[1,"costo-adicional"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h4",1),l(2,"Elige tus Adicionales"),a(),s(3,"button",2),v("click",function(){return i.bsModalRef.hide()}),a()(),s(4,"div",3)(5,"h5",4),l(6,"Selecciona los adicionales que deseas:"),a(),s(7,"div",5),b(8,Nh,11,7,"label",6),a(),_(9,"hr",7),s(10,"div",8)(11,"label",9),l(12," Instrucciones Especiales (Opcional) "),a(),s(13,"textarea",10),ue("ngModelChange",function(r){return de(i.instruccionesEspeciales,r)||(i.instruccionesEspeciales=r),r}),l(14,"    "),a()()(),s(15,"div",11)(16,"button",12),v("click",function(){return i.bsModalRef.hide()}),l(17," Cancelar "),a(),s(18,"button",13),v("click",function(){return i.agregarAlCarrito()}),l(19," A\xF1adir al Carrito "),a()()),e&2&&(d(8),p("ngForOf",i.adicionales),d(5),ce("ngModel",i.instruccionesEspeciales))},dependencies:[k,z,Te,te,se,Re,Ce],styles:[".modal-header[_ngcontent-%COMP%]{border-radius:16px 16px 0 0;padding:1.2rem 1.5rem}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.list-group-item.adicional-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 18px;margin-bottom:8px;border:1px solid #e0e0e0;border-radius:14px!important;background:#fdfdfd;transition:all .25s ease;cursor:pointer;-webkit-user-select:none;user-select:none}.list-group-item.adicional-item[_ngcontent-%COMP%]:hover{background:#f0f8ff;border-color:#007bff;transform:translateY(-2px);box-shadow:0 8px 20px #007bff1f}.list-group-item.adicional-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked{background-color:#007bff;border-color:#007bff}.list-group-item.adicional-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:1.5em;height:1.5em}.list-group-item.adicional-item[_ngcontent-%COMP%]   .fw-bold[_ngcontent-%COMP%]{font-size:1.05rem;color:#222}.costo-adicional[_ngcontent-%COMP%]{font-weight:800!important;color:#28a745!important;font-size:1.1rem;background:#28a7451a;padding:6px 12px;border-radius:20px;min-width:90px;text-align:center}.form-control[_ngcontent-%COMP%]{border:2px solid #ddd;border-radius:12px;padding:12px 16px;font-size:1rem;transition:all .3s}.form-control[_ngcontent-%COMP%]:focus{border-color:#ee965b;box-shadow:0 0 0 4px #ee965b33;outline:none}.modal-footer[_ngcontent-%COMP%]{padding:1.5rem;gap:12px;justify-content:flex-end}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);border:none;border-radius:12px;padding:12px 30px;font-weight:700}.btn-success[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #28a7454d}"]})};var En=class n{constructor(t){this.http=t}apiUrl=J.apiUrl+"/adicionales";getAdicionales(){return this.http.get(this.apiUrl)}crear(t){return this.http.post(this.apiUrl,t)}actualizar(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}eliminar(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var Lh=()=>[];function Vh(n,t){n&1&&(s(0,"span",29),l(1," Personalizable "),a())}function jh(n,t){if(n&1){let e=T();s(0,"button",30),v("click",function(){C(e);let o=f().$implicit,r=f();return y(r.abrirModalAdicionales(o))}),l(1," Ver Adicionales "),a()}}function zh(n,t){if(n&1){let e=T();s(0,"div",15)(1,"div",16),b(2,Vh,2,0,"span",17),s(3,"div",18),_(4,"img",19),a(),s(5,"div",20)(6,"h3",21),l(7),a(),s(8,"p",22),l(9),a(),s(10,"p",23),l(11),a(),s(12,"div",24)(13,"span",25),l(14),a(),s(15,"div",26),b(16,jh,2,0,"button",27),s(17,"button",28),v("click",function(){let o=C(e).$implicit,r=f();return y(r.agregarAlCarrito(o))}),l(18," A\xF1adir "),a()()()()()()}if(n&2){let e=t.$implicit;d(2),p("ngIf",e.personalizable),d(2),p("src",e.imagenUrl||"assets/imagenes/default-torta.jpg",ve)("alt",e.nombre),d(3),E(e.nombre),d(2),E(e.categoria),d(2),E(e.descripcion),d(3),g("S/ ",e.precioBase),d(2),p("ngIf",e.personalizable)}}function Uh(n,t){if(n&1){let e=T();s(0,"button",34),v("click",function(){let o=C(e).index,r=f(2);return y(r.cambiarPagina(o+1))}),l(1),a()}if(n&2){let e=t.index,i=f(2);Z("active",i.paginaActual===e+1),d(),g(" ",e+1," ")}}function Bh(n,t){if(n&1){let e=T();s(0,"div",31)(1,"button",32),v("click",function(){C(e);let o=f();return y(o.cambiarPagina(o.paginaActual-1))}),l(2,"Anterior"),a(),b(3,Uh,2,3,"button",33),s(4,"button",32),v("click",function(){C(e);let o=f();return y(o.cambiarPagina(o.paginaActual+1))}),l(5,"Siguiente"),a()()}if(n&2){let e=f();d(),p("disabled",e.paginaActual===1),d(2),p("ngForOf",qo(3,Lh).constructor(e.totalPaginas)),d(),p("disabled",e.paginaActual===e.totalPaginas)}}var ko=class n{listaDeProductos=[];listaDeAdicionales=[];bsModalRef;filtroActivo="";searchTerm="";isLoading=!0;paginaActual=1;productosPorPagina=8;productoService=w(Ti);carritoService=w(Be);adicionalService=w(En);modalService=w(zt);route=w(dt);constructor(){}ngOnInit(){this.adicionalService.getAdicionales().subscribe(t=>this.listaDeAdicionales=t),this.route.paramMap.subscribe(t=>{let e=t.get("filtro");this.isLoading=!0,e?(this.filtroActivo=e,this.ejecutarFiltro(this.filtroActivo)):(this.filtroActivo="",this.ejecutarFiltro(""))})}ejecutarFiltro(t){this.isLoading=!0;let e;switch(t){case"personalizable":e=this.productoService.getProductosPersonalizables();break;case"predeterminada":e=this.productoService.getProductosPredeterminados();break;case"torta":case"postre":case"bocadito":e=this.productoService.getProductosPorCategoria(t);break;default:e=this.productoService.getProductos();break}e.subscribe(i=>{this.listaDeProductos=i,this.paginaActual=1,this.isLoading=!1})}filtrarProductos(t){this.filtroActivo=t.target.value,this.searchTerm="",this.ejecutarFiltro(this.filtroActivo)}buscarProductos(){this.isLoading=!0,this.searchTerm.trim()===""?this.ejecutarFiltro(this.filtroActivo):this.productoService.getProductosPorNombre(this.searchTerm).subscribe(t=>{this.listaDeProductos=t,this.filtroActivo="",this.paginaActual=1,this.isLoading=!1})}agregarAlCarrito(t){this.carritoService.agregarAlCarrito(t),window.dispatchEvent(new CustomEvent("agregar-al-carrito",{detail:`${t.nombre} agregado al carrito`}))}abrirModalAdicionales(t){this.carritoService.obtenerItems().find(o=>o.productoId===t.productoId)||this.agregarAlCarrito(t);let i={adicionales:this.listaDeAdicionales,productoId:t.productoId};this.bsModalRef=this.modalService.show(da,{initialState:i})}get totalPaginas(){return Math.ceil(this.listaDeProductos.length/this.productosPorPagina)}get productosPaginados(){let t=(this.paginaActual-1)*this.productosPorPagina;return this.listaDeProductos.slice(t,t+this.productosPorPagina)}cambiarPagina(t){t>=1&&t<=this.totalPaginas&&(this.paginaActual=t,window.scrollTo({top:0,behavior:"smooth"}))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-catalogo"]],decls:22,vars:4,consts:[[1,"catalogo-wrapper"],[1,"filter-bar","mb-4"],[1,"search-group"],["type","text","placeholder","BUSCAR PRODUCTO",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn-search",3,"click"],[1,"form-select","filter-select",3,"change","value"],["value",""],["value","torta"],["value","postre"],["value","bocadito"],["value","personalizable"],["routerLink","../personalizar-torta",1,"btn-torta-personalizada"],[1,"row","g-3","g-md-4"],["class","col-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],["class","pagination mt-5",4,"ngIf"],[1,"col-6","col-md-4","col-lg-3"],[1,"product-card","h-100","position-relative"],["class","badge-personalizable",4,"ngIf"],[1,"image-container"],[1,"img-fluid",3,"src","alt"],[1,"p-3"],[1,"h5","fw-bold","mb-1"],[1,"text-muted","small","mb-2"],[1,"descripcion","text-muted","small","mb-3"],[1,"d-flex","justify-content-between","align-items-end"],[1,"price","fw-bold","text-success","fs-5"],["role","group",1,"btn-group-vertical","btn-group-sm"],["class","btn btn-outline-warning btn-sm mb-1",3,"click",4,"ngIf"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"badge-personalizable"],[1,"btn","btn-outline-warning","btn-sm","mb-1",3,"click"],[1,"pagination","mt-5"],[1,"btn","btn-outline-secondary",3,"click","disabled"],["class","btn mx-1",3,"active","click",4,"ngFor","ngForOf"],[1,"btn","mx-1",3,"click"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),ue("ngModelChange",function(r){return de(i.searchTerm,r)||(i.searchTerm=r),r}),a(),s(4,"button",4),v("click",function(){return i.buscarProductos()}),l(5,"BUSCAR"),a()(),s(6,"select",5),v("change",function(r){return i.filtrarProductos(r)}),s(7,"option",6),l(8,"TODOS"),a(),s(9,"option",7),l(10,"Tortas"),a(),s(11,"option",8),l(12,"Postres"),a(),s(13,"option",9),l(14,"Bocaditos"),a(),s(15,"option",10),l(16,"Personalizables"),a()(),s(17,"a",11),l(18," Pide tu Torta Personalizada "),a()(),s(19,"div",12),b(20,zh,19,8,"div",13),a(),b(21,Bh,6,4,"div",14),a()),e&2&&(d(3),ce("ngModel",i.searchTerm),d(3),p("value",i.filtroActivo),d(14),p("ngForOf",i.productosPaginados),d(),p("ngIf",i.totalPaginas>1))},dependencies:[k,z,N,Rp,ee,Te,nt,it,te,se,Re],styles:[".catalogo-wrapper[_ngcontent-%COMP%]{padding:30px 15px;max-width:1400px;margin:0 auto;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.filter-bar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;align-items:center;justify-content:center;background:#f8f9fa;padding:20px;border-radius:16px;margin-bottom:30px;box-shadow:0 4px 15px #0000000d}.search-group[_ngcontent-%COMP%]{position:relative;flex:1;min-width:280px;max-width:400px}.search-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:52px;padding:0 100px 0 20px;border:2px solid #ddd;border-radius:12px;font-size:1rem;transition:all .3s}.search-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ee965b;box-shadow:0 0 0 4px #ee965b33}.btn-search[_ngcontent-%COMP%]{position:absolute;right:6px;top:6px;height:40px;padding:0 20px;background:#ee965b;color:#fff;border:none;border-radius:10px;font-weight:700;transition:all .3s}.btn-search[_ngcontent-%COMP%]:hover{background:#d97841;transform:translateY(-2px)}.filter-select[_ngcontent-%COMP%]{height:52px;padding:0 20px;border:2px solid #ddd;border-radius:12px;font-size:1rem;min-width:180px}.btn-torta-personalizada[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ee965b,#fd7e14);color:#fff;padding:14px 28px;border-radius:12px;font-weight:700;text-decoration:none;font-size:1.1rem;box-shadow:0 6px 15px #ee965b4d;transition:all .3s;white-space:nowrap}.btn-torta-personalizada[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 25px #ee965b66}.row.g-3.g-md-4[_ngcontent-%COMP%]{margin:0 -12px}.col-6[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%]{padding:12px}.product-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;overflow:hidden;box-shadow:0 6px 20px #00000014;transition:all .4s ease;height:100%;display:flex;flex-direction:column}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-12px);box-shadow:0 20px 40px #0000002e}.image-container[_ngcontent-%COMP%]{height:220px;overflow:hidden;background:#f5f5f5}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .5s ease}.product-card[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.12)}.badge-personalizable[_ngcontent-%COMP%]{position:absolute;top:14px;left:14px;background:linear-gradient(135deg,#fd7e14,#ff6b35);color:#fff;padding:8px 16px;border-radius:25px;font-size:.85rem;font-weight:700;z-index:10;box-shadow:0 4px 10px #fd7e1466}.p-3[_ngcontent-%COMP%]{padding:20px!important;display:flex;flex-direction:column;flex-grow:1}.h5[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:8px;color:#222}.text-muted.small[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.4}.descripcion[_ngcontent-%COMP%]{flex-grow:1;margin-bottom:16px;color:#555;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.price[_ngcontent-%COMP%]{font-size:1.6rem!important;font-weight:800;color:#28a745!important}.btn-group-vertical[_ngcontent-%COMP%]{gap:6px}.btn-sm[_ngcontent-%COMP%]{padding:8px 16px;font-size:.9rem;border-radius:10px;font-weight:600}.btn-success[_ngcontent-%COMP%]{background:#28a745;border:none}.btn-outline-warning[_ngcontent-%COMP%]{border-color:#fd7e14;color:#fd7e14}.btn-outline-warning[_ngcontent-%COMP%]:hover{background:#fd7e14;color:#fff}.pagination[_ngcontent-%COMP%]{justify-content:center;gap:10px;margin-top:50px}.pagination[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#ee965b;color:#fff;border:none;padding:12px 20px;border-radius:12px;font-weight:700;min-width:50px}.pagination[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{background:#d97841;transform:scale(1.1)}.pagination[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}@media (max-width: 768px){.filter-bar[_ngcontent-%COMP%]{flex-direction:column}.search-group[_ngcontent-%COMP%]{width:100%;max-width:none}.btn-torta-personalizada[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})};var Jt=class n{constructor(t){this.http=t}apiUrl=J.apiUrl+"/usuarios";registrar(t){return this.http.post(`${this.apiUrl}/registro`,t)}login(t){return this.http.post(`${this.apiUrl}/login`,t)}obtenerMiPerfil(){return this.http.get(`${this.apiUrl}/mi-perfil`)}actualizarMiPerfil(t){return this.http.put(`${this.apiUrl}/mi-perfil`,t)}cambiarPassword(t){return this.http.post(`${this.apiUrl}/cambiar-password`,t)}obtenerTodosLosUsuarios(){return this.http.get(`${this.apiUrl}/todos`)}actualizarUsuarioPorAdmin(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var ua=class n{constructor(t,e,i){this.fb=t;this.usuarioService=e;this.router=i;this.registroForm=this.fb.group({nombre:["",$.required],email:["",[$.required,$.email]],password:["",[$.required,$.minLength(6)]],telefono:[""],direccion:[""]})}registroForm;onSubmit(){this.registroForm.valid&&this.usuarioService.registrar(this.registroForm.value).subscribe({next:t=>{alert("\xA1Usuario registrado con \xE9xito!"),this.router.navigate(["/iniciar-sesion"])},error:t=>{console.error("Error en el registro:",t),alert("Error en el registro: "+t.error)}})}static \u0275fac=function(e){return new(e||n)(x(ot),x(Jt),x(pe))};static \u0275cmp=M({type:n,selectors:[["app-registro"]],decls:43,vars:2,consts:[[1,"register-page"],[1,"branding-column"],[1,"branding-content"],["routerLink","/",1,"logo-link"],["src","assets/imagenes/logo.png","alt","Logo de D.Juancito"],[1,"form-column"],[1,"register-form"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","formControlName","nombre","placeholder","Tu nombre y apellido"],["for","email"],["type","email","id","email","formControlName","email","placeholder","tu.correo@ejemplo.com"],["for","telefono"],["type","tel","id","telefono","formControlName","telefono","placeholder","Ej: 987654321"],["for","direccion"],["type","text","id","direccion","formControlName","direccion","placeholder","Ej: Av. Principal 123"],["for","password"],["type","password","id","password","formControlName","password","placeholder","M\xEDnimo 6 caracteres"],["type","submit",1,"btn-submit",3,"disabled"],[1,"login-link"],["routerLink","/iniciar-sesion"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),_(4,"img",4),s(5,"h2"),l(6,"D.Juancito"),a()(),s(7,"p"),l(8,'"Donde el Sabor se Convierte en Recuerdo"'),a()()(),s(9,"div",5)(10,"div",6)(11,"h2"),l(12,"Crear una Cuenta"),a(),s(13,"p"),l(14,"\xA1\xDAnete a la familia D'Juancito!"),a(),s(15,"form",7),v("ngSubmit",function(){return i.onSubmit()}),s(16,"div",8)(17,"label",9),l(18,"Nombre Completo"),a(),_(19,"input",10),a(),s(20,"div",8)(21,"label",11),l(22,"Correo Electr\xF3nico"),a(),_(23,"input",12),a(),s(24,"div",8)(25,"label",13),l(26,"Tel\xE9fono (Opcional)"),a(),_(27,"input",14),a(),s(28,"div",8)(29,"label",15),l(30,"Direcci\xF3n (Opcional)"),a(),_(31,"input",16),a(),s(32,"div",8)(33,"label",17),l(34,"Contrase\xF1a"),a(),_(35,"input",18),a(),s(36,"button",19),l(37,"Registrarse"),a(),s(38,"div",20)(39,"span"),l(40,"\xBFYa tienes una cuenta? "),s(41,"a",21),l(42,"Inicia sesi\xF3n aqu\xED"),a()()()()()()()),e&2&&(d(15),p("formGroup",i.registroForm),d(21),p("disabled",i.registroForm.invalid))},dependencies:[k,rt,Ue,te,se,ze,Ze,Ke,ee],styles:[".register-page[_ngcontent-%COMP%]{display:flex;min-height:100vh;font-family:Arial,sans-serif}.branding-column[_ngcontent-%COMP%]{flex-basis:50%;background-color:#fdf6f2;display:flex;justify-content:center;align-items:center;text-align:center;padding:40px}.branding-content[_ngcontent-%COMP%]   .logo-link[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px;text-decoration:none;margin-bottom:20px}.branding-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px;width:300px;border-radius:80%;object-fit:cover}.branding-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;color:#333;margin:0}.branding-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#777;font-style:italic}.form-column[_ngcontent-%COMP%]{flex-basis:50%;display:flex;justify-content:center;align-items:center;padding:40px}.register-form[_ngcontent-%COMP%]{width:100%;max-width:400px}.register-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px;margin-bottom:10px}.register-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#777;margin-bottom:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;font-size:16px}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:15px;border:none;border-radius:8px;background-color:#eb7221;color:#fff;font-size:16px;font-weight:700;cursor:pointer}.btn-submit[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.login-link[_ngcontent-%COMP%]{margin-top:25px;text-align:center;color:#777}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#eb7221;text-decoration:none;font-weight:700}"]})};function Gh(n,t){n&1&&(s(0,"div",17),l(1," El correo es obligatorio "),a())}function $h(n,t){n&1&&(s(0,"div",17),l(1," Ingresa un correo v\xE1lido "),a())}function Hh(n,t){n&1&&(s(0,"span"),l(1,"Ingresar"),a())}function Wh(n,t){n&1&&(s(0,"span"),l(1,"Completar campos"),a())}var pa=class n{constructor(t,e,i,o,r){this.fb=t;this.usuarioService=e;this.authService=i;this.router=o;this.document=r;this.loginForm=this.fb.group({email:["",[$.required,$.email]],password:["",$.required]})}loginForm;defaultClientUrl="/cliente/bienvenida";ngOnInit(){}onSubmit(){this.loginForm.valid&&this.usuarioService.login(this.loginForm.value).subscribe({next:t=>{this.authService.guardarSesion(t.token),this.usuarioService.obtenerMiPerfil().subscribe({next:e=>{this.authService.guardarUsuarioCompleto(e);let i=this.document.getElementById("nombreUsuarioExito");i&&(i.textContent=`${e.nombre} `),new window.bootstrap.Modal(this.document.getElementById("modalExito")).show(),this.document.getElementById("modalExito")?.addEventListener("hidden.bs.modal",()=>{let c=e.roles?.some(m=>m.nombre==="ROLE_Administrador"),u;c?u="/admin/dashboard":(u=localStorage.getItem("redirect_after_login")==="/cliente/mi-pedido"?"/cliente/mi-pedido":this.defaultClientUrl,localStorage.removeItem("redirect_after_login")),this.router.navigate([u])},{once:!0})},error:()=>{this.mostrarModalError("Error al cargar tu perfil. Intenta m\xE1s tarde.")}})},error:t=>{let e=t.error?.message||"Credenciales inv\xE1lidas. Verifica tu correo y contrase\xF1a.";this.mostrarModalError(e)}})}mostrarModalError(t){let e=this.document.getElementById("mensajeErrorModal");e&&(e.textContent=t),new window.bootstrap.Modal(this.document.getElementById("modalError")).show()}static \u0275fac=function(e){return new(e||n)(x(ot),x(Jt),x(ae),x(pe),x(me))};static \u0275cmp=M({type:n,selectors:[["app-iniciar-sesion"]],decls:60,vars:10,consts:[[1,"login-page"],[1,"branding-column"],[1,"branding-content"],["routerLink","/",1,"logo-link"],["src","assets/imagenes/logo.png","alt","Logo de D.Juancito",1,"logo-img"],[1,"slogan"],[1,"form-column"],[1,"login-form"],[1,"text-muted","mb-4"],[1,"needs-validation",3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","tu.correo@ejemplo.com",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","mb-4"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control"],[1,"invalid-feedback"],[1,"form-options","mb-4"],["href","#",1,"forgot-password"],["type","submit",1,"btn-submit","w-100",3,"disabled"],[4,"ngIf"],[1,"register-link","text-center","mt-4"],["routerLink","/registrar",1,"text-primary","fw-bold"],["id","modalExito","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-0","shadow-lg","rounded-4","overflow-hidden"],[1,"modal-body","text-center","p-5","bg-gradient-success","text-white"],[1,"bi","bi-check-circle-fill",2,"font-size","5rem"],[1,"mt-4","fw-bold"],["id","nombreUsuarioExito",1,"fs-5"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light","btn-lg","px-5","mt-3","fw-bold"],["id","modalError","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-body","text-center","p-5","bg-gradient-danger","text-white"],[1,"bi","bi-x-circle-fill",2,"font-size","5rem"],["id","mensajeErrorModal",1,"fs-5"]],template:function(e,i){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),_(4,"img",4),s(5,"h2"),l(6,"D.Juancito"),a()(),s(7,"p",5),l(8,'"Donde el Sabor se Convierte en Recuerdo"'),a()()(),s(9,"div",6)(10,"div",7)(11,"h2"),l(12,"Iniciar Sesi\xF3n"),a(),s(13,"p",8),l(14,"Ingresa tus credenciales para acceder a tu cuenta."),a(),s(15,"form",9),v("ngSubmit",function(){return i.onSubmit()}),s(16,"div",10)(17,"label",11),l(18,"Correo Electr\xF3nico"),a(),_(19,"input",12),b(20,Gh,2,0,"div",13)(21,$h,2,0,"div",13),a(),s(22,"div",14)(23,"label",15),l(24,"Contrase\xF1a"),a(),_(25,"input",16),s(26,"div",17),l(27," La contrase\xF1a es obligatoria "),a()(),s(28,"div",18)(29,"a",19),l(30,"\xBFOlvidaste tu contrase\xF1a?"),a()(),s(31,"button",20),b(32,Hh,2,0,"span",21)(33,Wh,2,0,"span",21),a(),s(34,"div",22)(35,"span"),l(36,"\xBFNo tienes una cuenta? "),a(),s(37,"a",23),l(38,"Reg\xEDstrate aqu\xED"),a()()()()()(),s(39,"div",24)(40,"div",25)(41,"div",26)(42,"div",27),_(43,"i",28),s(44,"h3",29),l(45,"\xA1Bienvenido de vuelta!"),a(),_(46,"p",30),s(47,"button",31),l(48," Continuar a mi cuenta "),a()()()()(),s(49,"div",32)(50,"div",25)(51,"div",26)(52,"div",33),_(53,"i",34),s(54,"h3",29),l(55,"\xA1Oops! Credenciales incorrectas"),a(),s(56,"p",35),l(57,"Verifica tu correo y contrase\xF1a"),a(),s(58,"button",31),l(59," Intentar de nuevo "),a()()()()()),e&2){let o,r,c,u;d(15),p("formGroup",i.loginForm),d(4),Z("is-invalid",((o=i.loginForm.get("email"))==null?null:o.invalid)&&((o=i.loginForm.get("email"))==null?null:o.touched)),d(),p("ngIf",(r=i.loginForm.get("email"))==null?null:r.hasError("required")),d(),p("ngIf",(c=i.loginForm.get("email"))==null?null:c.hasError("email")),d(4),Z("is-invalid",((u=i.loginForm.get("password"))==null?null:u.invalid)&&((u=i.loginForm.get("password"))==null?null:u.touched)),d(6),p("disabled",i.loginForm.invalid),d(),p("ngIf",!i.loginForm.invalid),d(),p("ngIf",i.loginForm.invalid)}},dependencies:[k,N,rt,Ue,te,se,ze,Ze,Ke,ee],styles:[".login-page[_ngcontent-%COMP%]{display:flex;min-height:100vh;font-family:Arial,sans-serif}.branding-column[_ngcontent-%COMP%]{flex-basis:50%;background-color:#fdf6f2;display:flex;justify-content:center;align-items:center;text-align:center;padding:40px}.branding-content[_ngcontent-%COMP%]   .logo-link[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px;text-decoration:none;margin-bottom:20px}.branding-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px;width:300px;border-radius:80%;object-fit:cover}.branding-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;color:#333;margin:0}.branding-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#777;font-style:italic}.form-column[_ngcontent-%COMP%]{flex-basis:50%;display:flex;justify-content:center;align-items:center;padding:40px}.login-form[_ngcontent-%COMP%]{width:100%;max-width:400px}.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px;margin-bottom:10px}.login-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#777;margin-bottom:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;font-size:16px}.form-options[_ngcontent-%COMP%]{text-align:right;margin-bottom:25px}.forgot-password[_ngcontent-%COMP%]{color:#eb7221;text-decoration:none;font-size:14px}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:15px;border:none;border-radius:8px;background-color:#eb7221;color:#fff;font-size:16px;font-weight:700;cursor:pointer;transition:background-color .3s ease}.btn-submit[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.register-link[_ngcontent-%COMP%]{margin-top:25px;text-align:center;color:#777}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#eb7221;text-decoration:none;font-weight:700}"]})};var Sn=class n{constructor(t){this.http=t;this.cargarOpciones(),this.cargarGarantiaSeleccionada()}api=J.apiUrl+"/config";opciones=new Ge([]);opciones$=this.opciones.asObservable();seleccionado=new Ge(50);seleccionado$=this.seleccionado.asObservable();cargarOpciones(){this.http.get(`${this.api}/garantias`).subscribe({next:t=>this.opciones.next(t),error:()=>this.opciones.next([30,50,70])})}cargarGarantiaSeleccionada(){this.http.get(`${this.api}/garantia/actual`).subscribe({next:t=>this.seleccionado.next(t),error:()=>this.seleccionado.next(50)})}obtenerOpciones(){return this.opciones$}obtener(){return this.seleccionado$}seleccionar(t){this.seleccionado.next(t)}obtenerTodas(){return this.http.get(`${this.api}/garantias/admin`)}crear(t){return this.http.post(`${this.api}/garantias`,t)}actualizar(t,e){return this.http.put(`${this.api}/garantias/${t}`,e)}toggleActivo(t){return this.http.patch(`${this.api}/garantias/${t}/toggle`,{})}eliminar(t){return this.http.delete(`${this.api}/garantias/${t}`)}establecerPrincipal(t){return this.http.patch(`${this.api}/garantias/${t}/principal`,{}).pipe(Q(()=>{this.cargarOpciones(),this.cargarGarantiaSeleccionada()}))}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function qh(n,t){n&1&&(s(0,"div",15),_(1,"i",16),s(2,"p",17),l(3,"Tu carrito est\xE1 vac\xEDo"),a(),s(4,"a",18),l(5," Ir a la tienda "),a()())}function Yh(n,t){n&1&&(s(0,"div",62)(1,"span",63),l(2,"REGALO 100% GRATIS"),a()())}function Zh(n,t){if(n&1&&(s(0,"div",62)(1,"span",64),l(2),a()()),n&2){let e=f().$implicit;d(2),g(" -",((e.descuentoAplicado??0)*100).toFixed(0),"% OFF ")}}function Kh(n,t){if(n&1&&(s(0,"div",71)(1,"span"),l(2),a(),s(3,"span",72),l(4),P(5,"number"),a()()),n&2){let e=t.$implicit,i=f(5);d(2),g("\u2022 ",i.obtenerNombreAdicional(e)),d(2),g(" + S/ ",A(5,2,i.obtenerCostoAdicional(e),"1.2-2")," ")}}function Jh(n,t){if(n&1&&(s(0,"div",62),b(1,Kh,6,5,"div",70),a()),n&2){let e=f(2).$implicit;d(),p("ngForOf",e.personalizacion.adicionalesSeleccionados)}}function Xh(n,t){if(n&1&&(s(0,"p",73),l(1),a()),n&2){let e=f(2).$implicit;d(),g(' "',e.personalizacion.descripcionExtra,'" ')}}function Qh(n,t){if(n&1&&(s(0,"div",65)(1,"p",66),l(2," Personalizaci\xF3n Extra "),a(),b(3,Jh,2,1,"div",53)(4,Xh,2,1,"p",67),s(5,"div",68)(6,"small",69),l(7,"Costo adicional total"),a(),s(8,"strong",29),l(9),P(10,"number"),a()()()),n&2){let e=f().$implicit;d(3),p("ngIf",(e.personalizacion.adicionalesSeleccionados==null?null:e.personalizacion.adicionalesSeleccionados.length)>0),d(),p("ngIf",e.personalizacion.descripcionExtra),d(5),g(" S/ ",A(10,3,e.personalizacion.costoAdicional,"1.2-2")," ")}}function ev(n,t){if(n&1&&(s(0,"p",74)(1,"del"),l(2),P(3,"number"),a()()),n&2){let e=f().$implicit;d(2),g("S/ ",A(3,1,e.precioBase*e.cantidad,"1.2-2"))}}function tv(n,t){if(n&1){let e=T();s(0,"div",45)(1,"div",24)(2,"div",46)(3,"div",47),_(4,"img",48),a(),s(5,"div",49)(6,"div",50)(7,"div",51)(8,"h5",52),l(9),a(),b(10,Yh,3,0,"div",53)(11,Zh,3,1,"div",53)(12,Qh,11,6,"div",54),s(13,"div",55)(14,"button",56),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.cambiarCantidad(o,-1))}),l(15,"\u2212"),a(),s(16,"span",57),l(17),a(),s(18,"button",56),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.cambiarCantidad(o,1))}),l(19,"+"),a()()(),s(20,"div",58)(21,"p",59),l(22),P(23,"number"),a(),b(24,ev,4,4,"p",60),s(25,"button",61),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.eliminarItem(o.productoId))}),l(26," Eliminar "),a()()()()()()()}if(n&2){let e=t.$implicit;d(4),p("src",e.imagenUrl||"assets/imagenes/default-torta.jpg",ve)("alt",e.nombre),d(5),E(e.nombre),d(),p("ngIf",e.esOfertaEspecial),d(),p("ngIf",!e.esOfertaEspecial&&(e.descuentoAplicado??0)>0),d(),p("ngIf",e.personalizacion),d(5),E(e.cantidad),d(5),g(" S/ ",A(23,9,e.precioUnitario*e.cantidad,"1.2-2")," "),d(2),p("ngIf",(e.descuentoAplicado??0)>0||e.esOfertaEspecial)}}function nv(n,t){if(n&1&&(s(0,"div",75)(1,"p",76),l(2,"\xA1FELICITACIONES!"),a(),s(3,"p",77),l(4),P(5,"number"),a(),s(6,"small",78),l(7,"Ahorraste con promociones"),a()()),n&2){let e=f(2);d(4),g("- S/ ",A(5,1,e.descuentoTotal,"1.2-2"))}}function iv(n,t){if(n&1&&(s(0,"option",79),l(1),P(2,"number"),a()),n&2){let e=t.$implicit,i=f(2);p("value",e)("selected",e===i.porcentajeGarantia),d(),De(" ",e,"% \u2192 S/ ",A(2,4,i.subtotal*e/100,"1.2-2")," ")}}function ov(n,t){if(n&1){let e=T();s(0,"div",19)(1,"div",20),b(2,tv,27,12,"div",21),a(),s(3,"div",22)(4,"div",23)(5,"div",24)(6,"h4",25),l(7,"Resumen del Pedido"),a(),b(8,nv,8,4,"div",26),s(9,"div",27)(10,"span"),l(11,"Subtotal sin descuento"),a(),s(12,"del"),l(13),P(14,"number"),a()(),s(15,"div",28)(16,"span"),l(17,"Subtotal a pagar"),a(),s(18,"span",29),l(19),P(20,"number"),a()(),_(21,"hr",30),s(22,"div",31)(23,"label",32),l(24,"Paga ahora:"),a(),s(25,"select",33),v("change",function(o){C(e);let r=f();return y(r.cambiarGarantia(o))}),b(26,iv,3,7,"option",34),a()(),s(27,"div",35)(28,"span",36),l(29),a(),s(30,"strong",37),l(31),P(32,"number"),a()(),s(33,"div",38)(34,"span",36),l(35,"Resto al recibir"),a(),s(36,"strong",39),l(37),P(38,"number"),a()(),_(39,"hr",30),s(40,"div",40)(41,"h3",41),l(42,"Total"),a(),s(43,"h2",42),l(44),P(45,"number"),a()(),s(46,"div",43)(47,"strong"),l(48),P(49,"number"),a(),_(50,"br"),l(51," y el resto "),s(52,"strong"),l(53),P(54,"number"),a(),l(55," al recibir tu torta "),a(),s(56,"button",44),v("click",function(){C(e);let o=f();return y(o.confirmarPedido())}),l(57," Confirmar Pedido "),a()()()()()}if(n&2){let e=f();d(2),p("ngForOf",e.itemsDelCarrito),d(6),p("ngIf",e.descuentoTotal>0),d(5),g("S/ ",A(14,11,e.subtotalSinDescuento,"1.2-2")),d(6),g("S/ ",A(20,14,e.subtotal,"1.2-2")),d(7),p("ngForOf",e.opcionesGarantia),d(3),g("Garant\xEDa (",e.porcentajeGarantia,"%)"),d(2),g("S/ ",A(32,17,e.garantia,"1.2-2")),d(6),g("S/ ",A(38,20,e.resto,"1.2-2")),d(7),g("S/ ",A(45,23,e.subtotal,"1.2-2")),d(4),g("Paga S/ ",A(49,26,e.garantia,"1.2-2")," ahora"),d(5),g("S/ ",A(54,29,e.resto,"1.2-2"))}}var Fo=class n{constructor(t,e,i,o,r){this.carritoService=t;this.garantiaService=e;this.autenticacionService=i;this.http=o;this.router=r}itemsDelCarrito=[];subtotal=0;garantia=0;resto=0;porcentajeGarantia=50;opcionesGarantia=[];carritoSub;adicionalesDisponibles=[];apiUrl=J.apiUrl;ngOnInit(){this.cargarOpcionesGarantia(),this.cargarGarantiaSeleccionada(),this.suscribirseAlCarrito(),this.cargarAdicionales()}ngOnDestroy(){this.carritoSub?.unsubscribe()}cargarAdicionales(){this.http.get(`${this.apiUrl}/adicionales`).subscribe({next:t=>this.adicionalesDisponibles=t,error:t=>console.error("Error cargando adicionales:",t)})}obtenerNombreAdicional(t){let e=this.adicionalesDisponibles.find(i=>i.adicionalId===t);return e?`${e.nombre} (${e.categoria})`:"Adicional"}obtenerCostoAdicional(t){let e=this.adicionalesDisponibles.find(i=>i.adicionalId===t);return e?e.costoAdicional:0}suscribirseAlCarrito(){this.carritoSub=this.carritoService.items$.subscribe(t=>{this.itemsDelCarrito=t,this.calcularResumen()})}cargarOpcionesGarantia(){this.garantiaService.opciones$.subscribe(t=>this.opcionesGarantia=t)}cargarGarantiaSeleccionada(){this.garantiaService.obtener().subscribe(t=>{this.porcentajeGarantia=t,this.calcularResumen()})}calcularResumen(){this.subtotal=this.itemsDelCarrito.reduce((t,e)=>t+e.precioUnitario*e.cantidad,0),this.subtotal=Math.round(this.subtotal*100)/100,this.garantia=Math.round(this.subtotal*this.porcentajeGarantia/100*100)/100,this.resto=Math.round((this.subtotal-this.garantia)*100)/100}eliminarItem(t){this.carritoService.eliminar(t)}cambiarCantidad(t,e){let i=t.cantidad+e;i>0&&this.carritoService.cambiarCantidad(t.productoId,i)}cambiarGarantia(t){let e=Number(t.target.value);this.garantiaService.seleccionar(e),this.porcentajeGarantia=e,this.calcularResumen()}get descuentoTotal(){let t=this.itemsDelCarrito.reduce((e,i)=>e+i.precioBase*i.cantidad,0);return Math.round((t-this.subtotal)*100)/100}get subtotalSinDescuento(){return this.itemsDelCarrito.reduce((t,e)=>t+e.precioBase*e.cantidad,0)}confirmarPedido(){let t=localStorage.getItem("jwt_token");if(!t){localStorage.setItem("redirect_after_login","/cliente/mi-pedido"),alert("\xA1Debes iniciar sesi\xF3n para confirmar tu pedido!"),this.router.navigate(["/iniciar-sesion"]);return}let e=this.autenticacionService.obtenerUsuarioActual();if(!e?.usuarioId){localStorage.setItem("redirect_after_login","/cliente/mi-pedido"),this.router.navigate(["/iniciar-sesion"]);return}let i=this.itemsDelCarrito.map(c=>{let u=(c.personalizacion?.adicionalesSeleccionados||[]).map(m=>{let h=this.adicionalesDisponibles.find(S=>S.adicionalId===m);return{adicionalId:m,nombre:h?.nombre||"Adicional",categoria:h?.categoria||"",costoAdicional:h?.costoAdicional||0}});return{productoId:Number(c.productoId),cantidad:Number(c.cantidad),precioUnitario:Number(c.precioUnitario),subtotal:Number((c.precioUnitario*c.cantidad).toFixed(2)),promocionId:c.promocionId?Number(c.promocionId):null,personalizacion:c.personalizacion?{descripcionExtra:c.personalizacion.descripcionExtra||null,costoAdicional:Number(c.personalizacion.costoAdicional||0),adicionalesSeleccionados:u}:null}}),o={usuarioId:Number(e.usuarioId),detalles:i,subtotal:this.subtotal.toFixed(2),garantiaPagada:this.garantia.toFixed(2),resto:this.resto.toFixed(2),total:this.subtotal.toFixed(2)};console.log("ENVIANDO PEDIDO:",JSON.stringify(o,null,2));let r=new Ot({Authorization:`Bearer ${t}`,"Content-Type":"application/json"});this.http.post(`${this.apiUrl}/pedidos`,o,{headers:r}).subscribe({next:c=>{console.log("PEDIDO CREADO CON \xC9XITO:",c),localStorage.setItem("pedido_confirmado_id",c.pedidoId.toString()),localStorage.setItem("pago_garantia",JSON.stringify({garantia:this.garantia,resto:this.resto,subtotal:this.subtotal})),this.carritoService.vaciar(),this.router.navigate(["/cliente/pago-garantia"])},error:c=>{console.error("ERROR FINAL:",c),alert("Error: "+(c.error?.message||"No se pudo crear el pedido"))}})}static \u0275fac=function(e){return new(e||n)(x(Be),x(Sn),x(ae),x(K),x(pe))};static \u0275cmp=M({type:n,selectors:[["app-mi-pedido"]],decls:26,vars:10,consts:[[1,"container","py-5"],["class","text-center py-5 my-5",4,"ngIf"],["class","row g-4",4,"ngIf"],["id","modalExito","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-0","shadow-lg"],[1,"modal-body","text-center","p-5"],[1,"bi","bi-check-circle-fill","text-success",2,"font-size","5rem"],[1,"fw-bold","text-success","mt-4"],[1,"fs-5","text-muted","mb-4"],[1,"text-primary","fw-bold"],[1,"text-muted","mb-4"],[1,"d-grid","gap-3"],["routerLink","/cliente/pago-garantia","data-bs-dismiss","modal",1,"btn","btn-success","btn-lg","fw-bold"],["routerLink","/cliente/mis-pedidos","data-bs-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-center","py-5","my-5"],[1,"bi","bi-basket3","fs-1","text-muted","mb-4"],[1,"text-muted","fs-3","fw-bold"],["routerLink","/cliente/catalogo",1,"btn","btn-primary","btn-lg","px-5","mt-3"],[1,"row","g-4"],[1,"col-lg-8"],["class","card shadow-sm mb-4",4,"ngFor","ngForOf"],[1,"col-lg-4"],[1,"card","shadow-lg","sticky-top",2,"top","20px"],[1,"card-body","p-4"],[1,"text-center","mb-4","fw-bold","text-primary"],["class","bg-success-subtle rounded-3 p-3 text-center mb-4",4,"ngIf"],[1,"d-flex","justify-content-between","mb-3","text-muted"],[1,"d-flex","justify-content-between","fs-5","fw-bold","mb-4"],[1,"text-success"],[1,"my-4"],[1,"mb-4"],[1,"form-label","fw-bold","text-primary"],[1,"form-select","form-select-lg","rounded-3",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mb-2"],[1,"fs-5"],[1,"text-success","fs-5"],[1,"d-flex","justify-content-between","text-danger","fw-bold","mb-4"],[1,"fs-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0","fw-bold"],[1,"text-success","mb-0","fw-bold"],[1,"alert","alert-success","text-center","py-3","rounded-3","mb-4"],[1,"btn","btn-success","btn-lg","w-100","py-3","fw-bold","rounded-3","shadow",3,"click"],[1,"card","shadow-sm","mb-4"],[1,"row","align-items-center","g-3"],[1,"col-3","col-md-2"],[1,"img-fluid","rounded-3","shadow-sm",2,"height","110px","width","100%","object-fit","cover",3,"src","alt"],[1,"col-9","col-md-10"],[1,"d-flex","justify-content-between","align-items-start"],[1,"flex-grow-1","pe-4"],[1,"mb-2","fw-bold"],["class","mb-2",4,"ngIf"],["class","mt-3 p-3 bg-light rounded-3 border-start border-4 border-warning",4,"ngIf"],[1,"d-flex","align-items-center","gap-3","mt-3"],[1,"btn","btn-outline-secondary","btn-sm","rounded-circle",3,"click"],[1,"fw-bold","fs-4","px-3"],[1,"text-end"],[1,"fs-3","fw-bold","text-success","mb-1"],["class","text-muted small mb-3",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"mb-2"],[1,"badge","bg-success","fs-6","px-3","py-2"],[1,"badge","bg-danger","fs-6","px-3"],[1,"mt-3","p-3","bg-light","rounded-3","border-start","border-4","border-warning"],[1,"mb-2","text-primary","fw-bold","small"],["class","small mt-2 mb-1 fst-italic text-muted",4,"ngIf"],[1,"d-flex","justify-content-between","mt-2","pt-2","border-top","border-light"],[1,"text-muted","fw-bold"],["class","d-flex justify-content-between small mb-1",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","small","mb-1"],[1,"text-success","fw-bold"],[1,"small","mt-2","mb-1","fst-italic","text-muted"],[1,"text-muted","small","mb-3"],[1,"bg-success-subtle","rounded-3","p-3","text-center","mb-4"],[1,"mb-1","fw-bold","text-success"],[1,"fs-4","fw-bold","text-danger","mb-0"],[1,"text-muted"],[3,"value","selected"]],template:function(e,i){e&1&&(s(0,"div",0),b(1,qh,6,0,"div",1)(2,ov,58,32,"div",2),a(),s(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),_(7,"i",7),s(8,"h2",8),l(9,"\xA1PEDIDO RECIBIDO!"),a(),s(10,"p",9),l(11," Tu pedido ya est\xE1 en cocina"),_(12,"br"),s(13,"strong"),l(14,"Ahora solo falta pagar la garant\xEDa:"),a()(),s(15,"h1",10),l(16),P(17,"number"),a(),s(18,"p",11),l(19),P(20,"number"),a(),s(21,"div",12)(22,"button",13),l(23," PAGAR GARANT\xCDA AHORA "),a(),s(24,"button",14),l(25," Ver mis pedidos "),a()()()()()()),e&2&&(d(),p("ngIf",i.itemsDelCarrito.length===0),d(),p("ngIf",i.itemsDelCarrito.length>0),d(14),g("S/ ",A(17,4,i.garantia,"1.2-2")),d(3),g("Resto al recibir: S/ ",A(20,7,i.resto,"1.2-2")))},dependencies:[k,z,N,ee,Ce],styles:[".cart-page[_ngcontent-%COMP%]{padding:60px 20px;background-color:#f9f9f9;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;min-height:70vh}.cart-container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto}.cart-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;color:#333;font-weight:600}.cart-layout[_ngcontent-%COMP%]{display:flex;gap:40px;flex-wrap:wrap}.cart-items[_ngcontent-%COMP%]{flex:2;min-width:300px}.empty-cart[_ngcontent-%COMP%]{text-align:center;padding:50px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000000d}.item[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;padding:18px;border-radius:12px;margin-bottom:16px;box-shadow:0 2px 8px #0000000d;transition:transform .2s}.item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #00000014}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border-radius:10px;margin-right:16px}.item-details[_ngcontent-%COMP%]{flex-grow:1}.item-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 6px;font-size:1.1rem;color:#333}.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#888;font-size:.9rem}.item-price[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem;color:#2e7d32}.cart-summary[_ngcontent-%COMP%]{flex:1;background:#fff;padding:24px;border-radius:12px;box-shadow:0 2px 15px #00000014;height:fit-content;min-width:300px}.cart-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;font-weight:600;font-size:1.3rem}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:12px;font-size:.95rem}.summary-row.total[_ngcontent-%COMP%]{font-weight:700;font-size:1.3rem;color:#333}.form-select-sm[_ngcontent-%COMP%]{height:38px;padding:.25rem .5rem;font-size:.875rem;border-radius:8px;border:1px solid #ced4da;background-color:#fff;transition:all .2s}.form-select-sm[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #0d6efd40;outline:0}.text-primary[_ngcontent-%COMP%]{color:#0d6efd!important;font-weight:600}.small[_ngcontent-%COMP%]{font-size:.85rem}.alert-warning[_ngcontent-%COMP%]{background-color:#fff8e1;border:1px solid #ffe082;color:#8a6d3b;border-radius:8px;padding:10px 12px;font-size:.875rem;line-height:1.4}.btn-success[_ngcontent-%COMP%]{background-color:#2e7d32;border:none;border-radius:8px;padding:12px;font-weight:600;transition:all .2s}.btn-success[_ngcontent-%COMP%]:hover{background-color:#1b5e20;transform:translateY(-1px)}.btn-danger[_ngcontent-%COMP%]{background-color:#d32f2f;border:none;font-size:.8rem;padding:4px 8px}.btn-outline-secondary[_ngcontent-%COMP%]{border-radius:6px;font-size:.9rem;padding:2px 8px}@media (max-width: 768px){.cart-layout[_ngcontent-%COMP%]{flex-direction:column}.cart-summary[_ngcontent-%COMP%]{position:static!important}.item[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:12px}}"]})};var ma=class n{constructor(t){this.authService=t}cerrarSesion(){this.authService.cerrarSesion()}static \u0275fac=function(e){return new(e||n)(x(ae))};static \u0275cmp=M({type:n,selectors:[["app-admin"]],decls:69,vars:1,consts:[[1,"admin-layout"],[1,"top-bar"],[1,"brand"],["src","assets/imagenes/logo.png","alt","Logo",1,"logo"],[1,"user-actions"],[1,"user-name"],["routerLink","/admin/perfil",1,"btn-manage"],[1,"bi","bi-person-gear"],[1,"btn-logout",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"main-with-sidebar"],[1,"sidebar"],[1,"sidebar-nav"],["routerLink","/admin/dashboard","routerLinkActive","active-link"],[1,"bi","bi-speedometer2"],["routerLink","/admin/pedidos","routerLinkActive","active-link"],[1,"bi","bi-receipt"],["routerLink","/admin/pagos","routerLinkActive","active-link"],[1,"bi","bi-credit-card"],["routerLink","/admin/productos","routerLinkActive","active-link"],[1,"bi","bi-box-seam"],["routerLink","/admin/adicionales","routerLinkActive","active-link"],[1,"bi","bi-plus-circle"],["routerLink","/admin/resenas","routerLinkActive","active-link"],[1,"bi","bi-star"],["routerLink","/admin/promociones","routerLinkActive","active-link"],[1,"bi","bi-tag"],["routerLink","/admin/consultas","routerLinkActive","active-link"],[1,"bi","bi-chat-dots"],["routerLink","/admin/usuarios","routerLinkActive","active-link"],[1,"bi","bi-people"],["routerLink","/admin/GestionGarantias","routerLinkActive","active-link"],[1,"bi","bi-shield-check"],["routerLink","/admin/GestionQr","routerLinkActive","active-link"],[1,"bi","bi-qr-code"],["routerLink","/admin/reportes","routerLinkActive","active-link"],[1,"bi","bi-graph-up"],[1,"main-content"]],template:function(e,i){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),_(3,"img",3),s(4,"h3"),l(5,"D.Juancito"),a()(),s(6,"div",4)(7,"span",5),l(8),a(),s(9,"a",6),_(10,"i",7),l(11," Gestionar Cuenta "),a(),s(12,"button",8),v("click",function(){return i.cerrarSesion()}),_(13,"i",9),l(14," Cerrar Sesi\xF3n "),a()()(),s(15,"div",10)(16,"aside",11)(17,"nav",12)(18,"ul")(19,"li")(20,"a",13),_(21,"i",14),l(22," Dashboard"),a()(),s(23,"li")(24,"a",15),_(25,"i",16),l(26," Gesti\xF3n de Pedidos"),a()(),s(27,"li")(28,"a",17),_(29,"i",18),l(30," Gesti\xF3n de Pagos"),a()(),s(31,"li")(32,"a",19),_(33,"i",20),l(34," Gestionar Cat\xE1logo"),a()(),s(35,"li")(36,"a",21),_(37,"i",22),l(38," Gesti\xF3n de Adicionales"),a()(),s(39,"li")(40,"a",23),_(41,"i",24),l(42," Gesti\xF3n de Rese\xF1as"),a()(),s(43,"li")(44,"a",25),_(45,"i",26),l(46," Gesti\xF3n de Promociones"),a()(),s(47,"li")(48,"a",27),_(49,"i",28),l(50," Gesti\xF3n de Consultas"),a()(),s(51,"li")(52,"a",29),_(53,"i",30),l(54," Gesti\xF3n de Usuarios"),a()(),s(55,"li")(56,"a",31),_(57,"i",32),l(58," Opciones de Garant\xEDa"),a()(),s(59,"li")(60,"a",33),_(61,"i",34),l(62," Configuraci\xF3n QR"),a()(),s(63,"li")(64,"a",35),_(65,"i",36),l(66," Reportes"),a()()()()(),s(67,"main",37),_(68,"router-outlet"),a()()()),e&2){let o;d(8),E((o=i.authService.obtenerUsuarioActual())==null?null:o.nombre)}},dependencies:[k,ee,sn],styles:[".admin-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#f8f9fa}.top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 30px;background:#fff;border-bottom:1px solid #dee2e6;box-shadow:0 2px 8px #0000000d;z-index:100}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.brand[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:2px solid #fd7e14;object-fit:cover}.brand[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.3rem;font-weight:700;color:#212529}.user-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;font-size:.95rem}.user-name[_ngcontent-%COMP%]{font-weight:600;color:#495057}.btn-manage[_ngcontent-%COMP%], .btn-logout[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;border-radius:8px;font-weight:500;text-decoration:none;transition:all .3s ease}.btn-manage[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.btn-manage[_ngcontent-%COMP%]:hover, .btn-manage.active[_ngcontent-%COMP%]{background:#0d6efd;color:#fff}.btn-logout[_ngcontent-%COMP%]{background:transparent;color:#dc3545;border:1px solid #dc3545}.btn-logout[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff}.main-with-sidebar[_ngcontent-%COMP%]{display:flex;flex-grow:1;overflow:hidden}.sidebar[_ngcontent-%COMP%]{width:280px;background:#212529;color:#f8f9fa;padding:20px 0;overflow-y:auto;box-shadow:2px 0 10px #0000001a}.sidebar-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 20px;color:#ced4da;text-decoration:none;font-weight:500;transition:all .3s ease}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#343a40;color:#fff}.sidebar-nav[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]{background:#fd7e14;color:#fff;font-weight:600}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.15rem}.main-content[_ngcontent-%COMP%]{flex-grow:1;background:#f8f9fa;padding:30px;overflow-y:auto}@media (max-width: 992px){.top-bar[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:12px;padding:15px}.user-actions[_ngcontent-%COMP%]{justify-content:center;width:100%}.main-with-sidebar[_ngcontent-%COMP%]{flex-direction:column}.sidebar[_ngcontent-%COMP%]{width:100%;max-height:50vh}}"]})};var fa=class n{http=w(K);apiUrl=J.apiUrl+"/dashboard";obtenerEstadisticasAdmin(){return this.http.get(`${this.apiUrl}/admin`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function rv(n,t){n&1&&(s(0,"div",5),_(1,"div",6),s(2,"p",7),l(3,"Cargando dashboard..."),a()())}function av(n,t){if(n&1&&(s(0,"div",8),l(1),a()),n&2){let e=f();d(),g(" ",e.errorMensaje," ")}}function sv(n,t){if(n&1&&(s(0,"div",36)(1,"div",37)(2,"strong"),l(3),a(),s(4,"span",38),l(5),P(6,"number"),a()(),s(7,"div",39),l(8),a(),s(9,"div",40),l(10),a()()),n&2){let e=t.$implicit,i=f(3);d(3),g("#",e.id),d(2),g("\u2022 S/ ",A(6,5,e.total,"1.2-2")),d(3),E(e.tiempoTranscurrido),d(),p("ngClass",i.getEstadoClass(e.estado)),d(),g(" ",e.estado," ")}}function lv(n,t){if(n&1&&(s(0,"div"),b(1,sv,11,8,"div",35),a()),n&2){let e=f(2);d(),p("ngForOf",e.stats.ultimosPedidos)}}function cv(n,t){n&1&&(s(0,"div",41),l(1," No hay pedidos recientes. "),a())}function dv(n,t){if(n&1&&(Ne(0),s(1,"div",9)(2,"div",10)(3,"h2"),l(4,"\xA1Bienvenido!"),a(),s(5,"p"),l(6," Tienes "),s(7,"strong"),l(8),a(),l(9," y "),s(10,"strong"),l(11),a(),l(12,". "),a(),s(13,"span",11),l(14),P(15,"date"),a()()(),s(16,"div",12)(17,"a",13),_(18,"i",14),l(19),a(),s(20,"a",15),_(21,"i",16),l(22),a()(),s(23,"div",17)(24,"div",18)(25,"h5",19),_(26,"i",20),l(27," \xDAltimos Pedidos"),a()(),s(28,"div",21),b(29,lv,2,1,"div",22)(30,cv,2,0,"ng-template",null,0,tn),a()(),s(32,"div",23)(33,"div",24)(34,"span",25),l(35,"Pedidos Hoy"),a(),s(36,"span",26),l(37),a()(),s(38,"div",24)(39,"span",25),l(40,"Pendientes"),a(),s(41,"span",27),l(42),a()(),s(43,"div",24)(44,"span",25),l(45,"Rese\xF1as"),a(),s(46,"span",28),l(47),a()()(),s(48,"div",29)(49,"div",30)(50,"div",31)(51,"span",32),l(52,"Pedidos Totales"),a()(),s(53,"div",33)(54,"span",34),l(55),a()()(),s(56,"div",30)(57,"div",31)(58,"span",32),l(59,"Ventas Totales"),a()(),s(60,"div",33)(61,"span",34),l(62),P(63,"number"),a()()(),s(64,"div",30)(65,"div",31)(66,"span",32),l(67,"Usuarios"),a()(),s(68,"div",33)(69,"span",34),l(70),a()()()(),Le()),n&2){let e=Nt(31),i=f();d(8),g("",i.stats.pendientes," pedidos pendientes"),d(3),g("",i.stats.resenasPendientes," rese\xF1as por revisar"),d(3),g(" Hoy: ",A(15,13,i.fechaActual,"EEEE, d 'de' MMMM 'de' yyyy, HH:mm")," "),d(5),g(" Ver Pedidos Pendientes (",i.stats.pendientes,") "),d(3),g(" Revisar Rese\xF1as (",i.stats.resenasPendientes,") "),d(7),p("ngIf",i.stats.ultimosPedidos==null?null:i.stats.ultimosPedidos.length)("ngIfElse",e),d(8),E(i.stats.pedidosHoy),d(5),E(i.stats.pendientes),d(5),E(i.stats.resenasTotal),d(8),E(i.stats.pedidosTotales),d(7),g("S/ ",A(63,16,i.stats.ventasTotales,"1.2-2")),d(8),E(i.stats.usuariosRegistrados)}}var ga=class n{stats=null;isLoading=!0;errorMensaje=null;fechaActual=new Date;dashboardService=w(fa);ngOnInit(){this.cargarEstadisticas()}cargarEstadisticas(){this.isLoading=!0,this.errorMensaje=null,this.dashboardService.obtenerEstadisticasAdmin().subscribe({next:t=>{this.stats=t,this.isLoading=!1,console.log("Estad\xEDsticas recibidas:",this.stats)},error:t=>{console.error("Error al cargar estad\xEDsticas:",t),t.status===403?this.errorMensaje="No tienes permiso para ver el dashboard.":this.errorMensaje="No se pudieron cargar las estad\xEDsticas.",this.isLoading=!1}})}getEstadoClass(t){switch(t){case"PENDIENTE PAGO":return"estado-pendiente";case"EN PREPARACI\xD3N":return"estado-preparacion";case"ENTREGADO":return"estado-entregado";default:return""}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-dashboard"]],features:[Ee([{provide:ii,useValue:"es-PE"}])],decls:4,vars:3,consts:[["sinPedidos",""],[1,"dashboard-container"],["class","loading text-center p-4",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[1,"loading","text-center","p-4"],["role","status",1,"spinner-border","text-orange"],[1,"mt-2"],[1,"alert","alert-danger"],[1,"welcome-banner"],[1,"welcome-text"],[1,"current-date"],[1,"quick-actions","mb-4"],["routerLink","/admin/pedidos",1,"btn","btn-orange","me-3"],[1,"bi","bi-receipt"],["routerLink","/admin/resenas",1,"btn","btn-warning"],[1,"bi","bi-star"],[1,"card","mb-4"],[1,"card-header","bg-dark","text-white"],[1,"mb-0"],[1,"bi","bi-clock-history"],[1,"card-body","p-0"],[4,"ngIf","ngIfElse"],[1,"stats-row","quick-stats"],[1,"stat-card","quick"],[1,"stat-label"],[1,"stat-badge","orange"],[1,"stat-badge","yellow"],[1,"stat-badge","brown"],[1,"stats-row","detail-stats"],[1,"stat-card","detail"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"stat-number"],["class","pedido-item",4,"ngFor","ngForOf"],[1,"pedido-item"],[1,"pedido-info"],[1,"text-muted"],[1,"pedido-tiempo"],[1,"pedido-estado",3,"ngClass"],[1,"text-center","py-4","text-muted"]],template:function(e,i){e&1&&(s(0,"div",1),b(1,rv,4,0,"div",2)(2,av,2,1,"div",3)(3,dv,71,19,"ng-container",4),a()),e&2&&(d(),p("ngIf",i.isLoading),d(),p("ngIf",i.errorMensaje),d(),p("ngIf",i.stats&&!i.isLoading))},dependencies:[k,Oe,z,N,Ce,re],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:2rem;background-color:#f8f9fa}.welcome-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3e0,#ffe0b2);border-radius:12px;padding:1.8rem 2rem;margin-bottom:2rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 15px #fd7e141a;border:1px solid #ffd7b5}.welcome-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.9rem;font-weight:700;color:#343a40;margin:0 0 .5rem}.welcome-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;color:#5a5a5a;margin:0 0 .6rem}.current-date[_ngcontent-%COMP%]{font-size:.95rem;color:#888;font-weight:500}.quick-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.btn-orange[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff;padding:.7rem 1.2rem;border-radius:8px;font-weight:600;text-decoration:none;display:inline-flex;align-items:center;gap:.5rem;transition:all .3s ease}.btn-orange[_ngcontent-%COMP%]:hover{background-color:#e96a00;transform:translateY(-2px)}.btn-warning[_ngcontent-%COMP%]{background-color:#ffc107;color:#212529}.pedido-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #eee}.pedido-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.pedido-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.95rem}.pedido-tiempo[_ngcontent-%COMP%]{font-size:.85rem;color:#888}.pedido-estado[_ngcontent-%COMP%]{padding:.35rem .8rem;border-radius:50px;font-size:.8rem;font-weight:600;text-transform:uppercase}.estado-pendiente[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.estado-preparacion[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.estado-entregado[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.stats-row[_ngcontent-%COMP%]{display:grid;gap:1.5rem;margin-bottom:2rem}.quick-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}.detail-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 2px 10px #0000000d;transition:transform .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.stat-card.quick[_ngcontent-%COMP%]{padding:1.2rem;display:flex;justify-content:space-between;align-items:center}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;font-weight:500}.stat-badge[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:1.1rem;font-weight:700;color:#fff}.stat-badge.orange[_ngcontent-%COMP%]{background:#fd7e14}.stat-badge.yellow[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.stat-badge.brown[_ngcontent-%COMP%]{background:#a1887f}.stat-card.detail[_ngcontent-%COMP%]{padding:1.4rem}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.6rem}.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#495057}.card-icon[_ngcontent-%COMP%]{font-size:1.4rem}.stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#343a40}.spinner-border.text-orange[_ngcontent-%COMP%]{color:#fd7e14}"]})};var Rl=(n,t)=>{let e=w(ae),i=w(pe);if(!e.estaLogueado())return i.navigate(["/iniciar-sesion"],{queryParams:{returnUrl:t.url}}),!1;let o=e.obtenerUsuarioActual(),r=n.data.roles||[];return r.length===0||o.roles?.map(m=>m.nombre)?.some(m=>r.includes(m))?!0:(i.navigate(["/cliente/bienvenida"]),!1)};function uv(n,t){if(n&1&&(s(0,"span",27),l(1),a()),n&2){let e=f();d(),E(e.cantidadCarrito)}}var ha=class n{constructor(t,e){this.authService=t;this.carritoService=e}cantidadCarrito=0;ngOnInit(){this.carritoService.items$.subscribe(t=>{this.cantidadCarrito=t.reduce((e,i)=>e+i.cantidad,0)})}static \u0275fac=function(e){return new(e||n)(x(ae),x(Be))};static \u0275cmp=M({type:n,selectors:[["app-cliente"]],decls:48,vars:2,consts:[[1,"client-layout-container"],[1,"client-layout"],[1,"top-panel"],[1,"user-info"],["src","assets/imagenes/logo.png","alt","Logo",1,"logo"],[1,"welcome"],[1,"top-actions"],["routerLink","/cliente/perfil","routerLinkActive","active",1,"btn-profile"],[1,"bi","bi-person-circle"],["routerLink","/cliente/mi-pedido","routerLinkActive","active",1,"btn-cart"],[1,"bi","bi-cart3"],["class","badge",4,"ngIf"],[1,"main-with-sidebar"],[1,"sidebar"],[1,"sidebar-nav"],["routerLink","/cliente/catalogo","routerLinkActive","active"],[1,"bi","bi-grid-3x3-gap"],["routerLink","/cliente/productos-destacados","routerLinkActive","active"],[1,"bi","bi-star-fill"],["routerLink","/cliente/pedidos","routerLinkActive","active"],[1,"bi","bi-receipt"],["routerLink","/cliente/consultas","routerLinkActive","active"],[1,"bi","bi-chat-dots"],["routerLink","/cliente/ofertas","routerLinkActive","active"],[1,"text-danger",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"main-content"],[1,"badge"]],template:function(e,i){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),_(4,"img",4),s(5,"div")(6,"h3"),l(7,"Mi Cuenta"),a(),s(8,"span",5),l(9),a()()(),s(10,"div",6)(11,"a",7),_(12,"i",8),l(13," Mi Perfil "),a(),s(14,"a",9),_(15,"i",10),l(16," Mi Carrito "),b(17,uv,2,1,"span",11),a()()(),s(18,"div",12)(19,"aside",13)(20,"nav",14)(21,"ul")(22,"li")(23,"a",15),_(24,"i",16),l(25," Cat\xE1logo"),a()(),s(26,"li")(27,"a",17),_(28,"i",18),l(29," Productos Destacados"),a()(),s(30,"li")(31,"a",19),_(32,"i",20),l(33," Mis Pedidos"),a()(),s(34,"li")(35,"a",21),_(36,"i",22),l(37," Mis Consultas"),a()(),s(38,"li")(39,"a",23),_(40,"i",22),l(41," promociones"),a()(),s(42,"li")(43,"a",24),v("click",function(){return i.authService.cerrarSesion()}),_(44,"i",25),l(45," Cerrar Sesi\xF3n"),a()()()()(),s(46,"main",26),_(47,"router-outlet"),a()()()()),e&2){let o;d(9),g("Hola, ",(o=i.authService.obtenerUsuarioActual())==null?null:o.nombre),d(8),p("ngIf",i.cantidadCarrito>0)}},dependencies:[k,N,ee,sn],styles:[".client-layout-container[_ngcontent-%COMP%]{padding:20px;background-color:#f8f9fa;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.client-layout[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.top-panel[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;border-radius:12px;padding:20px;margin-bottom:25px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 8px #0000000d}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.user-info[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;border:2px solid #fd7e14;object-fit:cover}.user-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:#212529}.welcome[_ngcontent-%COMP%]{font-size:.95rem;color:#6c757d}.top-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.btn-profile[_ngcontent-%COMP%], .btn-cart[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 16px;border-radius:8px;font-weight:600;text-decoration:none;transition:all .3s ease;font-size:.95rem}.btn-profile[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.btn-profile[_ngcontent-%COMP%]:hover, .btn-profile.active[_ngcontent-%COMP%]{background:#0d6efd;color:#fff}.btn-cart[_ngcontent-%COMP%]{background:#fd7e14;color:#fff}.btn-cart[_ngcontent-%COMP%]:hover, .btn-cart.active[_ngcontent-%COMP%]{background:#e96a00}.badge[_ngcontent-%COMP%]{background:#dc3545;color:#fff;font-size:.75rem;padding:2px 6px;border-radius:50%;font-weight:700}.main-with-sidebar[_ngcontent-%COMP%]{display:flex;gap:25px}.sidebar[_ngcontent-%COMP%]{width:260px;flex-shrink:0;background:#212529;border-radius:12px;padding:20px;color:#f8f9fa}.sidebar-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 16px;color:#ced4da;text-decoration:none;border-radius:8px;margin-bottom:6px;font-weight:600;transition:all .3s ease}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .sidebar-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#fd7e14;color:#fff}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.sidebar-nav[_ngcontent-%COMP%]   a.text-danger[_ngcontent-%COMP%]{color:#f8d7da!important}.sidebar-nav[_ngcontent-%COMP%]   a.text-danger[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff!important}.main-content[_ngcontent-%COMP%]{flex-grow:1;background:#fff;border:1px solid #dee2e6;border-radius:12px;padding:30px;box-shadow:0 2px 10px #0000000d}@media (max-width: 992px){.main-with-sidebar[_ngcontent-%COMP%]{flex-direction:column}.sidebar[_ngcontent-%COMP%]{width:100%}.top-panel[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:15px}.top-actions[_ngcontent-%COMP%]{justify-content:center}}"]})};var Tt=class n{http=w(K);apiUrl=J.apiUrl+"/pedidos";entregaUrl=J.apiUrl+"/entregas";obtenerPedidosPorUsuario(t){return this.http.get(`${this.apiUrl}/usuario/${t}`)}obtenerTodosLosPedidos(){return this.http.get(`${this.apiUrl}/todos`)}actualizarEstadoPedido(t,e){let i={estado:e};return this.http.put(`${this.apiUrl}/${t}/estado`,i)}eliminarPedido(t){return this.http.delete(`${this.apiUrl}/${t}`)}actualizarPedido(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}crearEntrega(t){return this.http.post(this.entregaUrl,t)}crear(t){return this.http.post(this.apiUrl,t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var pv=(n,t,e,i)=>({"estado-entregado":n,"estado-en_preparacion":t,"estado-pendiente":e,"estado-confirmado":i});function mv(n,t){if(n&1){let e=T();s(0,"div",14)(1,"div",15)(2,"span",16),l(3),P(4,"titlecase"),a(),s(5,"div",17)(6,"h5",18),l(7),P(8,"number"),a(),s(9,"p",19),l(10),P(11,"date"),a(),s(12,"div",20)(13,"span",21),l(14),a(),s(15,"div",22),l(16),P(17,"number"),a()(),s(18,"button",23),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.verDetalle(o))}),l(19," Ver detalle "),a()()()()}if(n&2){let e=t.$implicit,i=f(2);d(2),p("ngClass",vc(17,pv,e.estado==="entregado",e.estado==="en_preparacion",e.estado.includes("pendiente"),e.estado.includes("confirmado")||e.estado.includes("aceptado"))),d(),g(" ",ie(4,6,e.estado)," "),d(4),g("#ORD",A(8,8,e.pedidoId,"3.0-0")),d(3),E(A(11,11,e.fechaPedido,"dd MMMM yyyy, HH:mm")),d(4),g("",i.calcularItemsTotales(e)," \xEDtem(s)"),d(2),g("S/ ",A(17,14,e.total,"1.2-2"))}}function fv(n,t){if(n&1&&(s(0,"div",12),b(1,mv,20,22,"div",13),a()),n&2){let e=f();d(),p("ngForOf",e.listaDePedidos)}}function gv(n,t){n&1&&(s(0,"div",24),_(1,"i",25),s(2,"h4",26),l(3,"A\xFAn no tienes pedidos"),a(),s(4,"p",27),l(5,"\xA1Es hora de probar lo m\xE1s rico del Per\xFA!"),a(),s(6,"a",2),l(7," Hacer mi primer pedido "),a()())}function hv(n,t){if(n&1&&(s(0,"p",64),l(1),a()),n&2){let e=f(2).$implicit;d(),g(" ",e.personalizacion.descripcionExtra," ")}}function vv(n,t){if(n&1&&(s(0,"li",69)(1,"span"),l(2),a(),s(3,"strong",70),l(4),P(5,"number"),a()()),n&2){let e=t.$implicit;d(2),g("\u2022 ",e.nombre),d(2),g("+ S/ ",A(5,2,e.costoAdicional,"1.2-2"))}}function bv(n,t){if(n&1&&(s(0,"div",65)(1,"strong",66),l(2,"Adicionales:"),a(),s(3,"ul",67),b(4,vv,6,5,"li",68),a()()),n&2){let e=f(2).$implicit;d(4),p("ngForOf",e.personalizacion.adicionalesSeleccionados)}}function _v(n,t){if(n&1&&(s(0,"div",57)(1,"div",58)(2,"div",59)(3,"span",60),l(4,"Personalizaci\xF3n Extra"),a(),b(5,hv,2,1,"p",61)(6,bv,5,1,"div",62),a(),s(7,"strong",63),l(8),P(9,"number"),a()()()),n&2){let e=f().$implicit;d(5),p("ngIf",e.personalizacion.descripcionExtra),d(),p("ngIf",(e.personalizacion.adicionalesSeleccionados==null?null:e.personalizacion.adicionalesSeleccionados.length)>0),d(2),g(" + S/ ",A(9,3,e.personalizacion.costoAdicional,"1.2-2")," ")}}function xv(n,t){if(n&1&&(s(0,"div",48)(1,"div",49)(2,"div",50)(3,"div",51),_(4,"i",52),a(),s(5,"div")(6,"h6",53),l(7),a(),s(8,"small",54),l(9),P(10,"number"),a()()(),s(11,"strong",55),l(12),P(13,"number"),a()(),b(14,_v,10,6,"div",56),a()),n&2){let e=t.$implicit;d(7),E(e.producto==null?null:e.producto.nombre),d(2),De("",e.cantidad," \xD7 S/ ",A(10,5,e.precioUnitario,"1.2-2")),d(3),g("S/ ",A(13,8,e.subtotal,"1.2-2")),d(2),p("ngIf",e.personalizacion)}}function Cv(n,t){if(n&1&&(s(0,"div",71)(1,"span"),l(2,"+ Personalizaci\xF3n extra"),a(),s(3,"strong"),l(4),P(5,"number"),a()()),n&2){let e=f().ngIf,i=f();d(4),g("S/ ",A(5,1,i.calcularTotalPersonalizacion(e),"1.2-2"))}}function yv(n,t){if(n&1&&(s(0,"div",72)(1,"span"),l(2,"Descuentos"),a(),s(3,"strong"),l(4),P(5,"number"),a()()),n&2){let e=f().ngIf,i=f();d(4),g("- S/ ",A(5,1,i.calcularTotalDescuentos(e),"1.2-2"))}}function wv(n,t){if(n&1&&(s(0,"div",28)(1,"div",29)(2,"div",30)(3,"h5",31),l(4,"Productos y Personalizaci\xF3n"),a(),b(5,xv,15,11,"div",32),a(),s(6,"div",33)(7,"h5",31),l(8,"Resumen del Pedido"),a(),s(9,"div",34)(10,"div",35)(11,"span"),l(12,"Subtotal productos"),a(),s(13,"strong"),l(14),P(15,"number"),a()(),b(16,Cv,6,4,"div",36)(17,yv,6,4,"div",37),_(18,"hr",38),s(19,"div",39)(20,"strong",40),l(21,"Total"),a(),s(22,"strong",41),l(23),P(24,"number"),a()(),s(25,"div",42)(26,"div",35)(27,"span",43),l(28,"Garant\xEDa pagada"),a(),s(29,"strong",44),l(30),P(31,"number"),a()(),s(32,"div",45)(33,"span",43),l(34,"Resto al recibir"),a(),s(35,"strong",46),l(36),P(37,"number"),a()()(),s(38,"p",47),l(39),P(40,"date"),P(41,"date"),a()()()()()),n&2){let e=t.ngIf,i=f();d(5),p("ngForOf",e.detalles),d(9),g("S/ ",A(15,9,i.calcularSubtotalSinDescuento(e),"1.2-2")),d(2),p("ngIf",i.calcularTotalPersonalizacion(e)>0),d(),p("ngIf",i.calcularTotalDescuentos(e)>0),d(6),g("S/ ",A(24,12,e.total,"1.2-2")),d(7),g("S/ ",A(31,15,e.garantiaPagada,"1.2-2")),d(6),g("S/ ",A(37,18,e.resto,"1.2-2")),d(3),De(" Pedido realizado el ",A(40,21,e.fechaPedido,"dd MMMM yyyy")," a las ",A(41,24,e.fechaPedido,"HH:mm")," ")}}var Ro=class n{constructor(t,e,i){this.pedidoService=t;this.authService=e;this.datePipe=i}listaDePedidos=[];isLoading=!0;pedidoSeleccionado=null;ngOnInit(){let t=this.authService.obtenerUsuarioActual();t?.usuarioId&&this.pedidoService.obtenerPedidosPorUsuario(t.usuarioId).subscribe({next:e=>{this.listaDePedidos=e,this.isLoading=!1},error:()=>{alert("Error al cargar pedidos"),this.isLoading=!1}})}verDetalle(t){this.pedidoSeleccionado=t,new window.bootstrap.Modal(document.getElementById("modalDetalle")).show()}calcularItemsTotales(t){let e=0;return t.detalles?.forEach(i=>{e+=i.cantidad,i.personalizacion&&(e+=1)}),e}calcularSubtotalSinDescuento(t){return t.detalles?.reduce((e,i)=>e+i.precioUnitario*i.cantidad,0)||0}calcularTotalDescuentos(t){return t.detalles?.reduce((e,i)=>e+(i.descuentoAplicado||0),0)||0}calcularSubtotalProductos(t){return t.detalles?.reduce((e,i)=>e+(i.subtotal||0),0)||0}calcularTotalPersonalizacion(t){return t.detalles?.reduce((e,i)=>e+(i.personalizacion?.costoAdicional||0),0)||0}obtenerNombrePromocion(t){return{1:"20% OFF en Tres Leches",2:"Promo Navide\xF1a",3:"Combo Navide\xF1o Familiar",4:"Cupcakes Festivos 2x1",28:"20% OFF en Tres Leches",29:"2x1 en Alfajores de Maicena"}[t]||"Promoci\xF3n especial"}getEstadoClass(t){let e=(t||"").toUpperCase();return e.includes("PENDIENTE")?"bg-warning text-dark":e.includes("ACEPTADO")||e.includes("CONFIRMADO")?"bg-info text-white":e.includes("PREPARACION")||e.includes("CAMINO")?"bg-primary text-white":e.includes("ENTREGADO")?"bg-success text-white":e.includes("CANCELADO")?"bg-danger text-white":"bg-secondary text-white"}getEstadoPagoTexto(t){let e=t.pagos?.[0];return e?e.estado==="validado"&&e.tipoPago==="TOTAL"?"\xA1Pago completo recibido!":e.estado==="validado"?"Garant\xEDa recibida":"Esperando confirmaci\xF3n de pago":"Sin pago registrado"}getEstadoPagoBadge(t){let e=t.pagos?.[0];return e?e.estado==="validado"?e.tipoPago==="TOTAL"?"PAGADO":"GARANT\xCDA":"PENDIENTE":"SIN PAGO"}getEstadoPagoClass(t){let e=t.pagos?.[0];return e?e.estado==="validado"?e.tipoPago==="TOTAL"?"bg-success text-white":"bg-info text-white":"bg-warning text-dark":"bg-secondary"}getDetallePago(t){let e=t.pagos?.[0];return e?`${e.metodo?.toUpperCase()||"M\xE9todo"} ${e.codigoOperacion?"\u2022 Op: "+e.codigoOperacion:""}`:""}static \u0275fac=function(e){return new(e||n)(x(Tt),x(ae),x(re))};static \u0275cmp=M({type:n,selectors:[["app-historial-pedidos"]],features:[Ee([re])],decls:17,vars:7,consts:[[1,"historial-container"],[1,"header-section"],["routerLink","/cliente/catalogo",1,"btn-nuevo-pedido"],["class","row g-4",4,"ngIf"],["class","no-pedidos",4,"ngIf"],["id","modalDetalle","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-xl"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"mb-0","fw-bold"],["type","button","data-bs-dismiss","modal",1,"btn-close","btn-close-white"],["class","modal-body p-5",4,"ngIf"],[1,"row","g-4"],["class","col-12 col-sm-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-lg-4"],[1,"pedido-card"],[1,"badge","pedido-badge",3,"ngClass"],[1,"pedido-card-body"],[1,"pedido-id"],[1,"pedido-fecha"],[1,"d-flex","justify-content-between","align-items-end","mt-3"],[1,"text-muted","small"],[1,"pedido-total"],[1,"btn-ver-detalle","mt-3",3,"click"],[1,"no-pedidos"],[1,"bi","bi-basket3"],[1,"mt-4","text-muted"],[1,"text-muted","mb-4"],[1,"modal-body","p-5"],[1,"row","g-5"],[1,"col-lg-7"],[1,"fw-bold","text-primary","mb-4"],["class","bg-white rounded-4 shadow-sm p-4 mb-4",4,"ngFor","ngForOf"],[1,"col-lg-5"],[1,"bg-light","rounded-4","shadow","p-5"],[1,"d-flex","justify-content-between","mb-3"],["class","d-flex justify-content-between text-success fw-bold mb-3",4,"ngIf"],["class","d-flex justify-content-between text-danger fw-bold mb-4",4,"ngIf"],[1,"border-primary","border-3"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fs-2","text-primary"],[1,"text-success","fs-2"],[1,"pt-4","border-top"],[1,"fs-5"],[1,"text-success","fs-5"],[1,"d-flex","justify-content-between","text-danger","fw-bold"],[1,"fs-4"],[1,"text-center","text-muted","small","mt-4"],[1,"bg-white","rounded-4","shadow-sm","p-4","mb-4"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"d-flex","align-items-center","gap-3"],[1,"bg-light","rounded-3","d-flex","align-items-center","justify-content-center",2,"width","70px","height","70px"],[1,"bi","bi-cake2","fs-2","text-primary"],[1,"fw-bold","mb-0"],[1,"text-muted"],[1,"fs-4","text-primary"],["class","border-start border-warning border-5 ps-4 pt-3 bg-warning bg-opacity-10 rounded-3",4,"ngIf"],[1,"border-start","border-warning","border-5","ps-4","pt-3","bg-warning","bg-opacity-10","rounded-3"],[1,"d-flex","justify-content-between","align-items-start"],[1,"flex-grow-1"],[1,"badge","bg-warning","text-dark","mb-3"],["class","fw-bold mb-2",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"text-success","fs-3","ms-4"],[1,"fw-bold","mb-2"],[1,"mt-3"],[1,"text-success","d-block","mb-2"],[1,"list-unstyled","mb-0"],["class","d-flex justify-content-between py-1",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","py-1"],[1,"text-success"],[1,"d-flex","justify-content-between","text-success","fw-bold","mb-3"],[1,"d-flex","justify-content-between","text-danger","fw-bold","mb-4"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Mis Pedidos"),a(),s(4,"a",2),l(5," Nuevo Pedido "),a()(),b(6,fv,2,1,"div",3)(7,gv,8,0,"div",4),a(),s(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"h4",9),l(13),P(14,"number"),a(),_(15,"button",10),a(),b(16,wv,42,27,"div",11),a()()()),e&2&&(d(6),p("ngIf",i.listaDePedidos.length>0),d(),p("ngIf",i.listaDePedidos.length===0&&!i.isLoading),d(6),g(" Pedido #ORD",A(14,4,i.pedidoSeleccionado==null?null:i.pedidoSeleccionado.pedidoId,"3.0-0")," "),d(3),p("ngIf",i.pedidoSeleccionado))},dependencies:[k,Oe,z,N,ee,Ce,xe,re],styles:[".historial-container[_ngcontent-%COMP%]{padding:1.5rem 1rem;background:linear-gradient(135deg,#f8f9fa,#fff);min-height:100vh}.header-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:2rem;text-align:center}@media (min-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center;text-align:left}}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;color:#2c3e50;margin:0}.btn-nuevo-pedido[_ngcontent-%COMP%]{background:linear-gradient(45deg,#fd7e14,#ff8c42);color:#fff;border:none;padding:.8rem 2rem;border-radius:50px;font-weight:700;font-size:1.1rem;box-shadow:0 8px 20px #fd7e1466;transition:all .3s ease}.btn-nuevo-pedido[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 15px 30px #fd7e1480}.pedido-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#f7e4d1);border-radius:1.5rem;overflow:hidden;box-shadow:0 10px 30px #0000001a;transition:all .4s ease}.pedido-card[_ngcontent-%COMP%]:hover{transform:translateY(-12px);box-shadow:0 25px 50px #0003}.pedido-badge[_ngcontent-%COMP%]{top:15px;right:15px;font-size:.85rem;padding:.5rem 1.2rem;border-radius:50px;font-weight:700}.pedido-card-body[_ngcontent-%COMP%]{padding:1.8rem}.pedido-id[_ngcontent-%COMP%]{font-size:1.5rem;color:#2d2d2d}.pedido-fecha[_ngcontent-%COMP%]{font-size:.95rem;color:#6c757d}.pedido-total[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:900;color:#525151}.btn-ver-detalle[_ngcontent-%COMP%]{background:transparent;border:2.5px solid #ff7700;color:#ff6a00;font-weight:700;border-radius:50px;padding:.7rem;width:100%;transition:all .3s ease}.btn-ver-detalle[_ngcontent-%COMP%]:hover{background:#fb8d3e;color:#fff;transform:scale(1.02)}.estado-entregado[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.estado-en_preparacion[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.estado-pendiente[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.estado-confirmado[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.modal-content[_ngcontent-%COMP%]{border-radius:1.8rem;overflow:hidden;background:linear-gradient(135deg,#f8f9fa,#eca)}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f19f4e,#ed9b21);padding:1.8rem 2rem}.btn-close-lg[_ngcontent-%COMP%]{width:2.2rem;height:2.2rem;background-size:1.4em;opacity:1}.alert-descuento[_ngcontent-%COMP%]{background:linear-gradient(90deg,#d4edda,#c3e6cb);border-left:6px solid #28a745;border-radius:12px;padding:1rem}.no-pedidos[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:5rem;color:#dee2e6;margin-bottom:1.5rem}"]})};var va=class n{nombreUsuario="";actividadesRecientes=[];isLoadingActividad=!0;authService=w(ae);ngOnInit(){let t=this.authService.obtenerUsuarioActual();t&&(this.nombreUsuario=t.nombre)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-bienvenida"]],decls:26,vars:1,consts:[[1,"welcome-dashboard"],[1,"dashboard-grid"],["routerLink","/cliente/pedidos",1,"dashboard-card"],["routerLink","/cliente/perfil",1,"dashboard-card"],["routerLink","/cliente/consultas",1,"dashboard-card"],["routerLink","/cliente/catalogo",1,"dashboard-card"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h1"),l(2),a(),s(3,"p"),l(4,"Desde aqu\xED puedes gestionar tus pedidos, actualizar tu perfil y mucho m\xE1s."),a(),s(5,"div",1)(6,"a",2)(7,"h3"),l(8,"Mis Pedidos"),a(),s(9,"p"),l(10,"Revisa tu historial de compras y el estado de tus pedidos actuales."),a()(),s(11,"a",3)(12,"h3"),l(13,"Mi Perfil"),a(),s(14,"p"),l(15,"Actualiza tus datos personales, direcci\xF3n y contrase\xF1a."),a()(),s(16,"a",4)(17,"h3"),l(18,"Mis Consultas"),a(),s(19,"p"),l(20,"Revisa el historial y estado de tus consultas enviadas."),a()(),s(21,"a",5)(22,"h3"),l(23,"Ver Cat\xE1logo"),a(),s(24,"p"),l(25,"Explora nuestros productos y encuentra tu pr\xF3ximo postre favorito."),a()()()()),e&2&&(d(2),g("\xA1Bienvenido de vuelta, ",i.nombreUsuario,"!"))},dependencies:[k,ee],styles:[".welcome-dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;margin-bottom:10px}.welcome-dashboard[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:25px}.dashboard-card[_ngcontent-%COMP%]{display:block;padding:25px;border:1px solid #e9ecef;border-radius:8px;text-decoration:none;color:#343a40;transition:all .3s ease}.dashboard-card[_ngcontent-%COMP%]:hover{border-color:#fd7e14;transform:translateY(-5px);box-shadow:0 8px 15px #00000012}.dashboard-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#fd7e14}.dashboard-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:0}.recent-activity-section[_ngcontent-%COMP%]{margin-top:3rem;background-color:#fff;padding:1.5rem 2rem;border-radius:8px;box-shadow:0 4px 15px #00000012}.recent-activity-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:1.5rem;color:#343a40}.activity-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.activity-item[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#f8f9fa;padding:.8rem 1rem;border-radius:6px;border-left:4px solid transparent}.activity-icon[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;margin-right:1rem;flex-shrink:0}.activity-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.activity-description[_ngcontent-%COMP%]{font-size:.95rem;color:#495057;margin:0;font-weight:500}.activity-time[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;margin-top:.2rem}.loading-activity[_ngcontent-%COMP%], .no-activity[_ngcontent-%COMP%]{text-align:center;padding:1rem;color:#6c757d;font-style:italic}"]})};function Ev(n,t){if(n&1&&(s(0,"div",29),_(1,"input",30),s(2,"label",31)(3,"span",13),l(4),a(),s(5,"span",32),l(6),a()()()),n&2){let e=t.$implicit,i=f();Z("selected",i.form.value.saborBizcocho===e.nombre),d(),p("id","bizcocho-"+e.adicionalId)("value",e.nombre),d(),p("for","bizcocho-"+e.adicionalId),d(2),E(e.nombre),d(2),g("+ S/ ",e.costoAdicional.toFixed(2))}}function Sv(n,t){if(n&1){let e=T();s(0,"div",33)(1,"input",34),v("input",function(){C(e);let o=f();return y(o.calcularPrecio())}),a()()}}function Pv(n,t){if(n&1){let e=T();s(0,"div",29)(1,"input",35),v("change",function(o){C(e);let r=f();return y(r.onCheckboxChange(o,"rellenos"))}),a(),s(2,"label",31)(3,"span",13),l(4),a(),s(5,"span",32),l(6),a()()()}if(n&2){let e=t.$implicit;d(),p("id","relleno-"+e.adicionalId)("value",e.nombre),d(),p("for","relleno-"+e.adicionalId),d(2),E(e.nombre),d(2),g("+ S/ ",e.costoAdicional.toFixed(2))}}function Mv(n,t){if(n&1){let e=T();s(0,"div",29)(1,"input",35),v("change",function(o){C(e);let r=f();return y(r.onCheckboxChange(o,"toppings"))}),a(),s(2,"label",31)(3,"span",13),l(4),a(),s(5,"span",32),l(6),a()()()}if(n&2){let e=t.$implicit;d(),p("id","topping-"+e.adicionalId)("value",e.nombre),d(),p("for","topping-"+e.adicionalId),d(2),E(e.nombre),d(2),g("+ S/ ",e.costoAdicional.toFixed(2))}}function Dv(n,t){if(n&1){let e=T();s(0,"div",29)(1,"input",35),v("change",function(o){C(e);let r=f();return y(r.onCheckboxChange(o,"decorados"))}),a(),s(2,"label",31)(3,"span",13),l(4),a(),s(5,"span",32),l(6),a()()()}if(n&2){let e=t.$implicit;d(),p("id","decorado-"+e.adicionalId)("value",e.nombre),d(),p("for","decorado-"+e.adicionalId),d(2),E(e.nombre),d(2),g("+ S/ ",e.costoAdicional.toFixed(2))}}function Ov(n,t){if(n&1&&(s(0,"span",36),l(1),a()),n&2){let e=f();d(),g(" S/ ",e.precioCalculado.toFixed(2)," ")}}function Iv(n,t){n&1&&(s(0,"span",37),l(1," A COTIZAR "),a())}var No=class n{constructor(t,e,i,o,r,c){this.fb=t;this.adicionalService=e;this.carritoService=i;this.authService=o;this.router=r;this.location=c;this.form=this.fb.group({saborBizcocho:[""],otroBizcocho:[""],rellenos:this.fb.array([]),toppings:this.fb.array([]),decorados:this.fb.array([]),otroRelleno:[""],otroTopping:[""],otroDecorado:[""],instrucciones:[""]})}form;bizcochos=[];rellenos=[];toppings=[];decorados=[];necesitaCotizacion=!1;precioCalculado=0;ngOnInit(){this.adicionalService.getAdicionales().subscribe(t=>{this.bizcochos=t.filter(e=>e.categoria==="bizcocho"),this.rellenos=t.filter(e=>e.categoria==="relleno"),this.toppings=t.filter(e=>e.categoria==="topping"),this.decorados=t.filter(e=>e.categoria==="decorado"),this.bizcochos.length>0&&this.form.patchValue({saborBizcocho:this.bizcochos[0].nombre}),this.calcularPrecio()}),this.form.valueChanges.subscribe(()=>this.calcularPrecio())}calcularPrecio(){let t=120;this.necesitaCotizacion=!1;let e=this.form.value;if(e.otroBizcocho?.trim())this.necesitaCotizacion=!0;else if(e.saborBizcocho){let i=this.bizcochos.find(o=>o.nombre===e.saborBizcocho);i&&(t+=i.costoAdicional)}e.rellenos.forEach(i=>{let o=this.rellenos.find(r=>r.nombre===i);o&&(t+=o.costoAdicional)}),e.otroRelleno?.trim()&&(this.necesitaCotizacion=!0),e.toppings.forEach(i=>{let o=this.toppings.find(r=>r.nombre===i);o&&(t+=o.costoAdicional)}),e.otroTopping?.trim()&&(this.necesitaCotizacion=!0),e.decorados.forEach(i=>{let o=this.decorados.find(r=>r.nombre===i);o&&(t+=o.costoAdicional)}),e.otroDecorado?.trim()&&(this.necesitaCotizacion=!0),this.precioCalculado=this.necesitaCotizacion?0:t}onCheckboxChange(t,e){let i=this.form.get(e);if(t.target.checked)i.push(new Bn(t.target.value));else{let o=i.controls.findIndex(r=>r.value===t.target.value);o>=0&&i.removeAt(o)}}onSubmit(){if(!this.authService.estaLogueado()){localStorage.setItem("torta_pendiente",JSON.stringify(this.prepararTorta())),alert("Debes iniciar sesi\xF3n para continuar"),this.router.navigate(["/iniciar-sesion"],{queryParams:{returnUrl:"/cliente/personalizar-torta"}});return}let t=this.prepararTorta();localStorage.setItem("torta_pendiente",JSON.stringify(t)),this.router.navigate(["/cliente/entrega"])}prepararTorta(){let t=this.form.value,e=[],i=t.saborBizcocho,o=0;if(t.otroBizcocho?.trim())i=t.otroBizcocho.trim();else if(t.saborBizcocho){let u=this.bizcochos.find(m=>m.nombre===t.saborBizcocho);u&&(e.push(u),o=u.costoAdicional)}t.rellenos.forEach(u=>{let m=this.rellenos.find(h=>h.nombre===u);m&&e.push(m)}),t.otroRelleno?.trim()&&e.push({adicionalId:null,nombre:t.otroRelleno.trim(),categoria:"relleno",costoAdicional:0}),t.toppings.forEach(u=>{let m=this.toppings.find(h=>h.nombre===u);m&&e.push(m)}),t.otroTopping?.trim()&&e.push({adicionalId:null,nombre:t.otroTopping.trim(),categoria:"topping",costoAdicional:0}),t.decorados.forEach(u=>{let m=this.decorados.find(h=>h.nombre===u);m&&e.push(m)}),t.otroDecorado?.trim()&&e.push({adicionalId:null,nombre:t.otroDecorado.trim(),categoria:"decorado",costoAdicional:0});let r=[i,t.rellenos.length>0?`con ${t.rellenos.join(" y ")}`:"",t.otroRelleno?`+ ${t.otroRelleno.trim()}`:"",t.toppings.length>0?`+ ${t.toppings.join(", ")}`:"",t.otroTopping?`+ ${t.otroTopping.trim()}`:"",t.decorados.length>0?`+ ${t.decorados.join(", ")}`:"",t.otroDecorado?`+ ${t.otroDecorado.trim()}`:"",t.instrucciones?`(Nota: ${t.instrucciones.trim()})`:""].filter(Boolean).join(" ").trim(),c=e.reduce((u,m)=>u+(m.costoAdicional||0),0);return{productoId:null,nombre:this.necesitaCotizacion?"Torta Personalizada (A cotizar)":"Torta Personalizada",precioBase:120,precioUnitario:this.precioCalculado,precioCalculado:this.precioCalculado,cantidad:1,categoria:"torta",imagenUrl:"assets/imagenes/torta-personalizada.jpg",esPersonalizada:!0,necesitaCotizacion:this.necesitaCotizacion,descripcionCompleta:r,costoAdicionales:c,adicionales:e,personalizacion:{descripcionExtra:r||"Torta personalizada",costoAdicional:c,adicionalesSeleccionados:e.map(u=>u.adicionalId).filter(Boolean)}}}regresar(){this.location.back()}static \u0275fac=function(e){return new(e||n)(x(ot),x(En),x(Be),x(ae),x(pe),x(gt))};static \u0275cmp=M({type:n,selectors:[["app-personalizar-torta"]],decls:68,vars:11,consts:[[1,"customizer-container"],[1,"btn-retroceder",3,"click"],[1,"customizer-header"],[1,"step-indicator"],[1,"step","active"],[1,"step"],[1,"customizer-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"options-grid"],["class","option-card",3,"selected",4,"ngFor","ngForOf"],[1,"option-card","otro-option"],["type","radio","id","bizcocho-otro","formControlName","saborBizcocho",3,"value"],["for","bizcocho-otro",1,"option-content"],[1,"option-name"],[1,"option-price","text-warning"],["class","mt-3",4,"ngIf"],["class","option-card",4,"ngFor","ngForOf"],[1,"mt-4"],["type","text","formControlName","otroRelleno","placeholder","\xBFQuieres un relleno especial? Escr\xEDbelo aqu\xED...",1,"form-control",3,"input"],["type","text","formControlName","otroTopping","placeholder","Ej: Macarons, flores comestibles, chocolate derretido...",1,"form-control",3,"input"],["type","text","formControlName","otroDecorado","placeholder","Ej: Figura 3D, foto comestible, luces LED, nombre en chocolate...",1,"form-control",3,"input"],["rows","3","formControlName","instrucciones","placeholder","Ej: Feliz cumplea\xF1os Juanito, Te amo mam\xE1...",1,"form-control"],[1,"resumen-card","p-4","border","rounded","bg-light"],[1,"mb-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fs-5"],["class","fs-4 fw-bold text-success ms-3",4,"ngIf"],["class","fs-4 fw-bold text-warning ms-3",4,"ngIf"],["type","submit",1,"btn-submit","mt-4"],[1,"option-card"],["type","radio","formControlName","saborBizcocho",3,"id","value"],[1,"option-content",3,"for"],[1,"option-price"],[1,"mt-3"],["type","text","formControlName","otroBizcocho","placeholder","Ej: Bizcocho de maracuy\xE1, caf\xE9, almendra, naranja...",1,"form-control",3,"input"],["type","checkbox",3,"change","id","value"],[1,"fs-4","fw-bold","text-success","ms-3"],[1,"fs-4","fw-bold","text-warning","ms-3"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"a",1),v("click",function(){return i.regresar()}),l(2," \u2190 Volver al cat\xE1logo "),a(),s(3,"div",2)(4,"h2"),l(5,"Personaliza tu torta"),a(),s(6,"div",3)(7,"div",4),l(8,"1. Personalizaci\xF3n"),a(),s(9,"div",5),l(10,"2. Entrega"),a(),s(11,"div",5),l(12,"3. Pago"),a()()(),s(13,"form",6),v("ngSubmit",function(){return i.onSubmit()}),s(14,"div",7)(15,"h3"),l(16,"Sabor del Bizcocho"),a(),s(17,"p"),l(18,"Elige el sabor base de tu torta"),a(),s(19,"div",8),b(20,Ev,7,7,"div",9),s(21,"div",10),_(22,"input",11),s(23,"label",12)(24,"span",13),l(25,"Otro sabor personalizado"),a(),s(26,"span",14),l(27,"A cotizar"),a()()()(),b(28,Sv,2,0,"div",15),a(),s(29,"div",7)(30,"h3"),l(31,"Rellenos"),a(),s(32,"p"),l(33,"Puedes elegir varios"),a(),s(34,"div",8),b(35,Pv,7,5,"div",16),a(),s(36,"div",17)(37,"input",18),v("input",function(){return i.calcularPrecio()}),a()()(),s(38,"div",7)(39,"h3"),l(40,"Toppings y decoraciones"),a(),s(41,"div",8),b(42,Mv,7,5,"div",16),a(),s(43,"div",17)(44,"input",19),v("input",function(){return i.calcularPrecio()}),a()()(),s(45,"div",7)(46,"h3"),l(47,"Extras"),a(),s(48,"div",8),b(49,Dv,7,5,"div",16),a(),s(50,"div",17)(51,"input",20),v("input",function(){return i.calcularPrecio()}),a()()(),s(52,"div",7)(53,"h3"),l(54,"Mensaje en la torta (opcional)"),a(),_(55,"textarea",21),a(),s(56,"div",7)(57,"div",22)(58,"h4",23),l(59,"Resumen de tu torta:"),a(),s(60,"div",24)(61,"div")(62,"strong",25),l(63,"Total:"),a(),b(64,Ov,2,1,"span",26)(65,Iv,2,0,"span",27),a()(),s(66,"button",28),l(67," Continuar \u2192 Entrega "),a()()()()()),e&2&&(d(13),p("formGroup",i.form),d(7),p("ngForOf",i.bizcochos),d(),Z("selected",i.form.value.saborBizcocho===null),d(),p("value",null),d(6),p("ngIf",i.form.value.saborBizcocho===null),d(7),p("ngForOf",i.rellenos),d(7),p("ngForOf",i.toppings),d(7),p("ngForOf",i.decorados),d(15),p("ngIf",!i.necesitaCotizacion),d(),p("ngIf",i.necesitaCotizacion))},dependencies:[k,z,N,rt,Ue,te,Hn,se,ze,Ze,Ke],styles:[".customizer-container[_ngcontent-%COMP%]{max-width:900px;margin:50px auto;font-family:Arial,sans-serif;position:relative}.btn-retroceder[_ngcontent-%COMP%]{display:inline-block;margin-bottom:20px;font-size:16px;font-weight:600;color:#fd7e14;text-decoration:none;cursor:pointer;transition:color .3s ease}.btn-retroceder[_ngcontent-%COMP%]:hover{color:#c7640f}.customizer-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.customizer-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px}.step-indicator[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-top:15px}.step[_ngcontent-%COMP%]{padding:8px 15px;border-radius:20px;background-color:#e9ecef;color:#6c757d;font-weight:700}.step.active[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff}.customizer-form[_ngcontent-%COMP%]{background-color:#fff;padding:40px;border-radius:10px;box-shadow:0 4px 20px #00000014}.form-section[_ngcontent-%COMP%]{margin-bottom:35px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;color:#333}.form-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#777;margin-top:5px;margin-bottom:20px}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ccc;border-radius:5px;font-size:16px;box-sizing:border-box}.options-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}.option-card[_ngcontent-%COMP%]{display:flex;align-items:center;border:2px solid #e9ecef;border-radius:8px;padding:15px;cursor:pointer;transition:all .3s ease}.option-card[_ngcontent-%COMP%]:hover{border-color:#fd7e14;background-color:#fff8f0}.option-card[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;margin-right:15px}.option-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.option-name[_ngcontent-%COMP%]{font-weight:500}.option-price[_ngcontent-%COMP%]{font-weight:700;color:#28a745}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:15px;border:none;border-radius:8px;background-color:#fd7e14;color:#fff;font-size:18px;font-weight:700;cursor:pointer}.buttons-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1}.product-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.option-card.selected[_ngcontent-%COMP%]{border-color:#fd7e14!important;background-color:#fff8f0!important}.option-card[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .option-card[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:15px}.option-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;width:100%;margin:0}.otro-option[_ngcontent-%COMP%]{border-style:dashed}"]})};function Av(n,t){if(n&1){let e=T();s(0,"button",17),v("click",function(){C(e);let o=f().$implicit,r=f();return y(r.establecerPrincipal(o))}),l(1," Hacer Principal "),a()}}function Tv(n,t){if(n&1){let e=T();s(0,"div",8)(1,"div",9)(2,"span",10),l(3),a(),s(4,"span",11),l(5),a()(),s(6,"p",12),l(7),a(),s(8,"div",13),b(9,Av,2,0,"button",14),s(10,"button",15),v("click",function(){let o=C(e).$implicit,r=f();return y(r.abrirModal(o))}),l(11,"Editar"),a(),s(12,"button",16),v("click",function(){let o=C(e).$implicit,r=f();return y(r.toggleActivo(o))}),l(13),a()()()}if(n&2){let e=t.$implicit;Z("principal",e.esPrincipal)("inactiva",!e.activo),d(3),g("",e.porcentaje,"%"),d(),Z("principal",e.esPrincipal),d(),g(" ",e.esPrincipal?"PRINCIPAL":e.activo?"ACTIVA":"INACTIVA"," "),d(2),E(e.descripcion||"Sin descripci\xF3n"),d(2),p("ngIf",!e.esPrincipal),d(4),g(" ",e.activo?"Desactivar":"Activar"," ")}}function kv(n,t){if(n&1){let e=T();s(0,"div",18),v("click",function(){C(e);let o=f();return y(o.cerrarModal())}),s(1,"div",19),v("click",function(o){return C(e),y(o.stopPropagation())}),s(2,"div",20),l(3),a(),s(4,"div",21)(5,"div",22)(6,"label"),l(7,"Porcentaje (%)"),a(),s(8,"input",23),ue("ngModelChange",function(o){C(e);let r=f();return de(r.form.porcentaje,o)||(r.form.porcentaje=o),y(o)}),a()(),s(9,"div",22)(10,"label"),l(11,"Descripci\xF3n (opcional)"),a(),s(12,"input",24),ue("ngModelChange",function(o){C(e);let r=f();return de(r.form.descripcion,o)||(r.form.descripcion=o),y(o)}),a()(),s(13,"div",25)(14,"button",26),v("click",function(){C(e);let o=f();return y(o.cerrarModal())}),l(15,"Cancelar"),a(),s(16,"button",27),v("click",function(){C(e);let o=f();return y(o.guardar())}),l(17),a()()()()()}if(n&2){let e=f();d(3),g(" ",e.esEdicion?"Editar Opci\xF3n":"Nueva Opci\xF3n de Garant\xEDa"," "),d(5),ce("ngModel",e.form.porcentaje),d(4),ce("ngModel",e.form.descripcion),d(5),g(" ",e.esEdicion?"Actualizar":"Crear"," ")}}var ba=class n{garantiaService=w(Sn);opciones=[];garantiaPrincipal=null;modalVisible=!1;esEdicion=!1;form={id:0,porcentaje:50,descripcion:"",activo:!0};ngOnInit(){this.cargarTodo()}cargarTodo(){this.garantiaService.obtenerTodas().subscribe({next:t=>{this.opciones=t,this.garantiaPrincipal=t.find(e=>e.esPrincipal)||t.find(e=>e.activo)||t[0]||null},error:()=>alert("Error al cargar garant\xEDas")})}establecerPrincipal(t){this.garantiaPrincipal?.id!==t.id&&this.garantiaService.establecerPrincipal(t.id).subscribe({next:()=>{alert(`\xA1Garant\xEDa actualizada! Ahora el cliente paga ${t.porcentaje}%`),this.cargarTodo()},error:()=>alert("Error al establecer garant\xEDa principal")})}abrirModal(t){t?(this.esEdicion=!0,this.form=O({},t)):(this.esEdicion=!1,this.form={id:0,porcentaje:50,descripcion:"",activo:!0}),this.modalVisible=!0}cerrarModal(){this.modalVisible=!1}guardar(){if(this.form.porcentaje<1||this.form.porcentaje>100){alert("El porcentaje debe estar entre 1 y 100");return}(this.esEdicion?this.garantiaService.actualizar(this.form.id,this.form):this.garantiaService.crear(this.form)).subscribe({next:()=>{this.cargarTodo(),this.cerrarModal()}})}toggleActivo(t){this.garantiaService.toggleActivo(t.id).subscribe({next:()=>t.activo=!t.activo})}eliminar(t){confirm("\xBFSeguro que quieres eliminar esta opci\xF3n?")&&this.garantiaService.eliminar(t).subscribe({next:()=>this.cargarTodo()})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-garantias"]],decls:16,vars:3,consts:[[1,"container"],[1,"titulo"],[1,"card-principal"],[1,"valor-grande"],[1,"opciones-grid"],[1,"btn-nuevo",3,"click"],["class","opcion-card",3,"principal","inactiva",4,"ngFor","ngForOf"],["class","modal-directo",3,"click",4,"ngIf"],[1,"opcion-card"],[1,"header"],[1,"porcentaje"],[1,"badge"],[1,"descripcion"],[1,"acciones"],["class","btn-principal",3,"click",4,"ngIf"],[1,"btn-edit",3,"click"],[1,"btn-toggle",3,"click"],[1,"btn-principal",3,"click"],[1,"modal-directo",3,"click"],[1,"modal-content-directo",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"form-group"],["type","number","min","1","max","100",3,"ngModelChange","ngModel"],["type","text",3,"ngModelChange","ngModel"],[1,"botones"],[1,"btn-cancel",3,"click"],[1,"btn-guardar",3,"click"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2",1),l(2,"Gesti\xF3n Completa de Garant\xEDas"),a(),s(3,"div",2)(4,"h3"),l(5,"Garant\xEDa que paga el cliente"),a(),s(6,"div",3)(7,"strong"),l(8),a()(),s(9,"p"),l(10,"Este es el porcentaje que el cliente debe pagar al hacer un pedido personalizado"),a()(),s(11,"div",4)(12,"button",5),v("click",function(){return i.abrirModal()}),l(13,"+ Nueva Opci\xF3n"),a(),b(14,Tv,14,11,"div",6),a(),b(15,kv,18,4,"div",7),a()),e&2&&(d(8),g("",(i.garantiaPrincipal==null?null:i.garantiaPrincipal.porcentaje)||50,"%"),d(6),p("ngForOf",i.opciones),d(),p("ngIf",i.modalVisible))},dependencies:[k,z,N,Te,te,$n,se,Oo,_l,Re],styles:[".container[_ngcontent-%COMP%]{max-width:1100px;margin:3rem auto;padding:0 1.5rem}.titulo[_ngcontent-%COMP%]{text-align:center;color:#fd7e14;font-size:3.2rem;font-weight:700;margin-bottom:3rem}.card-principal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3e0,#ffe0b2);border:5px solid #fd7e14;border-radius:25px;padding:2.5rem;text-align:center;margin-bottom:4rem;box-shadow:0 20px 50px #fd7e1459}.card-principal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#e65100;margin-bottom:1.2rem;font-size:2rem}.valor-grande[_ngcontent-%COMP%]{font-size:6rem;font-weight:700;color:#fd7e14;margin:1.5rem 0;text-shadow:2px 2px 10px rgba(253,126,20,.3)}.btn-nuevo[_ngcontent-%COMP%]{display:block;margin:0 auto 3rem;background:#fd7e14;color:#fff;padding:18px 60px;border:none;border-radius:50px;font-size:1.6rem;font-weight:700;cursor:pointer;box-shadow:0 12px 40px #fd7e1466;transition:all .3s}.btn-nuevo[_ngcontent-%COMP%]:hover{background:#e66b0d;transform:translateY(-5px)}.opciones-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:2.5rem}.opcion-card[_ngcontent-%COMP%]{background:#fff;border-radius:25px;padding:2rem;box-shadow:0 18px 45px #0000001f;border:4px solid #fd7e14;transition:all .4s;position:relative}.opcion-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 25px 60px #fd7e144d}.opcion-card.principal[_ngcontent-%COMP%]{border:6px solid #ff6d00;transform:scale(1.06);box-shadow:0 25px 70px #ff6d0080}.opcion-card.inactiva[_ngcontent-%COMP%]{opacity:.6;border-color:#ccc}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.porcentaje[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;color:#fd7e14}.badge[_ngcontent-%COMP%]{padding:10px 24px;border-radius:30px;font-weight:700;font-size:1rem}.badge.principal[_ngcontent-%COMP%]{background:#ff6d00;color:#fff}.badge[_ngcontent-%COMP%]:not(.principal){background:#d4edda;color:#155724}.descripcion[_ngcontent-%COMP%]{color:#555;min-height:60px;margin:1.5rem 0;font-size:1.1rem}.acciones[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-top:1.5rem}.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:30px;font-weight:700;cursor:pointer;flex:1;min-width:120px;transition:all .3s}.btn-principal[_ngcontent-%COMP%]{background:#ff6d00;color:#fff}.btn-edit[_ngcontent-%COMP%]{background:#fd7e14;color:#fff}.btn-toggle[_ngcontent-%COMP%]{background:#ffc107;color:#333}.modal-directo[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000c;display:flex;justify-content:center;align-items:center;z-index:99999}.modal-content-directo[_ngcontent-%COMP%]{background:#fff;width:90%;max-width:500px;border-radius:20px;border:5px solid #fd7e14;box-shadow:0 15px 40px #0006;overflow:hidden}.modal-header[_ngcontent-%COMP%]{background:#fd7e14;color:#fff;padding:1.5rem;text-align:center;font-size:1.8rem;font-weight:700}.modal-body[_ngcontent-%COMP%]{padding:2rem}.form-group[_ngcontent-%COMP%]{margin:1.5rem 0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.6rem;font-weight:700;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px;border:3px solid #fd7e14;border-radius:12px;font-size:1.2rem;background:#fff8f0}.botones[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem}.btn-cancel[_ngcontent-%COMP%], .btn-guardar[_ngcontent-%COMP%]{padding:12px 30px;border:none;border-radius:25px;font-weight:700;cursor:pointer}.btn-cancel[_ngcontent-%COMP%]{background:#999;color:#fff}.btn-guardar[_ngcontent-%COMP%]{background:#fd7e14;color:#fff}"]})};function Fv(n,t){n&1&&(s(0,"div",17),l(1,"Cargando tus datos..."),a())}function Rv(n,t){if(n&1&&(s(0,"div",18),l(1),a()),n&2){let e=f();d(),E(e.errorMensajePerfil)}}function Nv(n,t){n&1&&(s(0,"small",27),l(1," El nombre es requerido. "),a())}function Lv(n,t){n&1&&(s(0,"small",27),l(1," El tel\xE9fono debe tener 9 d\xEDgitos num\xE9ricos. "),a())}function Vv(n,t){if(n&1&&(s(0,"div",28),l(1),a()),n&2){let e=f(2);d(),E(e.exitoMensajePerfil)}}function jv(n,t){if(n&1){let e=T();s(0,"form",5),v("ngSubmit",function(){C(e);let o=f();return y(o.guardarPerfil())}),s(1,"div",6)(2,"label",19),l(3,"Nombre Completo"),a(),_(4,"input",20),b(5,Nv,2,0,"small",9),a(),s(6,"div",6)(7,"label",21),l(8,"Correo Electr\xF3nico"),a(),_(9,"input",22),s(10,"small"),l(11,"El correo electr\xF3nico no se puede cambiar."),a()(),s(12,"div",6)(13,"label",23),l(14,"Tel\xE9fono"),a(),_(15,"input",24),b(16,Lv,2,0,"small",9),a(),s(17,"div",6)(18,"label",25),l(19,"Direcci\xF3n"),a(),_(20,"input",26),a(),s(21,"button",14),l(22),a(),b(23,Vv,2,1,"div",16),a()}if(n&2){let e=f();p("formGroup",e.perfilForm),d(5),p("ngIf",e.isControlInvalid(e.perfilForm,"nombre")&&e.getControlError(e.perfilForm,"nombre","required")),d(11),p("ngIf",e.isControlInvalid(e.perfilForm,"telefono")&&e.getControlError(e.perfilForm,"telefono","pattern")),d(5),p("disabled",e.perfilForm.invalid||e.isSavingPerfil),d(),g(" ",e.isSavingPerfil?"Guardando...":"Guardar Cambios"," "),d(),p("ngIf",e.exitoMensajePerfil)}}function zv(n,t){n&1&&(s(0,"small",27),l(1," La contrase\xF1a actual es requerida. "),a())}function Uv(n,t){n&1&&(s(0,"small",27),l(1," La nueva contrase\xF1a es requerida. "),a())}function Bv(n,t){n&1&&(s(0,"small",27),l(1," La contrase\xF1a debe tener al menos 6 caracteres. "),a())}function Gv(n,t){n&1&&(s(0,"small",27),l(1," Confirma la nueva contrase\xF1a. "),a())}function $v(n,t){n&1&&(s(0,"small",27),l(1," Las contrase\xF1as no coinciden. "),a())}function Hv(n,t){if(n&1&&(s(0,"div",29),l(1),a()),n&2){let e=f();d(),E(e.errorMensajePassword)}}function Wv(n,t){if(n&1&&(s(0,"div",28),l(1),a()),n&2){let e=f();d(),E(e.exitoMensajePassword)}}function qv(n){let t=n.get("nuevaPassword"),e=n.get("confirmarPassword");return!t||!e||!t.value||!e.value||t.value===e.value?null:{passwordMismatch:!0}}var _a=class n{perfilForm;passwordForm;usuarioOriginal=null;isLoading=!0;isSavingPerfil=!1;isSavingPassword=!1;errorMensajePerfil=null;exitoMensajePerfil=null;errorMensajePassword=null;exitoMensajePassword=null;usuarioService=w(Jt);fb=w(ot);constructor(){this.perfilForm=this.fb.group({nombre:["",$.required],email:[{value:"",disabled:!0},[$.required,$.email]],telefono:["",[$.pattern("^[0-9]{9}$")]],direccion:[""]}),this.passwordForm=this.fb.group({passwordActual:["",$.required],nuevaPassword:["",[$.required,$.minLength(6)]],confirmarPassword:["",$.required]},{validators:qv})}ngOnInit(){this.cargarDatosUsuario()}cargarDatosUsuario(){this.isLoading=!0,this.errorMensajePerfil=null,this.usuarioService.obtenerMiPerfil().subscribe({next:t=>{this.usuarioOriginal=t,this.perfilForm.patchValue({nombre:t.nombre,email:t.email,telefono:t.telefono||"",direccion:t.direccion||""}),this.isLoading=!1},error:t=>{console.error("Error al cargar el perfil:",t),this.errorMensajePerfil="No se pudieron cargar tus datos. Intenta de nuevo.",this.isLoading=!1}})}guardarPerfil(){if(this.perfilForm.invalid||!this.usuarioOriginal)return;this.isSavingPerfil=!0,this.errorMensajePerfil=null,this.exitoMensajePerfil=null;let t=ne(O({},this.usuarioOriginal),{nombre:this.perfilForm.value.nombre,telefono:this.perfilForm.value.telefono,direccion:this.perfilForm.value.direccion});this.usuarioService.actualizarMiPerfil(t).subscribe({next:e=>{this.usuarioOriginal=e,this.perfilForm.patchValue({nombre:e.nombre,telefono:e.telefono||"",direccion:e.direccion||""}),this.isSavingPerfil=!1,this.exitoMensajePerfil="\xA1Perfil actualizado con \xE9xito!",setTimeout(()=>this.exitoMensajePerfil=null,3e3)},error:e=>{console.error("Error al guardar el perfil:",e),this.errorMensajePerfil="No se pudieron guardar los cambios. Intenta de nuevo.",this.isSavingPerfil=!1}})}cambiarPassword(){if(this.passwordForm.invalid){this.passwordForm.markAllAsTouched();return}this.isSavingPassword=!0,this.errorMensajePassword=null,this.exitoMensajePassword=null;let t={passwordActual:this.passwordForm.value.passwordActual,nuevaPassword:this.passwordForm.value.nuevaPassword};this.usuarioService.cambiarPassword(t).subscribe({next:e=>{this.isSavingPassword=!1,this.exitoMensajePassword=e||"Contrase\xF1a cambiada con \xE9xito.",this.passwordForm.reset(),setTimeout(()=>this.exitoMensajePassword=null,4e3)},error:e=>{console.error("Error al cambiar contrase\xF1a:",e),this.errorMensajePassword=e.error||"Error inesperado al cambiar la contrase\xF1a.",this.isSavingPassword=!1}})}isControlInvalid(t,e){let i=t.get(e);return!!i&&i.invalid&&(i.dirty||i.touched)}getControlError(t,e,i){let o=t.get(e);return!!o&&o.hasError(i)}getPasswordFormError(t){return this.passwordForm.hasError(t)&&(this.passwordForm.get("confirmarPassword")?.touched??!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-mi-perfil"]],decls:35,vars:13,consts:[[1,"perfil-container"],["class","loading",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"separator"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","passwordActual"],["type","password","id","passwordActual","formControlName","passwordActual",1,"form-control"],["class","text-danger",4,"ngIf"],["for","nuevaPassword"],["type","password","id","nuevaPassword","formControlName","nuevaPassword",1,"form-control"],["for","confirmarPassword"],["type","password","id","confirmarPassword","formControlName","confirmarPassword",1,"form-control"],["type","submit",1,"btn-guardar",3,"disabled"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],[1,"loading"],[1,"alert","alert-danger"],["for","nombre"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["for","telefono"],["type","tel","id","telefono","formControlName","telefono",1,"form-control"],["for","direccion"],["type","text","id","direccion","formControlName","direccion","placeholder","Ej: Av. Principal 123, Dpto. 401",1,"form-control"],[1,"text-danger"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2"),l(2,"Mi Perfil"),a(),s(3,"p"),l(4,"Actualiza tu informaci\xF3n personal y de contacto."),a(),b(5,Fv,2,0,"div",1)(6,Rv,2,1,"div",2)(7,jv,24,6,"form",3),_(8,"hr",4),s(9,"h2"),l(10,"Cambiar Contrase\xF1a"),a(),s(11,"p"),l(12,"Establece una nueva contrase\xF1a para tu cuenta."),a(),s(13,"form",5),v("ngSubmit",function(){return i.cambiarPassword()}),s(14,"div",6)(15,"label",7),l(16,"Contrase\xF1a Actual"),a(),_(17,"input",8),b(18,zv,2,0,"small",9),a(),s(19,"div",6)(20,"label",10),l(21,"Nueva Contrase\xF1a"),a(),_(22,"input",11),b(23,Uv,2,0,"small",9)(24,Bv,2,0,"small",9),a(),s(25,"div",6)(26,"label",12),l(27,"Confirmar Nueva Contrase\xF1a"),a(),_(28,"input",13),b(29,Gv,2,0,"small",9)(30,$v,2,0,"small",9),a(),s(31,"button",14),l(32),a(),b(33,Hv,2,1,"div",15)(34,Wv,2,1,"div",16),a()()),e&2&&(d(5),p("ngIf",i.isLoading),d(),p("ngIf",i.errorMensajePerfil),d(),p("ngIf",!i.isLoading&&i.perfilForm),d(6),p("formGroup",i.passwordForm),d(5),p("ngIf",i.isControlInvalid(i.passwordForm,"passwordActual")&&i.getControlError(i.passwordForm,"passwordActual","required")),d(5),p("ngIf",i.isControlInvalid(i.passwordForm,"nuevaPassword")&&i.getControlError(i.passwordForm,"nuevaPassword","required")),d(),p("ngIf",i.isControlInvalid(i.passwordForm,"nuevaPassword")&&i.getControlError(i.passwordForm,"nuevaPassword","minlength")),d(5),p("ngIf",i.isControlInvalid(i.passwordForm,"confirmarPassword")&&i.getControlError(i.passwordForm,"confirmarPassword","required")),d(),p("ngIf",i.getPasswordFormError("passwordMismatch")),d(),p("disabled",i.passwordForm.invalid||i.isSavingPassword),d(),g(" ",i.isSavingPassword?"Cambiando...":"Cambiar Contrase\xF1a"," "),d(),p("ngIf",i.errorMensajePassword),d(),p("ngIf",i.exitoMensajePassword))},dependencies:[k,N,rt,Ue,te,se,ze,Ze,Ke],styles:[".perfil-container[_ngcontent-%COMP%]{padding:2rem}.perfil-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem}.perfil-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#6c757d;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]{display:block;width:100%;padding:.75rem 1rem;font-size:1rem;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{color:#495057;background-color:#fff;border-color:#fd7e14;outline:0;box-shadow:0 0 0 .2rem #fd7e1440}.form-control[disabled][_ngcontent-%COMP%]{background-color:#e9ecef;opacity:1}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;margin-top:.25rem}.btn-guardar[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff;padding:.75rem 1.5rem;border:none;border-radius:.25rem;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .15s ease-in-out;margin-top:1rem}.btn-guardar[_ngcontent-%COMP%]:hover{background-color:#e66a00}.loading[_ngcontent-%COMP%]{padding:1rem;text-align:center;font-weight:600;color:#6c757d}.alert[_ngcontent-%COMP%]{padding:1rem;margin-top:1.5rem;border-radius:.25rem;border:1px solid transparent}.alert-danger[_ngcontent-%COMP%]{color:#721c24;background-color:#f8d7da;border-color:#f5c6cb}.alert-success[_ngcontent-%COMP%]{color:#155724;background-color:#d4edda;border-color:#c3e6cb}.text-danger[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem;display:block}.separator[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:3rem;border:0;border-top:1px solid #dee2e6}.mt-3[_ngcontent-%COMP%]{margin-top:1rem!important}"]})};var Yv=n=>["/cliente/detalle",n];function Zv(n,t){n&1&&(s(0,"div",9),l(1," Cargando tus consultas... "),a())}function Kv(n,t){if(n&1&&(s(0,"div",10),l(1),a()),n&2){let e=f();d(),g(" ",e.errorMensaje," ")}}function Jv(n,t){n&1&&(s(0,"div",11),l(1," \xA1Tu consulta ha sido enviada con \xE9xito! La encontrar\xE1s marcada como **Pendiente**. "),a())}function Xv(n,t){n&1&&(s(0,"div",12),l(1," A\xFAn no has enviado ninguna consulta. "),a())}function Qv(n,t){if(n&1&&(s(0,"div",15)(1,"span",16),l(2),P(3,"titlecase"),a(),s(4,"div",17)(5,"h3"),l(6),a(),s(7,"p",18),l(8),P(9,"date"),a(),s(10,"p",19),l(11),a(),s(12,"p",20),l(13),a()(),s(14,"a",21),l(15,` Ver detalle
`),a()()),n&2){let e=t.$implicit,i=f(2);d(),Z("tag-pendiente",e.estado==="pendiente")("tag-respondido",e.estado==="respondido"),d(),g(" ",ie(3,10,e.estado)," "),d(4),g("#CONSULTA-",e.contactoId||"N/A"),d(2),E(A(9,12,e.fecha,"dd MMMM yyyy, h:mm a")),d(3),g("Motivo: **",i.obtenerNombreMotivo(e.motivo),"**"),d(2),E(e.mensaje.substring(0,50)+"..."),d(),p("routerLink",Gt(15,Yv,e.contactoId))}}function eb(n,t){if(n&1&&(s(0,"div",13),b(1,Qv,16,17,"div",14),a()),n&2){let e=f();d(),p("ngForOf",e.consultas)}}function tb(n,t){if(n&1&&(s(0,"option",33),l(1),a()),n&2){let e=t.$implicit;p("value",e.valor),d(),g(" ",e.nombre," ")}}function nb(n,t){if(n&1){let e=T();s(0,"div",22)(1,"div",23)(2,"h3"),l(3,"Nueva Consulta"),a(),s(4,"div",24)(5,"label",25),l(6,"Selecciona el Motivo:"),a(),s(7,"select",26),ue("ngModelChange",function(o){C(e);let r=f();return de(r.motivoSeleccionado,o)||(r.motivoSeleccionado=o),y(o)}),b(8,tb,2,2,"option",27),a()(),s(9,"div",24)(10,"label",28),l(11,"Tu Mensaje (m\xEDnimo 10 caracteres):"),a(),s(12,"textarea",29),ue("ngModelChange",function(o){C(e);let r=f();return de(r.nuevoMensaje,o)||(r.nuevoMensaje=o),y(o)}),a()(),s(13,"div",30)(14,"button",31),v("click",function(){C(e);let o=f();return y(o.toggleFormulario())}),l(15,"Cancelar"),a(),s(16,"button",32),v("click",function(){C(e);let o=f();return y(o.enviarNuevaConsulta())}),l(17),a()()()()}if(n&2){let e=f();d(7),ce("ngModel",e.motivoSeleccionado),d(),p("ngForOf",e.motivos),d(4),ce("ngModel",e.nuevoMensaje),d(4),p("disabled",e.isSending||e.nuevoMensaje.trim().length<10||!e.motivoSeleccionado),d(),g(" ",e.isSending?"Enviando...":"Enviar Consulta"," ")}}var xa=class n{consultas=[];isLoading=!0;errorMensaje=null;contactoService=w(Yt);mostrarFormulario=!1;nuevoMensaje="";motivoSeleccionado="general";isSending=!1;enviadoExito=!1;motivos=[{valor:"cotizacion",nombre:"Cotizaci\xF3n"},{valor:"soporte",nombre:"Soporte T\xE9cnico"},{valor:"general",nombre:"Consulta General"}];ngOnInit(){this.cargarConsultas()}cargarConsultas(){this.isLoading=!0,this.errorMensaje=null,this.contactoService.obtenerMiHistorial().subscribe({next:t=>{this.consultas=t,this.isLoading=!1,this.enviadoExito=!1},error:t=>{console.error("Error al cargar las consultas:",t),this.errorMensaje="No se pudieron cargar tus consultas.",this.isLoading=!1}})}toggleFormulario(){this.mostrarFormulario=!this.mostrarFormulario,this.nuevoMensaje="",this.motivoSeleccionado="general",this.enviadoExito=!1}enviarNuevaConsulta(){let t=this.motivoSeleccionado;if(this.nuevoMensaje.trim().length<10){console.error("El mensaje es muy corto."),this.errorMensaje="El mensaje debe tener al menos 10 caracteres.";return}if(!t){console.error("El motivo no est\xE1 seleccionado."),this.errorMensaje="Por favor, selecciona un motivo para tu consulta.";return}this.isSending=!0,this.errorMensaje=null;let e={motivo:t,mensaje:this.nuevoMensaje.trim()};this.contactoService.registrar(e).subscribe({next:i=>{this.isSending=!1,this.enviadoExito=!0,this.mostrarFormulario=!1,this.nuevoMensaje="",this.motivoSeleccionado="general",this.cargarConsultas()},error:i=>{console.error("Error al enviar la consulta:",i),this.errorMensaje="Error al enviar la consulta. Int\xE9ntalo de nuevo.",this.isSending=!1}})}obtenerNombreMotivo(t){if(!t)return"N/A";let e=this.motivos.find(i=>i.valor===t);return e?e.nombre:"Motivo Desconocido"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-mis-consultas"]],decls:14,vars:6,consts:[[1,"consultas-container"],[1,"header-section"],[1,"btn-nueva-consulta",3,"click"],["class","loading",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","alert alert-info",4,"ngIf"],["class","consultas-list",4,"ngIf"],["class","consulta-form-modal",4,"ngIf"],[1,"loading"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"alert","alert-info"],[1,"consultas-list"],["class","consulta-card card-style-image",4,"ngFor","ngForOf"],[1,"consulta-card","card-style-image"],[1,"card-status-tag"],[1,"card-content-main"],[1,"card-date"],[1,"card-message-summary"],[1,"card-message-summary-msg"],[1,"btn-ver-detalle",3,"routerLink"],[1,"consulta-form-modal"],[1,"modal-content"],[1,"form-group"],["for","motivo"],["id","motivo","required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","mensaje"],["id","mensaje","placeholder","Detalla tu consulta, cotizaci\xF3n o problema aqu\xED...","rows","5",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"btn-cancel",3,"click"],[1,"btn-send",3,"click","disabled"],[3,"value"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Mis Consultas"),a(),s(4,"a",2),v("click",function(){return i.toggleFormulario()}),l(5," + Crear Nueva Consulta "),a()(),s(6,"p"),l(7,"Historial de tus mensajes y el estado en el que se encuentran."),a(),b(8,Zv,2,0,"div",3)(9,Kv,2,1,"div",4)(10,Jv,2,0,"div",5)(11,Xv,2,0,"div",6)(12,eb,2,1,"div",7),a(),b(13,nb,18,5,"div",8)),e&2&&(d(8),p("ngIf",i.isLoading),d(),p("ngIf",i.errorMensaje),d(),p("ngIf",i.enviadoExito),d(),p("ngIf",!i.isLoading&&i.consultas.length===0&&!i.errorMensaje),d(),p("ngIf",!i.isLoading&&i.consultas.length>0),d(),p("ngIf",i.mostrarFormulario))},dependencies:[k,z,N,ee,Te,nt,it,te,tt,se,Wn,Re,xe,re],styles:[".consultas-container[_ngcontent-%COMP%]{padding:2rem 1.5rem;background-color:#f8f9fa;min-height:80vh}.header-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:2.5rem;text-align:center}@media (min-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center;text-align:left}}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:800;color:#2c3e50;margin:0}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#7f8c8d;margin:0}.btn-nueva-consulta[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff8c42,#ffb442);color:#fff;border:none;padding:.8rem 2rem;border-radius:50px;font-weight:700;font-size:1.1rem;box-shadow:0 8px 20px #ff8c4266;transition:all .3s ease;text-decoration:none;text-align:center;display:inline-block}.btn-nueva-consulta[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 15px 30px #ff8c4280;filter:brightness(1.1)}.consultas-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem}.consulta-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.25rem;box-shadow:0 10px 30px #00000014;transition:all .4s ease;border:1px solid #f0f0f0;display:flex;flex-direction:column;min-height:180px}.consulta-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 40px #00000026}.consulta-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #f0f0f0;background-color:#fcfcfc;border-top-left-radius:1.25rem;border-top-right-radius:1.25rem}.consulta-fecha[_ngcontent-%COMP%]{font-size:.9rem;color:#95a5a6;font-weight:500}.consulta-estado[_ngcontent-%COMP%]{font-size:.8rem;font-weight:700;padding:.4rem 1rem;border-radius:50px;text-transform:uppercase;letter-spacing:.5px}.estado-pendiente[_ngcontent-%COMP%]{background:#fdf2e9;color:#d35400}.estado-respondido[_ngcontent-%COMP%]{background:#e9f7ef;color:#27ae60}.consulta-body[_ngcontent-%COMP%]{padding:1.5rem;font-size:.95rem;line-height:1.6;color:#34495e;flex-grow:1}.no-consultas-info[_ngcontent-%COMP%]{background:#fff;border-radius:1.25rem;padding:3rem;margin-top:2rem;text-align:center;box-shadow:0 5px 20px #0000000d}.no-consultas-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600;color:#34495e}.no-consultas-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#ff8c42;margin-bottom:1rem}.loading[_ngcontent-%COMP%]{padding:2rem;text-align:center;font-weight:600;color:#95a5a6;font-style:italic}.consulta-form-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:1rem;width:90%;max-width:500px;box-shadow:0 10px 30px #0003}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.5rem;color:#2c3e50}.modal-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:1rem;border:1px solid #ccc;border-radius:.5rem;resize:vertical;margin-bottom:1rem;font-size:1rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem}.btn-cancel[_ngcontent-%COMP%], .btn-send[_ngcontent-%COMP%]{padding:.7rem 1.5rem;border:none;border-radius:50px;font-weight:600;cursor:pointer;transition:background-color .3s}.btn-cancel[_ngcontent-%COMP%]{background-color:#ecf0f1;color:#34495e}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#bdc3c7}.btn-send[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff8c42,#ffb442);color:#fff}.btn-send[_ngcontent-%COMP%]:hover:not(:disabled){filter:brightness(1.1)}.btn-send[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.card-style-image[_ngcontent-%COMP%]{position:relative;padding:2.5rem 1.5rem 1.5rem;display:flex;flex-direction:column;justify-content:space-between;min-height:250px}.card-status-tag[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding:.3rem 1rem;border-top-left-radius:1.25rem;border-bottom-right-radius:10px;font-weight:700;font-size:.8rem}.tag-pendiente[_ngcontent-%COMP%]{background-color:#fdf2e9;color:#d35400}.tag-respondido[_ngcontent-%COMP%]{background-color:#e9f7ef;color:#27ae60}.card-content-main[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;color:#2c3e50;margin-top:.5rem;margin-bottom:.5rem}.card-date[_ngcontent-%COMP%]{font-size:.85rem;color:#95a5a6;margin-bottom:1rem}.card-message-summary[_ngcontent-%COMP%]{font-style:italic;color:#7f8c8d;margin-bottom:1.5rem;flex-grow:1}.btn-ver-detalle[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;padding:.75rem;border:2px solid #ffb442;color:#ff8c42;background-color:#fff;border-radius:50px;font-weight:700;text-decoration:none;transition:all .3s ease}.btn-ver-detalle[_ngcontent-%COMP%]:hover{background-color:#ff8c42;color:#fff;box-shadow:0 5px 15px #ff8c424d}.form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:#34495e;font-size:.95rem}.modal-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #ccc;border-radius:.5rem;font-size:1rem;box-sizing:border-box;background-color:#fff;appearance:none;-webkit-appearance:none;-moz-appearance:none}.modal-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%237f8c8d%22%20d%3D%22M287%20173.5c-4%204-10.4%204-14.4%200L146.2%2057.2%2019.5%20173.5c-4%204-10.4%204-14.4%200-4-4-4-10.4%200-14.4l134.4-134.4c4-4%2010.4-4%2014.4%200l134.4%20134.4c4%204%204%2010.4%200%2014.4z%22%2F%3E%3C%2Fsvg%3E);background-repeat:no-repeat;background-position:right .7em top 50%;background-size:.65em auto}"]})};function ib(n,t){if(n&1){let e=T();s(0,"div",5)(1,"div",6)(2,"span"),l(3),a(),s(4,"span",7),l(5),a()(),_(6,"img",8),s(7,"div",9)(8,"p")(9,"strong"),l(10,"Tel\xE9fono:"),a(),l(11),a(),s(12,"p")(13,"strong"),l(14,"Propietario:"),a(),l(15),a()(),s(16,"div",10)(17,"button",11),v("click",function(){let o=C(e).$implicit,r=f();return y(r.abrirModal(o))}),l(18,"Editar"),a(),s(19,"button",12),v("click",function(){let o=C(e).$implicit,r=f();return y(r.toggleActivo(o))}),l(20),a()()()}if(n&2){let e=t.$implicit;Z("inactivo",!e.activo),d(2),en(Pt("tipo ",e.tipo.toLowerCase())),d(),E(e.tipo),d(),Z("activo",e.activo),d(),g(" ",e.activo?"ACTIVO":"INACTIVO"," "),d(),p("alt",Pt("QR ",e.tipo))("src",e.imagenUrl,ve),d(5),g(" ",e.telefono),d(4),g(" ",e.nombrePropietario),d(5),g(" ",e.activo?"Desactivar":"Activar"," ")}}function ob(n,t){if(n&1&&(s(0,"div",32),_(1,"img",33),a()),n&2){let e=f(2);d(),p("src",e.imagenPreview,ve)}}function rb(n,t){if(n&1){let e=T();s(0,"div",13),v("click",function(){C(e);let o=f();return y(o.cerrarModal())}),s(1,"div",14),v("click",function(o){return C(e),y(o.stopPropagation())}),s(2,"div",15)(3,"h3",16),l(4),a(),s(5,"button",17),v("click",function(){C(e);let o=f();return y(o.cerrarModal())}),l(6,"\xD7"),a()(),s(7,"div",18)(8,"div",19)(9,"label"),l(10,"Tipo de pago"),a(),s(11,"select",20),ue("ngModelChange",function(o){C(e);let r=f();return de(r.form.tipo,o)||(r.form.tipo=o),y(o)}),s(12,"option",21),l(13,"YAPE"),a(),s(14,"option",22),l(15,"PLIN"),a()()(),s(16,"div",19)(17,"label"),l(18,"Imagen del QR"),a(),s(19,"input",23),v("change",function(o){C(e);let r=f();return y(r.onFileSelected(o))}),a(),b(20,ob,2,1,"div",24),a(),s(21,"div",19)(22,"label"),l(23,"Tel\xE9fono"),a(),s(24,"input",25),ue("ngModelChange",function(o){C(e);let r=f();return de(r.form.telefono,o)||(r.form.telefono=o),y(o)}),a()(),s(25,"div",19)(26,"label"),l(27,"Nombre del propietario"),a(),s(28,"input",26),ue("ngModelChange",function(o){C(e);let r=f();return de(r.form.nombrePropietario,o)||(r.form.nombrePropietario=o),y(o)}),a()(),s(29,"div",27)(30,"input",28),ue("ngModelChange",function(o){C(e);let r=f();return de(r.form.activo,o)||(r.form.activo=o),y(o)}),a(),s(31,"label"),l(32,"Activo (visible para los clientes)"),a()(),s(33,"div",29)(34,"button",30),v("click",function(){C(e);let o=f();return y(o.cerrarModal())}),l(35,"Cancelar"),a(),s(36,"button",31),v("click",function(){C(e);let o=f();return y(o.guardar())}),l(37,"Guardar QR"),a()()()()()}if(n&2){let e=f();d(4),E(e.esEdicion?"Editar QR":"Nuevo QR"),d(7),ce("ngModel",e.form.tipo),d(9),p("ngIf",e.imagenPreview),d(4),ce("ngModel",e.form.telefono),d(4),ce("ngModel",e.form.nombrePropietario),d(2),ce("ngModel",e.form.activo)}}var Ca=class n{qrs=[];modalVisible=!1;esEdicion=!1;form={tipo:"YAPE",imagenUrl:"",telefono:"999675771",nombrePropietario:"Jessica Chu\xF1e Liza",activo:!0};imagenPreview="";archivoSeleccionado=null;http=w(K);apiUrl=J.apiUrl;ngOnInit(){this.cargarQrs()}cargarQrs(){this.http.get(`${this.apiUrl}/config/qr/admin`).subscribe({next:t=>this.qrs=t,error:t=>console.error("Error cargando QRs:",t)})}abrirModal(t){t?(this.esEdicion=!0,this.form=O({},t),this.imagenPreview=t.imagenUrl,this.archivoSeleccionado=null):(this.esEdicion=!1,this.form={tipo:"YAPE",imagenUrl:"",telefono:"999675771",nombrePropietario:"Jessica Chu\xF1e Liza",activo:!0},this.imagenPreview="",this.archivoSeleccionado=null),this.modalVisible=!0}cerrarModal(){this.modalVisible=!1,this.archivoSeleccionado=null,this.imagenPreview=""}onFileSelected(t){let e=t.target.files[0];if(!e)return;this.archivoSeleccionado=e;let i=new FileReader;i.onload=()=>this.imagenPreview=i.result,i.readAsDataURL(e)}guardar(){if(!this.archivoSeleccionado&&!this.esEdicion){alert("\xA1Debes subir una imagen del QR!");return}if(this.esEdicion&&!this.archivoSeleccionado){this.guardarQrDirecto();return}let t=new FormData;t.append("file",this.archivoSeleccionado),this.http.post(`${this.apiUrl}/cloudinary/subir`,t).subscribe({next:e=>{this.form.imagenUrl=e.url,this.guardarQrDirecto()},error:e=>{console.error("Error subiendo imagen a Cloudinary:",e),alert("No se pudo subir la imagen. Intenta otra vez.")}})}guardarQrDirecto(){(this.esEdicion?this.http.put(`${this.apiUrl}/config/qr/${this.form.id}`,this.form):this.http.post(`${this.apiUrl}/config/qr`,this.form)).subscribe({next:()=>{this.cargarQrs(),this.cerrarModal(),alert(this.esEdicion?"QR actualizado con \xE9xito":"QR creado con \xE9xito")},error:e=>{console.error("Error guardando QR:",e),alert("Error al guardar el QR")}})}toggleActivo(t){this.http.patch(`${this.apiUrl}/config/qr/${t.id}/toggle`,{}).subscribe({next:()=>t.activo=!t.activo})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-qr"]],decls:9,vars:2,consts:[[1,"qr-container"],[1,"btn-nuevo",3,"click"],[1,"qr-grid"],["class","qr-card",3,"inactivo",4,"ngFor","ngForOf"],["class","modal-directo",3,"click",4,"ngIf"],[1,"qr-card"],[1,"qr-header"],[1,"estado"],[1,"qr-imagen",3,"src","alt"],[1,"info"],[1,"acciones"],[1,"btn-edit",3,"click"],[1,"btn-toggle",3,"click"],[1,"modal-directo",3,"click"],[1,"modal-content-directo",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"btn-close-modal",3,"click"],[1,"modal-body"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value","YAPE"],["value","PLIN"],["type","file","accept","image/*",1,"form-control",3,"change"],["class","preview",4,"ngIf"],["type","text","placeholder","999 999 999",1,"form-control",3,"ngModelChange","ngModel"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"botones"],[1,"btn-cancel",3,"click"],[1,"btn-guardar",3,"click"],[1,"preview"],["alt","Vista previa",3,"src"]],template:function(e,i){e&1&&(s(0,"div",0),l(1,' 1"> '),s(2,"h2"),l(3,"Gesti\xF3n de QR Yape / Plin"),a(),s(4,"button",1),v("click",function(){return i.abrirModal()}),l(5,"+ Agregar QR"),a(),s(6,"div",2),b(7,ib,21,15,"div",3),a()(),b(8,rb,38,6,"div",4)),e&2&&(d(7),p("ngForOf",i.qrs),d(),p("ngIf",i.modalVisible))},dependencies:[k,z,N,Te,nt,it,te,Mo,tt,se,Re],styles:[".qr-container[_ngcontent-%COMP%]{max-width:1100px;margin:3rem auto;padding:0 1.5rem}h2[_ngcontent-%COMP%]{text-align:center;color:#fd7e14;font-size:3rem;font-weight:700;margin-bottom:2.5rem}.btn-nuevo[_ngcontent-%COMP%]{display:block;margin:0 auto 3.5rem;background:#fd7e14;color:#fff;padding:18px 60px;border:none;border-radius:50px;font-size:1.6rem;font-weight:700;cursor:pointer;box-shadow:0 12px 40px #fd7e1466;transition:all .3s}.btn-nuevo[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 20px 50px #fd7e1480;background:#e66b0d}.qr-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(380px,1fr));gap:2.5rem}.qr-card[_ngcontent-%COMP%]{background:#fff;border-radius:25px;padding:2rem;box-shadow:0 20px 50px #0000001f;border:4px solid #fd7e14;transition:all .4s;position:relative;overflow:hidden}.qr-card[_ngcontent-%COMP%]:hover{transform:translateY(-12px);box-shadow:0 30px 70px #fd7e144d}.qr-card.inactivo[_ngcontent-%COMP%]{opacity:.6;border-color:#ccc}.qr-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.tipo[_ngcontent-%COMP%]{padding:12px 28px;border-radius:30px;font-weight:700;color:#fff;font-size:1.3rem}.tipo.yape[_ngcontent-%COMP%]{background:#9c27b0}.tipo.plin[_ngcontent-%COMP%]{background:#00bcd4}.estado[_ngcontent-%COMP%]{padding:10px 20px;border-radius:25px;font-weight:700;font-size:1rem}.estado.activo[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.estado[_ngcontent-%COMP%]:not(.activo){background:#f8d7da;color:#721c24}.qr-imagen[_ngcontent-%COMP%]{width:100%;height:280px;object-fit:contain;background:#fff8f0;border-radius:18px;border:4px dashed #fd7e14;padding:10px;margin:1rem 0}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:1rem 0;font-size:1.2rem;color:#444}.info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#e65100}.acciones[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-top:1.5rem}.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 32px;border:none;border-radius:30px;font-weight:700;cursor:pointer;font-size:1.1rem;transition:all .3s}.btn-edit[_ngcontent-%COMP%]{background:#fd7e14;color:#fff}.btn-toggle[_ngcontent-%COMP%]{background:#ffc107;color:#333}.modal-directo[_ngcontent-%COMP%]{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;z-index:999999!important;display:flex!important;justify-content:center!important;align-items:center!important;pointer-events:none;background:#000000b3!important;-webkit-backdrop-filter:blur(8px)!important;backdrop-filter:blur(8px)!important}.modal-content-directo[_ngcontent-%COMP%]{background:#fff!important;border-radius:32px!important;width:92%!important;max-width:650px!important;max-height:92vh!important;overflow-y:auto!important;pointer-events:auto!important;border:6px solid #fd7e14!important;box-shadow:0 30px 100px #fd7e1499!important;animation:_ngcontent-%COMP%_modalPop .5s cubic-bezier(.175,.885,.32,1.275)}@keyframes _ngcontent-%COMP%_modalPop{0%{opacity:0;transform:scale(.5) rotate(-15deg)}70%{transform:scale(1.08)}to{opacity:1;transform:scale(1)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:2rem 2.5rem 1.5rem;border-bottom:3px solid #ffd7b5;background:linear-gradient(to bottom,#fff8f0,#fff);border-radius:26px 26px 0 0}.modal-title[_ngcontent-%COMP%]{color:#e65100;font-size:2.6rem;font-weight:700;margin:0}.btn-close-modal[_ngcontent-%COMP%]{background:#ffe0b2;color:#e65100;border:none;width:56px;height:56px;border-radius:50%;font-size:2.4rem;font-weight:700;cursor:pointer;display:flex;justify-content:center;align-items:center;transition:all .4s}.btn-close-modal[_ngcontent-%COMP%]:hover{background:#fd7e14;color:#fff;transform:rotate(180deg) scale(1.1)}.modal-body[_ngcontent-%COMP%]{padding:2.5rem}.form-group[_ngcontent-%COMP%]{margin:2rem 0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:1rem;font-weight:700;color:#333;font-size:1.4rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:18px;border:4px solid #fd7e14;border-radius:20px;font-size:1.4rem;background:#fffaf0;transition:all .3s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#e65100;box-shadow:0 0 0 4px #fd7e144d}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:340px;object-fit:contain;border-radius:20px;margin-top:1.5rem;border:6px dashed #fd7e14;background:#fff8f0;padding:10px}.form-check[_ngcontent-%COMP%]{margin:2rem 0;display:flex;align-items:center;font-size:1.3rem}.form-check[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:24px;height:24px;margin-right:12px;accent-color:#fd7e14}.botones[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:2rem;padding:2rem 2.5rem;background:#fff8f0;border-radius:0 0 26px 26px;border-top:3px solid #ffd7b5}.btn-cancel[_ngcontent-%COMP%], .btn-guardar[_ngcontent-%COMP%]{padding:18px 50px;border:none;border-radius:35px;font-size:1.5rem;font-weight:700;cursor:pointer;min-width:180px;transition:all .3s}.btn-cancel[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-guardar[_ngcontent-%COMP%]{background:#fd7e14;color:#fff;box-shadow:0 12px 40px #fd7e1480}.btn-guardar[_ngcontent-%COMP%]:hover{background:#e66b0d;transform:translateY(-4px)}"]})};var ki=class n{constructor(t){this.http=t}apiUrl=J.apiUrl+"/pagos";obtenerTodos(){return this.http.get(this.apiUrl)}actualizarEstadoPago(t,e){return this.http.put(`${this.apiUrl}/${t}/estado`,{estado:e})}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function sb(n,t){if(n&1&&(s(0,"span"),l(1,"Garant\xEDa Req: "),s(2,"strong"),l(3),P(4,"number"),a()()),n&2){let e=f();d(3),g("S/ ",A(4,1,e.montoGarantia,"1.2-2"))}}function lb(n,t){if(n&1&&(s(0,"span",15),l(1,"Saldo Pendiente: "),s(2,"strong"),l(3),P(4,"number"),a()()),n&2){let e=f();d(3),g("S/ ",A(4,1,e.saldoPendiente,"1.2-2"))}}function cb(n,t){n&1&&(s(0,"span",16)(1,"strong"),l(2,"\xA1Pedido Pagado!"),a()())}function db(n,t){if(n&1&&(s(0,"div",17),l(1),a()),n&2){let e=f();d(),g(" ",e.errorMensaje," ")}}function ub(n,t){if(n&1&&(s(0,"span")(1,"strong"),l(2,"Op:"),a(),l(3),a()),n&2){let e=f().$implicit;d(3),g(" ",e.codigoOperacion)}}function pb(n,t){n&1&&(s(0,"span"),l(1,"Validar"),a())}function mb(n,t){n&1&&(s(0,"span"),l(1,"\u2699\uFE0F"),a())}function fb(n,t){n&1&&(s(0,"span"),l(1,"Rechazar"),a())}function gb(n,t){n&1&&(s(0,"span"),l(1,"\u2699\uFE0F"),a())}function hb(n,t){if(n&1){let e=T();Ne(0),s(1,"div",27)(2,"button",28),v("click",function(){C(e);let o=f().$implicit,r=f(2);return y(r.cambiarEstadoPago(o,"validado"))}),b(3,pb,2,0,"span",8)(4,mb,2,0,"span",8),a(),s(5,"button",29),v("click",function(){C(e);let o=f().$implicit,r=f(2);return y(r.cambiarEstadoPago(o,"rechazado"))}),b(6,fb,2,0,"span",8)(7,gb,2,0,"span",8),a()(),Le()}if(n&2){let e=f().$implicit,i=f(2);d(2),p("disabled",i.isUpdatingPago===e.pagoId),d(),p("ngIf",i.isUpdatingPago!==e.pagoId),d(),p("ngIf",i.isUpdatingPago===e.pagoId),d(),p("disabled",i.isUpdatingPago===e.pagoId),d(),p("ngIf",i.isUpdatingPago!==e.pagoId),d(),p("ngIf",i.isUpdatingPago===e.pagoId)}}function vb(n,t){if(n&1&&(s(0,"a",30),l(1," Ver Comprobante "),a()),n&2){let e=f().$implicit;p("href",e.comprobanteUrl,ve)}}function bb(n,t){if(n&1&&(s(0,"div",20)(1,"div",21)(2,"span",22),l(3),P(4,"number"),a(),s(5,"div",23)(6,"span")(7,"strong"),l(8,"M\xE9todo:"),a(),l(9),P(10,"titlecase"),a(),s(11,"span")(12,"strong"),l(13,"Fecha:"),a(),l(14),P(15,"date"),a(),b(16,ub,4,1,"span",8),a()(),s(17,"div",24)(18,"span",25),l(19),P(20,"titlecase"),a(),b(21,hb,8,6,"ng-container",8)(22,vb,2,1,"a",26),a()()),n&2){let e=t.$implicit,i=f(2);p("ngClass",i.getPagoItemClass(e.estado)),d(3),g("S/ ",A(4,9,e.montoAbonado,"1.2-2")),d(6),g(" ",ie(10,12,e.metodo)),d(5),g(" ",A(15,14,e.fechaPago,"yyyy-MM-dd HH:mm")),d(2),p("ngIf",e.codigoOperacion),d(2),p("ngClass",i.getPagoStatusClass(e.estado)),d(),g(" ",ie(20,17,i.formatEstadoPago(e.estado))," "),d(2),p("ngIf",e.estado==="pendiente_validacion"),d(),p("ngIf",e.comprobanteUrl)}}function _b(n,t){if(n&1&&(s(0,"div",18),b(1,bb,23,19,"div",19),a()),n&2){let e=f();d(),p("ngForOf",e.pagos)}}function xb(n,t){n&1&&(s(0,"p"),l(1,"Este pedido a\xFAn no tiene pagos registrados."),a())}var ya=class n{pedidoId=null;pagos=[];montoTotal=0;montoGarantia=0;pagoActualizado=new le;volverADetalles=new le;isUpdatingPago=null;errorMensaje=null;totalPagadoValidado=0;bsModalRef=w(wn);pagoService=w(ki);constructor(){}ngOnInit(){console.log("Modal Gesti\xF3n Pagos iniciado con:",this.pagos),this.calcularTotalPagadoValidado()}cambiarEstadoPago(t,e){!t||this.isUpdatingPago||(this.isUpdatingPago=t.pagoId,this.errorMensaje=null,this.pagoService.actualizarEstadoPago(t.pagoId,e).subscribe({next:i=>{let o=this.pagos.findIndex(r=>r.pagoId===t.pagoId);o>-1&&(this.pagos[o]=i),this.isUpdatingPago=null,this.calcularTotalPagadoValidado(),this.pagoActualizado.emit(i)},error:i=>{console.error(`Error al ${e} el pago ${t.pagoId}:`,i),this.errorMensaje=`Error al ${e} el pago: ${i.error||"Error desconocido"}`,this.isUpdatingPago=null}}))}calcularTotalPagadoValidado(){this.totalPagadoValidado=this.pagos.filter(t=>t.estado==="validado").reduce((t,e)=>t+e.montoAbonado,0)}get saldoPendiente(){return Math.max(0,this.montoTotal-this.totalPagadoValidado)}volver(){this.volverADetalles.emit(),this.cerrarModal()}cerrarModal(){this.bsModalRef.hide()}getPagoStatusClass(t){switch(t){case"pendiente_validacion":return"pago-pendiente";case"validado":return"pago-validado";case"rechazado":return"pago-rechazado";default:return""}}getPagoItemClass(t){switch(t){case"pendiente_validacion":return"item-pendiente";case"validado":return"item-validado";case"rechazado":return"item-rechazado";default:return""}}formatEstadoPago(t){return t?t.replace("_"," "):""}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-modal-gestion-pago"]],inputs:{pedidoId:"pedidoId",pagos:"pagos",montoTotal:"montoTotal",montoGarantia:"montoGarantia"},outputs:{pagoActualizado:"pagoActualizado",volverADetalles:"volverADetalles"},decls:30,vars:15,consts:[["noPagos",""],[1,"modal-header"],["type","button",1,"btn","btn-link","btn-back",3,"click"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"montos-summary"],[4,"ngIf"],[1,"text-success"],["class","saldo-pendiente",4,"ngIf"],["class","text-success full-paid",4,"ngIf"],[1,"separator"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","payment-list",4,"ngIf","ngIfElse"],[1,"saldo-pendiente"],[1,"text-success","full-paid"],["role","alert",1,"alert","alert-danger"],[1,"payment-list"],["class","payment-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"payment-item",3,"ngClass"],[1,"payment-details-info"],[1,"monto-abonado"],[1,"detail-group"],[1,"payment-status-admin"],[1,"badge","payment-badge",3,"ngClass"],["target","_blank","class","comprobante-link",3,"href",4,"ngIf"],[1,"action-buttons"],[1,"btn-pago-accion","btn-validar",3,"click","disabled"],[1,"btn-pago-accion","btn-rechazar",3,"click","disabled"],["target","_blank",1,"comprobante-link",3,"href"]],template:function(e,i){if(e&1){let o=T();s(0,"div",1)(1,"button",2),v("click",function(){return C(o),y(i.volver())}),l(2," \u2190 Volver a Detalles "),a(),s(3,"h4",3),l(4),a(),s(5,"button",4),v("click",function(){return C(o),y(i.cerrarModal())}),s(6,"span",5),l(7,"\xD7"),a()()(),s(8,"div",6)(9,"div",7)(10,"span"),l(11,"Total Pedido: "),s(12,"strong"),l(13),P(14,"number"),a()(),b(15,sb,5,4,"span",8),s(16,"span"),l(17,"Pagado (Validado): "),s(18,"strong",9),l(19),P(20,"number"),a()(),b(21,lb,5,4,"span",10)(22,cb,3,0,"span",11),a(),_(23,"hr",12),b(24,db,2,1,"div",13),s(25,"h5"),l(26,"Historial de Pagos"),a(),b(27,_b,2,1,"div",14)(28,xb,2,0,"ng-template",null,0,tn),a()}if(e&2){let o=Nt(29);d(4),g("Gesti\xF3n de Pagos - Pedido ORD-",i.pedidoId),d(9),g("S/ ",A(14,9,i.montoTotal,"1.2-2")),d(2),p("ngIf",i.montoGarantia>0),d(4),g("S/ ",A(20,12,i.totalPagadoValidado,"1.2-2")),d(2),p("ngIf",i.saldoPendiente>0),d(),p("ngIf",i.saldoPendiente===0),d(2),p("ngIf",i.errorMensaje),d(3),p("ngIf",i.pagos.length>0)("ngIfElse",o)}},dependencies:[k,Oe,z,N,Ce,xe,re],styles:["[_nghost-%COMP%]{display:block}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #dee2e6;background-color:#f8f9fa}.modal-title[_ngcontent-%COMP%]{margin-bottom:0;font-size:1.25rem;font-weight:600;color:#343a40}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;opacity:.7;padding:.5rem;line-height:1}.btn-close[_ngcontent-%COMP%]:hover{opacity:1}.btn-back[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;font-size:.9rem;padding:0;margin-right:1rem}.btn-back[_ngcontent-%COMP%]:hover{color:#0056b3;text-decoration:underline}.modal-body[_ngcontent-%COMP%]{padding:1rem 1.5rem}.montos-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;background-color:#e9f5ff;padding:1rem;border-radius:6px;margin-bottom:1.5rem;font-size:.95rem;border:1px solid #cce5ff}.montos-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-basis:48%;margin-bottom:.5rem}.montos-summary[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}.saldo-pendiente[_ngcontent-%COMP%]{color:#dc3545}.full-paid[_ngcontent-%COMP%]{flex-basis:100%;text-align:center;font-size:1.1rem;font-weight:700!important;margin-top:.5rem}.payment-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.payment-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.25rem;border:1px solid #e9ecef;border-radius:8px;background-color:#fff;transition:box-shadow .2s}.payment-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000000d}.payment-details-info[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}.monto-abonado[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#28a745;flex-shrink:0;min-width:100px}.detail-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.9rem;color:#6c757d}.detail-group[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#343a40}.payment-status-admin[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex-shrink:0}.payment-badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.5em .8em;font-weight:600}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:5px}.btn-pago-accion[_ngcontent-%COMP%]{padding:.4rem .75rem;border:none;border-radius:4px;cursor:pointer;font-weight:600;transition:background-color .2s ease;font-size:.9rem;min-width:70px}.btn-pago-accion[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-validar[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-validar[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838}.btn-rechazar[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-rechazar[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#c82333}.comprobante-link[_ngcontent-%COMP%]{font-size:.85rem;color:#007bff;text-decoration:underline;flex-shrink:0}.comprobante-link[_ngcontent-%COMP%]:hover{color:#0056b3}.item-pendiente[_ngcontent-%COMP%]{border-left:5px solid #ffc107}.item-validado[_ngcontent-%COMP%]{border-left:5px solid #28a745}.item-rechazado[_ngcontent-%COMP%]{border-left:5px solid #dc3545}@media (max-width: 768px){.montos-summary[_ngcontent-%COMP%]{flex-direction:column}.montos-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-basis:100%;margin-bottom:.5rem}.payment-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.payment-details-info[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:5px}.payment-status-admin[_ngcontent-%COMP%]{width:100%;justify-content:space-between;margin-top:10px;border-top:1px dashed #e9ecef;padding-top:10px}}"]})};var Cb=n=>({"btn-estado":!0,"btn-estado-active":n}),yb=n=>({editable:n}),wb=n=>({"btn-action-gestion":n});function Eb(n,t){if(n&1&&(s(0,"p")(1,"strong"),l(2,"Garant\xEDa Req:"),a(),l(3),P(4,"number"),a()),n&2){let e=f(2);d(3),g(" S/ ",A(4,1,e.pedido.montoGarantia,"1.2-2")," ")}}function Sb(n,t){if(n&1){let e=T();s(0,"button",21),P(1,"titlecase"),v("click",function(){let o=C(e).$implicit,r=f(3);return y(r.cambiarEstadoPedido(o))}),l(2),P(3,"titlecase"),a()}if(n&2){let e=t.$implicit,i=f(3);p("ngClass",Gt(8,Cb,e===i.estadoSeleccionado))("disabled",i.isUpdatingEstadoPedido||e===i.pedido.estado)("title",e===i.pedido.estado?"Este es el estado actual":ie(1,4,"Cambiar a "+e)),d(2),g(" ",ie(3,6,e)," ")}}function Pb(n,t){n&1&&(s(0,"div",22),l(1," Actualizando estado... "),s(2,"span",23),l(3,"\u2699\uFE0F"),a()())}function Mb(n,t){if(n&1&&(s(0,"div",24),l(1),a()),n&2){let e=f(3);d(),g(" ",e.errorUpdateEstado," ")}}function Db(n,t){if(n&1&&(Ne(0),s(1,"h5",10),l(2,"Actualizar Estado del Pedido"),a(),s(3,"div",14)(4,"span",15),l(5," Estado Actual: "),s(6,"span",16),l(7),P(8,"titlecase"),a()(),s(9,"div",17),b(10,Sb,4,10,"button",18),a(),b(11,Pb,4,0,"div",19)(12,Mb,2,1,"div",20),a(),_(13,"hr",9),Le()),n&2){let e=f(2);d(6),p("ngClass",e.getEstadoClass(e.pedido.estado)),d(),g(" ",ie(8,5,e.pedido.estado)," "),d(3),p("ngForOf",e.posiblesEstados),d(),p("ngIf",e.isUpdatingEstadoPedido),d(),p("ngIf",e.errorUpdateEstado)}}function Ob(n,t){if(n&1&&(s(0,"div",37)(1,"small"),l(2),a()()),n&2){let e=f().$implicit;d(2),g("\u{1F4DD} ",e.personalizacion.descripcionExtra)}}function Ib(n,t){if(n&1&&(s(0,"span",38),l(1),P(2,"number"),a()),n&2){let e=f().$implicit;d(),g(" S/ ",A(2,1,e.precioUnitario,"1.2-2")," ")}}function Ab(n,t){if(n&1&&(s(0,"span",39),l(1),P(2,"number"),a()),n&2){let e=f().$implicit;d(),g(" + Pers: S/ ",A(2,1,e.personalizacion==null?null:e.personalizacion.costoAdicional,"1.2-2")," ")}}function Tb(n,t){if(n&1&&(s(0,"small",40),l(1),P(2,"number"),a()),n&2){let e=f().$implicit;d(),g(" (- S/ ",A(2,1,e.descuentoAplicado,"1.2-2")," dto.) ")}}function kb(n,t){if(n&1&&(s(0,"li",27)(1,"div",28)(2,"span",29),l(3),a(),s(4,"span",30),l(5),a(),b(6,Ob,3,1,"div",31),a(),s(7,"div",32),b(8,Ib,3,4,"span",33),s(9,"span",34),l(10),P(11,"number"),a(),b(12,Ab,3,4,"span",35)(13,Tb,3,4,"small",36),a()()),n&2){let e=t.$implicit;d(3),E((e.producto==null?null:e.producto.nombre)||"Producto Eliminado"),d(2),g("(",e.cantidad," ud.)"),d(),p("ngIf",e.personalizacion),d(2),p("ngIf",e.descuentoAplicado&&e.descuentoAplicado>0),d(2),g(" S/ ",A(11,7,e.precioUnitario*e.cantidad-(e.descuentoAplicado||0)+((e.personalizacion==null?null:e.personalizacion.costoAdicional)||0),"1.2-2")," "),d(2),p("ngIf",e.personalizacion==null?null:e.personalizacion.costoAdicional),d(),p("ngIf",e.descuentoAplicado&&e.descuentoAplicado>0)}}function Fb(n,t){if(n&1&&(s(0,"div",25)(1,"ul"),b(2,kb,14,10,"li",26),a()()),n&2){let e=f(2);d(2),p("ngForOf",e.pedido.detalles)}}function Rb(n,t){n&1&&(s(0,"p"),l(1,"No se encontraron detalles para este pedido."),a())}function Nb(n,t){if(n&1){let e=T();s(0,"div",41)(1,"span",16),l(2),a(),s(3,"button",42),v("click",function(){C(e);let o=f(2);return y(o.abrirModalGestionPago())}),l(4),Bt(),s(5,"svg",43),_(6,"path",44)(7,"path",45),a()()()}if(n&2){let e=f(2);p("ngClass",Gt(5,yb,e.modoEdicion)),d(),p("ngClass",e.getOverallPagoStatusClass()),d(),g(" ",e.getOverallPagoStatusText()," "),d(),p("ngClass",Gt(7,wb,e.modoEdicion)),d(),g(" ",e.modoEdicion?"Gestionar Pagos":"Ver Pagos"," ")}}function Lb(n,t){n&1&&(s(0,"div",46)(1,"span",47),l(2,"Sin Pagos Registrados"),a()())}function Vb(n,t){if(n&1){let e=T();Ne(0),s(1,"div",2)(2,"h4",3),l(3),a(),s(4,"button",4),v("click",function(){C(e);let o=f();return y(o.cerrarModal())}),s(5,"span",5),l(6,"\xD7"),a()()(),s(7,"div",6)(8,"div",7)(9,"div",8)(10,"h5"),l(11,"Informaci\xF3n del Cliente"),a(),s(12,"p")(13,"strong"),l(14,"Nombre:"),a(),l(15),a(),s(16,"p")(17,"strong"),l(18,"Email:"),a(),l(19),a(),s(20,"p")(21,"strong"),l(22,"Tel\xE9fono:"),a(),l(23),a()(),s(24,"div",8)(25,"h5"),l(26,"Detalles del Pedido"),a(),s(27,"p")(28,"strong"),l(29,"Tipo:"),a(),l(30),a(),s(31,"p")(32,"strong"),l(33,"Total:"),a(),l(34),P(35,"number"),a(),s(36,"p")(37,"strong"),l(38,"Fecha Pedido:"),a(),l(39),P(40,"date"),a(),s(41,"p")(42,"strong"),l(43,"Entrega Estimada:"),a(),l(44),a(),b(45,Eb,5,4,"p",1),a()(),_(46,"hr",9),b(47,Db,14,7,"ng-container",1),s(48,"h5",10),l(49),a(),b(50,Fb,3,1,"div",11)(51,Rb,2,0,"ng-template",null,0,tn),_(53,"hr",9),s(54,"h5",10),l(55,"Estado del Pago"),a(),b(56,Nb,8,9,"div",12)(57,Lb,3,0,"div",13),a(),Le()}if(n&2){let e=Nt(52),i=f();d(3),De(" ",i.modoEdicion?"Gesti\xF3n de Pedido":"Detalles del Pedido"," - ORD-",i.pedido.pedidoId," "),d(12),g(" ",i.getNombreCliente()),d(4),g(" ",i.getEmailCliente()),d(4),g(" ",i.getTelefonoCliente()),d(7),g(" ",i.pedido.nota&&i.pedido.nota.toLowerCase().includes("personalizada")?"Torta Personalizada":"Productos Cat\xE1logo"),d(4),g(" S/ ",A(35,16,i.pedido.total,"1.2-2")),d(5),g(" ",A(40,19,i.pedido.fechaPedido,"yyyy-MM-dd HH:mm")),d(5),g(" ","-"),d(),p("ngIf",(i.pedido==null?null:i.pedido.montoGarantia)&&i.pedido.montoGarantia),d(2),p("ngIf",i.modoEdicion),d(2),g("Productos del Pedido (",(i.pedido.detalles==null?null:i.pedido.detalles.length)||0,")"),d(),p("ngIf",i.pedido.detalles==null?null:i.pedido.detalles.length)("ngIfElse",e),d(6),p("ngIf",(i.pedido.pagos==null?null:i.pedido.pagos.length)||i.modoEdicion),d(),p("ngIf",!(i.pedido.pagos!=null&&i.pedido.pagos.length)&&!i.modoEdicion)}}var Lo=class n{pedido=null;modoEdicion=!1;estadoActualizado=new le;posiblesEstados=["pendiente","aceptado","en_preparacion","entregado","cancelado"];estadoSeleccionado="";isUpdatingEstadoPedido=!1;errorUpdateEstado=null;bsModalRef=w(wn);modalService=w(zt);pedidoService=w(Tt);modalSubscription;ngOnInit(){this.pedido&&(this.estadoSeleccionado=this.pedido.estado||"pendiente")}ngOnDestroy(){this.modalSubscription?.unsubscribe()}cambiarEstadoPedido(t){!this.pedido||this.isUpdatingEstadoPedido||(this.isUpdatingEstadoPedido=!0,this.errorUpdateEstado=null,this.pedidoService.actualizarEstadoPedido(this.pedido.pedidoId,t).subscribe({next:e=>{this.pedido=e,this.estadoSeleccionado=e.estado,this.isUpdatingEstadoPedido=!1,this.estadoActualizado.emit()},error:e=>{console.error("Error al actualizar estado:",e),this.errorUpdateEstado=`Error al actualizar a ${t}: ${e.error?.message||"Error de conexi\xF3n."}`,this.isUpdatingEstadoPedido=!1}}))}abrirModalGestionPago(){if(!this.pedido||!this.pedido.pedidoId)return;let t=this.pedido;this.cerrarModal();let e={pedidoId:this.pedido.pedidoId,pagos:this.pedido.pagos||[],montoTotal:this.pedido.total||0,montoGarantia:this.pedido.montoGarantia||0},i=this.modalService.show(ya,{initialState:e,class:"modal-lg"});i.content?.pagoActualizado.subscribe(o=>{console.log("Modal de Pago notific\xF3 actualizaci\xF3n:",o),this.estadoActualizado.emit()}),i.content?.volverADetalles&&(this.modalSubscription=i.content.volverADetalles.subscribe(()=>{console.log("Reabriendo modal de detalles para pedido:",t.pedidoId);let o={pedido:t,modoEdicion:this.modoEdicion};this.modalService.show(n,{initialState:o,class:"modal-lg"}).content?.estadoActualizado.subscribe(()=>{this.estadoActualizado.emit()})})),i.onHidden?.subscribe(()=>{this.modalSubscription?.unsubscribe()})}getNombreCliente(){return this.pedido?.usuario?.nombre||"N/A"}getEmailCliente(){return this.pedido?.usuario?.email||"-"}getTelefonoCliente(){return this.pedido?.usuario?.telefono||"-"}getEstadoClass(t){switch(t?.toLowerCase()){case"pendiente":return"estado-pendiente";case"aceptado":case"confirmado":return"estado-confirmado";case"en_preparacion":return"estado-preparacion";case"entregado":return"estado-entregado";case"cancelado":return"estado-cancelado";default:return""}}getOverallPagoStatusText(){if(!this.pedido||!this.pedido.pagos||this.pedido.pagos.length===0)return"Sin Pagos Registrados";let t=this.pedido.pagos.filter(i=>i.estado==="validado").reduce((i,o)=>i+o.montoAbonado,0),e=this.pedido.total||0;return t>=e?"PAGO COMPLETADO":t>0?`ABONO (S/ ${t.toFixed(2)})`:this.pedido.pagos.some(o=>o.estado==="pendiente_validacion")?"PAGOS PENDIENTES DE VALIDACI\xD3N":"PENDIENTE DE PAGO"}getOverallPagoStatusClass(){let t=this.getOverallPagoStatusText();return t==="PAGO COMPLETADO"?"pago-validado":t.includes("ABONO")?"pago-parcial":t==="PAGOS PENDIENTES DE VALIDACI\xD3N"?"pago-pendiente":"pago-no-registrado"}cerrarModal(){this.bsModalRef.hide()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-modal-detalles-pedido"]],inputs:{pedido:"pedido",modoEdicion:"modoEdicion"},outputs:{estadoActualizado:"estadoActualizado"},decls:1,vars:1,consts:[["noDetalles",""],[4,"ngIf"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"pedido-info-grid"],[1,"info-columna"],[1,"separator"],[1,"section-title"],["class","product-list",4,"ngIf","ngIfElse"],["class","payment-summary",3,"ngClass",4,"ngIf"],["class","payment-summary",4,"ngIf"],[1,"estado-gestion-container"],[1,"current-status"],[1,"badge",3,"ngClass"],[1,"estado-actions"],[3,"ngClass","disabled","title","click",4,"ngFor","ngForOf"],["class","loading-status",4,"ngIf"],["class","alert-error",4,"ngIf"],[3,"click","ngClass","disabled","title"],[1,"loading-status"],[1,"spinner-estado"],[1,"alert-error"],[1,"product-list"],["class","product-item",4,"ngFor","ngForOf"],[1,"product-item"],[1,"product-info"],[1,"product-name"],[1,"product-qty"],["class","customization-details",4,"ngIf"],[1,"price-details"],["class","original-price",4,"ngIf"],[1,"product-subtotal"],["class","customization-total-cost",4,"ngIf"],["class","discount-applied",4,"ngIf"],[1,"customization-details"],[1,"original-price"],[1,"customization-total-cost"],[1,"discount-applied"],[1,"payment-summary",3,"ngClass"],["title","Gestionar Pagos y Validaciones",1,"btn-manage-payments",3,"click","ngClass"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16"],["d","M14 3H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1M2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"],["d","M2.5 5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"],[1,"payment-summary"],[1,"badge","pago-no-registrado"]],template:function(e,i){e&1&&b(0,Vb,58,22,"ng-container",1),e&2&&p("ngIf",i.pedido)},dependencies:[k,Oe,z,N,Ce,xe,re],styles:[".modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;padding-bottom:.8rem;margin-bottom:1.5rem;display:flex;justify-content:space-between;align-items:center}.modal-title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;margin:0}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;opacity:.7;padding:.5rem;line-height:1}.btn-close[_ngcontent-%COMP%]:hover{opacity:1}.modal-body[_ngcontent-%COMP%]{padding:0 .5rem 1rem}.pedido-info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1rem}.pedido-info-grid[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:.8rem;color:#343a40;border-bottom:2px solid #e9ecef;padding-bottom:.3rem}.pedido-info-grid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.3rem;font-size:.95rem}.pedido-info-grid[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.section-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-top:.5rem;margin-bottom:1rem;color:#495057}.product-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.product-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0;border-bottom:1px dashed #e9ecef}.product-info[_ngcontent-%COMP%]{flex-grow:1}.product-name[_ngcontent-%COMP%]{font-weight:600;color:#212529}.product-qty[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;margin-left:.5rem}.customization-details[_ngcontent-%COMP%]{margin-top:.2rem;margin-left:10px;color:#007bff}.price-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;font-weight:500}.product-subtotal[_ngcontent-%COMP%]{font-size:1.05rem;font-weight:700;color:#28a745}.original-price[_ngcontent-%COMP%]{text-decoration:line-through;color:#6c757d;font-size:.85rem}.customization-total-cost[_ngcontent-%COMP%]{font-weight:600;color:#28a745;font-size:.9rem}.discount-applied[_ngcontent-%COMP%]{color:#dc3545;font-size:.8rem;font-style:italic}.product-list[_ngcontent-%COMP%] + p[_ngcontent-%COMP%]{font-style:italic;color:#6c757d;margin-top:.5rem}.payment-summary[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#f8f9fa;padding:1rem 1.5rem;border-radius:6px;border-left:4px solid #6c757d}.payment-summary.editable[_ngcontent-%COMP%]{border-left-color:#007bff}.payment-summary[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.9rem}.btn-manage-payments[_ngcontent-%COMP%]{background-color:transparent;color:#007bff;border:1px solid #007bff;padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-weight:600;transition:all .2s ease;display:flex;align-items:center;gap:.5rem}.btn-manage-payments[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}.btn-manage-payments.btn-action-gestion[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;box-shadow:0 2px 5px #007bff66}.btn-manage-payments.btn-action-gestion[_ngcontent-%COMP%]:hover{background-color:#0056b3}.estado-gestion-container[_ngcontent-%COMP%]{padding:1rem 0}.current-status[_ngcontent-%COMP%]{display:block;margin-bottom:1rem;font-size:1rem;font-weight:500}.estado-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.btn-estado[_ngcontent-%COMP%]{background-color:#e9ecef;color:#495057;border:1px solid #ced4da;padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-weight:500;transition:all .2s ease}.btn-estado[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#ced4da}.btn-estado[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-estado-active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border-color:#007bff;font-weight:700}.btn-estado-active[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff;border-color:#007bff}.loading-status[_ngcontent-%COMP%]{margin-top:1rem;color:#007bff;display:flex;align-items:center;gap:.5rem}.spinner-estado[_ngcontent-%COMP%]{animation:spin 1s linear infinite;display:inline-block}.alert-error[_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb;border-radius:4px}@media (max-width: 768px){.pedido-info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.pago-validado[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.pago-parcial[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;border:1px solid #ffeeba}.pago-pendiente[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460;border:1px solid #bee5eb}.pago-no-registrado[_ngcontent-%COMP%]{background-color:#e9ecef;color:#6c757d;border:1px solid #ced4da}"]})};function jb(n,t){if(n&1){let e=T();s(0,"tr")(1,"td"),l(2),a(),s(3,"td"),l(4),_(5,"br"),s(6,"small"),l(7),a()(),s(8,"td"),l(9),a(),s(10,"td")(11,"span",8),l(12),P(13,"titlecase"),a()(),s(14,"td"),l(15),P(16,"number"),a(),s(17,"td"),l(18),P(19,"date"),a(),s(20,"td")(21,"span",8),l(22),a()(),s(23,"td")(24,"button",9),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.abrirModalDetalles(o))}),Bt(),s(25,"svg",10),_(26,"path",11)(27,"path",12),a()(),Qn(),s(28,"button",13),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.abrirModalGestion(o))}),Bt(),s(29,"svg",14),_(30,"path",15)(31,"path",16),a()()()()}if(n&2){let e=t.$implicit,i=f(2);d(2),g("#ORD ",e.pedidoId),d(2),g(" ",i.getNombreCliente(e)," "),d(3),E(i.getEmailCliente(e)),d(2),g(" ",e.nota&&e.nota.toLowerCase().includes("personalizada")?"Torta Personalizada":"Productos Cat\xE1logo"," "),d(2),p("ngClass",i.getEstadoClass(e.estado)),d(),g(" ",ie(13,10,e.estado)," "),d(3),g("S/ ",A(16,12,e.total,"1.2-2")),d(3),E(A(19,15,e.fechaPedido,"yyyy-MM-dd")),d(3),p("ngClass",i.getPagoClass(e.estado==="entregado"?"Pagado":"Pendiente")),d(),g(" ",e.estado==="entregado"?"Pagado":"Pendiente"," ")}}function zb(n,t){if(n&1&&(s(0,"div",5)(1,"table",6)(2,"thead")(3,"tr")(4,"th"),l(5,"ID"),a(),s(6,"th"),l(7,"Cliente"),a(),s(8,"th"),l(9,"Tipo"),a(),s(10,"th"),l(11,"Estado"),a(),s(12,"th"),l(13,"Total"),a(),s(14,"th"),l(15,"Fecha"),a(),s(16,"th"),l(17,"Pago"),a(),s(18,"th"),l(19,"Acciones"),a()()(),s(20,"tbody"),b(21,jb,32,18,"tr",7),a()()()),n&2){let e=f();d(21),p("ngForOf",e.listaDePedidos)}}function Ub(n,t){n&1&&(s(0,"div",17),l(1," Cargando pedidos... "),a())}function Bb(n,t){n&1&&(s(0,"div",18),l(1," No se encontraron pedidos. "),a())}function Gb(n,t){if(n&1&&(s(0,"div",19),l(1),a()),n&2){let e=f();d(),g(" Error: ",e.errorMensaje," ")}}var wa=class n{listaDePedidos=[];bsModalRef;isLoading=!0;errorMensaje=null;pedidoService=w(Tt);modalService=w(zt);ngOnInit(){this.cargarPedidos()}cargarPedidos(){this.isLoading=!0,this.errorMensaje=null,this.pedidoService.obtenerTodosLosPedidos().subscribe({next:t=>{this.listaDePedidos=t.sort((e,i)=>(i.pedidoId||0)-(e.pedidoId||0)),this.isLoading=!1},error:t=>{console.error("Error al cargar pedidos:",t),this.errorMensaje="No se pudieron cargar los pedidos.",this.isLoading=!1}})}abrirModalDetalles(t){let e={pedido:t,modoEdicion:!1};this.bsModalRef=this.modalService.show(Lo,{initialState:e,class:"modal-lg"}),this.bsModalRef.content.estadoActualizado.subscribe(()=>{console.log("Modal notific\xF3 actualizaci\xF3n, recargando pedidos..."),this.cargarPedidos()})}abrirModalGestion(t){let e={pedido:t,modoEdicion:!0};this.bsModalRef=this.modalService.show(Lo,{initialState:e,class:"modal-lg"}),this.bsModalRef.content.estadoActualizado.subscribe(()=>{console.log("Modal notific\xF3 actualizaci\xF3n, recargando pedidos..."),this.cargarPedidos()})}getNombreCliente(t){return t.usuario&&t.usuario.nombre?t.usuario.nombre:t.usuario&&t.usuario.usuarioId?`Usuario ID: ${t.usuario.usuarioId}`:"Cliente Desconocido"}getEmailCliente(t){return t.usuario?.email||"-"}getEstadoClass(t){switch(t?.toLowerCase()){case"pendiente":return"estado-pendiente";case"aceptado":case"confirmado":return"estado-confirmado";case"en_preparacion":return"estado-preparacion";case"entregado":return"estado-entregado";case"cancelado":return"estado-cancelado";default:return""}}getPagoClass(t){switch(t?.toLowerCase()){case"pagado":return"pago-pagado";case"pendiente":return"pago-pendiente";default:return""}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-pedidos"]],decls:7,vars:4,consts:[[1,"gestion-container"],["class","table-responsive",4,"ngIf"],["class","loading-message",4,"ngIf"],["class","no-data-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],["title","Ver Detalles",1,"btn-action","btn-view",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-eye-fill"],["d","M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"],["d","M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"],["title","Gestionar Pedido",1,"btn-action","btn-edit",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil-fill"],["d","M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.5 8.793V11.5h2.707zm-7.071 3.528l5.31-5.31L13.197 4.15l-5.31 5.31z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11A.5.5 0 0 0 2.5 2h6a.5.5 0 0 0 0-1h-6A1.5 1.5 0 0 0 1 2.5z"],[1,"loading-message"],[1,"no-data-message"],[1,"error-message"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2"),l(2,"Gesti\xF3n de Pedidos"),a(),b(3,zb,22,1,"div",1)(4,Ub,2,0,"div",2)(5,Bb,2,0,"div",3)(6,Gb,2,1,"div",4),a()),e&2&&(d(3),p("ngIf",!i.isLoading&&i.listaDePedidos.length>0),d(),p("ngIf",i.isLoading),d(),p("ngIf",!i.isLoading&&i.listaDePedidos.length===0),d(),p("ngIf",i.errorMensaje))},dependencies:[k,Oe,z,N,Ce,xe,re],styles:[".gestion-container[_ngcontent-%COMP%]{padding:2rem;background-color:#f8f9fa;min-height:calc(100vh - 60px)}.gestion-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:1.5rem;color:#343a40}.search-bar[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:1.5rem;background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #0000000d;padding:10px;max-width:600px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;padding:.75rem 1rem;border:1px solid #ced4da;border-radius:6px;font-size:1rem;outline:none}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.btn-search[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:.75rem 1rem;border-radius:6px;cursor:pointer;transition:background-color .3s ease;display:flex;align-items:center;justify-content:center}.btn-search[_ngcontent-%COMP%]:hover{background-color:#0056b3}.table-responsive[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 15px #00000012;overflow-x:auto;margin-bottom:1.5rem}.table[_ngcontent-%COMP%]{width:100%;margin-bottom:0;color:#212529;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.9rem 1rem;vertical-align:middle;border-top:1px solid #dee2e6}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e9ecef;font-weight:600;color:#495057;text-align:left}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1;cursor:pointer}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.35em .65em;font-size:85%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.375rem;border:1px solid transparent;min-width:80px}.estado-pendiente[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;border-color:#ffeeba}.estado-confirmado[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460;border-color:#bee5eb}.estado-preparacion[_ngcontent-%COMP%]{background-color:#ffeeba;color:#856404;border-color:#ffdf7e}.estado-entregado[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border-color:#c3e6cb}.estado-cancelado[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border-color:#f5c6cb}.pago-pagado[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border-color:#c3e6cb}.pago-pendiente[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border-color:#f5c6cb}td[_ngcontent-%COMP%]:last-child{white-space:nowrap}.btn-action[_ngcontent-%COMP%]{padding:.5rem;margin:0 3px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s,transform .1s;color:#fff;display:inline-flex;align-items:center;justify-content:center}.btn-action[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.btn-view[_ngcontent-%COMP%]{background-color:#6c757d}.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.btn-edit[_ngcontent-%COMP%]{background-color:#ffc107}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#e0a800}.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:1.5rem;gap:10px;padding:1rem;background-color:#fff;border-radius:8px;box-shadow:0 1px 5px #0000000d}.btn-page[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;transition:background-color .3s;font-weight:500}.btn-page[_ngcontent-%COMP%]:disabled{background-color:#b3d7ff;cursor:not-allowed}.page-info[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem;font-weight:500}"]})};function $b(n,t){n&1&&(s(0,"div",5),l(1,"Cargando consultas..."),a())}function Hb(n,t){if(n&1&&(s(0,"div",6),l(1),a()),n&2){let e=f();d(),g(" ",e.errorMensaje," ")}}function Wb(n,t){if(n&1){let e=T();s(0,"tr")(1,"td"),l(2),a(),s(3,"td"),l(4),_(5,"br"),s(6,"small"),l(7),a()(),s(8,"td"),l(9),P(10,"slice"),a(),s(11,"td")(12,"span",10),l(13),P(14,"titlecase"),a()(),s(15,"td")(16,"span",10),l(17),a()(),s(18,"td"),l(19),P(20,"date"),a(),s(21,"td")(22,"button",11),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.verConsulta(o))}),Bt(),s(23,"svg",12),_(24,"path",13)(25,"path",14),a()(),Qn(),s(26,"button",15),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.editarConsulta(o))}),Bt(),s(27,"svg",16),_(28,"path",17),a()()()()}if(n&2){let e=t.$implicit,i=f(2);d(2),g("CONS-",e.contactoId),d(2),g(" ",e.nombre||"N/A"," "),d(3),E(e.email||"-"),d(2),De("",Yo(10,10,e.mensaje,0,50),"",e.mensaje.length>50?"...":""),d(3),p("ngClass",i.getEstadoClass(e.estado)),d(),g(" ",ie(14,14,e.estado)," "),d(3),p("ngClass",i.getPrioridadClass(e.contactoId)),d(),g(" ",i.getPrioridadTexto(e.contactoId)," "),d(2),E(A(20,16,e.fecha,"yyyy-MM-dd"))}}function qb(n,t){if(n&1&&(s(0,"div",7)(1,"table",8)(2,"thead")(3,"tr")(4,"th"),l(5,"ID"),a(),s(6,"th"),l(7,"Cliente"),a(),s(8,"th"),l(9,"Asunto"),a(),s(10,"th"),l(11,"Estado"),a(),s(12,"th"),l(13,"Prioridad"),a(),s(14,"th"),l(15,"Fecha"),a(),s(16,"th"),l(17,"Acciones"),a()()(),s(18,"tbody"),b(19,Wb,29,19,"tr",9),a()()()),n&2){let e=f();d(19),p("ngForOf",e.listaDeConsultas)}}function Yb(n,t){n&1&&(s(0,"div",18),l(1," No hay consultas para mostrar. "),a())}var Ea=class n{listaDeConsultas=[];consultaSeleccionada=null;isLoading=!0;errorMensaje=null;esAdministrador=!1;contactoService=w(Yt);authService=w(ae);ngOnInit(){let t=this.authService.obtenerUsuarioActual();t?(console.log("Usuario actual:",t.nombre),console.log("Roles del usuario:",t.roles)):console.warn("Usuario no autenticado."),this.esAdministrador=this.authService.userHasRole("Administrador"),this.esAdministrador?this.cargarConsultas():(this.isLoading=!1,this.errorMensaje="Acceso denegado. Se requiere el rol de Administrador para ver todas las consultas.")}cargarConsultas(){this.isLoading=!0,this.errorMensaje=null,this.contactoService.obtenerTodasLasConsultas().subscribe({next:t=>{this.listaDeConsultas=t,this.isLoading=!1,console.log("Consultas cargadas correctamente.")},error:t=>{console.error("Error al cargar todas las consultas (inesperado):",t),t.status===403?this.errorMensaje="No tienes permiso para ver esta secci\xF3n. Aseg\xFArate de haber iniciado sesi\xF3n como Administrador.":this.errorMensaje="No se pudieron cargar las consultas. Intenta m\xE1s tarde.",this.isLoading=!1}})}verConsulta(t){this.consultaSeleccionada=t,console.log("Ver detalles de consulta:",t.contactoId)}editarConsulta(t){this.consultaSeleccionada=t,console.log("Editar consulta:",t.contactoId)}getEstadoClass(t){switch(t?.toLowerCase()){case"pendiente":return"estado-pendiente";case"respondido":case"resuelto":case"en proceso":return"estado-proceso";default:return""}}getPrioridadClass(t){return t%2===0?"prioridad-alta":"prioridad-media"}getPrioridadTexto(t){return t%2===0?"Alta":"Media"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-consultas"]],decls:7,vars:4,consts:[[1,"gestion-container"],["class","loading",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"loading"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],["title","Ver Detalles",1,"btn-action","btn-view",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-eye-fill"],["d","M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"],["d","M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"],["title","Editar Consulta",1,"btn-action","btn-edit",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil-fill"],["d","M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"],[1,"alert","alert-info"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2"),l(2,"Gesti\xF3n de Consultas"),a(),b(3,$b,2,0,"div",1)(4,Hb,2,1,"div",2)(5,qb,20,1,"div",3)(6,Yb,2,0,"div",4),a()),e&2&&(d(3),p("ngIf",i.isLoading),d(),p("ngIf",i.errorMensaje),d(),p("ngIf",!i.isLoading&&i.listaDeConsultas.length>0),d(),p("ngIf",!i.isLoading&&i.listaDeConsultas.length===0&&!i.errorMensaje))},dependencies:[k,Oe,z,N,Wi,xe,re],styles:[".gestion-container[_ngcontent-%COMP%]{padding:2rem;background-color:#f8f9fa;min-height:calc(100vh - 60px)}.gestion-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:1.5rem;color:#343a40}.table-responsive[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 15px #00000012;overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem;color:#212529;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.9rem 1rem;vertical-align:middle;border-top:1px solid #dee2e6;font-size:.9rem;white-space:nowrap}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;border-bottom:2px solid #dee2e6;text-align:left;font-weight:600;color:#495057}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#0000000a}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-size:.8rem;display:block}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){max-width:300px;white-space:normal;overflow-wrap:break-word}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.35em .65em;font-size:75%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.375rem}.estado-pendiente[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.estado-proceso[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460;border:1px solid #bee5eb}.estado-respondido[_ngcontent-%COMP%], .estado-resuelto[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.prioridad-alta[_ngcontent-%COMP%]{background-color:#f5c6cb;color:#721c24;border:1px solid #f1b0b7}.prioridad-media[_ngcontent-%COMP%]{background-color:#ffeeba;color:#856404;border:1px solid #ffdf7e}.btn-action[_ngcontent-%COMP%]{background:none;border:none;padding:.3rem .5rem;cursor:pointer;color:#495057;opacity:.7;transition:opacity .2s ease;margin-right:5px}.btn-action[_ngcontent-%COMP%]:hover{opacity:1}.btn-view[_ngcontent-%COMP%]:hover{color:#007bff}.btn-edit[_ngcontent-%COMP%]:hover{color:#ffc107}.btn-action[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:1em;vertical-align:-.125em}"]})};function Zb(n,t){if(n&1){let e=T();s(0,"div",22)(1,"div",23)(2,"strong"),_(3,"i",24),l(4),a(),s(5,"button",25),v("click",function(){C(e);let o=f();return y(o.mensaje="")}),a()()()}if(n&2){let e=f();d(),en(Pt("alert alert-",e.tipoAlerta," alert-dismissible fade show shadow-lg rounded-4 border-0")),d(2),Z("fa-check-circle",e.tipoAlerta==="success")("fa-exclamation-triangle",e.tipoAlerta==="warning")("fa-times-circle",e.tipoAlerta==="danger")("fa-info-circle",e.tipoAlerta==="info"),d(),g(" ",e.mensaje," ")}}function Kb(n,t){if(n&1){let e=T();s(0,"tr")(1,"td")(2,"div",26)(3,"div",27),l(4),a(),s(5,"div")(6,"strong"),l(7),a(),s(8,"small",28),l(9),a()()()(),s(10,"td"),l(11),a(),s(12,"td"),l(13),a(),s(14,"td"),l(15),P(16,"date"),a(),s(17,"td")(18,"span",29),l(19),a()(),s(20,"td",19)(21,"div",30)(22,"button",31),v("click",function(){let o=C(e).$implicit,r=f();return y(r.abrirEditar(o))}),s(23,"i",32),l(24,"Editar"),a()(),s(25,"button",33),v("click",function(){let o=C(e).$implicit,r=f();return y(r.eliminarUsuario(o))}),s(26,"i",34),l(27,"Eliminar"),a()()()()()}if(n&2){let e=t.$implicit;d(4),g(" ",e.nombre.charAt(0).toUpperCase()," "),d(3),E(e.nombre),d(2),E(e.usuarioId===1?"Administrador":"Cliente"),d(2),E(e.email),d(2),E(e.telefono||"Sin tel\xE9fono"),d(2),E(A(16,12,e.fechaRegistro,"dd/MM/yyyy")),d(3),Z("bg-success",e.estado==="activo")("bg-danger",e.estado==="inactivo"),d(),g(" ",e.estado==="activo"?"Activo":"Inactivo"," "),d(6),p("disabled",e.usuarioId===1)}}function Jb(n,t){if(n&1){let e=T();s(0,"div",35)(1,"div",36)(2,"div",37)(3,"div",38)(4,"h5",39),l(5,"Editar Usuario"),a(),s(6,"button",40),v("click",function(){C(e);let o=f();return y(o.usuarioEditando=null)}),a()(),s(7,"div",41)(8,"div",42)(9,"label",43),l(10,"Nombre"),a(),s(11,"input",44),ue("ngModelChange",function(o){C(e);let r=f();return de(r.usuarioEditando.nombre,o)||(r.usuarioEditando.nombre=o),y(o)}),a()(),s(12,"div",42)(13,"label",43),l(14,"Tel\xE9fono"),a(),s(15,"input",44),ue("ngModelChange",function(o){C(e);let r=f();return de(r.usuarioEditando.telefono,o)||(r.usuarioEditando.telefono=o),y(o)}),a()(),s(16,"div",42)(17,"label",43),l(18,"Estado"),a(),s(19,"select",45),ue("ngModelChange",function(o){C(e);let r=f();return de(r.nuevoEstado,o)||(r.nuevoEstado=o),y(o)}),s(20,"option",46),l(21,"Activo"),a(),s(22,"option",47),l(23,"Inactivo"),a()()()(),s(24,"div",48)(25,"button",49),v("click",function(){C(e);let o=f();return y(o.usuarioEditando=null)}),l(26,"Cancelar"),a(),s(27,"button",50),v("click",function(){C(e);let o=f();return y(o.guardarCambios())}),l(28,"Guardar Cambios"),a()()()()()}if(n&2){let e=f();Z("show",e.usuarioEditando)("d-block",e.usuarioEditando),d(11),ce("ngModel",e.usuarioEditando.nombre),d(4),ce("ngModel",e.usuarioEditando.telefono),d(4),ce("ngModel",e.nuevoEstado)}}var Sa=class n{constructor(t,e){this.http=t;this.router=e}usuarios=[];usuariosFiltrados=[];filtro="";mensaje="";tipoAlerta="";usuarioEditando=null;nuevoEstado="";apiUrl=J.apiUrl;ngOnInit(){this.cargarUsuarios()}mostrarAlerta(t,e="success"){this.mensaje=t,this.tipoAlerta=e,setTimeout(()=>this.mensaje="",4e3)}cargarUsuarios(){this.http.get(`${this.apiUrl}/usuarios/todos`).subscribe({next:t=>{this.usuarios=t,this.usuariosFiltrados=[...t],this.mostrarAlerta("Usuarios cargados correctamente","success")},error:()=>this.mostrarAlerta("Error al cargar usuarios","danger")})}filtrarUsuarios(){let t=this.filtro.toLowerCase().trim();this.usuariosFiltrados=t?this.usuarios.filter(e=>e.nombre?.toLowerCase().includes(t)||e.email?.toLowerCase().includes(t)):[...this.usuarios]}abrirEditar(t){this.usuarioEditando=O({},t),this.nuevoEstado=t.estado}guardarCambios(){if(!this.usuarioEditando)return;let t={nombre:this.usuarioEditando.nombre,telefono:this.usuarioEditando.telefono||null,estado:this.nuevoEstado};this.http.put(`${this.apiUrl}/usuarios/${this.usuarioEditando.usuarioId}`,t).subscribe({next:()=>{let e=this.usuarios.find(i=>i.usuarioId===this.usuarioEditando.usuarioId);e&&(e.nombre=this.usuarioEditando.nombre,e.telefono=this.usuarioEditando.telefono,e.estado=this.nuevoEstado),this.mostrarAlerta("Usuario actualizado correctamente","success"),this.usuarioEditando=null,this.filtrarUsuarios()},error:e=>{console.error(e),this.mostrarAlerta("Error al actualizar usuario","danger")}})}eliminarUsuario(t){if(t.usuarioId===1){this.mostrarAlerta("No puedes eliminar al administrador","danger");return}confirm(`\xBFSeguro que deseas eliminar a ${t.nombre}?`)&&this.http.delete(`${this.apiUrl}/usuarios/${t.usuarioId}`).subscribe({next:()=>{this.usuarios=this.usuarios.filter(e=>e.usuarioId!==t.usuarioId),this.filtrarUsuarios(),this.mostrarAlerta("Usuario eliminado","success")},error:()=>this.mostrarAlerta("Error al eliminar","danger")})}verPedidos(t){this.router.navigate(["/admin/pedidos"],{queryParams:{clienteId:t.usuarioId,nombre:t.nombre}})}static \u0275fac=function(e){return new(e||n)(x(K),x(pe))};static \u0275cmp=M({type:n,selectors:[["app-gestion-usuarios"]],decls:37,vars:4,consts:[[1,"container-fluid","py-4"],["class","position-fixed top-0 end-0 p-4","style","z-index: 9999;",4,"ngIf"],[1,"card","shadow-lg","border-0","rounded-4"],[1,"card-header","bg-primary","text-white","py-4","text-center"],[1,"mb-0"],[1,"fas","fa-users","me-3"],[1,"card-body","p-4"],[1,"row","mb-4"],[1,"col-md-8"],[1,"input-group","input-group-lg"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Buscar por nombre o email...",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-4","text-end"],[1,"btn","btn-success","btn-lg",3,"click"],[1,"fas","fa-sync-alt","me-2"],[1,"table-responsive"],[1,"table","table-hover","align-middle"],[1,"table-dark"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","modal fade","tabindex","-1","style","background: rgba(0,0,0,0.5)",3,"show","d-block",4,"ngIf"],[1,"position-fixed","top-0","end-0","p-4",2,"z-index","9999"],["role","alert"],[1,"fas","me-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"d-flex","align-items-center"],[1,"bg-primary","text-white","rounded-circle","d-flex","align-items-center","justify-content-center","me-3",2,"width","45px","height","45px"],[1,"text-muted","d-block"],[1,"badge","fs-6"],[1,"d-flex","justify-content-center","gap-3"],["title","Editar",1,"btn","btn-icon","btn-primary",3,"click"],[1,"fas","fa-edit"],["title","Eliminar",1,"btn","btn-icon","btn-danger",3,"click","disabled"],[1,"fas","fa-trash"],["tabindex","-1",1,"modal","fade",2,"background","rgba(0,0,0,0.5)"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-4","shadow"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"form-label","fw-bold"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-select",3,"ngModelChange","ngModel"],["value","activo"],["value","inactivo"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,i){e&1&&(s(0,"div",0),b(1,Zb,6,12,"div",1),s(2,"div",2)(3,"div",3)(4,"h3",4),_(5,"i",5),l(6," Gesti\xF3n de Usuarios"),a()(),s(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"span",10),_(12,"i",11),a(),s(13,"input",12),ue("ngModelChange",function(r){return de(i.filtro,r)||(i.filtro=r),r}),v("ngModelChange",function(){return i.filtrarUsuarios()}),a()()(),s(14,"div",13)(15,"button",14),v("click",function(){return i.cargarUsuarios()}),_(16,"i",15),l(17," Actualizar "),a()()(),s(18,"div",16)(19,"table",17)(20,"thead",18)(21,"tr")(22,"th"),l(23,"Usuario"),a(),s(24,"th"),l(25,"Email"),a(),s(26,"th"),l(27,"Tel\xE9fono"),a(),s(28,"th"),l(29,"Registro"),a(),s(30,"th"),l(31,"Estado"),a(),s(32,"th",19),l(33,"Acciones"),a()()(),s(34,"tbody"),b(35,Kb,28,15,"tr",20),a()()()()(),b(36,Jb,29,7,"div",21),a()),e&2&&(d(),p("ngIf",i.mensaje),d(12),ce("ngModel",i.filtro),d(22),p("ngForOf",i.usuariosFiltrados),d(),p("ngIf",i.usuarioEditando))},dependencies:[k,z,N,Te,nt,it,te,tt,se,Re,re],styles:[".gestion-container[_ngcontent-%COMP%]{padding:2rem;background-color:#f8f9fa;min-height:calc(100vh - 60px)}.gestion-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:1.5rem;color:#343a40}.table-responsive[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 15px #00000012;overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem;color:#212529;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.9rem 1rem;vertical-align:middle;border-top:1px solid #dee2e6;font-size:.9rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;border-bottom:2px solid #dee2e6;text-align:left;font-weight:600;color:#495057}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#0000000a}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.35em .65em;font-size:75%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.375rem}.estado-activo[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.estado-inactivo[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.btn-action[_ngcontent-%COMP%]{background:none;border:none;padding:.3rem .5rem;cursor:pointer;color:#495057;opacity:.7;transition:opacity .2s ease;margin-right:5px}.btn-action[_ngcontent-%COMP%]:hover{opacity:1}.btn-view[_ngcontent-%COMP%]:hover{color:#007bff}.btn-edit[_ngcontent-%COMP%]:hover{color:#ffc107}.btn-action[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:1em;vertical-align:-.125em}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000a6;z-index:1050}.modal-usuario[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1060;display:flex;justify-content:center;align-items:center}.modal-content-usuario[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:16px;box-shadow:0 20px 50px #0006;max-width:500px;width:90%}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end;margin-top:1.5rem}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border-radius:8px;font-weight:600}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background:#eee;color:#333}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background:#ff8c42;color:#fff}body.modal-open[_ngcontent-%COMP%]{overflow:hidden}.btn-icon[_ngcontent-%COMP%]{width:90px;height:40px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #00000026;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0003}"]})};function Xb(n,t){n&1&&(s(0,"div",17),l(1,"Cargando tus datos..."),a())}function Qb(n,t){if(n&1&&(s(0,"div",18),l(1),a()),n&2){let e=f();d(),E(e.errorMensajePerfil)}}function e1(n,t){n&1&&(s(0,"small",27),l(1," El nombre es requerido. "),a())}function t1(n,t){n&1&&(s(0,"small",27),l(1," El tel\xE9fono debe tener 9 d\xEDgitos num\xE9ricos. "),a())}function n1(n,t){if(n&1&&(s(0,"div",28),l(1),a()),n&2){let e=f(2);d(),E(e.exitoMensajePerfil)}}function i1(n,t){if(n&1){let e=T();s(0,"form",5),v("ngSubmit",function(){C(e);let o=f();return y(o.guardarPerfil())}),s(1,"div",6)(2,"label",19),l(3,"Nombre Completo"),a(),_(4,"input",20),b(5,e1,2,0,"small",9),a(),s(6,"div",6)(7,"label",21),l(8,"Correo Electr\xF3nico"),a(),_(9,"input",22),s(10,"small"),l(11,"El correo electr\xF3nico no se puede cambiar."),a()(),s(12,"div",6)(13,"label",23),l(14,"Tel\xE9fono"),a(),_(15,"input",24),b(16,t1,2,0,"small",9),a(),s(17,"div",6)(18,"label",25),l(19,"Direcci\xF3n"),a(),_(20,"input",26),a(),s(21,"button",14),l(22),a(),b(23,n1,2,1,"div",16),a()}if(n&2){let e=f();p("formGroup",e.perfilForm),d(5),p("ngIf",e.isControlInvalid(e.perfilForm,"nombre")&&e.getControlError(e.perfilForm,"nombre","required")),d(11),p("ngIf",e.isControlInvalid(e.perfilForm,"telefono")&&e.getControlError(e.perfilForm,"telefono","pattern")),d(5),p("disabled",e.perfilForm.invalid||e.isSavingPerfil),d(),g(" ",e.isSavingPerfil?"Guardando...":"Guardar Cambios"," "),d(),p("ngIf",e.exitoMensajePerfil)}}function o1(n,t){n&1&&(s(0,"small",27),l(1," La contrase\xF1a actual es requerida. "),a())}function r1(n,t){n&1&&(s(0,"small",27),l(1," La nueva contrase\xF1a es requerida. "),a())}function a1(n,t){n&1&&(s(0,"small",27),l(1," La contrase\xF1a debe tener al menos 6 caracteres. "),a())}function s1(n,t){n&1&&(s(0,"small",27),l(1," Confirma la nueva contrase\xF1a. "),a())}function l1(n,t){n&1&&(s(0,"small",27),l(1," Las contrase\xF1as no coinciden. "),a())}function c1(n,t){if(n&1&&(s(0,"div",29),l(1),a()),n&2){let e=f();d(),E(e.errorMensajePassword)}}function d1(n,t){if(n&1&&(s(0,"div",28),l(1),a()),n&2){let e=f();d(),E(e.exitoMensajePassword)}}function u1(n){let t=n.get("nuevaPassword"),e=n.get("confirmarPassword");return!t||!e||!t.value||!e.value||t.value===e.value?null:{passwordMismatch:!0}}var Pa=class n{perfilForm;passwordForm;usuarioOriginal=null;isLoading=!0;isSavingPerfil=!1;isSavingPassword=!1;errorMensajePerfil=null;exitoMensajePerfil=null;errorMensajePassword=null;exitoMensajePassword=null;usuarioService=w(Jt);fb=w(ot);constructor(){this.perfilForm=this.fb.group({nombre:["",$.required],email:[{value:"",disabled:!0},[$.required,$.email]],telefono:["",[$.pattern("^[0-9]{9}$")]],direccion:[""]}),this.passwordForm=this.fb.group({passwordActual:["",$.required],nuevaPassword:["",[$.required,$.minLength(6)]],confirmarPassword:["",$.required]},{validators:u1})}ngOnInit(){this.cargarDatosUsuario()}cargarDatosUsuario(){this.isLoading=!0,this.errorMensajePerfil=null,this.usuarioService.obtenerMiPerfil().subscribe({next:t=>{this.usuarioOriginal=t,this.perfilForm.patchValue({nombre:t.nombre,email:t.email,telefono:t.telefono||"",direccion:t.direccion||""}),this.isLoading=!1},error:t=>{console.error("Error al cargar el perfil del admin:",t),this.errorMensajePerfil="No se pudieron cargar tus datos. Intenta de nuevo.",this.isLoading=!1}})}guardarPerfil(){if(this.perfilForm.invalid||!this.usuarioOriginal)return;this.isSavingPerfil=!0,this.errorMensajePerfil=null,this.exitoMensajePerfil=null;let t=ne(O({},this.usuarioOriginal),{nombre:this.perfilForm.value.nombre,telefono:this.perfilForm.value.telefono,direccion:this.perfilForm.value.direccion});this.usuarioService.actualizarMiPerfil(t).subscribe({next:e=>{this.usuarioOriginal=e,this.perfilForm.patchValue({nombre:e.nombre,telefono:e.telefono||"",direccion:e.direccion||""}),this.isSavingPerfil=!1,this.exitoMensajePerfil="\xA1Perfil actualizado con \xE9xito!",setTimeout(()=>this.exitoMensajePerfil=null,3e3)},error:e=>{console.error("Error al guardar el perfil del admin:",e),this.errorMensajePerfil="No se pudieron guardar los cambios. Intenta de nuevo.",this.isSavingPerfil=!1}})}cambiarPassword(){if(this.passwordForm.invalid){this.passwordForm.markAllAsTouched();return}this.isSavingPassword=!0,this.errorMensajePassword=null,this.exitoMensajePassword=null;let t={passwordActual:this.passwordForm.value.passwordActual,nuevaPassword:this.passwordForm.value.nuevaPassword};this.usuarioService.cambiarPassword(t).subscribe({next:e=>{this.isSavingPassword=!1,this.exitoMensajePassword=e||"Contrase\xF1a cambiada con \xE9xito.",this.passwordForm.reset(),setTimeout(()=>this.exitoMensajePassword=null,4e3)},error:e=>{console.error("Error al cambiar contrase\xF1a (admin):",e),this.errorMensajePassword=e.error||"Error inesperado al cambiar la contrase\xF1a.",this.isSavingPassword=!1}})}isControlInvalid(t,e){let i=t.get(e);return!!i&&i.invalid&&(i.dirty||i.touched)}getControlError(t,e,i){let o=t.get(e);return!!o&&o.hasError(i)}getPasswordFormError(t){return this.passwordForm.hasError(t)&&(this.passwordForm.get("confirmarPassword")?.touched??!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-admin-perfil"]],decls:35,vars:13,consts:[[1,"perfil-container"],["class","loading",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"separator"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","passwordActual"],["type","password","id","passwordActual","formControlName","passwordActual",1,"form-control"],["class","text-danger",4,"ngIf"],["for","nuevaPassword"],["type","password","id","nuevaPassword","formControlName","nuevaPassword",1,"form-control"],["for","confirmarPassword"],["type","password","id","confirmarPassword","formControlName","confirmarPassword",1,"form-control"],["type","submit",1,"btn-guardar",3,"disabled"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],[1,"loading"],[1,"alert","alert-danger"],["for","nombre"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["for","telefono"],["type","tel","id","telefono","formControlName","telefono",1,"form-control"],["for","direccion"],["type","text","id","direccion","formControlName","direccion","placeholder","Ej: Av. Principal 123, Dpto. 401",1,"form-control"],[1,"text-danger"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2"),l(2,"Mi Perfil"),a(),s(3,"p"),l(4,"Actualiza tu informaci\xF3n personal y de contacto."),a(),b(5,Xb,2,0,"div",1)(6,Qb,2,1,"div",2)(7,i1,24,6,"form",3),_(8,"hr",4),s(9,"h2"),l(10,"Cambiar Contrase\xF1a"),a(),s(11,"p"),l(12,"Establece una nueva contrase\xF1a para tu cuenta."),a(),s(13,"form",5),v("ngSubmit",function(){return i.cambiarPassword()}),s(14,"div",6)(15,"label",7),l(16,"Contrase\xF1a Actual"),a(),_(17,"input",8),b(18,o1,2,0,"small",9),a(),s(19,"div",6)(20,"label",10),l(21,"Nueva Contrase\xF1a"),a(),_(22,"input",11),b(23,r1,2,0,"small",9)(24,a1,2,0,"small",9),a(),s(25,"div",6)(26,"label",12),l(27,"Confirmar Nueva Contrase\xF1a"),a(),_(28,"input",13),b(29,s1,2,0,"small",9)(30,l1,2,0,"small",9),a(),s(31,"button",14),l(32),a(),b(33,c1,2,1,"div",15)(34,d1,2,1,"div",16),a()()),e&2&&(d(5),p("ngIf",i.isLoading),d(),p("ngIf",i.errorMensajePerfil),d(),p("ngIf",!i.isLoading&&i.perfilForm),d(6),p("formGroup",i.passwordForm),d(5),p("ngIf",i.isControlInvalid(i.passwordForm,"passwordActual")&&i.getControlError(i.passwordForm,"passwordActual","required")),d(5),p("ngIf",i.isControlInvalid(i.passwordForm,"nuevaPassword")&&i.getControlError(i.passwordForm,"nuevaPassword","required")),d(),p("ngIf",i.isControlInvalid(i.passwordForm,"nuevaPassword")&&i.getControlError(i.passwordForm,"nuevaPassword","minlength")),d(5),p("ngIf",i.isControlInvalid(i.passwordForm,"confirmarPassword")&&i.getControlError(i.passwordForm,"confirmarPassword","required")),d(),p("ngIf",i.getPasswordFormError("passwordMismatch")),d(),p("disabled",i.passwordForm.invalid||i.isSavingPassword),d(),g(" ",i.isSavingPassword?"Cambiando...":"Cambiar Contrase\xF1a"," "),d(),p("ngIf",i.errorMensajePassword),d(),p("ngIf",i.exitoMensajePassword))},dependencies:[k,N,rt,Ue,te,se,ze,Ze,Ke],styles:[".perfil-container[_ngcontent-%COMP%]{padding:2rem}.perfil-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem}.perfil-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#6c757d;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]{display:block;width:100%;padding:.75rem 1rem;font-size:1rem;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{color:#495057;background-color:#fff;border-color:#fd7e14;outline:0;box-shadow:0 0 0 .2rem #fd7e1440}.form-control[disabled][_ngcontent-%COMP%]{background-color:#e9ecef;opacity:1}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;margin-top:.25rem}.btn-guardar[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff;padding:.75rem 1.5rem;border:none;border-radius:.25rem;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .15s ease-in-out;margin-top:1rem}.btn-guardar[_ngcontent-%COMP%]:hover{background-color:#e66a00}.loading[_ngcontent-%COMP%]{padding:1rem;text-align:center;font-weight:600;color:#6c757d}.alert[_ngcontent-%COMP%]{padding:1rem;margin-top:1.5rem;border-radius:.25rem;border:1px solid transparent}.alert-danger[_ngcontent-%COMP%]{color:#721c24;background-color:#f8d7da;border-color:#f5c6cb}.alert-success[_ngcontent-%COMP%]{color:#155724;background-color:#d4edda;border-color:#c3e6cb}.text-danger[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem;display:block}.separator[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:3rem;border:0;border-top:1px solid #dee2e6}.mt-3[_ngcontent-%COMP%]{margin-top:1rem!important}"]})};function p1(n,t){if(n&1&&(s(0,"option",15),l(1),P(2,"titlecase"),a()),n&2){let e=t.$implicit;p("value",e),d(),E(ie(2,2,e))}}function m1(n,t){n&1&&(s(0,"div",16),l(1,"Cargando productos..."),a())}function f1(n,t){if(n&1&&(s(0,"div",17),l(1),a()),n&2){let e=f();d(),E(e.errorMensaje)}}function g1(n,t){if(n&1){let e=T();s(0,"tr")(1,"td"),_(2,"img",22),a(),s(3,"td"),l(4),a(),s(5,"td"),l(6),P(7,"titlecase"),a(),s(8,"td"),l(9),P(10,"number"),a(),s(11,"td"),l(12),a(),s(13,"td")(14,"span",23),l(15),P(16,"titlecase"),a()(),s(17,"td")(18,"button",24),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.editarProducto(o))}),l(19,"Editar"),a(),s(20,"button",25),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.eliminarProducto(o))}),l(21,"Eliminar"),a()()()}if(n&2){let e=t.$implicit,i=f(2);d(2),p("alt",hc(e.nombre))("src",e.imagenUrl||"https://placehold.co/60x60?text=Sin+Img",ve),d(2),E(e.nombre),d(2),E(ie(7,9,e.categoria)),d(3),g("S/ ",A(10,11,e.precioBase,"1.2-2")),d(3),E(e.personalizable?"S\xED":"No"),d(2),p("ngClass",i.getEstadoClass(e.estado)),d(),E(ie(16,14,e.estado))}}function h1(n,t){if(n&1){let e=T();s(0,"div",26)(1,"button",27),v("click",function(){C(e);let o=f(2);return y(o.cambiarPagina(o.paginaActual-1))}),l(2,"Anterior"),a(),s(3,"span"),l(4),a(),s(5,"button",28),v("click",function(){C(e);let o=f(2);return y(o.cambiarPagina(o.paginaActual+1))}),l(6,"Siguiente"),a()()}if(n&2){let e=f(2);d(),p("disabled",e.paginaActual===1),d(3),De("P\xE1gina ",e.paginaActual," de ",e.totalPaginas()),d(),p("disabled",e.paginaActual===e.totalPaginas())}}function v1(n,t){if(n&1&&(s(0,"div",18)(1,"table",19)(2,"thead")(3,"tr")(4,"th"),l(5,"Imagen"),a(),s(6,"th"),l(7,"Nombre"),a(),s(8,"th"),l(9,"Categor\xEDa"),a(),s(10,"th"),l(11,"Precio"),a(),s(12,"th"),l(13,"Personalizable"),a(),s(14,"th"),l(15,"Estado"),a(),s(16,"th"),l(17,"Acciones"),a()()(),s(18,"tbody"),b(19,g1,22,16,"tr",20),a()(),b(20,h1,7,4,"div",21),a()),n&2){let e=f();d(19),p("ngForOf",e.productosPaginados),d(),p("ngIf",e.totalPaginas()>1)}}function b1(n,t){n&1&&(s(0,"div",29)(1,"p"),l(2,"No se encontraron productos."),a()())}function _1(n,t){if(n&1){let e=T();s(0,"div",30),v("click",function(){C(e);let o=f();return y(o.cancelarEdicion())}),a()}}function x1(n,t){if(n&1&&(s(0,"option",15),l(1),P(2,"titlecase"),a()),n&2){let e=t.$implicit;p("value",e),d(),E(ie(2,2,e))}}function C1(n,t){n&1&&(s(0,"small",51),l(1," Imagen subida correctamente a la nube "),a())}function y1(n,t){if(n&1){let e=T();s(0,"div",31)(1,"div",32),v("click",function(o){return C(e),y(o.stopPropagation())}),s(2,"h3",33),l(3),a(),s(4,"form",34),v("ngSubmit",function(){C(e);let o=f();return y(o.guardarEdicion())}),s(5,"div",35)(6,"label"),l(7,"Nombre *"),a(),s(8,"input",36),ue("ngModelChange",function(o){C(e);let r=f();return de(r.productoSeleccionado.nombre,o)||(r.productoSeleccionado.nombre=o),y(o)}),a()(),s(9,"div",35)(10,"label"),l(11,"Categor\xEDa *"),a(),s(12,"select",37),ue("ngModelChange",function(o){C(e);let r=f();return de(r.productoSeleccionado.categoria,o)||(r.productoSeleccionado.categoria=o),y(o)}),b(13,x1,3,4,"option",8),a()(),s(14,"div",35)(15,"label"),l(16,"Precio Base (S/)*"),a(),s(17,"input",38),ue("ngModelChange",function(o){C(e);let r=f();return de(r.productoSeleccionado.precioBase,o)||(r.productoSeleccionado.precioBase=o),y(o)}),a()(),s(18,"div",39)(19,"input",40),ue("ngModelChange",function(o){C(e);let r=f();return de(r.productoSeleccionado.personalizable,o)||(r.productoSeleccionado.personalizable=o),y(o)}),a(),s(20,"label",41),l(21,"Es personalizable"),a()(),s(22,"div",42)(23,"label"),l(24,"Imagen del producto"),a(),s(25,"div",43),_(26,"input",44),s(27,"input",45,0),v("change",function(o){C(e);let r=f();return y(r.onArchivoSeleccionado(o))}),a(),s(29,"button",46),v("click",function(){C(e);let o=Nt(28);return y(o.click())}),l(30," Seleccionar Foto "),a()(),b(31,C1,2,0,"small",47),a(),s(32,"div",48)(33,"button",49),v("click",function(){C(e);let o=f();return y(o.cancelarEdicion())}),l(34,"Cancelar"),a(),s(35,"button",50),l(36),a()()()()()}if(n&2){let e=f();d(3),g(" ",e.productoSeleccionado.productoId===0?"Nuevo Producto":"Editar Producto"," "),d(5),ce("ngModel",e.productoSeleccionado.nombre),d(4),ce("ngModel",e.productoSeleccionado.categoria),d(),p("ngForOf",e.categoriasDisponibles),d(4),ce("ngModel",e.productoSeleccionado.precioBase),d(2),ce("ngModel",e.productoSeleccionado.personalizable),d(7),p("value",e.simularRuta||(e.productoSeleccionado.imagenUrl?"Imagen ya subida":"Sin imagen")),d(5),p("ngIf",e.productoSeleccionado.imagenUrl),d(4),p("disabled",e.isLoading),d(),g(" ",e.productoSeleccionado.productoId===0?"Crear":"Guardar Cambios"," ")}}var Vo=class n{listaDeProductos=[];productosFiltrados=[];isLoading=!0;errorMensaje=null;buscar="";categoriaFiltro="todas";paginaActual=1;itemsPorPagina=10;categoriasDisponibles=[];productoSeleccionado=null;archivoSeleccionado=null;simularRuta="";cloudinaryPublicId="";productoService=w(Ti);renderer=w(He);document=w(me);ngOnInit(){this.cargarProductos()}cargarProductos(){this.isLoading=!0,this.errorMensaje=null,this.productoService.getProductos().subscribe({next:t=>{this.listaDeProductos=t,this.categoriasDisponibles=this.getCategoriasUnicas(),this.filtrarYPaginar(),this.isLoading=!1},error:t=>{this.errorMensaje="Error al cargar productos. Revisa tu conexi\xF3n.",this.isLoading=!1}})}getCategoriasUnicas(){let t=this.listaDeProductos.map(e=>e.categoria);return[...new Set(t)].sort()}filtrarYPaginar(){let t=[...this.listaDeProductos];if(this.buscar.trim()){let e=this.buscar.toLowerCase();t=t.filter(i=>i.nombre.toLowerCase().includes(e))}this.categoriaFiltro!=="todas"&&(t=t.filter(e=>e.categoria===this.categoriaFiltro)),this.productosFiltrados=t,this.paginaActual=1}get productosPaginados(){let t=(this.paginaActual-1)*this.itemsPorPagina;return this.productosFiltrados.slice(t,t+this.itemsPorPagina)}totalPaginas(){return Math.ceil(this.productosFiltrados.length/this.itemsPorPagina)}cambiarPagina(t){t>=1&&t<=this.totalPaginas()&&(this.paginaActual=t)}crearProducto(){this.productoSeleccionado={productoId:0,nombre:"",descripcion:"",precioBase:0,categoria:this.categoriasDisponibles[0]||"torta",imagenUrl:"",cloudinaryPublicId:"",personalizable:!1,estado:"activo"},this.archivoSeleccionado=null,this.simularRuta="",this.cloudinaryPublicId="",this.abrirModal()}editarProducto(t){this.productoSeleccionado=O({},t),this.cloudinaryPublicId=t.cloudinaryPublicId||"",this.simularRuta=t.imagenUrl?"Imagen ya subida":"",this.archivoSeleccionado=null,this.abrirModal()}abrirModal(){this.renderer.addClass(this.document.body,"modal-open")}cancelarEdicion(){this.productoSeleccionado=null,this.archivoSeleccionado=null,this.simularRuta="",this.cloudinaryPublicId="",this.renderer.removeClass(this.document.body,"modal-open")}onArchivoSeleccionado(t){let e=t.target;e.files?.length&&(this.archivoSeleccionado=e.files[0],this.simularRuta=this.archivoSeleccionado.name,this.isLoading=!0,this.productoService.subirImagen(this.archivoSeleccionado).subscribe({next:i=>{this.productoSeleccionado&&(this.productoSeleccionado.imagenUrl=i.url,this.cloudinaryPublicId=i.public_id),this.isLoading=!1,alert("\xA1Foto subida a Cloudinary con \xE9xito!")},error:i=>{console.error("Error Cloudinary:",i),alert("Error al subir la imagen. Intenta otra vez."),this.isLoading=!1}}))}guardarEdicion(){if(!this.productoSeleccionado)return;if(!this.productoSeleccionado.nombre.trim()||this.productoSeleccionado.precioBase<=0){alert("Nombre y precio son obligatorios");return}this.isLoading=!0;let t=ne(O({},this.productoSeleccionado),{cloudinaryPublicId:this.cloudinaryPublicId||this.productoSeleccionado.cloudinaryPublicId});(this.productoSeleccionado.productoId===0?this.productoService.crearProducto(t):this.productoService.actualizarProducto(this.productoSeleccionado.productoId,t)).subscribe({next:()=>{this.cargarProductos(),this.cancelarEdicion(),this.isLoading=!1,alert("\xA1Producto guardado con \xE9xito!")},error:i=>{console.error(i),alert("Error al guardar el producto"),this.isLoading=!1}})}eliminarProducto(t){confirm(`\xBFEliminar "${t.nombre}" permanentemente?`)&&this.productoService.eliminarProducto(t.productoId).subscribe({next:()=>this.cargarProductos(),error:()=>alert("Error al eliminar")})}getEstadoClass(t=""){return t==="activo"?"badge bg-success":"badge bg-secondary"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-productos"]],decls:18,vars:9,consts:[["fileInput",""],[1,"gestion-container"],[1,"header-section"],[1,"btn-accion","btn-crear",3,"click"],[1,"filtros","mb-4"],["type","text","placeholder","Buscar...",1,"form-control","d-inline-block","w-50",3,"ngModelChange","input","ngModel"],[1,"form-control","d-inline-block","w-25","ms-3",3,"ngModelChange","change","ngModel"],["value","todas"],[3,"value",4,"ngFor","ngForOf"],["class","text-center py-4",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","no-data",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","modal-container",4,"ngIf"],[3,"value"],[1,"text-center","py-4"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["class","text-center mt-4",4,"ngIf"],[1,"product-image-thumbnail",3,"src","alt"],[1,"badge",3,"ngClass"],[1,"btn","btn-sm","btn-warning","me-2",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"text-center","mt-4"],[1,"btn","btn-outline-primary","me-3",3,"click","disabled"],[1,"btn","btn-outline-primary","ms-3",3,"click","disabled"],[1,"no-data"],[1,"modal-overlay",3,"click"],[1,"modal-container"],[1,"modal-content",3,"click"],[1,"modal-title"],[3,"ngSubmit"],[1,"form-group","mb-3"],["type","text","name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","categoria","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.50","min","0.01","name","precio","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","form-check","mt-3"],["type","checkbox","name","personalizable",1,"form-check-input",3,"ngModelChange","ngModel"],[1,"form-check-label"],[1,"form-group","mt-4"],[1,"url-input-group"],["type","text","readonly","",1,"form-control",3,"value"],["type","file","hidden","","accept","image/*",3,"change"],["type","button",1,"btn","btn-url-select",3,"click"],["class","text-success",4,"ngIf"],[1,"form-actions","mt-4"],["type","button",1,"btn","btn-cancel","me-3",3,"click"],["type","submit",1,"btn","btn-save",3,"disabled"],[1,"text-success"]],template:function(e,i){e&1&&(s(0,"div",1)(1,"div",2)(2,"h2"),l(3,"Gesti\xF3n de Productos"),a(),s(4,"button",3),v("click",function(){return i.crearProducto()}),l(5,"+ A\xF1adir Producto"),a()(),s(6,"div",4)(7,"input",5),ue("ngModelChange",function(r){return de(i.buscar,r)||(i.buscar=r),r}),v("input",function(){return i.filtrarYPaginar()}),a(),s(8,"select",6),ue("ngModelChange",function(r){return de(i.categoriaFiltro,r)||(i.categoriaFiltro=r),r}),v("change",function(){return i.filtrarYPaginar()}),s(9,"option",7),l(10,"Todas las categor\xEDas"),a(),b(11,p1,3,4,"option",8),a()(),b(12,m1,2,0,"div",9)(13,f1,2,1,"div",10)(14,v1,21,2,"div",11)(15,b1,3,0,"div",12)(16,_1,1,0,"div",13)(17,y1,37,10,"div",14),a()),e&2&&(d(7),ce("ngModel",i.buscar),d(),ce("ngModel",i.categoriaFiltro),d(3),p("ngForOf",i.categoriasDisponibles),d(),p("ngIf",i.isLoading),d(),p("ngIf",i.errorMensaje),d(),p("ngIf",!i.isLoading&&i.productosPaginados.length>0),d(),p("ngIf",!i.isLoading&&i.productosFiltrados.length===0),d(),p("ngIf",i.productoSeleccionado),d(),p("ngIf",i.productoSeleccionado))},dependencies:[k,Oe,z,N,Te,Ue,nt,it,te,$n,Mo,tt,se,ze,Wn,Oo,Re,vl,Ce,xe],styles:[".gestion-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto;font-family:Inter,sans-serif}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:3px solid #000000;padding-bottom:15px}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f3b020e7;font-weight:700}.btn-crear[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f0dac8,#ff8c42);color:#000;padding:.6rem 1.2rem;border-radius:8px;font-weight:600;font-size:.95rem;border:none;cursor:pointer;box-shadow:0 4px 6px #28a7454d;transition:background-color .2s ease,transform .1s}.btn-crear[_ngcontent-%COMP%]:hover{background-color:#218838;transform:translateY(-1px)}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto;border-radius:10px;box-shadow:0 6px 15px #0000001a}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;border-bottom:1px solid #e0e0e0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e9f5ff;font-weight:700;color:#333;text-transform:uppercase;font-size:.85rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f0f8ff}.product-image-thumbnail[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:8px;border:2px solid #ddd}.badge[_ngcontent-%COMP%]{padding:.4rem .8rem;border-radius:16px;font-weight:600;font-size:.75rem;display:inline-block}.estado-activo[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.estado-inactivo[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.btn-action[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;margin-right:5px;font-size:1.1rem;transition:color .2s;padding:5px;border-radius:4px}.btn-edit[_ngcontent-%COMP%]{color:#007bff}.btn-delete[_ngcontent-%COMP%]{color:#dc3545}.btn-action[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.no-data[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#6c757d;border:2px dashed #ddd;border-radius:10px;margin-top:1.5rem;background-color:#fafafa}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 15px 35px #0000004d;width:95%;max-width:550px;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.modal-title[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.5rem;color:#000;border-bottom:2px solid #000000;padding-bottom:10px;font-weight:600}.product-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}.product-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.4rem;color:#333;font-size:.95rem}.product-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([type=checkbox]), .product-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.8rem 1rem;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;transition:border-color .2s,box-shadow .2s}.product-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .product-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#ff9100;outline:none;box-shadow:0 0 0 3px #007bff33}.url-input-group[_ngcontent-%COMP%]{display:flex;gap:10px}.url-input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;background-color:#f8f8f8;cursor:default}.btn-url-select[_ngcontent-%COMP%]{background:linear-gradient(45deg,#927f70,#e49462);color:#000;padding:.7rem 1rem;border:none;border-radius:8px;cursor:pointer;font-weight:800;transition:background-color .2s}.btn-url-select[_ngcontent-%COMP%]:hover{background-color:#5a6268}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 0}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:15px;margin-bottom:0;font-weight:700}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:2rem;padding-top:1rem;border-top:1px solid #eee}.btn-save[_ngcontent-%COMP%]{background-color:#f3a070;box-shadow:0 4px 6px #eb9e46ea;font-weight:700}.btn-save[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#d18624}.btn-cancel[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#000;font-weight:600}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.alert-danger[_ngcontent-%COMP%]{margin-top:1rem}.alert-danger-inline[_ngcontent-%COMP%]{padding:.75rem;background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb;border-radius:8px;margin-top:1rem;font-size:.9rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ffe4ce,#ffccad);padding:2rem;border-radius:12px;box-shadow:0 15px 35px #0000004d;width:95%;max-width:550px;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_modalAbre .3s ease-out;margin:auto}@keyframes _ngcontent-%COMP%_modalAbre{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000a6;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);display:flex;justify-content:center;align-items:center;z-index:1050}.modal-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;pointer-events:none;z-index:1060}.modal-content[_ngcontent-%COMP%]{pointer-events:all;background:linear-gradient(135deg,#ffe4ce,#ffccad);padding:2.5rem;border-radius:18px;box-shadow:0 25px 70px #00000073;width:95%;max-width:580px;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_modalAbre .4s ease-out}@keyframes _ngcontent-%COMP%_modalAbre{0%{opacity:0;transform:translateY(-50px) scale(.92)}to{opacity:1;transform:translateY(0) scale(1)}}body.modal-open[_ngcontent-%COMP%]{overflow:hidden}.modal-title[_ngcontent-%COMP%]{margin:0 0 1.8rem;padding-bottom:12px;border-bottom:3px solid #000;font-weight:700;color:#000}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;margin-top:2rem;padding-top:1.5rem;border-top:1px solid #ddd}.url-input-group[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.btn-url-select[_ngcontent-%COMP%]{background:linear-gradient(45deg,#927f70,#e49462);color:#000;font-weight:800;padding:.7rem 1.2rem;border:none;border-radius:8px}"]})};function w1(n,t){n&1&&(s(0,"div",11),l(1,"Cargando pagos..."),a())}function E1(n,t){if(n&1){let e=T();s(0,"tr")(1,"td"),l(2),a(),s(3,"td"),l(4),P(5,"currency"),a(),s(6,"td"),l(7),P(8,"date"),a(),s(9,"td"),l(10),P(11,"uppercase"),a(),s(12,"td"),l(13),a(),s(14,"td"),l(15),a(),s(16,"td")(17,"span",14),l(18),a()(),s(19,"td")(20,"button",15),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.cambiarEstado(o,"validado"))}),l(21," Validar "),a(),s(22,"button",16),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.cambiarEstado(o,"rechazado"))}),l(23," Rechazar "),a()()()}if(n&2){let e=t.$implicit,i=f(2);d(2),E(e.pagoId),d(2),E(A(5,10,e.montoAbonado,"PEN")),d(3),E(A(8,13,e.fechaPago,"dd/MM/yyyy HH:mm")),d(3),E(ie(11,16,e.metodo)),d(3),E(e.codigoOperacion||"-"),d(2),E(e.tipoPago),d(2),p("ngClass",i.estadoColor(e.estado)),d(),g(" ",e.estado," "),d(2),p("disabled",e.estado==="validado"),d(2),p("disabled",e.estado==="rechazado")}}function S1(n,t){if(n&1&&(s(0,"table",12)(1,"thead")(2,"tr")(3,"th"),l(4,"ID"),a(),s(5,"th"),l(6,"Monto"),a(),s(7,"th"),l(8,"Fecha"),a(),s(9,"th"),l(10,"M\xE9todo"),a(),s(11,"th"),l(12,"Cod. Operaci\xF3n"),a(),s(13,"th"),l(14,"Tipo"),a(),s(15,"th"),l(16,"Estado"),a(),s(17,"th"),l(18,"Acciones"),a()()(),s(19,"tbody"),b(20,E1,24,18,"tr",13),a()()),n&2){let e=f();d(20),p("ngForOf",e.pagosPaginados)}}function P1(n,t){if(n&1){let e=T();s(0,"div",17)(1,"button",18),v("click",function(){C(e);let o=f();return y(o.paginaActual=o.paginaActual-1)}),l(2," Anterior "),a(),s(3,"span",19),l(4),a(),s(5,"button",18),v("click",function(){C(e);let o=f();return y(o.paginaActual=o.paginaActual+1)}),l(6," Siguiente "),a()()}if(n&2){let e=f();d(),p("disabled",e.paginaActual===1),d(3),De("P\xE1gina ",e.paginaActual," de ",e.totalPaginas()),d(),p("disabled",e.paginaActual===e.totalPaginas())}}function M1(n,t){n&1&&(s(0,"div",11),l(1," No hay pagos registrados. "),a())}var Ma=class n{constructor(t){this.pagoService=t}pagos=[];pagosFiltrados=[];cargando=!0;buscar="";estadoFiltro="todos";paginaActual=1;itemsPorPagina=10;ngOnInit(){this.cargarPagos()}cargarPagos(){this.cargando=!0,this.pagoService.obtenerTodos().subscribe({next:t=>{this.pagos=t,this.filtrarYPaginar(),this.cargando=!1},error:t=>{console.error(t),alert("Error al cargar pagos"),this.cargando=!1}})}filtrarYPaginar(){let t=[...this.pagos];if(this.buscar){let e=this.buscar.toLowerCase();t=t.filter(i=>i.pagoId.toString().includes(e)||i.codigoOperacion?.toLowerCase().includes(e)||i.metodo?.toLowerCase().includes(e))}this.estadoFiltro!=="todos"&&(t=t.filter(e=>e.estado===this.estadoFiltro)),this.pagosFiltrados=t,this.paginaActual=1}get pagosPaginados(){let t=(this.paginaActual-1)*this.itemsPorPagina;return this.pagosFiltrados.slice(t,t+this.itemsPorPagina)}totalPaginas(){return Math.ceil(this.pagosFiltrados.length/this.itemsPorPagina)}cambiarEstado(t,e){this.pagoService.actualizarEstadoPago(t.pagoId,e).subscribe({next:i=>{t.estado=i.estado}})}estadoColor(t){return{pendiente_validacion:"badge-pendiente",validado:"badge-aprobado",rechazado:"badge-rechazado"}[t]||""}static \u0275fac=function(e){return new(e||n)(x(ki))};static \u0275cmp=M({type:n,selectors:[["app-gestion-pagos"]],decls:18,vars:6,consts:[[1,"gestion-container"],[1,"filtros","mb-4"],["type","text","placeholder","Buscar por ID, tel\xE9fono o propietario...",1,"form-control",2,"width","350px","display","inline-block",3,"ngModelChange","input","ngModel"],[1,"form-control","ms-3",2,"width","200px","display","inline-block",3,"ngModelChange","change","ngModel"],["value","todos"],["value","pendiente_validacion"],["value","validado"],["value","rechazado"],["class","alert alert-info",4,"ngIf"],["class","tabla-pagos",4,"ngIf"],["class","paginacion mt-4",4,"ngIf"],[1,"alert","alert-info"],[1,"tabla-pagos"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"btn","btn-sm","btn-primary",3,"click","disabled"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"paginacion","mt-4"],[1,"btn","btn-outline-primary",3,"click","disabled"],[1,"mx-3"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2"),l(2,"Gesti\xF3n de Pagos"),a(),s(3,"div",1)(4,"input",2),ue("ngModelChange",function(r){return de(i.buscar,r)||(i.buscar=r),r}),v("input",function(){return i.filtrarYPaginar()}),a(),s(5,"select",3),ue("ngModelChange",function(r){return de(i.estadoFiltro,r)||(i.estadoFiltro=r),r}),v("change",function(){return i.filtrarYPaginar()}),s(6,"option",4),l(7,"Todos los estados"),a(),s(8,"option",5),l(9,"Pendiente"),a(),s(10,"option",6),l(11,"Validado"),a(),s(12,"option",7),l(13,"Rechazado"),a()()(),b(14,w1,2,0,"div",8)(15,S1,21,1,"table",9)(16,P1,7,4,"div",10)(17,M1,2,0,"div",8),a()),e&2&&(d(4),ce("ngModel",i.buscar),d(),ce("ngModel",i.estadoFiltro),d(9),p("ngIf",i.cargando),d(),p("ngIf",!i.cargando&&i.pagosPaginados.length>0),d(),p("ngIf",i.totalPaginas()>1),d(),p("ngIf",!i.cargando&&i.pagos.length===0))},dependencies:[k,Oe,z,N,Te,nt,it,te,tt,se,Re,vs,bs,re],styles:[".gestion-container[_ngcontent-%COMP%]{padding:2rem;background:#f8f9fa;min-height:100vh}h2[_ngcontent-%COMP%]{margin-bottom:.3rem}.tabla-pagos[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:10px;border-collapse:collapse;overflow:hidden;box-shadow:0 4px 10px #0000000d}.tabla-pagos[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f1f3f5;padding:12px;text-align:left;font-size:.9rem}.tabla-pagos[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #ececec}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:8px;font-size:.8rem;font-weight:600}.badge-pendiente[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge-aprobado[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge-rechazado[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.btn[_ngcontent-%COMP%]{padding:6px 10px;border:none;border-radius:8px;cursor:pointer}.btn-sm[_ngcontent-%COMP%]{font-size:.75rem}.btn-primary[_ngcontent-%COMP%]{background:#1971c2;color:#fff}.btn-danger[_ngcontent-%COMP%]{background:#d63031;color:#fff}.btn[_ngcontent-%COMP%]:disabled{opacity:.55;cursor:not-allowed}.comprobante-link[_ngcontent-%COMP%]{color:#0d6efd;text-decoration:underline}"]})};function D1(n,t){n&1&&(s(0,"div",8),l(1,"Cargando adicionales..."),a())}function O1(n,t){if(n&1&&(s(0,"div",9),l(1),a()),n&2){let e=f();d(),E(e.errorMensaje)}}function I1(n,t){if(n&1){let e=T();s(0,"tr")(1,"td"),l(2),a(),s(3,"td"),l(4),a(),s(5,"td")(6,"span",14),l(7),P(8,"titlecase"),a()(),s(9,"td"),l(10),P(11,"number"),a(),s(12,"td")(13,"button",15),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.abrirEditar(o))}),l(14,"Editar"),a(),s(15,"button",16),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.eliminarAdicional(o))}),l(16,"Eliminar"),a()()()}if(n&2){let e=t.$implicit;d(2),E(e.adicionalId),d(2),E(e.nombre),d(3),E(ie(8,4,e.categoria)),d(3),g("S/ ",A(11,6,e.costoAdicional,"1.2-2"))}}function A1(n,t){if(n&1&&(s(0,"div",10)(1,"table",11)(2,"thead",12)(3,"tr")(4,"th"),l(5,"ID"),a(),s(6,"th"),l(7,"Nombre"),a(),s(8,"th"),l(9,"Categor\xEDa"),a(),s(10,"th"),l(11,"Costo Adicional"),a(),s(12,"th"),l(13,"Acciones"),a()()(),s(14,"tbody"),b(15,I1,17,9,"tr",13),a()()()),n&2){let e=f();d(15),p("ngForOf",e.listaDeAdicionales)}}function T1(n,t){n&1&&(s(0,"div",17),l(1," No hay adicionales registrados a\xFAn. "),a())}function k1(n,t){n&1&&(s(0,"small",41),l(1," Obligatorio (m\xEDn. 2 caracteres) "),a())}function F1(n,t){if(n&1){let e=T();s(0,"div",18)(1,"div",19),v("click",function(o){return C(e),y(o.stopPropagation())}),s(2,"div",20)(3,"h3",21),l(4),a(),s(5,"button",22),v("click",function(){C(e);let o=f();return y(o.cerrarModal())}),l(6,"X"),a()(),s(7,"form",23),v("ngSubmit",function(){C(e);let o=f();return y(o.guardar())}),s(8,"div",24)(9,"label",25),l(10,"Nombre"),a(),_(11,"input",26),b(12,k1,2,0,"small",27),a(),s(13,"div",24)(14,"label",25),l(15,"Categor\xEDa"),a(),s(16,"select",28)(17,"option",29),l(18,"Seleccionar categor\xEDa"),a(),s(19,"option",30),l(20,"Bizcocho"),a(),s(21,"option",31),l(22,"Relleno"),a(),s(23,"option",32),l(24,"Topping"),a(),s(25,"option",33),l(26,"Decorado"),a(),s(27,"option",34),l(28,"Extra"),a(),s(29,"option",35),l(30,"Mensaje"),a()()(),s(31,"div",36)(32,"label",25),l(33,"Costo Adicional (S/)"),a(),_(34,"input",37),a(),s(35,"div",38)(36,"button",39),v("click",function(){C(e);let o=f();return y(o.cerrarModal())}),l(37," Cancelar "),a(),s(38,"button",40),l(39),a()()()()()}if(n&2){let e,i=f();d(4),g(" ",i.esEdicion?"Editar Adicional":"Nuevo Adicional"," "),d(3),p("formGroup",i.form),d(5),p("ngIf",((e=i.form.get("nombre"))==null?null:e.invalid)&&((e=i.form.get("nombre"))==null?null:e.touched)),d(26),p("disabled",i.form.invalid),d(),g(" ",i.esEdicion?"Actualizar":"Crear"," ")}}var Da=class n{constructor(t,e){this.fb=t;this.adicionalService=e;this.form=this.fb.group({nombre:["",[$.required,$.minLength(2)]],categoria:["",$.required],costoAdicional:[0,[$.required,$.min(0)]]})}listaDeAdicionales=[];isLoading=!0;errorMensaje=null;modalVisible=!1;esEdicion=!1;adicionalIdActual=null;form;categorias=[{valor:"bizcocho",texto:"Bizcocho"},{valor:"relleno",texto:"Relleno"},{valor:"topping",texto:"Topping"},{valor:"decorado",texto:"Decorado"},{valor:"extra",texto:"Extra"},{valor:"mensaje",texto:"Mensaje"}];ngOnInit(){this.cargarAdicionales()}cargarAdicionales(){this.isLoading=!0,this.adicionalService.getAdicionales().subscribe({next:t=>{this.listaDeAdicionales=t,this.isLoading=!1},error:t=>{this.errorMensaje="Error al cargar adicionales",this.isLoading=!1}})}abrirCrear(){this.esEdicion=!1,this.adicionalIdActual=null,this.form.reset({nombre:"",categoria:"",costoAdicional:0}),this.modalVisible=!0}abrirEditar(t){this.esEdicion=!0,this.adicionalIdActual=t.adicionalId,this.form.patchValue({nombre:t.nombre,categoria:t.categoria,costoAdicional:t.costoAdicional}),this.modalVisible=!0}guardar(){if(this.form.invalid){this.form.markAllAsTouched();return}let t=this.form.value;this.esEdicion&&this.adicionalIdActual?this.adicionalService.actualizar(this.adicionalIdActual,t).subscribe({next:()=>{alert("Adicional actualizado correctamente"),this.cerrarModal(),this.cargarAdicionales()},error:()=>alert("Error al actualizar")}):this.adicionalService.crear(t).subscribe({next:()=>{alert("Adicional creado correctamente"),this.cerrarModal(),this.cargarAdicionales()},error:()=>alert("Error al crear adicional")})}eliminarAdicional(t){confirm(`\xBFSeguro que quieres eliminar "${t.nombre}"?`)&&this.adicionalService.eliminar(t.adicionalId).subscribe({next:()=>{alert("Adicional eliminado"),this.cargarAdicionales()},error:()=>alert("Error al eliminar")})}cerrarModal(){this.modalVisible=!1}static \u0275fac=function(e){return new(e||n)(x(ot),x(En))};static \u0275cmp=M({type:n,selectors:[["app-gestion-adicionales"]],decls:11,vars:5,consts:[[1,"gestion-container"],[1,"header-section"],[1,"btn-accion","btn-crear",3,"click"],["class","alert alert-info",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","alert alert-info text-center",4,"ngIf"],["class","modal-directo",4,"ngIf"],[1,"alert","alert-info"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-hover","table-bordered"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"badge","bg-primary"],["title","Editar",1,"btn","btn-sm","btn-warning","me-2",3,"click"],["title","Eliminar",1,"btn","btn-sm","btn-danger",3,"click"],[1,"alert","alert-info","text-center"],[1,"modal-directo"],[1,"modal-content-directo",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close-modal",3,"click"],[1,"p-4",3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label","fw-bold"],["type","text","formControlName","nombre","placeholder","Ej: Relleno de Fudge",1,"form-control"],["class","text-danger",4,"ngIf"],["formControlName","categoria",1,"form-select"],["value",""],["value","bizcocho"],["value","relleno"],["value","topping"],["value","decorado"],["value","extra"],["value","mensaje"],[1,"mb-4"],["type","number","step","0.01","formControlName","costoAdicional","placeholder","0.00",1,"form-control"],[1,"d-flex","justify-content-end","gap-3"],["type","button",1,"btn","btn-secondary","px-4",3,"click"],["type","submit",1,"btn","btn-success","px-5",3,"disabled"],[1,"text-danger"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Gestionar Adicionales"),a(),s(4,"button",2),v("click",function(){return i.abrirCrear()}),l(5," + A\xF1adir Adicional "),a()(),b(6,D1,2,0,"div",3)(7,O1,2,1,"div",4)(8,A1,16,1,"div",5)(9,T1,2,0,"div",6)(10,F1,40,5,"div",7),a()),e&2&&(d(6),p("ngIf",i.isLoading),d(),p("ngIf",i.errorMensaje),d(),p("ngIf",!i.isLoading&&i.listaDeAdicionales.length>0),d(),p("ngIf",!i.isLoading&&i.listaDeAdicionales.length===0),d(),p("ngIf",i.modalVisible))},dependencies:[k,z,N,rt,Ue,nt,it,te,$n,tt,se,ze,Ze,Ke,Ce,xe],styles:[".gestion-container[_ngcontent-%COMP%]{max-width:1100px;margin:2rem auto;padding:0 1rem;position:relative}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.btn-crear[_ngcontent-%COMP%]{background:#fd7e14;color:#fff;padding:12px 24px;border:none;border-radius:8px;font-weight:700;cursor:pointer;transition:all .3s}.btn-crear[_ngcontent-%COMP%]:hover{background:#e66b0d}.modal-directo[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:99999!important;display:flex;justify-content:center;align-items:center;pointer-events:none}.modal-content-directo[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 20px 60px #00000080;width:90%;max-width:550px;pointer-events:auto;animation:_ngcontent-%COMP%_aparecer .3s ease-out}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem 0;border-bottom:1px solid #eee}.modal-title[_ngcontent-%COMP%]{color:#fd7e14;font-size:1.8rem;margin:0}.btn-close-modal[_ngcontent-%COMP%]{background:none;border:none;font-size:2rem;color:#999;cursor:pointer;width:40px;height:40px;display:flex;justify-content:center;align-items:center}.btn-close-modal[_ngcontent-%COMP%]:hover{color:#fd7e14;background:#fff0e6;border-radius:50%}@keyframes _ngcontent-%COMP%_aparecer{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}.modal-content-directo[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{background:#fd7e14!important;border:none!important;font-weight:700}.modal-content-directo[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]:hover{background:#e66b0d!important}"]})};function R1(n,t){n&1&&(s(0,"div",7),l(1,"Cargando promociones..."),a())}function N1(n,t){if(n&1&&(s(0,"div",8),l(1),a()),n&2){let e=f();d(),E(e.errorMensaje)}}function L1(n,t){if(n&1){let e=T();s(0,"tr")(1,"td"),l(2),a(),s(3,"td"),l(4),a(),s(5,"td"),l(6),P(7,"slice"),a(),s(8,"td"),l(9),a(),s(10,"td"),l(11),P(12,"date"),a(),s(13,"td"),l(14),P(15,"date"),a(),s(16,"td")(17,"span",12),l(18),P(19,"titlecase"),a()(),s(20,"td")(21,"button",13),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.editarPromocion(o))}),l(22,"\u270F\uFE0F"),a(),s(23,"button",14),v("click",function(){let o=C(e).$implicit,r=f(2);return y(r.eliminarPromocion(o))}),l(24,"\u{1F5D1}\uFE0F"),a()()()}if(n&2){let e=t.$implicit,i=f(2);d(2),E(e.promocionId),d(2),E(e.titulo),d(2),De("",Yo(7,9,e.descripcion,0,50),"",((e.descripcion==null?null:e.descripcion.length)||0)>50?"...":""),d(3),g("",e.descuento,"%"),d(2),E(A(12,13,e.fechaInicio,"yyyy-MM-dd")),d(3),E(A(15,16,e.fechaFin,"yyyy-MM-dd")),d(3),p("ngClass",i.getEstadoClass(e.estado)),d(),g(" ",ie(19,19,e.estado)," ")}}function V1(n,t){if(n&1&&(s(0,"div",9)(1,"table",10)(2,"thead")(3,"tr")(4,"th"),l(5,"ID"),a(),s(6,"th"),l(7,"T\xEDtulo"),a(),s(8,"th"),l(9,"Descripci\xF3n"),a(),s(10,"th"),l(11,"Descuento (%)"),a(),s(12,"th"),l(13,"Fecha Inicio"),a(),s(14,"th"),l(15,"Fecha Fin"),a(),s(16,"th"),l(17,"Estado"),a(),s(18,"th"),l(19,"Acciones"),a()()(),s(20,"tbody"),b(21,L1,25,21,"tr",11),a()()()),n&2){let e=f();d(21),p("ngForOf",e.listaDePromociones)}}function j1(n,t){n&1&&(s(0,"div",15),l(1," No hay promociones registradas. "),a())}var Oa=class n{listaDePromociones=[];promocionSeleccionada=null;isLoading=!0;errorMensaje=null;promocionService=w(Zt);ngOnInit(){this.cargarPromociones()}cargarPromociones(){this.isLoading=!0,this.errorMensaje=null,this.promocionService.obtenerTodasLasPromociones().subscribe({next:t=>{this.listaDePromociones=t,this.isLoading=!1},error:t=>{console.error("Error al cargar promociones:",t),t.status===403?this.errorMensaje="No tienes permiso para ver esta secci\xF3n.":this.errorMensaje="No se pudieron cargar las promociones.",this.isLoading=!1}})}eliminarPromocion(t){confirm(`\xBFEst\xE1s seguro de que deseas eliminar la promoci\xF3n "${t.titulo}" (ID: ${t.promocionId})?`)&&this.promocionService.eliminarPromocion(t.promocionId).subscribe({next:()=>{this.listaDePromociones=this.listaDePromociones.filter(e=>e.promocionId!==t.promocionId)},error:e=>{console.error("Error al eliminar:",e),this.errorMensaje="Error al eliminar la promoci\xF3n."}})}crearPromocion(){alert("Funcionalidad Crear Promoci\xF3n pendiente.")}editarPromocion(t){alert(`Funcionalidad Editar Promoci\xF3n ${t.titulo} pendiente.`)}getEstadoClass(t){return t==="activo"?"estado-activo":"estado-inactivo"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-promociones"]],decls:10,vars:4,consts:[[1,"gestion-container"],[1,"header-section"],[1,"btn-accion","btn-crear",3,"click"],["class","loading",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"loading"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],["title","Editar",1,"btn-action","btn-edit",3,"click"],["title","Eliminar",1,"btn-action","btn-delete",3,"click"],[1,"alert","alert-info"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Gestionar Promociones"),a(),s(4,"button",2),v("click",function(){return i.crearPromocion()}),l(5,"+ A\xF1adir Promoci\xF3n"),a()(),b(6,R1,2,0,"div",3)(7,N1,2,1,"div",4)(8,V1,22,1,"div",5)(9,j1,2,0,"div",6),a()),e&2&&(d(6),p("ngIf",i.isLoading),d(),p("ngIf",i.errorMensaje),d(),p("ngIf",!i.isLoading&&i.listaDePromociones.length>0),d(),p("ngIf",!i.isLoading&&i.listaDePromociones.length===0&&!i.errorMensaje))},dependencies:[k,Oe,z,N,Wi,xe,re],encapsulation:2})};function z1(n,t){n&1&&(s(0,"div",8)(1,"p",9),l(2,"Cargando rese\xF1as..."),a()())}function U1(n,t){if(n&1&&(s(0,"div",10),l(1),a()),n&2){let e=f();d(),E(e.errorMensaje)}}function B1(n,t){n&1&&(s(0,"div",11),l(1," No hay rese\xF1as pendientes o registradas. "),a())}function G1(n,t){if(n&1){let e=T();s(0,"button",22),v("click",function(){C(e);let o=f().$implicit,r=f(2);return y(r.abrirModalFoto(o.fotoUrl,o.comentario))}),l(1," Ver foto "),a()}}function $1(n,t){n&1&&(s(0,"span",9),l(1,"\u2014"),a())}function H1(n,t){n&1&&(s(0,"span",27),l(1,"Cargando..."),a())}function W1(n,t){if(n&1){let e=T();s(0,"div",23)(1,"button",24),v("click",function(){C(e);let o=f().$implicit,r=f(2);return y(r.cambiarEstado(o.resenaId,"aprobado"))}),l(2," Aprobar "),a(),s(3,"button",25),v("click",function(){C(e);let o=f().$implicit,r=f(2);return y(r.cambiarEstado(o.resenaId,"rechazado"))}),l(4," Rechazar "),a(),b(5,H1,2,0,"span",26),a()}if(n&2){let e=f().$implicit,i=f(2);d(),p("disabled",i.loadingId===e.resenaId),d(2),p("disabled",i.loadingId===e.resenaId),d(2),p("ngIf",i.loadingId===e.resenaId)}}function q1(n,t){n&1&&(s(0,"span",9),l(1,"\u2014"),a())}function Y1(n,t){if(n&1&&(s(0,"tr")(1,"td")(2,"strong"),l(3),a()(),s(4,"td"),l(5),a(),s(6,"td"),l(7),a(),s(8,"td")(9,"span",16),l(10),a()(),s(11,"td",17),l(12),a(),s(13,"td"),b(14,G1,2,0,"button",18)(15,$1,2,0,"span",19),a(),s(16,"td"),l(17),P(18,"date"),a(),s(19,"td")(20,"span",20),l(21),P(22,"titlecase"),a()(),s(23,"td"),b(24,W1,6,3,"div",21)(25,q1,2,0,"span",19),a()()),n&2){let e=t.$implicit,i=f(2);d(3),g("#",e.resenaId),d(2),E(e.nombreUsuario||"An\xF3nimo"),d(2),E(e.fechaPedido?"ORD-"+e.pedidoId:"-"),d(3),De(" ","\u2605\u2605\u2605\u2605\u2605".substring(0,e.valoracion)," ","\u2606\u2606\u2606\u2606\u2606".substring(0,5-e.valoracion)," "),d(2),g(" ",e.comentario," "),d(2),p("ngIf",e.fotoUrl),d(),p("ngIf",!e.fotoUrl),d(2),E(A(18,13,e.fecha,"dd/MM/yyyy")),d(3),p("ngClass",i.getEstadoClass(e.estado)),d(),g(" ",ie(22,16,e.estado)," "),d(3),p("ngIf",e.estado!=="rechazado"&&e.estado!=="aprobado"||!0),d(),p("ngIf",e.estado!=="pendiente")}}function Z1(n,t){if(n&1&&(s(0,"div",12)(1,"table",13)(2,"thead",14)(3,"tr")(4,"th"),l(5,"ID"),a(),s(6,"th"),l(7,"Cliente"),a(),s(8,"th"),l(9,"Pedido"),a(),s(10,"th"),l(11,"Valoraci\xF3n"),a(),s(12,"th"),l(13,"Comentario"),a(),s(14,"th"),l(15,"Foto"),a(),s(16,"th"),l(17,"Fecha"),a(),s(18,"th"),l(19,"Estado"),a(),s(20,"th"),l(21,"Acciones"),a()()(),s(22,"tbody"),b(23,Y1,26,18,"tr",15),a()()()),n&2){let e=f();d(23),p("ngForOf",e.resenas)}}function K1(n,t){if(n&1){let e=T();s(0,"div",28),v("click",function(){C(e);let o=f();return y(o.cerrarModalFoto())}),a()}}function J1(n,t){if(n&1&&(s(0,"div",34)(1,"p")(2,"strong"),l(3,"Comentario:"),a()(),s(4,"p"),l(5),a()()),n&2){let e=f(2);d(5),E(e.modalComentario)}}function X1(n,t){if(n&1){let e=T();s(0,"div",29)(1,"div",30),v("click",function(o){return C(e),y(o.stopPropagation())}),s(2,"button",31),v("click",function(){C(e);let o=f();return y(o.cerrarModalFoto())}),l(3,"\xD7"),a(),_(4,"img",32),b(5,J1,6,1,"div",33),a()()}if(n&2){let e=f();d(4),p("src",e.modalFotoUrl,ve),d(),p("ngIf",e.modalComentario)}}var Ia=class n{resenas=[];isLoading=!0;errorMensaje=null;loadingId=null;modalFotoUrl=null;modalComentario=null;resenaService=w(Si);ngOnInit(){this.cargarResenas()}cargarResenas(){this.isLoading=!0,this.resenaService.obtenerTodasLasResenasAdmin().subscribe({next:t=>{this.resenas=t.map(e=>({resenaId:e.resenaId,nombreUsuario:e.nombreUsuario||"An\xF3nimo",pedidoId:e.pedidoId||null,fechaPedido:e.fechaPedido,valoracion:e.valoracion,comentario:e.comentario,fotoUrl:e.fotoUrl,fecha:e.fecha,estado:e.estado||"pendiente"})),this.isLoading=!1},error:t=>{this.errorMensaje=t.status===403?"No tienes permisos de administrador.":"Error al cargar las rese\xF1as.",this.isLoading=!1}})}cambiarEstado(t,e){this.loadingId||(this.loadingId=t,this.resenaService.actualizarEstadoResena(t,e).subscribe({next:()=>{let i=this.resenas.find(o=>o.resenaId===t);i&&(i.estado=e),this.loadingId=null},error:()=>{alert("Error al actualizar el estado"),this.loadingId=null}}))}abrirModalFoto(t,e){this.modalFotoUrl=t,this.modalComentario=e,document.body.classList.add("modal-open")}cerrarModalFoto(){this.modalFotoUrl=null,this.modalComentario=null,document.body.classList.remove("modal-open")}getEstadoClass(t){switch(t){case"aprobado":return"bg-success";case"rechazado":return"bg-danger";case"pendiente":return"bg-warning text-dark";default:return"bg-secondary"}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-resenas"]],decls:9,vars:6,consts:[[1,"gestion-container"],[1,"mb-4"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-info text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-foto",4,"ngIf"],[1,"text-center","py-5"],[1,"text-muted"],[1,"alert","alert-danger"],[1,"alert","alert-info","text-center"],[1,"table-responsive"],[1,"table","table-hover","align-middle"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"valoracion"],[1,"comentario-col","text-truncate",2,"max-width","200px"],["class","btn btn-sm btn-link text-primary p-0",3,"click",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"badge",3,"ngClass"],["class","acciones",4,"ngIf"],[1,"btn","btn-sm","btn-link","text-primary","p-0",3,"click"],[1,"acciones"],["title","Aprobar rese\xF1a",1,"btn-action","aprobar",3,"click","disabled"],["title","Rechazar rese\xF1a",1,"btn-action","rechazar",3,"click","disabled"],["class","spinner-small",4,"ngIf"],[1,"spinner-small"],[1,"modal-backdrop",3,"click"],[1,"modal-foto"],[1,"modal-content-foto",3,"click"],[1,"btn-cerrar",3,"click"],["alt","Foto de rese\xF1a",1,"img-foto",3,"src"],["class","comentario-modal",4,"ngIf"],[1,"comentario-modal"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2",1),l(2,"Gestionar Rese\xF1as"),a(),b(3,z1,3,0,"div",2)(4,U1,2,1,"div",3)(5,B1,2,0,"div",4)(6,Z1,24,1,"div",5)(7,K1,1,0,"div",6)(8,X1,6,2,"div",7),a()),e&2&&(d(3),p("ngIf",i.isLoading),d(),p("ngIf",i.errorMensaje),d(),p("ngIf",!i.isLoading&&i.resenas.length===0),d(),p("ngIf",!i.isLoading&&i.resenas.length>0),d(),p("ngIf",i.modalFotoUrl),d(),p("ngIf",i.modalFotoUrl))},dependencies:[k,Oe,z,N,xe,re],styles:[".gestion-container[_ngcontent-%COMP%]{padding:1.5rem;background-color:#f8f9fa;min-height:calc(100vh - 60px);font-family:Inter,sans-serif}.gestion-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.9rem;font-weight:700;margin-bottom:1.8rem;color:#343a40;border-bottom:4px solid #ff8c42;padding-bottom:10px;display:inline-block}.table-responsive[_ngcontent-%COMP%]{background-color:#fff;border-radius:16px;box-shadow:0 10px 30px #0000001a;overflow:hidden;overflow-x:auto;-webkit-overflow-scrolling:touch}.table[_ngcontent-%COMP%]{min-width:800px;margin:0;border-collapse:separate;border-spacing:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fdf4e6,#ffe8cc);color:#5d4037;font-weight:700;text-transform:uppercase;font-size:.75rem;letter-spacing:1px;padding:1rem;text-align:left;white-space:nowrap}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;vertical-align:middle;border-top:1px solid #eee;font-size:.95rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#fff8e1!important;transition:background-color .2s}.valoracion[_ngcontent-%COMP%]{font-size:1.5rem;letter-spacing:3px;color:#f3a070}.badge[_ngcontent-%COMP%]{padding:.5em 1.1em;border-radius:50px;font-weight:700;font-size:.85rem;min-width:90px;text-align:center}.bg-success[_ngcontent-%COMP%]{background-color:#d4edda!important;color:#155724}.bg-danger[_ngcontent-%COMP%]{background-color:#f8d7da!important;color:#721c24}.bg-warning[_ngcontent-%COMP%]{background-color:#fff3cd!important;color:#856404}.acciones[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}.btn-action[_ngcontent-%COMP%]{padding:9px 18px;border:none;border-radius:10px;font-size:.9rem;font-weight:700;cursor:pointer;transition:all .25s ease;min-width:85px;box-shadow:0 3px 8px #00000026}.aprobar[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.aprobar[_ngcontent-%COMP%]:hover:not(:disabled){background:#a8e0b5;transform:translateY(-2px);box-shadow:0 6px 15px #28a7454d}.rechazar[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.rechazar[_ngcontent-%COMP%]:hover:not(:disabled){background:#f1b0b7;transform:translateY(-2px);box-shadow:0 6px 15px #dc35454d}.btn-action[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important;box-shadow:none}td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;font-weight:600;text-decoration:none}td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 768px){.table[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:1.5rem;background:#fff;border-radius:12px;box-shadow:0 5px 15px #0000001a;padding:1rem;border:1px solid #eee}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;padding:.6rem 0;position:relative;padding-left:50%;text-align:right}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);position:absolute;left:1rem;width:45%;font-weight:700;color:#5d4037;text-align:left}.acciones[_ngcontent-%COMP%]{justify-content:flex-end;margin-top:1rem}.valoracion[_ngcontent-%COMP%]{font-size:1.8rem}}"]})};var Aa=class n{constructor(t,e,i,o,r){this.carrito=t;this.pedidoService=e;this.auth=i;this.router=o;this.garantiaService=r;this.carrito.items$.subscribe(c=>{this.items=c,this.total=this.items.reduce((u,m)=>u+m.precioUnitario*m.cantidad,0),this.total=Math.round(this.total*100)/100,this.calcularGarantia()}),this.garantiaService.obtener().subscribe(c=>{this.porcentajeGarantia=c,this.calcularGarantia()})}items=[];total=0;porcentajeGarantia=50;garantia=0;resto=0;calcularGarantia(){this.garantia=Math.round(this.total*this.porcentajeGarantia/100*100)/100,this.resto=Math.round((this.total-this.garantia)*100)/100}confirmar(){if(!this.auth.estaLogueado()){alert("Debes iniciar sesi\xF3n para confirmar tu pedido");return}let t=this.auth.obtenerUsuarioActual();if(!t?.usuarioId){alert("Error: No se pudo obtener tu informaci\xF3n");return}let e=this.items.map(o=>({productoId:o.productoId||null,cantidad:o.cantidad,precioUnitario:o.precioUnitario,subtotal:o.precioUnitario*o.cantidad})),i={usuarioId:t.usuarioId,nota:`Pedido desde carrito - ${this.items.length} producto(s)`,detalles:e,subtotal:this.total,total:this.total,garantiaPagada:0,resto:this.resto};this.pedidoService.crear(i).subscribe({next:o=>{localStorage.setItem("pedido_actual_id",o.pedidoId),localStorage.setItem("monto_garantia",this.garantia.toString()),alert(`\xA1PEDIDO #${o.pedidoId} CONFIRMADO!
Paga S/ ${this.garantia} de garant\xEDa ahora`),this.carrito.vaciar(),this.router.navigate(["/cliente/pago-garantia"])},error:o=>{console.error("Error al crear pedido:",o),alert("Error al procesar el pedido. Intenta de nuevo o cont\xE1ctanos por WhatsApp.")}})}static \u0275fac=function(e){return new(e||n)(x(Be),x(Tt),x(ae),x(pe),x(Sn))};static \u0275cmp=M({type:n,selectors:[["app-checkout"]],decls:14,vars:6,consts:[[1,"card"],["pButton","","label","Confirmar Pedido",3,"click"]],template:function(e,i){e&1&&(be(0,"div",0)(1,"h5"),l(2,"Resumen"),ge(),be(3,"p")(4,"strong"),l(5,"Total:"),ge(),l(6),ge(),be(7,"p")(8,"strong"),l(9),ge(),l(10),P(11,"number"),ge(),be(12,"button",1),Wo("click",function(){return i.confirmar()}),l(13,"Confirmar"),ge()()),e&2&&(d(6),g(" S/ ",i.total),d(3),g("Garant\xEDa (",i.porcentajeGarantia,"%):"),d(),g(" S/ ",A(11,3,i.garantia,"1.2-2")))},dependencies:[k,Ce],encapsulation:2})};function Q1(n,t){if(n&1&&(s(0,"div",17)(1,"div",11)(2,"span"),l(3),a(),s(4,"strong"),l(5),a()()()),n&2){let e=t.$implicit;d(3),De("",e.nombre," x",e.cantidad),d(2),g("S/ ",e.subtotal)}}var Ta=class n{constructor(t,e){this.router=t;this.http=e}pedido={};apiUrl=J.apiUrl+"/pedidos";ngOnInit(){let t=localStorage.getItem("pedido_pendiente");t?(this.pedido=JSON.parse(t),localStorage.removeItem("pedido_pendiente")):this.router.navigate(["/cliente/mi-pedido"])}irAPago(){let t=localStorage.getItem("jwt_token");if(!t){alert("No est\xE1s autenticado"),this.router.navigate(["/iniciar-sesion"]);return}let e=new Ot({Authorization:`Bearer ${t}`,"Content-Type":"application/json"}),i={usuarioId:this.pedido.usuarioId,detalles:this.pedido.items.map(o=>({productoId:o.productoId,cantidad:o.cantidad,precioUnitario:o.precio||o.precioUnitario||0,promocionId:o.promocionId||null,subtotal:(o.precio||o.precioUnitario||0)*o.cantidad}))};console.log("ENVIANDO PEDIDO:",i),this.http.post(`${this.apiUrl}/confirmar`,i,{headers:e}).subscribe({next:o=>{localStorage.setItem("pedido_confirmado_id",o.pedidoId),localStorage.setItem("pago_garantia",JSON.stringify({garantia:this.pedido.garantia,resto:this.pedido.resto,subtotal:this.pedido.subtotal})),alert("\xA1Pedido confirmado exitosamente!"),this.router.navigate(["/cliente/pago-garantia"])},error:o=>{console.error("Error completo:",o),alert("Error: "+(o.error?.message||"No se pudo confirmar el pedido"))}})}volver(){this.router.navigate(["/cliente/mi-pedido"])}static \u0275fac=function(e){return new(e||n)(x(pe),x(K))};static \u0275cmp=M({type:n,selectors:[["app-confirmar-pedido"]],decls:44,vars:9,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"card","shadow"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],["class","mb-3",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mb-2"],[1,"d-flex","justify-content-between","text-primary","fw-bold","mb-2"],[1,"d-flex","justify-content-between","text-muted","small","mb-3"],[1,"d-flex","justify-content-between"],[1,"text-success"],[1,"alert","alert-warning","mt-4"],[1,"d-grid","gap-2"],[1,"btn","btn-success","btn-lg",3,"click"],[1,"btn","btn-outline-secondary",3,"click"],[1,"mb-3"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),l(6,"Confirmar tu Pedido"),a()(),s(7,"div",6)(8,"h5"),l(9,"Productos:"),a(),b(10,Q1,6,3,"div",7),_(11,"hr"),s(12,"div",8)(13,"span"),l(14,"Subtotal"),a(),s(15,"strong"),l(16),a()(),s(17,"div",9)(18,"span"),l(19),a(),s(20,"strong"),l(21),a()(),s(22,"div",10)(23,"span"),l(24,"Resto al recibir"),a(),s(25,"strong"),l(26),a()(),_(27,"hr"),s(28,"div",11)(29,"h5"),l(30,"Total del Pedido"),a(),s(31,"h5",12),l(32),a()(),s(33,"div",13)(34,"strong"),l(35),a(),l(36," para reservar tu pedido."),_(37,"br"),l(38),a(),s(39,"div",14)(40,"button",15),v("click",function(){return i.irAPago()}),l(41),a(),s(42,"button",16),v("click",function(){return i.volver()}),l(43," Volver al Carrito "),a()()()()()()()),e&2&&(d(10),p("ngForOf",i.pedido.items),d(6),g("S/ ",i.pedido.subtotal),d(3),g("Garant\xEDa (",i.pedido.porcentajeGarantia,"% - PAGO AHORA)"),d(2),g("S/ ",i.pedido.garantia),d(5),g("S/ ",i.pedido.resto),d(6),g("S/ ",i.pedido.subtotal),d(3),g("Debes pagar S/ ",i.pedido.garantia," ahora"),d(3),g(" El resto (S/ ",i.pedido.resto,") se paga al recibir. "),d(3),g(" Pagar Garant\xEDa de S/ ",i.pedido.garantia," "))},dependencies:[k,z],encapsulation:2})};function e_(n,t){if(n&1&&(s(0,"small",40),l(1),a()),n&2){let e=f().$implicit;d(),g(" ",e.nombrePropietario," ")}}function t_(n,t){if(n&1){let e=T();s(0,"div",33)(1,"div",34)(2,"h5",35)(3,"span",36),l(4),a()(),s(5,"img",37),v("click",function(){let o=C(e).$implicit,r=f();return y(r.abrirQr(o.imagenUrl))}),a(),s(6,"p",38),l(7),a(),b(8,e_,2,1,"small",39),a()()}if(n&2){let e=t.$implicit;d(4),g(" ",e.tipo," "),d(),p("alt",Pt("QR ",e.tipo))("src",e.imagenUrl,ve),d(2),g("+51 ",e.telefono),d(),p("ngIf",e.nombrePropietario)}}var ka=class n{constructor(t,e){this.http=t;this.router=e}garantia=0;resto=0;subtotal=0;qrList=[];qrAmpliado="";apiUrl=J.apiUrl;ngOnInit(){this.cargarDatosPedido(),this.cargarQrDesdeBackend()}cargarDatosPedido(){let t=localStorage.getItem("pago_garantia");if(!t){this.router.navigate(["/cliente/mi-pedido"]);return}let e=JSON.parse(t);this.garantia=Number(e.garantia)||0,this.resto=Number(e.resto)||0,this.subtotal=Number(e.subtotal)||0}cargarQrDesdeBackend(){this.http.get(`${this.apiUrl}/config/qr/activos`).subscribe({next:t=>{this.qrList=t},error:()=>{alert("No se pudieron cargar los m\xE9todos de pago")}})}abrirQr(t){this.qrAmpliado=t;let e=document.getElementById("qrModal");if(e){let i=window.bootstrap;i&&new i.Modal(e).show()}}mostrarExito(){let t=document.getElementById("modalPagoExitoso");if(t){let e=window.bootstrap;e&&new e.Modal(t).show()}setTimeout(()=>{localStorage.removeItem("pago_garantia")},5e3)}static \u0275fac=function(e){return new(e||n)(x(K),x(pe))};static \u0275cmp=M({type:n,selectors:[["app-pago-garantia"]],decls:48,vars:11,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-lg-6","col-md-8"],[1,"card","shadow-lg","border-0","rounded-4","overflow-hidden"],[1,"card-body","text-center","p-5"],[1,"mb-4","text-primary","fw-bold"],[1,"bg-light","p-4","rounded-4","mb-5","shadow-sm"],[1,"text-success","fw-bold"],[1,"text-muted","mb-1"],[1,"text-muted","small"],[1,"row","justify-content-center","g-4","mb-5"],["class","col-6",4,"ngFor","ngForOf"],[1,"btn","btn-success","btn-lg","w-100","py-4","fw-bold","fs-4","rounded-4","shadow",3,"click"],[1,"mt-4"],["routerLink","/cliente/mis-pedidos",1,"text-muted","small","text-decoration-none"],["id","qrModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content","bg-dark","border-0","rounded-4","overflow-hidden"],[1,"modal-header","border-0","justify-content-end","p-3"],["type","button","data-bs-dismiss","modal",1,"btn-close","btn-close-white"],[1,"modal-body","text-center","p-5"],[1,"img-fluid","rounded-4","border","border-5","border-white","shadow-lg",2,"max-height","75vh",3,"src"],[1,"text-white","mt-4","fw-bold","fs-3"],["id","modalPagoExitoso","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-0","shadow-lg","rounded-4"],[1,"mb-4"],[1,"bi","bi-check-circle-fill","text-success",2,"font-size","6rem"],[1,"fw-bold","text-success"],[1,"fs-3","mt-4","text-dark"],[1,"text-primary"],[1,"text-muted","fs-5"],["routerLink","/cliente/historial-pedidos","data-bs-dismiss","modal",1,"btn","btn-success","btn-lg","px-5","py-3","mt-3","rounded-4"],[1,"col-6"],[1,"text-center"],[1,"mb-3"],[1,"badge","bg-gradient","fs-5","px-4","py-2"],[1,"img-fluid","rounded-4","shadow-lg","qr-img",3,"click","src","alt"],[1,"mt-3","fw-bold","text-primary","fs-4"],["class","text-muted d-block",4,"ngIf"],[1,"text-muted","d-block"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),l(6,"Pagar Garant\xEDa"),a(),s(7,"div",6)(8,"h3",7),l(9),P(10,"number"),a(),s(11,"p",8),l(12,"Garant\xEDa a pagar ahora"),a(),s(13,"p",9),l(14),P(15,"number"),a()(),s(16,"div",10),b(17,t_,9,6,"div",11),a(),s(18,"button",12),v("click",function(){return i.mostrarExito()}),l(19," \xA1YA PAGU\xC9 LA GARANT\xCDA! "),a(),s(20,"div",13)(21,"a",14),l(22," \u2190 Ver mis pedidos "),a()()()()()()(),s(23,"div",15)(24,"div",16)(25,"div",17)(26,"div",18),_(27,"button",19),a(),s(28,"div",20),_(29,"img",21),s(30,"p",22),l(31),a()()()()(),s(32,"div",23)(33,"div",24)(34,"div",25)(35,"div",20)(36,"div",26),_(37,"i",27),a(),s(38,"h2",28),l(39,"\xA1PAGO RECIBIDO!"),a(),s(40,"p",29),l(41," Gracias por confiar en "),s(42,"strong",30),l(43,"D'Juancito Tortas"),a()(),s(44,"p",31),l(45," En minutos te escribimos por WhatsApp para coordinar la entrega de tu torta perfecta "),a(),s(46,"button",32),l(47," Ver mis pedidos "),a()()()()()),e&2&&(d(9),g("S/ ",A(10,5,i.garantia,"1.2-2")),d(5),g("Resto al recibir: S/ ",A(15,8,i.resto,"1.2-2")),d(3),p("ngForOf",i.qrList),d(12),p("src",i.qrAmpliado,ve),d(2),g("Escanea con ",i.qrList.length>1?"Yape o Plin":i.qrList[0]==null?null:i.qrList[0].tipo))},dependencies:[k,z,N,ee,Ce],styles:[".bg-gradient[_ngcontent-%COMP%]{background:linear-gradient(45deg,#8b5cf6,#ec4899)!important;color:#fff}.qr-img[_ngcontent-%COMP%]{max-height:280px;cursor:zoom-in;transition:all .3s ease;border-radius:20px!important;box-shadow:0 15px 35px #00000040!important}.qr-img[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 25px 50px #00000059!important}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#20c997)!important;border:none!important;transition:all .3s ease}.btn-success[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 25px #28a74566!important}#qrModal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fffffff2!important}"]})};var Fa=class n{constructor(t){this.http=t}apiUrl=J.apiUrl+"/productos";apiRealizadosUrl=J.apiUrl+"/productos-realizados";obtenerPersonalizables(){return this.http.get(`${this.apiUrl}/personalizables`)}obtenerPredeterminados(){return this.http.get(`${this.apiUrl}/predeterminados`)}obtenerProductosRealizados(){return this.http.get(this.apiRealizadosUrl)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function i_(n,t){if(n&1){let e=T();s(0,"div",19)(1,"button",20),v("click",function(){let o=C(e).$implicit,r=f();return y(r.aplicarFiltro(o))}),l(2),a()()}if(n&2){let e=t.$implicit,i=f();d(),Z("active",i.filtroSeleccionado===e),d(),g(" ",i.getNombreFiltro(e)," ")}}function o_(n,t){if(n&1){let e=T();s(0,"div",21),v("click",function(){let o=C(e).$implicit,r=f();return y(r.mostrarZoom(o))}),_(1,"img",22),s(2,"div",23)(3,"h3"),l(4),a()()()}if(n&2){let e=t.$implicit;d(),p("src",e.imagenUrl,ve)("alt",e.nombre),d(3),E(e.nombre)}}function r_(n,t){if(n&1&&(s(0,"div",24),l(1),a()),n&2){let e=f();d(),g(' No se encontraron productos en la categor\xEDa "',e.getNombreFiltro(e.filtroSeleccionado),'". ')}}function a_(n,t){if(n&1){let e=T();s(0,"nav",25)(1,"ul",26)(2,"li",27)(3,"a",28),v("click",function(o){C(e);let r=f();return r.irAPagina(r.paginaActual-1),y(o.preventDefault())}),l(4,"Anterior"),a()(),s(5,"li",29)(6,"span",30),l(7),a()(),s(8,"li",27)(9,"a",28),v("click",function(o){C(e);let r=f();return r.irAPagina(r.paginaActual+1),y(o.preventDefault())}),l(10,"Siguiente"),a()()()()}if(n&2){let e=f();d(2),Z("disabled",e.paginaActual===1),d(5),De("",e.paginaActual," de ",e.totalPaginas),d(),Z("disabled",e.paginaActual===e.totalPaginas)}}var jo=class n{constructor(t,e){this.location=t;this.ProductoFiltro=e}listaCompletaProductos=[];productosFiltrados=[];filtroSeleccionado="todos";categoriasDisponibles=["todos","torta","postre","bocadito"];productosMostrados=[];paginaActual=1;productosPorPagina=5;totalPaginas=0;imagenZoom="";nombreZoom="";ngOnInit(){this.cargarProductosRealizados()}cargarProductosRealizados(){this.ProductoFiltro.obtenerProductosRealizados().subscribe({next:t=>{this.listaCompletaProductos=t,this.aplicarFiltro("todos")},error:t=>{console.error("Error al cargar productos realizados:",t)}})}volver(){this.location.back()}aplicarFiltro(t){this.filtroSeleccionado=t,t==="todos"?this.productosFiltrados=[...this.listaCompletaProductos]:this.productosFiltrados=this.listaCompletaProductos.filter(e=>e.categoria===t),this.paginaActual=1,this.calcularPaginacion(),this.actualizarProductosMostrados()}getNombreFiltro(t){switch(t){case"torta":return"Tortas";case"postre":return"Postres";case"bocadito":return"Bocaditos";case"otros":return"Otros";case"todos":default:return"Todos"}}calcularPaginacion(){this.totalPaginas=Math.ceil(this.productosFiltrados.length/this.productosPorPagina)}actualizarProductosMostrados(){let t=(this.paginaActual-1)*this.productosPorPagina,e=t+this.productosPorPagina;this.productosMostrados=this.productosFiltrados.slice(t,e)}irAPagina(t){t>=1&&t<=this.totalPaginas&&(this.paginaActual=t,this.actualizarProductosMostrados())}mostrarZoom(t){this.imagenZoom=t.imagenUrl,this.nombreZoom=t.nombre}static \u0275fac=function(e){return new(e||n)(x(gt),x(Fa))};static \u0275cmp=M({type:n,selectors:[["app-productos-realizados"]],decls:25,vars:7,consts:[[1,"galeria-productos"],[1,"header-container"],[1,"btn-volver",3,"click"],[1,"arrow"],[1,"subtitle"],[1,"filtros-container"],["class","filtro-item",4,"ngFor","ngForOf"],[1,"productos-grid"],["class","producto-card","data-bs-toggle","modal","data-bs-target","#zoomModal",3,"click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],["class","pagination-container","aria-label","Paginaci\xF3n de productos",4,"ngIf"],["id","zoomModal","tabindex","-1","aria-labelledby","zoomModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","zoomModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","text-center"],[1,"img-fluid",3,"src","alt"],[1,"filtro-item"],[1,"btn-filtro",3,"click"],["data-bs-toggle","modal","data-bs-target","#zoomModal",1,"producto-card",3,"click"],[3,"src","alt"],[1,"card-info"],[1,"no-results"],["aria-label","Paginaci\xF3n de productos",1,"pagination-container"],[1,"pagination"],[1,"page-item"],["href","#",1,"page-link",3,"click"],[1,"page-item","active"],[1,"page-link"]],template:function(e,i){e&1&&(s(0,"section",0)(1,"div",1)(2,"button",2),v("click",function(){return i.volver()}),s(3,"span",3),l(4,"\u2190"),a(),l(5," Volver a la p\xE1gina anterior "),a(),s(6,"h2"),l(7,"Galer\xEDa de Productos Realizados"),a(),s(8,"p",4),l(9,"Insp\xEDrate con las creaciones que hicimos para nuestros clientes."),a()(),s(10,"div",5),b(11,i_,3,3,"div",6),a(),s(12,"div",7),b(13,o_,5,3,"div",8),a(),b(14,r_,2,1,"div",9)(15,a_,11,6,"nav",10),a(),s(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"h5",15),l(21),a(),_(22,"button",16),a(),s(23,"div",17),_(24,"img",18),a()()()()),e&2&&(d(11),p("ngForOf",i.categoriasDisponibles),d(2),p("ngForOf",i.productosMostrados),d(),p("ngIf",i.productosFiltrados.length===0),d(),p("ngIf",i.totalPaginas>1),d(6),E(i.nombreZoom),d(3),p("src",i.imagenZoom,ve)("alt",i.nombreZoom))},dependencies:[k,z,N,Te],styles:[".galeria-productos[_ngcontent-%COMP%]{padding:40px 20px;max-width:1200px;margin:0 auto;font-family:Arial,sans-serif}.header-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.header-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:38px;color:#333;margin-top:10px}.header-container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:18px;color:#777}.btn-volver[_ngcontent-%COMP%]{background:none;border:none;color:#eb7221;font-size:16px;cursor:pointer;padding:5px 0;display:block;margin:0 auto 20px 0;transition:color .2s}.btn-volver[_ngcontent-%COMP%]:hover{color:#c95d12}.btn-volver[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{margin-right:5px;font-weight:700}.filtros-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-bottom:40px;flex-wrap:wrap}.btn-filtro[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid #eb7221;border-radius:25px;background-color:#fff;color:#eb7221;font-weight:700;cursor:pointer;transition:background-color .3s,color .3s}.btn-filtro.active[_ngcontent-%COMP%]{background-color:#eb7221;color:#fff}.btn-filtro[_ngcontent-%COMP%]:hover:not(.active){background-color:#fff0e9}.productos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:30px}.producto-card[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden;box-shadow:0 4px 15px #0000001a;transition:transform .3s ease}.producto-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 20px #00000026}.producto-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover}.card-info[_ngcontent-%COMP%]{padding:15px;text-align:center;background-color:#fff}.card-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;margin:0;color:#333}.no-results[_ngcontent-%COMP%]{text-align:center;padding:50px;font-size:20px;color:#eb7221;background-color:#f7f7f7;border-radius:8px;margin-top:40px}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:40px}.pagination[_ngcontent-%COMP%]{display:flex;padding-left:0;list-style:none;border-radius:.25rem}.page-item[_ngcontent-%COMP%]{margin:0 5px}.page-link[_ngcontent-%COMP%]{position:relative;display:block;padding:.5rem .75rem;text-decoration:none;border:1px solid #dee2e6;border-radius:5px;color:#eb7221}.page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{z-index:3;color:#fff;background-color:#eb7221;border-color:#eb7221}.page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#6c757d;pointer-events:none;background-color:#fff;border-color:#dee2e6}.page-link[_ngcontent-%COMP%]:hover{background-color:#fff0e9}"]})};var Ra=class n{constructor(t){this.http=t}apiUrl=`${J.apiUrl}/temporada`;getTemporadasActivas(){return this.http.get(`${this.apiUrl}/activas`)}obtenerTodasLasTemporadas(){return this.http.get(`${this.apiUrl}/todas`)}crearOActualizarTemporada(t){return this.http.post(this.apiUrl,t)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var l_=n=>["../ofertas",n];function c_(n,t){if(n&1&&(s(0,"option",15),l(1),P(2,"titlecase"),a()),n&2){let e=t.$implicit;p("value",e),d(),E(ie(2,2,e))}}function d_(n,t){if(n&1){let e=T();s(0,"div",17)(1,"input",18),ue("ngModelChange",function(o){C(e);let r=f(2);return de(r.filtroTemporadaId,o)||(r.filtroTemporadaId=o),y(o)}),v("change",function(){C(e);let o=f(2);return y(o.aplicarFiltros())}),a(),s(2,"label",19),l(3),a()()}if(n&2){let e=t.$implicit,i=f(2);d(),p("value",e.temporadaId),ce("ngModel",i.filtroTemporadaId),d(2),E(e.nombre)}}function u_(n,t){if(n&1&&(s(0,"div"),b(1,d_,4,3,"div",16),a()),n&2){let e=f();d(),p("ngForOf",e.temporadasActivas)}}function p_(n,t){n&1&&(s(0,"p",20),l(1,"No hay temporadas especiales vigentes."),a())}function m_(n,t){if(n&1&&(s(0,"div",22)(1,"div",23),_(2,"img",24),s(3,"div",25)(4,"h5",26),l(5),a(),s(6,"p",27),l(7),a(),s(8,"div",28)(9,"p",29),_(10,"i",30),l(11),a()()(),s(12,"div",31)(13,"a",32),l(14,"Ver Detalles"),a()()()()),n&2){let e=t.$implicit;d(2),p("alt",Pt("Imagen de ",e.titulo))("src",e.imagenUrl||"assets/default-promo.png",ve),d(3),E(e.titulo),d(2),E(e.descripcion),d(4),g(" \xA1",e.descuento,"% OFF! "),d(2),p("routerLink",Gt(7,l_,e.promocionId))}}function f_(n,t){if(n&1&&(s(0,"div",3),b(1,m_,15,9,"div",21),a()),n&2){let e=f();d(),p("ngForOf",e.promocionesFiltradas)}}function g_(n,t){n&1&&(s(0,"div",33)(1,"h4",34),l(2,"Sin resultados \u{1F641}"),a(),s(3,"p"),l(4,"No encontramos ofertas activas que coincidan con los criterios de b\xFAsqueda."),a()())}var zo=class n{constructor(t,e){this.promocionService=t;this.temporadaService=e}todasLasPromociones=[];temporadasActivas=[];promocionesFiltradas=[];filtroCategoria="todas";filtroTemporadaId=null;categoriasDisponibles=["torta","postre","bocadito"];ngOnInit(){this.cargarDatosIniciales()}cargarDatosIniciales(){this.promocionService.getPromocionesActivas().subscribe(t=>{this.todasLasPromociones=t,this.promocionesFiltradas=t},t=>console.error("Error al cargar promociones:",t)),this.temporadaService.getTemporadasActivas().subscribe(t=>{this.temporadasActivas=t},t=>console.error("Error al cargar temporadas:",t))}aplicarFiltros(){let t=this.todasLasPromociones;this.filtroTemporadaId!==null&&(t=t.filter(e=>e.temporadaId===this.filtroTemporadaId)),this.filtroCategoria!=="todas"&&(t=t.filter(e=>e.promocionProductos?.some(i=>i.producto.categoria.toLowerCase()===this.filtroCategoria.toLowerCase()))),this.promocionesFiltradas=t}limpiarFiltroTemporada(){this.filtroTemporadaId=null,this.aplicarFiltros()}static \u0275fac=function(e){return new(e||n)(x(Zt),x(Ra))};static \u0275cmp=M({type:n,selectors:[["app-promociones-temporadas"]],decls:26,vars:6,consts:[["noTemporadas",""],["noResultados",""],[1,"container","my-5"],[1,"row"],[1,"col-md-3"],[1,"mb-3"],[1,"card","p-3","mb-4","shadow-sm"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value","todas"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[1,"btn","btn-sm","btn-outline-secondary","mt-3",3,"click"],[1,"col-md-9"],[1,"mb-4"],["class","row",4,"ngIf","ngIfElse"],[3,"value"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio","name","filtroTemporada",1,"form-check-input",3,"ngModelChange","change","value","ngModel"],[1,"form-check-label"],[1,"text-muted","small"],["class","col-lg-4 col-md-6 mb-4",4,"ngFor","ngForOf"],[1,"col-lg-4","col-md-6","mb-4"],[1,"card","h-100","shadow-sm","border-primary"],[1,"card-img-top","promo-image",3,"src","alt"],[1,"card-body"],[1,"card-title","text-primary"],[1,"card-text","small","text-muted"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"text-success","fw-bold","m-0"],[1,"bi","bi-tag-fill"],[1,"card-footer","bg-light","border-top-0"],[1,"btn","btn-warning","w-100","fw-bold",3,"routerLink"],["role","alert",1,"alert","alert-info"],[1,"alert-heading"]],template:function(e,i){if(e&1){let o=T();s(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),l(4,"Filtros \u{1F370}"),a(),s(5,"div",6)(6,"h5"),l(7,"Categor\xEDa de Producto"),a(),s(8,"select",7),ue("ngModelChange",function(c){return C(o),de(i.filtroCategoria,c)||(i.filtroCategoria=c),y(c)}),v("change",function(){return C(o),y(i.aplicarFiltros())}),s(9,"option",8),l(10,"Todas las categor\xEDas"),a(),b(11,c_,3,4,"option",9),a()(),s(12,"div",6)(13,"h5"),l(14,"Especiales de Temporada"),a(),b(15,u_,2,1,"div",10)(16,p_,2,0,"ng-template",null,0,tn),s(18,"button",11),v("click",function(){return C(o),y(i.limpiarFiltroTemporada())}),l(19,"Limpiar Filtro"),a()()(),s(20,"div",12)(21,"h1",13),l(22,"\xA1Super Ofertas y Novedades!"),a(),b(23,f_,2,1,"div",14)(24,g_,5,0,"ng-template",null,1,tn),a()()()}if(e&2){let o=Nt(17),r=Nt(25);d(8),ce("ngModel",i.filtroCategoria),d(3),p("ngForOf",i.categoriasDisponibles),d(4),p("ngIf",i.temporadasActivas.length>0)("ngIfElse",o),d(8),p("ngIf",i.promocionesFiltradas.length>0)("ngIfElse",r)}},dependencies:[k,z,N,Te,nt,it,te,tt,Hn,se,Re,ee,xe],encapsulation:2})};function h_(n,t){n&1&&(s(0,"div",6)(1,"p",7),l(2,"Cargando promoci\xF3n..."),a()())}function v_(n,t){if(n&1&&(s(0,"div",8)(1,"h2"),l(2,"\xA1Ups! Algo sali\xF3 mal"),a(),s(3,"p"),l(4),a(),s(5,"a",9),l(6,"Volver a Promociones"),a()()),n&2){let e=f();d(4),E(e.error)}}function b_(n,t){if(n&1&&(s(0,"div",29),l(1),a()),n&2){let e=f(2);d(),g("",e.porcentajeDescuento(),"% OFF")}}function __(n,t){n&1&&(s(0,"div",30),l(1," \xA1100% GRATIS! "),a())}function x_(n,t){if(n&1&&(s(0,"div",31)(1,"strong"),l(2,"Condici\xF3n:"),a(),l(3," Aplica solo en pedidos mayores a "),s(4,"strong",32),l(5),P(6,"number"),a()()),n&2){let e=f(2);d(5),g("S/ ",A(6,1,e.promocion.montoMinimo,"1.2-2"))}}function C_(n,t){n&1&&(s(0,"div",45)(1,"h3",46),l(2,"\xA1GRATIS!"),a(),s(3,"span",47),l(4,"100% OFF"),a()())}function y_(n,t){if(n&1&&(s(0,"div",45)(1,"h4",48),l(2),P(3,"number"),a(),s(4,"span",49),l(5),a()()),n&2){let e=f().$implicit,i=f(3);d(2),g(" S/ ",A(3,2,i.precioConDescuento(e.producto.precioBase),"1.2-2")," "),d(3),g(" -",(i.promocion.descuento*100).toFixed(0),"% OFF ")}}function w_(n,t){if(n&1&&(s(0,"small",50),l(1),P(2,"number"),a()),n&2){let e=f(4);d(),g(" Agrega m\xE1s productos (m\xEDnimo S/ ",A(2,1,e.promocion.montoMinimo??0,"1.2-2"),") ")}}function E_(n,t){if(n&1){let e=T();s(0,"div",24)(1,"div",37)(2,"img",38),v("click",function(){let o=C(e).$implicit,r=f(3);return y(r.irAProducto(o.producto.productoId))}),a(),s(3,"h5",39),v("click",function(){let o=C(e).$implicit,r=f(3);return y(r.irAProducto(o.producto.productoId))}),l(4),a(),s(5,"div",40)(6,"p",41)(7,"del"),l(8),P(9,"number"),a()(),b(10,C_,5,0,"div",42)(11,y_,6,5,"div",42),s(12,"button",43),v("click",function(){let o=C(e).$implicit,r=f(3);return y(r.agregarAlCarrito(o.producto))}),s(13,"strong"),l(14,"A\xF1adir al Carrito"),a()(),b(15,w_,3,4,"small",44),a()()()}if(n&2){let e=t.$implicit,i=f(3);d(2),p("src",e.producto.imagenUrl,ve)("alt",e.producto.nombre),d(2),g(" ",e.producto.nombre," "),d(4),g("S/ ",A(9,8,e.producto.precioBase,"1.2-2")),d(2),p("ngIf",i.promocion.descuento>=1),d(),p("ngIf",i.promocion.descuento>0&&i.promocion.descuento<1),d(),p("disabled",(i.promocion.montoMinimo??0)>0&&i.subtotalCarritoActual()<(i.promocion.montoMinimo??0)),d(3),p("ngIf",(i.promocion.montoMinimo??0)>0&&i.subtotalCarritoActual()<(i.promocion.montoMinimo??0))}}function S_(n,t){if(n&1&&(s(0,"div",33)(1,"div",20)(2,"h2",34),l(3,"Productos con Descuento"),a(),s(4,"div",35),b(5,E_,16,11,"div",36),a()()()),n&2){let e=f(2);d(5),p("ngForOf",e.promocion.promocionProductos)}}function P_(n,t){n&1&&(s(0,"div",6)(1,"p",22),l(2,"Esta promoci\xF3n aplica autom\xE1ticamente en el carrito"),a(),s(3,"a",51),l(4," Ir al Cat\xE1logo "),a()())}function M_(n,t){if(n&1&&(s(0,"div",10)(1,"header",11)(2,"div",12)(3,"h1",13),l(4),a(),b(5,b_,2,1,"div",14)(6,__,2,0,"div",15),a()(),s(7,"div",16)(8,"div",17)(9,"div",18)(10,"div",19)(11,"div",20)(12,"h2",21),l(13,"Detalles de la Oferta"),a(),s(14,"p",22),l(15),a(),s(16,"div",23)(17,"div",24)(18,"p",25)(19,"strong"),l(20,"V\xE1lida desde:"),a()(),s(21,"p",26),l(22),a()(),s(23,"div",24)(24,"p",25)(25,"strong"),l(26,"V\xE1lida hasta:"),a()(),s(27,"p",26),l(28),a()()(),b(29,x_,7,4,"div",27),a()(),b(30,S_,6,1,"div",28)(31,P_,5,0,"div",3),a()()()()),n&2){let e=f();d(),ni("background-image","url("+(e.promocion.imagenUrl||"assets/imagenes/default-promo.jpg")+")"),d(3),E(e.promocion.titulo),d(),p("ngIf",e.promocion.descuento>0),d(),p("ngIf",e.promocion.descuento>=1),d(9),E(e.promocion.descripcion),d(7),E(e.formatearFecha(e.promocion.fechaInicio)),d(6),E(e.formatearFecha(e.promocion.fechaFin)),d(),p("ngIf",e.promocion.montoMinimo&&e.promocion.montoMinimo>0),d(),p("ngIf",e.promocion.promocionProductos==null?null:e.promocion.promocionProductos.length),d(),p("ngIf",!(e.promocion.promocionProductos!=null&&e.promocion.promocionProductos.length))}}var Uo=class n{constructor(t,e,i,o,r,c){this.location=t;this.route=e;this.promocionService=i;this.carritoService=o;this.router=r;this.datePipe=c}promocionId=null;promocion=null;cargando=!0;error=null;ngOnInit(){this.route.paramMap.subscribe(t=>{let e=t.get("id");this.promocionId=e?+e:null,this.promocionId?this.cargarDetallePromocion(this.promocionId):(this.cargando=!1,this.error="Promoci\xF3n no encontrada")})}volver(){this.location.back()}cargarDetallePromocion(t){this.cargando=!0,this.promocionService.getPromocionById(t).subscribe({next:e=>{this.promocion=e,this.cargando=!1},error:()=>{this.error="No se pudo cargar la promoci\xF3n",this.cargando=!1}})}formatearFecha(t){return t?this.datePipe.transform(t,"dd MMMM yyyy",void 0,"es-PE")||"Fecha inv\xE1lida":"Fecha no disponible"}porcentajeDescuento(){if(!this.promocion?.descuento)return 0;let t=this.promocion.descuento;return t>1?Math.round(t):Math.round(t*100)}precioConDescuento(t){if(!this.promocion?.descuento||t<=0)return t;let e=this.promocion.descuento,i=e>1?e/100:e;return i<=0||i>=1?t:Math.max(0,t*(1-i))}subtotalCarritoActual(){return this.carritoService.calcularTotal()}agregarAlCarrito(t){if(!t||!this.promocion)return;let e=this.promocion.descuento??0,i=e>1?e/100:e,o=e>=100||i>=1,r=o?0:Math.max(0,t.precioBase*(1-i)),c={productoId:t.productoId,nombre:t.nombre??"Producto sin nombre",imagenUrl:t.imagenUrl??"",precioBase:t.precioBase??0,precioUnitario:r,cantidad:1,subtotal:r,promocionId:this.promocion.promocionId??null,nombrePromocion:this.promocion.titulo??null,descuentoAplicado:i,esOfertaEspecial:o};this.carritoService.agregarAlCarrito(c),o?alert(`\xA1${t.nombre} A\xD1ADIDO COMO REGALO 100% GRATIS!`):i>0&&i<1?alert(`${t.nombre} a\xF1adido con ${this.porcentajeDescuento()}% OFF`):alert(`${t.nombre} a\xF1adido al carrito`)}irAProducto(t){this.router.navigate(["/producto",t])}static \u0275fac=function(e){return new(e||n)(x(gt),x(dt),x(Zt),x(Be),x(pe),x(re))};static \u0275cmp=M({type:n,selectors:[["app-detalle-promocion"]],features:[Ee([re])],decls:8,vars:3,consts:[[1,"detalle-promocion-container"],[1,"btn-volver",3,"click"],[1,"arrow"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger text-center",4,"ngIf"],["class","detalle-card",4,"ngIf"],[1,"text-center","py-5"],[1,"fs-4"],[1,"alert","alert-danger","text-center"],["routerLink","/promociones",1,"btn","btn-primary"],[1,"detalle-card"],[1,"detalle-header"],[1,"overlay","text-center"],[1,"display-5","fw-bold"],["class","pill-descuento fs-3",4,"ngIf"],["class","pill-regalo fs-3",4,"ngIf"],[1,"container","my-5"],[1,"row"],[1,"col-lg-8","mx-auto"],[1,"card","shadow-sm","mb-4"],[1,"card-body"],[1,"card-title"],[1,"lead"],[1,"row","mt-4"],[1,"col-md-6"],[1,"mb-2"],[1,"fs-5","text-primary"],["class","alert alert-info mt-4",4,"ngIf"],["class","card shadow-sm",4,"ngIf"],[1,"pill-descuento","fs-3"],[1,"pill-regalo","fs-3"],[1,"alert","alert-info","mt-4"],[1,"text-success"],[1,"card","shadow-sm"],[1,"card-title","mb-4"],[1,"row","g-4"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"producto-item-card","border","rounded","p-3","h-100","d-flex","flex-column"],[1,"img-fluid","rounded","mb-3",2,"height","200px","object-fit","cover",3,"click","src","alt"],[1,"text-center","mb-3",3,"click"],[1,"text-center","mt-auto"],[1,"text-muted"],["class","mb-3",4,"ngIf"],[1,"btn","btn-success","w-100","mt-3",3,"click","disabled"],["class","text-muted d-block mt-2",4,"ngIf"],[1,"mb-3"],[1,"text-success","fw-bold"],[1,"badge","bg-success","fs-6"],[1,"text-danger","fw-bold"],[1,"badge","bg-danger"],[1,"text-muted","d-block","mt-2"],["routerLink","/catalogo",1,"btn","btn-lg","btn-primary"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"button",1),v("click",function(){return i.volver()}),s(2,"span",2),l(3,"\u2190"),a(),l(4," Volver "),a(),b(5,h_,3,0,"div",3)(6,v_,7,1,"div",4)(7,M_,32,11,"div",5),a()),e&2&&(d(5),p("ngIf",i.cargando),d(),p("ngIf",i.error&&!i.cargando),d(),p("ngIf",i.promocion&&!i.cargando))},dependencies:[k,z,N,ee,Ce],styles:[".detalle-promocion-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;font-family:Arial,sans-serif}.detalle-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 30px #0000001a;overflow:hidden}.detalle-header[_ngcontent-%COMP%]{height:350px;background-size:cover;background-position:center;position:relative;display:flex;align-items:center;justify-content:center;text-align:center}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0006;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px}.detalle-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.8rem;margin-bottom:15px;text-shadow:2px 2px 5px rgba(0,0,0,.8)}.pill-descuento[_ngcontent-%COMP%]{background:#e91e63;color:#fff;padding:8px 20px;border-radius:20px;font-size:1.4rem;font-weight:700;box-shadow:0 4px 10px #0000004d}.detalle-body[_ngcontent-%COMP%]{padding:30px}.info-principal[_ngcontent-%COMP%]{margin-bottom:30px}.info-principal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:1.8rem;margin-bottom:15px;border-bottom:2px solid #f0f0f0;padding-bottom:10px}.fechas[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:#555;font-size:1rem}.productos-incluidos[_ngcontent-%COMP%]{margin-top:40px;padding-top:20px;border-top:1px dashed #ccc}.productos-incluidos[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:1.6rem;margin-bottom:20px}.producto-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.producto-item[_ngcontent-%COMP%]{background:#f9f9f9;border:1px solid #eee;border-radius:8px;padding:15px;display:flex;gap:15px;align-items:center;transition:transform .2s}.producto-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #0000001a}.producto-img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border-radius:4px}.producto-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;color:#555;margin-bottom:5px}.precio-original[_ngcontent-%COMP%]{text-decoration:none;color:#999;font-size:.9rem}.btn-ir-tienda[_ngcontent-%COMP%]{display:inline-block;background-color:#ff6f61;color:#fff;padding:12px 30px;border-radius:25px;text-decoration:none;font-weight:700;margin-top:30px;transition:background-color .3s}.btn-ir-tienda[_ngcontent-%COMP%]:hover{background-color:#e65c50}.loading-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{text-align:center;padding:40px;border:1px solid #ff6f61;border-radius:8px;background:#fff0f0;color:#ff6f61;margin-top:30px}.error-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#c0392b}.btn-back[_ngcontent-%COMP%]{color:#ff6f61;text-decoration:underline;margin-top:10px;display:block}.btn-volver[_ngcontent-%COMP%]{background:none;border:none;color:#eb7221;font-size:16px;cursor:pointer;padding:5px 0;display:block;margin:0 auto 30px 0;transition:color .2s}@media (max-width: 768px){.detalle-header[_ngcontent-%COMP%]{height:250px}.detalle-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.pill-descuento[_ngcontent-%COMP%]{font-size:1.2rem}.detalle-body[_ngcontent-%COMP%]{padding:20px}.producto-item[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.producto-info[_ngcontent-%COMP%]{text-align:center}}.precios[_ngcontent-%COMP%]{margin-top:8px}.precio-original[_ngcontent-%COMP%]   del[_ngcontent-%COMP%]{color:#999;font-size:.9rem}.precio-descuento[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#e91e63;font-size:1.3rem}.ahorro[_ngcontent-%COMP%]{background:#e91e63;color:#fff;font-size:.7rem;padding:2px 6px;border-radius:4px;margin-left:8px}.btn-agregar-carrito[_ngcontent-%COMP%]{margin-top:10px;background:#ff6f61;color:#fff;border:none;padding:10px 20px;border-radius:25px;cursor:pointer;font-weight:700;transition:all .3s}.btn-agregar-carrito[_ngcontent-%COMP%]:hover{background:#e65c50;transform:scale(1.05)}"]})};var Na=class n{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}static \u0275fac=function(e){return new(e||n)(x(Fs,16))};static \u0275pipe=Qt({name:"urlSegura",type:n,pure:!0})};var La=class n{constructor(t){this.http=t}apiUrl=J.apiUrl+"/config-tienda";obtenerConfig(){return this.http.get(this.apiUrl)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function O_(n,t){if(n&1&&(s(0,"div",26)(1,"label",20),l(2,"Direcci\xF3n de entrega"),a(),_(3,"input",27),s(4,"small",28),l(5,"Tu direcci\xF3n guardada: "),s(6,"strong"),l(7),a()()()),n&2){let e=f();d(7),E((e.usuario==null?null:e.usuario.direccion)||"No registrada")}}function I_(n,t){if(n&1&&(s(0,"div",29),_(1,"i",30),s(2,"h4",31),l(3),a(),s(4,"p",12),l(5),a(),s(6,"p",28),l(7),a(),s(8,"div",32),_(9,"iframe",33),P(10,"urlSegura"),a()()),n&2){let e=f();d(3),E(e.tienda.nombreTienda),d(2),E(e.tienda.direccion),d(2),E(e.tienda.referencia),d(2),p("src",ie(10,4,e.tienda.googleMapsEmbed),lc)}}var Bo=class n{constructor(t,e,i,o,r,c){this.fb=t;this.auth=e;this.pedidoService=i;this.tiendaService=o;this.router=r;this.location=c}entregaForm;usuario=null;tortaPersonalizada=null;tienda={nombreTienda:"Cargando...",direccion:"Av. Larco 123, Miraflores",referencia:"Frente al Parque Kennedy",telefono:"999 999 999",googleMapsEmbed:"",latitud:-12.130022,longitud:-77.030722};ngOnInit(){if(!this.auth.estaLogueado()){this.router.navigate(["/iniciar-sesion"],{queryParams:{returnUrl:"/cliente/entrega"}});return}this.usuario=this.auth.obtenerUsuarioActual(),this.tiendaService.obtenerConfig().subscribe({next:e=>this.tienda=e,error:()=>console.log("Tienda no cargada, usando valores por defecto")});let t=localStorage.getItem("torta_pendiente");if(!t){alert("No hay torta seleccionada"),this.router.navigate(["/cliente/personalizar-torta"]);return}this.tortaPersonalizada=JSON.parse(t),localStorage.removeItem("torta_pendiente"),this.entregaForm=this.fb.group({metodo:["delivery",$.required],direccionEntrega:[this.usuario?.direccion||"",$.required],referencia:[""],fechaEntrega:["",$.required]}),this.entregaForm.get("metodo")?.valueChanges.subscribe(e=>{let i=this.entregaForm.get("direccionEntrega");e==="recojo"?(i?.clearValidators(),i?.setValue(this.tienda.direccion)):i?.setValidators($.required),i?.updateValueAndValidity()})}onSubmit(){if(this.entregaForm.invalid||!this.tortaPersonalizada)return;let t=this.entregaForm.value,e=this.tortaPersonalizada.adicionales||[],i={productoId:null,cantidad:1,precioUnitario:Number(this.tortaPersonalizada.precioCalculado?.toFixed(2)||0),subtotal:Number(this.tortaPersonalizada.precioCalculado?.toFixed(2)||0),promocionId:null,personalizacion:{descripcionExtra:this.tortaPersonalizada.descripcionCompleta||"Torta personalizada",costoAdicional:this.tortaPersonalizada.costoAdicionales||0,adicionalesSeleccionados:e.map(r=>r.adicionalId).filter(r=>r!=null)}},o={usuarioId:this.usuario.usuarioId,nota:`Torta Personalizada - ${t.metodo==="recojo"?"RECOJO EN TIENDA":"DELIVERY"}
Fecha: ${t.fechaEntrega}
`+(t.metodo==="delivery"?`Direcci\xF3n: ${t.direccionEntrega}
Referencia: ${t.referencia||"Sin referencia"}`:`Recojo en: ${this.tienda.direccion}`),detalles:[i],subtotal:Number(this.tortaPersonalizada.precioCalculado?.toFixed(2)||0),total:Number(this.tortaPersonalizada.precioCalculado?.toFixed(2)||0),garantiaPagada:0,resto:Number(this.tortaPersonalizada.precioCalculado?.toFixed(2)||0)};console.log("PEDIDO ENVIADO:",JSON.stringify(o,null,2)),this.pedidoService.crear(o).subscribe({next:r=>{let c={pedidoId:r.pedidoId,direccionEntrega:t.metodo==="recojo"?this.tienda.direccion:t.direccionEntrega,referencia:t.referencia||null,fechaEntrega:t.fechaEntrega,metodo:t.metodo.toUpperCase(),estado:"PENDIENTE"};this.pedidoService.crearEntrega(c).subscribe({next:()=>{localStorage.removeItem("torta_pendiente"),localStorage.setItem("pedido_actual_id",r.pedidoId.toString()),localStorage.setItem("pago_garantia",JSON.stringify({garantia:0,resto:this.tortaPersonalizada.precioCalculado,subtotal:this.tortaPersonalizada.precioCalculado})),this.router.navigate(["/cliente/pago-garantia"])},error:u=>{console.error("Error entrega:",u),alert("Error al guardar datos de entrega")}})},error:r=>{console.error("Error al crear pedido:",r),alert("Error al crear el pedido: "+(r.error?.mensaje||"Intenta de nuevo"))}})}regresar(){this.location.back()}static \u0275fac=function(e){return new(e||n)(x(ot),x(ae),x(Tt),x(La),x(pe),x(gt))};static \u0275cmp=M({type:n,selectors:[["app-entrega"]],decls:46,vars:12,consts:[[1,"contenedor-entrega"],[1,"text-center","fw-bold","text-primary","mb-4"],[1,"text-center","text-muted","mb-5"],[1,"card","sombra","mx-auto",2,"max-width","900px"],[1,"card-body","p-5"],[3,"ngSubmit","formGroup"],[1,"mb-5"],[1,"fw-bold","mb-4"],[1,"row","g-4"],[1,"col-md-6"],["type","radio","value","delivery","formControlName","metodo",1,"btn-check"],[1,"bi","bi-truck","fs-1","text-primary","mb-3"],[1,"fw-bold"],[1,"small","text-muted"],["type","radio","value","recojo","formControlName","metodo",1,"btn-check"],[1,"bi","bi-shop","fs-1","text-success","mb-3"],[1,"small","fw-bold"],["class","mb-4 animar",4,"ngIf"],["class","text-center py-5 bg-light rounded-4 animar",4,"ngIf"],[1,"mb-4"],[1,"form-label","fw-bold"],["type","text","formControlName","referencia","placeholder","Ej: Casa color crema, port\xF3n negro",1,"form-control"],["type","datetime-local","formControlName","fechaEntrega","required","",1,"form-control","form-control-lg"],["type","submit",1,"btn","btn-success","btn-lg","w-100","py-4","rounded-pill","fw-bold","sombra-boton"],[1,"text-center","mt-3"],["routerLink","/cliente/personalizar-torta",1,"text-muted","small"],[1,"mb-4","animar"],["type","text","formControlName","direccionEntrega","placeholder","Ej: Jr. Los Rosales 456, Surco",1,"form-control","form-control-lg"],[1,"text-muted"],[1,"text-center","py-5","bg-light","rounded-4","animar"],[1,"bi","bi-geo-alt-fill","text-success","fs-1","mb-3"],[1,"text-success","fw-bold"],[1,"ratio","ratio-16x9","rounded-4","overflow-hidden","shadow","mt-4"],["allowfullscreen","","loading","lazy",3,"src"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2",1),l(2,"Confirmar Entrega"),a(),s(3,"p",2),l(4,"Hola "),s(5,"strong"),l(6),a(),l(7,", completa los datos de tu pedido"),a(),s(8,"div",3)(9,"div",4)(10,"form",5),v("ngSubmit",function(){return i.onSubmit()}),s(11,"div",6)(12,"h4",7),l(13,"\xBFC\xF3mo deseas recibir tu torta?"),a(),s(14,"div",8)(15,"div",9)(16,"label"),_(17,"input",10)(18,"i",11),s(19,"h5",12),l(20,"Delivery"),a(),s(21,"p",13),l(22,"Te la llevamos a tu puerta"),a()()(),s(23,"div",9)(24,"label"),_(25,"input",14)(26,"i",15),s(27,"h5",12),l(28,"Recojo en tienda"),a(),s(29,"p",16),l(30),a()()()()(),b(31,O_,8,1,"div",17)(32,I_,11,6,"div",18),s(33,"div",19)(34,"label",20),l(35,"Referencia (opcional)"),a(),_(36,"input",21),a(),s(37,"div",6)(38,"label",20),l(39,"Fecha y hora de entrega / recojo"),a(),_(40,"input",22),a(),s(41,"button",23),l(42),a(),s(43,"div",24)(44,"a",25),l(45," \u2190 Volver a personalizaci\xF3n "),a()()()()()()),e&2&&(d(6),E(i.usuario==null?null:i.usuario.nombre),d(4),p("formGroup",i.entregaForm),d(6),en(Pt(`tarjeta-metodo entrega-card p-4 text-center rounded-4 cursor-pointer
                     `,i.entregaForm.value.metodo==="delivery"?"selected":"")),d(8),en(Pt(`tarjeta-metodo entrega-card p-4 text-center rounded-4 cursor-pointer
                     `,i.entregaForm.value.metodo==="recojo"?"selected":"")),d(6),E(i.tienda.direccion),d(),p("ngIf",i.entregaForm.value.metodo==="delivery"),d(),p("ngIf",i.entregaForm.value.metodo==="recojo"),d(10),g(" Confirmar y Pagar Garant\xEDa \u2192 S/ ",(i.tortaPersonalizada==null?null:i.tortaPersonalizada.precioCalculado)||0," "))},dependencies:[k,N,rt,Ue,te,Hn,se,ze,Wn,Ze,Ke,Na],styles:[".contenedor-entrega[_ngcontent-%COMP%]{padding:3rem 1rem;background:linear-gradient(135deg,#fff1eb,#f8f9ff);min-height:100vh}.entrega-card[_ngcontent-%COMP%]{border:3px solid #e9ecef;transition:all .3s ease}.entrega-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 15px 35px #0000001a!important}.entrega-card.selected[_ngcontent-%COMP%]{border-color:#0d6efd!important;background:#f8f9ff;box-shadow:0 10px 30px #0d6efd26}.entrega-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .entrega-card[_ngcontent-%COMP%], .entrega-card[_ngcontent-%COMP%]:has(input:checked){border-color:#0d6efd!important}.sombra[_ngcontent-%COMP%]{border-radius:2rem;box-shadow:0 20px 50px #0000001a}.sombra-boton[_ngcontent-%COMP%]{box-shadow:0 10px 30px #19875466}.sombra-boton[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 20px 40px #19875480}.animar[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .6s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#198754,#20c997);border:none;font-size:1.3rem}"]})};function A_(n,t){n&1&&(s(0,"div",10),l(1," Cargando detalle de la consulta... "),a())}function T_(n,t){if(n&1&&(s(0,"div",11),l(1),a()),n&2){let e=f();d(),g(" ",e.errorMensaje," ")}}function k_(n,t){if(n&1&&(s(0,"div",19)(1,"h5"),l(2,"Respuesta del Equipo"),a(),s(3,"p",20),l(4),P(5,"date"),a(),s(6,"div",21),l(7),a()()),n&2){let e=f(2);d(4),g(" Respondido el ",A(5,2,e.consulta.fechaRespuesta,"dd/MM/yyyy, h:mm a")," "),d(3),g(" ",e.consulta.respuesta," ")}}function F_(n,t){n&1&&(s(0,"div",22),l(1," Tu consulta est\xE1 pendiente de revisi\xF3n. Te contactaremos pronto. "),a())}function R_(n,t){if(n&1&&(Ne(0),s(1,"div",12)(2,"span")(3,"strong"),l(4,"Estado:"),a(),l(5),P(6,"titlecase"),a(),s(7,"span")(8,"strong"),l(9,"Fecha Env\xEDo:"),a(),l(10),P(11,"date"),a()(),_(12,"hr",13),s(13,"div",14)(14,"h5"),l(15,"Motivo"),a(),s(16,"div",15),l(17),P(18,"titlecase"),a()(),s(19,"div",14)(20,"h5"),l(21,"Tu Mensaje"),a(),s(22,"div",16),l(23),a()(),b(24,k_,8,5,"div",17)(25,F_,2,0,"div",18),Le()),n&2){let e=f();d(2),Z("text-success",e.consulta.estado==="respondido")("text-danger",e.consulta.estado==="pendiente"),d(3),g(" ",ie(6,10,e.consulta.estado)," "),d(5),g(" ",A(11,12,e.consulta.fecha,"dd/MM/yyyy, h:mm a")," "),d(7),g(" ",ie(18,15,e.consulta.motivo)," "),d(6),g(" ",e.consulta.mensaje," "),d(),p("ngIf",e.consulta.estado==="respondido"),d(),p("ngIf",e.consulta.estado==="pendiente")}}var Va=class n{route=w(dt);router=w(pe);contactoService=w(Yt);consulta=null;isLoading=!0;errorMensaje=null;contactoId=null;ngOnInit(){this.route.paramMap.subscribe(t=>{let e=t.get("contactoId");e?(this.contactoId=parseInt(e,10),this.cargarDetalleConsulta(this.contactoId)):(this.errorMensaje="ID de consulta no proporcionado.",this.isLoading=!1)})}cargarDetalleConsulta(t){this.isLoading=!0,this.errorMensaje=null,this.contactoService.obtenerPorId(t).subscribe({next:e=>{this.consulta=e,this.isLoading=!1},error:e=>{this.isLoading=!1}})}volverALaLista(){this.router.navigate(["/cliente/consultas"])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-detalle-consulta-modal"]],decls:12,vars:4,consts:[[1,"detalle-modal-wrapper"],[1,"detalle-card-modal"],[1,"modal-header"],[1,"modal-title"],[1,"btn-volver-link",3,"click"],[1,"modal-body"],["class","loading",4,"ngIf"],["class","alert alert-danger mb-3",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[1,"loading"],[1,"alert","alert-danger","mb-3"],[1,"montos-summary"],[1,"separator"],[1,"detalle-seccion"],[1,"contenido-tarjeta","motivo-texto","item-validado"],[1,"contenido-tarjeta","mensaje-texto","item-pendiente"],["class","detalle-seccion detalle-respuesta",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"detalle-seccion","detalle-respuesta"],[1,"respuesta-fecha"],[1,"contenido-tarjeta","respuesta-texto","item-validado"],[1,"alert","alert-info","mt-3"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),l(4),a(),s(5,"button",4),v("click",function(){return i.volverALaLista()}),l(6," \u2190 Volver a Mis Consultas "),a()(),s(7,"div",5),b(8,A_,2,0,"div",6)(9,T_,2,1,"div",7)(10,R_,26,17,"ng-container",8),a(),_(11,"div",9),a()()),e&2&&(d(4),g("Detalle de la Consulta #",(i.consulta==null?null:i.consulta.contactoId)||"N/A"),d(4),p("ngIf",i.isLoading),d(),p("ngIf",i.errorMensaje),d(),p("ngIf",i.consulta&&!i.isLoading))},dependencies:[k,N,xe,re],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:flex-start;padding:3rem 1rem;background-color:#f4f6f9;min-height:90vh;font-family:Inter,sans-serif}.detalle-modal-wrapper[_ngcontent-%COMP%]{width:100%;max-width:850px}.detalle-card-modal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#fff);border-radius:1.5rem;overflow:hidden;box-shadow:0 15px 40px #00000026,0 0 0 1px #0000000d}.modal-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1.8rem 2.5rem 1.5rem;border-bottom:1px solid #f0f0f0;background-color:#fefefe}.modal-title-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.2rem}.modal-title[_ngcontent-%COMP%]{margin-bottom:0;line-height:1.5;font-size:1.8rem;font-weight:800;color:#2c3e50}.btn-volver-link[_ngcontent-%COMP%]{background:none;border:none;color:#3498db;font-weight:600;cursor:pointer;font-size:1rem;padding:.5rem 1rem;text-decoration:none;transition:all .2s;border-radius:.5rem}.btn-volver-link[_ngcontent-%COMP%]:hover{color:#2980b9;background-color:#ecf0f1;text-decoration:none}.modal-body[_ngcontent-%COMP%]{position:relative;padding:2.5rem}.separator[_ngcontent-%COMP%]{margin:2.5rem 0;border:0;border-top:1px solid #dee2e6}h5[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:700;margin-bottom:.8rem;color:#34495e;border-bottom:3px solid #ff7700;display:inline-block;padding-bottom:.2rem;line-height:1}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:1.5rem 2.5rem;border-top:1px solid #e9ecef;background-color:#fcfcfc}.montos-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:1.5rem;margin-top:0;font-size:.95rem;color:#6c757d;padding:0;background-color:transparent;border:none;box-shadow:none}.montos-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#495057;font-weight:600;margin-right:.3rem}.estado-badge[_ngcontent-%COMP%]{font-size:.9rem;padding:.4rem 1.2rem;border-radius:50px;font-weight:800;text-transform:uppercase;display:inline-block;letter-spacing:.5px}.estado-pendiente[_ngcontent-%COMP%]{background:#ffe5d9;color:#e67e22;border:1px solid #ffbb99}.estado-respondido[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.montos-summary[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{font-size:1rem;display:flex;align-items:center}.contenido-tarjeta[_ngcontent-%COMP%]{background-color:#fff;padding:1.2rem 1.5rem;border-radius:.8rem;border:1px solid #e9ecef;line-height:1.6;color:#34495e;box-shadow:0 4px 8px #00000008;transition:all .3s ease}.contenido-tarjeta.item-validado[_ngcontent-%COMP%]{border-left:5px solid #3498db}.contenido-tarjeta.item-pendiente[_ngcontent-%COMP%]{border-left:5px solid #ff7700}.motivo-texto[_ngcontent-%COMP%]{font-weight:600;font-size:1.05rem;color:#2c3e50}.mensaje-texto[_ngcontent-%COMP%]{white-space:pre-wrap;font-size:1rem;color:#2c3e50}.detalle-respuesta[_ngcontent-%COMP%]{margin-top:2rem}.respuesta-fecha[_ngcontent-%COMP%]{font-size:.9rem;color:#95a5a6;margin-bottom:.5rem}.respuesta-texto[_ngcontent-%COMP%]{background-color:#e8f5ff;border-left:5px solid #3498db;font-size:1rem;white-space:pre-wrap}.alert[_ngcontent-%COMP%]{padding:1.2rem;border-radius:.8rem;border:1px solid transparent;font-weight:600;text-align:center;font-size:1.05rem}.alert-info[_ngcontent-%COMP%]{color:#0c5460;background-color:#f0f8ff;border:1px solid #d1ecf1;margin-top:1.5rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem!important}.mt-3[_ngcontent-%COMP%]{margin-top:1rem!important}"]})};var jp=[{path:"",component:ia},{path:"catalogo",component:ko},{path:"registrar",component:ua},{path:"iniciar-sesion",component:pa},{path:"personalizar-torta",component:No},{path:"mi-pedido",component:Fo},{path:"checkout",component:Aa},{path:"productos-realizados",component:jo},{path:"ofertas",component:zo},{path:"ofertas/:id",component:Uo},{path:"entrega",component:Bo},{path:"admin",component:ma,canActivate:[Rl],data:{roles:["ROLE_Administrador"]},children:[{path:"dashboard",component:ga},{path:"pedidos",component:wa},{path:"consultas",component:Ea},{path:"usuarios",component:Sa},{path:"perfil",component:Pa},{path:"pagos",component:Ma},{path:"productos",component:Vo},{path:"adicionales",component:Da},{path:"promociones",component:Oa},{path:"resenas",component:Ia},{path:"productos/:idProducto",component:Vo},{path:"GestionGarantias",component:ba},{path:"GestionQr",component:Ca},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"cliente",component:ha,canActivate:[Rl],children:[{path:"bienvenida",component:va},{path:"pedidos",component:Ro},{path:"catalogo",component:ko},{path:"personalizar-torta",component:No},{path:"productos-destacados",component:Ei},{path:"mi-pedido",component:Fo},{path:"perfil",component:_a},{path:"confirmar-pedido",component:Ta},{path:"consultas",component:xa},{path:"pago-garantia",component:ka},{path:"productos-realizados",component:jo},{path:"entrega",component:Bo},{path:"historial-pedidos",component:Ro},{path:"ofertas",component:zo},{path:"ofertas/:id",component:Uo},{path:"detalle/:contactoId",component:Va},{path:"",redirectTo:"bienvenida",pathMatch:"full"}]},{path:"**",redirectTo:"",pathMatch:"full"}];var zp=(n,t)=>{let i=w(ae).obtenerToken();if(i){let o=n.clone({setHeaders:{Authorization:`Bearer ${i}`}});return t(o)}return t(n)};var Up={providers:[ol(jp),Ts(ks([zp])),yu(),zt,ae]};function N_(n,t){if(n&1&&(s(0,"span",21),l(1),a()),n&2){let e=f(2);d(),g(" ",e.cantidadItems," ")}}function L_(n,t){if(n&1){let e=T();Ne(0),s(1,"a",14),v("click",function(){C(e);let o=f();return y(o.closeMenu())}),l(2,"PROMOCIONES"),a(),s(3,"a",15),v("click",function(){C(e);let o=f();return y(o.closeMenu())}),Bt(),s(4,"svg",16),_(5,"path",17),a(),Qn(),s(6,"span"),l(7,"Mi pedido"),a(),b(8,N_,2,1,"span",18),a(),s(9,"a",19),v("click",function(){C(e);let o=f();return y(o.closeMenu())}),l(10,"Registrar"),a(),s(11,"a",20),v("click",function(){C(e);let o=f();return y(o.closeMenu())}),l(12,"Iniciar Sesi\xF3n"),a(),Le()}if(n&2){let e=f();d(8),p("ngIf",e.cantidadItems>0)}}function V_(n,t){if(n&1){let e=T();Ne(0),s(1,"span",22),l(2),a(),s(3,"a",23),v("click",function(){C(e);let o=f();return y(o.closeMenu())}),l(4,"Mis Pedidos"),a(),s(5,"button",24),v("click",function(){C(e);let o=f();return y(o.cerrarSesion())}),l(6,"Cerrar Sesi\xF3n"),a(),Le()}if(n&2){let e=f();d(2),g("Hola, ",e.authService.obtenerUsuarioActual)}}var ja=class n{constructor(t,e){this.authService=t;this.carritoService=e}isMenuOpen=!1;cantidadItems=0;ngOnInit(){this.carritoService.items$.subscribe(t=>{this.cantidadItems=t.reduce((e,i)=>e+i.cantidad,0)})}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}closeMenu(){this.isMenuOpen=!1}cerrarSesion(){this.authService.cerrarSesion(),this.closeMenu()}static \u0275fac=function(e){return new(e||n)(x(ae),x(Be))};static \u0275cmp=M({type:n,selectors:[["app-header"]],decls:31,vars:4,consts:[[1,"main-header"],[1,"logo"],["routerLink","/"],["src","assets/imagenes/logo.png","alt","Logo de D.Juancito"],[1,"mobile-nav-toggle",3,"click"],[1,"nav-container"],[1,"main-nav"],["href","#carrusel",3,"click"],["href","#productos-realizados",3,"click"],["href","#resenas",3,"click"],["href","#contacto",3,"click"],["routerLink","/catalogo",3,"click"],[1,"user-actions"],[4,"ngIf"],["routerLink","/ofertas",1,"btn","btn-primary",3,"click"],["routerLink","/mi-pedido",1,"btn","btn-secondary","position-relative",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-bag"],["d","M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z"],["class","position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger","style","font-size: 0.65rem; min-width: 18px; height: 18px;",4,"ngIf"],["routerLink","/registrar",1,"btn","btn-light",3,"click"],["routerLink","/iniciar-sesion",1,"btn","btn-primary",3,"click"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger",2,"font-size","0.65rem","min-width","18px","height","18px"],[1,"welcome-message"],["routerLink","/cliente/pedidos",1,"btn","btn-secondary",3,"click"],[1,"btn","btn-light",3,"click"]],template:function(e,i){e&1&&(s(0,"header",0)(1,"div",1)(2,"a",2),_(3,"img",3),s(4,"span"),l(5,"D.Juancito"),a()()(),s(6,"button",4),v("click",function(){return i.toggleMenu()}),_(7,"span")(8,"span")(9,"span"),a(),s(10,"div",5)(11,"nav",6)(12,"ul")(13,"li")(14,"a",7),v("click",function(){return i.closeMenu()}),l(15,"Inicio"),a()(),s(16,"li")(17,"a",8),v("click",function(){return i.closeMenu()}),l(18,"Productos Realizados"),a()(),s(19,"li")(20,"a",9),v("click",function(){return i.closeMenu()}),l(21,"Rese\xF1as"),a()(),s(22,"li")(23,"a",10),v("click",function(){return i.closeMenu()}),l(24,"Contacto"),a()(),s(25,"li")(26,"a",11),v("click",function(){return i.closeMenu()}),l(27,"Nuestro Cat\xE1logo"),a()()()(),s(28,"div",12),b(29,L_,13,1,"ng-container",13)(30,V_,7,1,"ng-container",13),a()()()),e&2&&(d(10),Z("nav-open",i.isMenuOpen),d(19),p("ngIf",!i.authService.estaLogueado()),d(),p("ngIf",i.authService.estaLogueado()))},dependencies:[k,N,ee],styles:[".main-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 40px;background-color:#fff;box-shadow:0 2px 8px #00000014;position:sticky;top:0;width:100%;z-index:1000;height:70px}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;text-decoration:none}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;object-fit:cover;border:2px solid #fd7e14}.logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.nav-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:100px}.main-nav[_ngcontent-%COMP%]{margin:0 auto;flex-grow:1;display:flex;justify-content:center}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;display:flex;gap:40px;justify-content:center}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#333;font-size:16px;font-weight:600;padding-bottom:5px;border-bottom:2px solid transparent;transition:all .3s ease}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fd7e14;border-bottom:2px solid #fd7e14}.user-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;text-decoration:none;font-weight:700;font-size:14px;border:2px solid transparent;transition:all .3s ease;display:flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#e8730f}.btn-secondary[_ngcontent-%COMP%]{background-color:#fff;color:#424242;border-color:#e0e0e0}.btn-secondary[_ngcontent-%COMP%]:hover{border-color:#fd7e14;background-color:#fff8f0}.btn-light[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#424242}.btn-light[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.badge[_ngcontent-%COMP%]{font-size:.65rem;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center;padding:0 4px;background-color:#dc3545;color:#fff;border-radius:50%;border:2px solid white}.mobile-nav-toggle[_ngcontent-%COMP%]{display:none;background:transparent;border:none;cursor:pointer;z-index:1100;padding:0;width:30px;height:25px}.mobile-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:100%;height:3px;background-color:#333;border-radius:2px;transition:all .3s ease-in-out}@media (max-width: 1024px){.nav-container[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:-100%;width:100%;height:100vh;background-color:#212529;flex-direction:column;justify-content:center;align-items:center;z-index:1050;transition:left .4s ease-in-out}.nav-container.nav-open[_ngcontent-%COMP%]{display:flex;left:0}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .user-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:25px}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:22px;color:#f8f9fa}.user-actions[_ngcontent-%COMP%]{margin-top:40px;border-top:1px solid #495057;padding-top:40px;width:80%}.user-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center;padding:12px;font-size:16px}.mobile-nav-toggle[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around}.main-header.nav-open[_ngcontent-%COMP%]   .mobile-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg) translate(5px,5px);background-color:#fff}.main-header.nav-open[_ngcontent-%COMP%]   .mobile-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){opacity:0}.main-header.nav-open[_ngcontent-%COMP%]   .mobile-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg) translate(7px,-6px);background-color:#fff}}"]})};var za=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-pie-pagina"]],decls:49,vars:0,consts:[[1,"site-footer"],[1,"footer-container"],[1,"footer-column"],["href","#"],[1,"subscribe-form"],["type","email","placeholder","Tu correo electr\xF3nico"],["type","submit"],[1,"footer-bottom"]],template:function(e,i){e&1&&(be(0,"footer",0)(1,"div",1)(2,"div",2)(3,"h4"),l(4,"D.Juancito"),ge(),be(5,"p"),l(6,'"Donde el Sabor se Convierte en Recuerdo"'),ge()(),be(7,"div",2)(8,"h4"),l(9,"Productos"),ge(),be(10,"ul")(11,"li")(12,"a",3),l(13,"Pasteles personalizados"),ge()(),be(14,"li")(15,"a",3),l(16,"Postres especiales"),ge()()()(),be(17,"div",2)(18,"h4"),l(19,"Recursos"),ge(),be(20,"ul")(21,"li")(22,"a",3),l(23,"Preguntas frecuentes"),ge()(),be(24,"li")(25,"a",3),l(26,"Blog de recetas"),ge()()()(),be(27,"div",2)(28,"h4"),l(29,"Compa\xF1\xEDa"),ge(),be(30,"ul")(31,"li")(32,"a",3),l(33,"Sobre Nosotros"),ge()(),be(34,"li")(35,"a",3),l(36,"Nuestro equipo"),ge()()()(),be(37,"div",2)(38,"h4"),l(39,"Suscr\xEDbete"),ge(),be(40,"p"),l(41,"Recibe nuestras promociones especiales."),ge(),be(42,"form",4),Ho(43,"input",5),be(44,"button",6),l(45,"Suscribir"),ge()()()(),be(46,"div",7)(47,"p"),l(48,"\xA9 2025 D.Juancito. Todos los derechos reservados."),ge()()())},styles:[".site-footer[_ngcontent-%COMP%]{background-color:#2c2c2c;color:#a7a7a7;padding:40px 0;font-family:Arial,sans-serif}.footer-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-wrap:wrap;max-width:1200px;margin:0 auto;padding:0 20px}.footer-column[_ngcontent-%COMP%]{flex:1;min-width:200px;margin:20px 10px}.footer-column[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-size:18px;margin-bottom:20px;border-bottom:1px solid #eb7221;padding-bottom:10px}.footer-column[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.6}.footer-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.footer-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#a7a7a7;text-decoration:none;display:block;margin-bottom:10px;transition:color .3s ease}.footer-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.subscribe-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:5px;border:1px solid #555;background-color:#333;color:#fff;margin-bottom:10px}.subscribe-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:5px;border:none;background-color:#eb7221;color:#fff;font-weight:700;cursor:pointer}.footer-bottom[_ngcontent-%COMP%]{text-align:center;margin-top:40px;border-top:1px solid #444;padding-top:20px}"]})};var Ua=class n{mensaje="";visible=!0;cerrar(){this.visible=!1}ocultar(){setTimeout(()=>this.visible=!1,3e3)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-toast"]],inputs:{mensaje:"mensaje"},decls:6,vars:3,consts:[["role","alert",1,"toast","show","align-items-center","text-bg-success","border-0","fade"],[1,"d-flex"],[1,"toast-body"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"]],template:function(e,i){e&1&&(be(0,"div",0)(1,"div",1)(2,"div",2),Ho(3,"i",3),l(4),ge(),be(5,"button",4),Wo("click",function(){return i.cerrar()}),ge()()()),e&2&&(ni("display",i.visible?"flex":"none"),d(4),g(" ",i.mensaje," "))},dependencies:[k],styles:[".toast[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1055;min-width:300px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}"]})};function j_(n,t){n&1&&(Ne(0),_(1,"app-header"),s(2,"main"),_(3,"router-outlet"),a(),_(4,"app-pie-pagina"),Le())}function z_(n,t){if(n&1&&_(0,"app-toast",2),n&2){let e=f();p("mensaje",e.mensajeToast)}}function U_(n,t){n&1&&(Ne(0),_(1,"router-outlet"),Le())}var Ba=class n{constructor(t){this.router=t;this.router.events.pipe(kt(e=>e instanceof It)).subscribe(e=>{this.usaLayoutPrincipal=!e.urlAfterRedirects.startsWith("/admin")&&!e.urlAfterRedirects.startsWith("/cliente")}),window.addEventListener("agregar-al-carrito",e=>{this.mostrarNotificacion(e.detail)})}usaLayoutPrincipal=!0;mostrarToast=!1;mensajeToast="";mostrarNotificacion(t){this.mensajeToast=t,this.mostrarToast=!0,setTimeout(()=>this.mostrarToast=!1,3e3)}static \u0275fac=function(e){return new(e||n)(x(pe))};static \u0275cmp=M({type:n,selectors:[["app-root"]],decls:3,vars:3,consts:[[4,"ngIf"],[3,"mensaje",4,"ngIf"],[3,"mensaje"]],template:function(e,i){e&1&&b(0,j_,5,0,"ng-container",0)(1,z_,1,1,"app-toast",1)(2,U_,2,0,"ng-container",0),e&2&&(p("ngIf",i.usaLayoutPrincipal),d(),p("ngIf",i.mostrarToast),d(),p("ngIf",!i.usaLayoutPrincipal))},dependencies:[k,N,sn,ja,za,Ua],styles:[".header-fijo-contenedor[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;z-index:1000}.contenido-principal[_ngcontent-%COMP%]{padding-top:10px}"]})};function B_(n){let t=n,e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===1?1:o===0&&e!==0&&e%1e6===0&&i===0||!(o>=0&&o<=5)?4:5}var Bp=["es-PE",[["a.\xA0m.","p.\xA0m."]],void 0,[["d","l","m","m","j","v","s"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["D","L","M","M","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","set.","oct.","nov.","dic."],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","setiembre","octubre","noviembre","diciembre"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["Ene.","Feb.","Mar.","Abr.","May.","Jun.","Jul.","Ago.","Set.","Oct.","Nov.","Dic."],["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Setiembre","Octubre","Noviembre","Diciembre"]],[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],0,[6,0],["d/MM/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}","{1} {0}","{1}, {0}",void 0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","\xA4\xA0#,##0.00","#E0"],"PEN","S/","sol peruano",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],ESP:["\u20A7"],EUR:[void 0,"\u20AC"],FKP:[void 0,"FK\xA3"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PEN:["S/"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],SSP:[void 0,"SD\xA3"],SYP:[void 0,"S\xA3"],TWD:[void 0,"NT$"],USD:[void 0,"$"],VEF:[void 0,"BsF"],VND:[void 0,"\u20AB"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",B_];ld(Bp);Ms(Ba,Up).catch(n=>console.error(n));
