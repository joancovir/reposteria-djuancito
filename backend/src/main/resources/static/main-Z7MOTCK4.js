import{$ as Ut,$a as _,$b as ii,A as Jn,Aa as nc,Ab as Vi,B as Mn,Ba as ic,Bb as Nt,C as Wa,Ca as oc,Cb as ni,D as cn,Da as rc,Db as Z,E as Xn,Ea as An,Eb as Qt,F as dn,Fa as ve,Fb as l,G as qa,Ga as ac,Gb as S,H as Gl,Ha as sc,Hb as g,I as $l,Ia as es,Ib as Oe,J as Hl,Ja as c,Jb as te,K as at,Ka as Tn,Kb as ne,L as ki,La as lc,Lb as ie,M as He,Ma as Ri,Mb as fc,N as j,Na as cc,Nb as Pt,O as pt,Oa as pn,Ob as Ee,P as I,Pa as We,Pb as Wo,Q as Je,Qa as x,Qb as Bt,R as Wl,Ra as ts,Rb as rs,S as W,Sa as ti,Sb as gc,T as F,Ta as Go,Tb as P,U as w,Ua as dc,Ub as le,V as Dn,Va as ns,Vb as A,W as ql,Wa as M,Wb as qo,X as un,Xa as Xe,Xb as en,Y as vt,Ya as se,Yb as hc,Z as C,Za as kn,Zb as ji,_ as y,_a as qe,_b as Ve,a as O,aa as Qn,ab as uc,ac as vc,b as ae,ba as st,bb as ue,bc,ca as me,cb as Ye,cc as mn,d as Rl,da as On,db as is,dc as _c,e as Nl,ea as Ya,eb as os,ec as xc,f as Kn,fa as Fi,fb as Ni,fc as Cc,g as Ba,ga as Ft,gb as pc,gc as fn,h as Ga,ha as Yl,hb as Fn,i as rt,ia as Zl,ib as bt,j as $e,ja as Za,jb as p,k as Ll,ka as Et,kb as s,l as Xt,la as St,lb as a,m as ut,ma as Ka,mb as b,n as U,na as De,nb as be,o as Ti,oa as Kl,ob as ge,p as Vl,pa as Ja,pb as $o,q as jl,qa as Jl,qb as Ne,r as ee,ra as Rt,rb as Le,s as $a,sa as Xl,sb as T,t as wt,ta as Xa,tb as mc,u as zl,ua as Qa,ub as _t,v as Bo,va as In,vb as Te,w as Ul,wa as ei,wb as h,x as Ha,xa as Ql,xb as Ho,y as Bl,ya as ec,yb as f,z as kt,za as tc,zb as Li}from"./chunk-3B465TR6.js";var Ec=null;function Mt(){return Ec}function as(n){Ec??=n}var zi=class{},ss=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>w(Sc),providedIn:"platform"})}return n})();var Sc=(()=>{class n extends ss{_location;_history;_doc=w(me);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mt().getBaseHref(this._doc)}onPopState(e){let i=Mt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=Mt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,o){this._history.pushState(e,i,o)}replaceState(e,i,o){this._history.replaceState(e,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Pc(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function yc(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function gn(n){return n&&n[0]!=="?"?`?${n}`:n}var oi=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>w(Dc),providedIn:"root"})}return n})(),Mc=new W(""),Dc=(()=>{class n extends oi{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??w(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Pc(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+gn(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${i}${o}`:i}pushState(e,i,o,r){let d=this.prepareExternalUrl(o+gn(r));this._platformLocation.pushState(e,i,d)}replaceState(e,i,o,r){let d=this.prepareExternalUrl(o+gn(r));this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(F(ss),F(Mc,8))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mt=(()=>{class n{_subject=new rt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=Np(yc(wc(i))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+gn(i))}normalize(e){return n.stripTrailingSlash(Rp(this._basePath,wc(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",o=null){this._locationStrategy.pushState(o,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+gn(i)),o)}replaceState(e,i="",o=null){this._locationStrategy.replaceState(o,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+gn(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(o=>o(e,i))}subscribe(e,i,o){return this._subject.subscribe({next:e,error:i??void 0,complete:o??void 0})}static normalizeQueryParams=gn;static joinWithSlash=Pc;static stripTrailingSlash=yc;static \u0275fac=function(i){return new(i||n)(F(oi))};static \u0275prov=I({token:n,factory:()=>Fp(),providedIn:"root"})}return n})();function Fp(){return new mt(F(oi))}function Rp(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function wc(n){return n.replace(/\/index.html$/,"")}function Np(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var gs=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(gs||{});var Qe=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Qe||{}),he=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(he||{}),ft=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(ft||{}),gt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Fc(n){return _t(n)[Te.LocaleId]}function Rc(n,t,e){let i=_t(n),o=[i[Te.DayPeriodsFormat],i[Te.DayPeriodsStandalone]],r=Dt(o,t);return Dt(r,e)}function Nc(n,t,e){let i=_t(n),o=[i[Te.DaysFormat],i[Te.DaysStandalone]],r=Dt(o,t);return Dt(r,e)}function Lc(n,t,e){let i=_t(n),o=[i[Te.MonthsFormat],i[Te.MonthsStandalone]],r=Dt(o,t);return Dt(r,e)}function Vc(n,t){let i=_t(n)[Te.Eras];return Dt(i,t)}function Ui(n,t){let e=_t(n);return Dt(e[Te.DateFormat],t)}function Bi(n,t){let e=_t(n);return Dt(e[Te.TimeFormat],t)}function Gi(n,t){let i=_t(n)[Te.DateTimeFormat];return Dt(i,t)}function Gt(n,t){let e=_t(n),i=e[Te.NumberSymbols][t];if(typeof i>"u"){if(t===gt.CurrencyDecimal)return e[Te.NumberSymbols][gt.Decimal];if(t===gt.CurrencyGroup)return e[Te.NumberSymbols][gt.Group]}return i}function jc(n,t){return _t(n)[Te.NumberFormats][t]}function zc(n){if(!n[Te.ExtraData])throw new j(2303,!1)}function Uc(n){let t=_t(n);return zc(t),(t[Te.ExtraData][2]||[]).map(i=>typeof i=="string"?ls(i):[ls(i[0]),ls(i[1])])}function Bc(n,t,e){let i=_t(n);zc(i);let o=[i[Te.ExtraData][0],i[Te.ExtraData][1]],r=Dt(o,t)||[];return Dt(r,e)||[]}function Dt(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new j(2304,!1)}function ls(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var Lp=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Yo={},Vp=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Gc(n,t,e,i){let o=qp(n);t=tn(e,t)||t;let d=[],u;for(;t;)if(u=Vp.exec(t),u){d=d.concat(u.slice(1));let E=d.pop();if(!E)break;t=E}else{d.push(t);break}let m=o.getTimezoneOffset();i&&(m=Hc(i,m),o=Wp(o,i));let v="";return d.forEach(E=>{let D=$p(E);v+=D?D(o,e,m):E==="''"?"'":E.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),v}function Qo(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function tn(n,t){let e=Fc(n);if(Yo[e]??={},Yo[e][t])return Yo[e][t];let i="";switch(t){case"shortDate":i=Ui(n,ft.Short);break;case"mediumDate":i=Ui(n,ft.Medium);break;case"longDate":i=Ui(n,ft.Long);break;case"fullDate":i=Ui(n,ft.Full);break;case"shortTime":i=Bi(n,ft.Short);break;case"mediumTime":i=Bi(n,ft.Medium);break;case"longTime":i=Bi(n,ft.Long);break;case"fullTime":i=Bi(n,ft.Full);break;case"short":let o=tn(n,"shortTime"),r=tn(n,"shortDate");i=Zo(Gi(n,ft.Short),[o,r]);break;case"medium":let d=tn(n,"mediumTime"),u=tn(n,"mediumDate");i=Zo(Gi(n,ft.Medium),[d,u]);break;case"long":let m=tn(n,"longTime"),v=tn(n,"longDate");i=Zo(Gi(n,ft.Long),[m,v]);break;case"full":let E=tn(n,"fullTime"),D=tn(n,"fullDate");i=Zo(Gi(n,ft.Full),[E,D]);break}return i&&(Yo[e][t]=i),i}function Zo(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function Lt(n,t,e="-",i,o){let r="";(n<0||o&&n<=0)&&(o?n=-n+1:(n=-n,r=e));let d=String(n);for(;d.length<t;)d="0"+d;return i&&(d=d.slice(d.length-t)),r+d}function jp(n,t){return Lt(n,3).substring(0,t)}function ke(n,t,e=0,i=!1,o=!1){return function(r,d){let u=zp(n,r);if((e>0||u>-e)&&(u+=e),n===3)u===0&&e===-12&&(u=12);else if(n===6)return jp(u,t);let m=Gt(d,gt.MinusSign);return Lt(u,t,m,i,o)}}function zp(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new j(2301,!1)}}function Ce(n,t,e=Qe.Format,i=!1){return function(o,r){return Up(o,r,n,t,e,i)}}function Up(n,t,e,i,o,r){switch(e){case 2:return Lc(t,o,i)[n.getMonth()];case 1:return Nc(t,o,i)[n.getDay()];case 0:let d=n.getHours(),u=n.getMinutes();if(r){let v=Uc(t),E=Bc(t,o,i),D=v.findIndex(V=>{if(Array.isArray(V)){let[L,B]=V,ye=d>=L.hours&&u>=L.minutes,G=d<B.hours||d===B.hours&&u<B.minutes;if(L.hours<B.hours){if(ye&&G)return!0}else if(ye||G)return!0}else if(V.hours===d&&V.minutes===u)return!0;return!1});if(D!==-1)return E[D]}return Rc(t,o,i)[d<12?0:1];case 3:return Vc(t,i)[n.getFullYear()<=0?0:1];default:let m=e;throw new j(2302,!1)}}function Ko(n){return function(t,e,i){let o=-1*i,r=Gt(e,gt.MinusSign),d=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case 0:return(o>=0?"+":"")+Lt(d,2,r)+Lt(Math.abs(o%60),2,r);case 1:return"GMT"+(o>=0?"+":"")+Lt(d,1,r);case 2:return"GMT"+(o>=0?"+":"")+Lt(d,2,r)+":"+Lt(Math.abs(o%60),2,r);case 3:return i===0?"Z":(o>=0?"+":"")+Lt(d,2,r)+":"+Lt(Math.abs(o%60),2,r);default:throw new j(2310,!1)}}}var Bp=0,Xo=4;function Gp(n){let t=Qo(n,Bp,1).getDay();return Qo(n,0,1+(t<=Xo?Xo:Xo+7)-t)}function $c(n){let t=n.getDay(),e=t===0?-3:Xo-t;return Qo(n.getFullYear(),n.getMonth(),n.getDate()+e)}function cs(n,t=!1){return function(e,i){let o;if(t){let r=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,d=e.getDate();o=1+Math.floor((d+r)/7)}else{let r=$c(e),d=Gp(r.getFullYear()),u=r.getTime()-d.getTime();o=1+Math.round(u/6048e5)}return Lt(o,n,Gt(i,gt.MinusSign))}}function Jo(n,t=!1){return function(e,i){let r=$c(e).getFullYear();return Lt(r,n,Gt(i,gt.MinusSign),t)}}var ds={};function $p(n){if(ds[n])return ds[n];let t;switch(n){case"G":case"GG":case"GGG":t=Ce(3,he.Abbreviated);break;case"GGGG":t=Ce(3,he.Wide);break;case"GGGGG":t=Ce(3,he.Narrow);break;case"y":t=ke(0,1,0,!1,!0);break;case"yy":t=ke(0,2,0,!0,!0);break;case"yyy":t=ke(0,3,0,!1,!0);break;case"yyyy":t=ke(0,4,0,!1,!0);break;case"Y":t=Jo(1);break;case"YY":t=Jo(2,!0);break;case"YYY":t=Jo(3);break;case"YYYY":t=Jo(4);break;case"M":case"L":t=ke(1,1,1);break;case"MM":case"LL":t=ke(1,2,1);break;case"MMM":t=Ce(2,he.Abbreviated);break;case"MMMM":t=Ce(2,he.Wide);break;case"MMMMM":t=Ce(2,he.Narrow);break;case"LLL":t=Ce(2,he.Abbreviated,Qe.Standalone);break;case"LLLL":t=Ce(2,he.Wide,Qe.Standalone);break;case"LLLLL":t=Ce(2,he.Narrow,Qe.Standalone);break;case"w":t=cs(1);break;case"ww":t=cs(2);break;case"W":t=cs(1,!0);break;case"d":t=ke(2,1);break;case"dd":t=ke(2,2);break;case"c":case"cc":t=ke(7,1);break;case"ccc":t=Ce(1,he.Abbreviated,Qe.Standalone);break;case"cccc":t=Ce(1,he.Wide,Qe.Standalone);break;case"ccccc":t=Ce(1,he.Narrow,Qe.Standalone);break;case"cccccc":t=Ce(1,he.Short,Qe.Standalone);break;case"E":case"EE":case"EEE":t=Ce(1,he.Abbreviated);break;case"EEEE":t=Ce(1,he.Wide);break;case"EEEEE":t=Ce(1,he.Narrow);break;case"EEEEEE":t=Ce(1,he.Short);break;case"a":case"aa":case"aaa":t=Ce(0,he.Abbreviated);break;case"aaaa":t=Ce(0,he.Wide);break;case"aaaaa":t=Ce(0,he.Narrow);break;case"b":case"bb":case"bbb":t=Ce(0,he.Abbreviated,Qe.Standalone,!0);break;case"bbbb":t=Ce(0,he.Wide,Qe.Standalone,!0);break;case"bbbbb":t=Ce(0,he.Narrow,Qe.Standalone,!0);break;case"B":case"BB":case"BBB":t=Ce(0,he.Abbreviated,Qe.Format,!0);break;case"BBBB":t=Ce(0,he.Wide,Qe.Format,!0);break;case"BBBBB":t=Ce(0,he.Narrow,Qe.Format,!0);break;case"h":t=ke(3,1,-12);break;case"hh":t=ke(3,2,-12);break;case"H":t=ke(3,1);break;case"HH":t=ke(3,2);break;case"m":t=ke(4,1);break;case"mm":t=ke(4,2);break;case"s":t=ke(5,1);break;case"ss":t=ke(5,2);break;case"S":t=ke(6,1);break;case"SS":t=ke(6,2);break;case"SSS":t=ke(6,3);break;case"Z":case"ZZ":case"ZZZ":t=Ko(0);break;case"ZZZZZ":t=Ko(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Ko(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=Ko(2);break;default:return null}return ds[n]=t,t}function Hc(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function Hp(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function Wp(n,t,e){let o=n.getTimezoneOffset(),r=Hc(t,o);return Hp(n,-1*(r-o))}function qp(n){if(Oc(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[o,r=1,d=1]=n.split("-").map(u=>+u);return Qo(o,r-1,d)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(Lp))return Yp(i)}let t=new Date(n);if(!Oc(t))throw new j(2311,!1);return t}function Yp(n){let t=new Date(0),e=0,i=0,o=n[8]?t.setUTCFullYear:t.setFullYear,r=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),o.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let d=Number(n[4]||0)-e,u=Number(n[5]||0)-i,m=Number(n[6]||0),v=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return r.call(t,d,u,m,v),t}function Oc(n){return n instanceof Date&&!isNaN(n.valueOf())}var Zp=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Ic=22,er=".",$i="0",Kp=";",Jp=",",us="#";function Xp(n,t,e,i,o,r,d=!1){let u="",m=!1;if(!isFinite(n))u=Gt(e,gt.Infinity);else{let v=tm(n);d&&(v=em(v));let E=t.minInt,D=t.minFrac,V=t.maxFrac;if(r){let we=r.match(Zp);if(we===null)throw new j(2306,!1);let dt=we[1],Ae=we[3],zt=we[5];dt!=null&&(E=ps(dt)),Ae!=null&&(D=ps(Ae)),zt!=null?V=ps(zt):Ae!=null&&D>V&&(V=D)}nm(v,D,V);let L=v.digits,B=v.integerLen,ye=v.exponent,G=[];for(m=L.every(we=>!we);B<E;B++)L.unshift(0);for(;B<0;B++)L.unshift(0);B>0?G=L.splice(B,L.length):(G=L,L=[0]);let Y=[];for(L.length>=t.lgSize&&Y.unshift(L.splice(-t.lgSize,L.length).join(""));L.length>t.gSize;)Y.unshift(L.splice(-t.gSize,L.length).join(""));L.length&&Y.unshift(L.join("")),u=Y.join(Gt(e,i)),G.length&&(u+=Gt(e,o)+G.join("")),ye&&(u+=Gt(e,gt.Exponential)+"+"+ye)}return n<0&&!m?u=t.negPre+u+t.negSuf:u=t.posPre+u+t.posSuf,u}function Wc(n,t,e){let i=jc(t,gs.Decimal),o=Qp(i,Gt(t,gt.MinusSign));return Xp(n,o,t,gt.Group,gt.Decimal,e)}function Qp(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(Kp),o=i[0],r=i[1],d=o.indexOf(er)!==-1?o.split(er):[o.substring(0,o.lastIndexOf($i)+1),o.substring(o.lastIndexOf($i)+1)],u=d[0],m=d[1]||"";e.posPre=u.substring(0,u.indexOf(us));for(let E=0;E<m.length;E++){let D=m.charAt(E);D===$i?e.minFrac=e.maxFrac=E+1:D===us?e.maxFrac=E+1:e.posSuf+=D}let v=u.split(Jp);if(e.gSize=v[1]?v[1].length:0,e.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,r){let E=o.length-e.posPre.length-e.posSuf.length,D=r.indexOf(us);e.negPre=r.substring(0,D).replace(/'/g,""),e.negSuf=r.slice(D+E).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function em(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function tm(n){let t=Math.abs(n)+"",e=0,i,o,r,d,u;for((o=t.indexOf(er))>-1&&(t=t.replace(er,"")),(r=t.search(/e/i))>0?(o<0&&(o=r),o+=+t.slice(r+1),t=t.substring(0,r)):o<0&&(o=t.length),r=0;t.charAt(r)===$i;r++);if(r===(u=t.length))i=[0],o=1;else{for(u--;t.charAt(u)===$i;)u--;for(o-=r,i=[],d=0;r<=u;r++,d++)i[d]=Number(t.charAt(r))}return o>Ic&&(i=i.splice(0,Ic-1),e=o-1,o=1),{digits:i,exponent:e,integerLen:o}}function nm(n,t,e){if(t>e)throw new j(2307,!1);let i=n.digits,o=i.length-n.integerLen,r=Math.min(Math.max(t,o),e),d=r+n.integerLen,u=i[d];if(d>0){i.splice(Math.max(n.integerLen,d));for(let D=d;D<i.length;D++)i[D]=0}else{o=Math.max(0,o),n.integerLen=1,i.length=Math.max(1,d=r+1),i[0]=0;for(let D=1;D<d;D++)i[D]=0}if(u>=5)if(d-1<0){for(let D=0;D>d;D--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[d-1]++;for(;o<Math.max(0,r);o++)i.push(0);let m=r!==0,v=t+n.integerLen,E=i.reduceRight(function(D,V,L,B){return V=V+D,B[L]=V<10?V:V-10,m&&(B[L]===0&&L>=v?B.pop():m=!1),V>=10?1:0},0);E&&(i.unshift(E),n.integerLen++)}function ps(n){let t=parseInt(n);if(isNaN(t))throw new j(2305,!1);return t}var ms=/\s+/,Ac=[],Pe=(()=>{class n{_ngEl;_renderer;initialClasses=Ac;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(ms):Ac}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(ms):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let o=this.stateMap.get(e);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],o=e[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(ms).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static \u0275fac=function(i){return new(i||n)(x(De),x(We))};static \u0275dir=se({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var tr=class{$implicit;ngForOf;index;count;constructor(t,e,i,o){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},z=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,o){this._viewContainer=e,this._template=i,this._differs=o}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((o,r,d)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new tr(o.item,this._ngForOf,-1,-1),d===null?void 0:d);else if(d==null)i.remove(r===null?void 0:r);else if(r!==null){let u=i.get(r);i.move(u,d),Tc(u,o)}});for(let o=0,r=i.length;o<r;o++){let u=i.get(o).context;u.index=o,u.count=r,u.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{let r=i.get(o.currentIndex);Tc(r,o)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(x(ti),x(Ri),x(_c))};static \u0275dir=se({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Tc(n,t){n.context.$implicit=t.item}var N=(()=>{class n{_viewContainer;_context=new nr;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){kc(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){kc(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(x(ti),x(Ri))};static \u0275dir=se({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),nr=class{$implicit=null;ngIf=null};function kc(n,t){if(n&&!n.createEmbeddedView)throw new j(2020,!1)}var hs=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,i,o){this._ngEl=e,this._differs=i,this._renderer=o}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[o,r]=e.split("."),d=o.indexOf("-")===-1?void 0:Tn.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,r?`${i}${r}`:i,d):this._renderer.removeStyle(this._ngEl.nativeElement,o,d)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static \u0275fac=function(i){return new(i||n)(x(De),x(xc),x(We))};static \u0275dir=se({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();function ir(n,t){return new j(2100,!1)}var im=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,_e=(()=>{class n{transform(e){if(e==null)return null;if(typeof e!="string")throw ir(n,e);return e.replace(im,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=kn({name:"titlecase",type:n,pure:!0})}return n})();var om="mediumDate",qc=new W(""),Yc=new W(""),ce=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,i,o){this.locale=e,this.defaultTimezone=i,this.defaultOptions=o}transform(e,i,o,r){if(e==null||e===""||e!==e)return null;try{let d=i??this.defaultOptions?.dateFormat??om,u=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Gc(e,d,r||this.locale,u)}catch(d){throw ir(n,d.message)}}static \u0275fac=function(i){return new(i||n)(x(ji,16),x(qc,24),x(Yc,24))};static \u0275pipe=kn({name:"date",type:n,pure:!0})}return n})();var xe=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,i,o){if(!rm(e))return null;o||=this._locale;try{let r=am(e);return Wc(r,o,i)}catch(r){throw ir(n,r.message)}}static \u0275fac=function(i){return new(i||n)(x(ji,16))};static \u0275pipe=kn({name:"number",type:n,pure:!0})}return n})();function rm(n){return!(n==null||n===""||n!==n)}function am(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new j(2309,!1);return n}var Hi=(()=>{class n{transform(e,i,o){if(e==null)return null;if(!(typeof e=="string"||Array.isArray(e)))throw ir(n,e);return e.slice(i,o)}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=kn({name:"slice",type:n,pure:!1})}return n})();var k=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Xe({type:n});static \u0275inj=Je({})}return n})();function Wi(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[o,r]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(o.trim()===t)return decodeURIComponent(r)}return null}var Rn=class{};function Jc(n,t,e){return mc(n,t,e)}var vs="browser";function ri(n){return n===vs}var rr=new W(""),ys=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,o,r){return this._findPluginFor(i).addEventListener(e,i,o,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(r=>r.supports(e)),!i)throw new j(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(F(rr),F(Ye))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),qi=class{_doc;constructor(t){this._doc=t}manager},bs="ng-app-id";function Xc(n){for(let t of n)t.remove()}function Qc(n,t){let e=t.createElement("style");return e.textContent=n,e}function lm(n,t,e,i){let o=n.head?.querySelectorAll(`style[${bs}="${t}"],link[${bs}="${t}"]`);if(o)for(let r of o)r.removeAttribute(bs),r instanceof HTMLLinkElement?i.set(r.href.slice(r.href.lastIndexOf("/")+1),{usage:0,elements:[r]}):r.textContent&&e.set(r.textContent,{usage:0,elements:[r]})}function xs(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var ws=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,i,o,r={}){this.doc=e,this.appId=i,this.nonce=o,lm(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let o of e)this.addUsage(o,this.inline,Qc);i?.forEach(o=>this.addUsage(o,this.external,xs))}removeStyles(e,i){for(let o of e)this.removeUsage(o,this.inline);i?.forEach(o=>this.removeUsage(o,this.external))}addUsage(e,i,o){let r=i.get(e);r?r.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(d=>this.addElement(d,o(e,this.doc)))})}removeUsage(e,i){let o=i.get(e);o&&(o.usage--,o.usage<=0&&(Xc(o.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])Xc(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:o}]of this.inline)o.push(this.addElement(e,Qc(i,this.doc)));for(let[i,{elements:o}]of this.external)o.push(this.addElement(e,xs(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(F(me),F(Ja),F(Xa,8),F(Rt))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),_s={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Es=/%COMP%/g;var td="%COMP%",cm=`_nghost-${td}`,dm=`_ngcontent-${td}`,um=!0,pm=new W("",{providedIn:"root",factory:()=>um});function mm(n){return dm.replace(Es,n)}function fm(n){return cm.replace(Es,n)}function nd(n,t){return t.map(e=>e.replace(Es,n))}var Ki=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,o,r,d,u,m,v=null,E=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=r,this.doc=d,this.platformId=u,this.ngZone=m,this.nonce=v,this.tracingService=E,this.platformIsServer=!1,this.defaultRenderer=new Yi(e,d,m,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;let o=this.getOrCreateRenderer(e,i);return o instanceof or?o.applyToHost(e):o instanceof Zi&&o.applyStyles(),o}getOrCreateRenderer(e,i){let o=this.rendererByCompId,r=o.get(i.id);if(!r){let d=this.doc,u=this.ngZone,m=this.eventManager,v=this.sharedStylesHost,E=this.removeStylesOnCompDestroy,D=this.platformIsServer,V=this.tracingService;switch(i.encapsulation){case Qa.Emulated:r=new or(m,v,i,this.appId,E,d,u,D,V);break;case Qa.ShadowDom:return new Cs(m,v,e,i,d,u,this.nonce,D,V);default:r=new Zi(m,v,i,E,d,u,D,V);break}o.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||n)(F(ys),F(ws),F(Ja),F(pm),F(me),F(Rt),F(Ye),F(Xa),F(uc,8))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),Yi=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,o,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=o,this.tracingService=r}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(_s[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(ed(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(ed(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new j(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,o){if(o){e=o+":"+e;let r=_s[o];r?t.setAttributeNS(r,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let o=_s[i];o?t.removeAttributeNS(o,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,o){o&(Tn.DashCase|Tn.Important)?t.style.setProperty(e,i,o&Tn.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Tn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,o){if(typeof t=="string"&&(t=Mt().getGlobalEventTarget(this.doc,t),!t))throw new j(5102,!1);let r=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(r=this.tracingService.wrapEventListener(t,e,r)),this.eventManager.addEventListener(t,e,r,o)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function ed(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Cs=class extends Yi{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,i,o,r,d,u,m,v){super(t,r,d,m,v),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let E=o.styles;E=nd(o.id,E);for(let V of E){let L=document.createElement("style");u&&L.setAttribute("nonce",u),L.textContent=V,this.shadowRoot.appendChild(L)}let D=o.getExternalStyles?.();if(D)for(let V of D){let L=xs(V,r);u&&L.setAttribute("nonce",u),this.shadowRoot.appendChild(L)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Zi=class extends Yi{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,o,r,d,u,m,v){super(t,r,d,u,m),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=o;let E=i.styles;this.styles=v?nd(v,E):E,this.styleUrls=i.getExternalStyles?.(v)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&lc.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},or=class extends Zi{contentAttr;hostAttr;constructor(t,e,i,o,r,d,u,m,v){let E=o+"-"+i.id;super(t,e,i,r,d,u,m,v,E),this.contentAttr=mm(E),this.hostAttr=fm(E)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}};var ar=class n extends zi{supportsDOMEvents=!0;static makeCurrent(){as(new n)}onAndCancel(t,e,i,o){return t.addEventListener(e,i,o),()=>{t.removeEventListener(e,i,o)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=hm();return e==null?null:vm(e)}resetBaseElement(){Ji=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Wi(document.cookie,t)}},Ji=null;function hm(){return Ji=Ji||document.head.querySelector("base"),Ji?Ji.getAttribute("href"):null}function vm(n){return new URL(n,document.baseURI).pathname}var bm=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),od=(()=>{class n extends qi{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,o,r){return e.addEventListener(i,o,r),()=>this.removeEventListener(e,i,o,r)}removeEventListener(e,i,o,r){return e.removeEventListener(i,o,r)}static \u0275fac=function(i){return new(i||n)(F(me))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),id=["alt","control","meta","shift"],_m={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xm={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},rd=(()=>{class n extends qi{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,o,r){let d=n.parseEventName(i),u=n.eventCallback(d.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mt().onAndCancel(e,d.domEventName,u,r))}static parseEventName(e){let i=e.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let r=n._normalizeKey(i.pop()),d="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),d="code."),id.forEach(v=>{let E=i.indexOf(v);E>-1&&(i.splice(E,1),d+=v+".")}),d+=r,i.length!=0||r.length===0)return null;let m={};return m.domEventName=o,m.fullKey=d,m}static matchEventFullKeyCode(e,i){let o=_m[e.key]||e.key,r="";return i.indexOf("code.")>-1&&(o=e.code,r="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),id.forEach(d=>{if(d!==o){let u=xm[d];u(e)&&(r+=d+".")}}),r+=o,r===i)}static eventCallback(e,i,o){return r=>{n.matchEventFullKeyCode(r,e)&&o.runGuarded(()=>i(r))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(F(me))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})();function Ss(n,t,e){let i=O({rootComponent:n,platformRef:e?.platformRef},Cm(t));return Cc(i)}function Cm(n){return{appProviders:[...Pm,...n?.providers??[]],platformProviders:Sm}}function ym(){ar.makeCurrent()}function wm(){return new Ya}function Em(){return Kl(document),document}var Sm=[{provide:Rt,useValue:vs},{provide:Jl,useValue:ym,multi:!0},{provide:me,useFactory:Em}];var Pm=[{provide:ql,useValue:"root"},{provide:Ya,useFactory:wm},{provide:rr,useClass:od,multi:!0,deps:[me]},{provide:rr,useClass:rd,multi:!0,deps:[me]},Ki,ws,ys,{provide:pn,useExisting:Ki},{provide:Rn,useClass:bm},[]];var li=class{},Xi=class{},Ot=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let o=e.slice(0,i),r=e.slice(i+1).trim();this.addHeaderEntry(o,r)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let o=(t.op==="a"?this.headers.get(e):void 0)||[];o.push(...i),this.headers.set(e,o);break;case"d":let r=t.value;if(!r)this.headers.delete(e),this.normalizedNames.delete(e);else{let d=this.headers.get(e);if(!d)return;d=d.filter(u=>r.indexOf(u)===-1),d.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}break}}addHeaderEntry(t,e){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(r=>r.toString()),o=t.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(t,o)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var lr=class{encodeKey(t){return ad(t)}encodeValue(t){return ad(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function Mm(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let r=o.indexOf("="),[d,u]=r==-1?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,r)),t.decodeValue(o.slice(r+1))],m=e.get(d)||[];m.push(u),e.set(d,m)}),e}var Dm=/%(\d[a-f0-9])/gi,Om={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ad(n){return encodeURIComponent(n).replace(Dm,(t,e)=>Om[e]??t)}function sr(n){return`${n}`}var nn=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new lr,t.fromString){if(t.fromObject)throw new j(2805,!1);this.map=Mm(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],o=Array.isArray(i)?i.map(sr):[sr(i)];this.map.set(e,o)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let o=t[i];Array.isArray(o)?o.forEach(r=>{e.push({param:i,value:r,op:"a"})}):e.push({param:i,value:o,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(sr(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],o=i.indexOf(sr(t.value));o!==-1&&i.splice(o,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var cr=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Im(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function sd(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function ld(n){return typeof Blob<"u"&&n instanceof Blob}function cd(n){return typeof FormData<"u"&&n instanceof FormData}function Am(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var dd="Content-Type",ud="Accept",pd="X-Request-URL",md="text/plain",fd="application/json",Tm=`${fd}, ${md}, */*`,ai=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,e,i,o){this.url=e,this.method=t.toUpperCase();let r;if(Im(this.method)||o?(this.body=i!==void 0?i:null,r=o):r=i,r){if(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,this.keepalive=!!r.keepalive,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params),r.priority&&(this.priority=r.priority),r.cache&&(this.cache=r.cache),r.credentials&&(this.credentials=r.credentials),typeof r.timeout=="number"){if(r.timeout<1||!Number.isInteger(r.timeout))throw new j(2822,"");this.timeout=r.timeout}r.mode&&(this.mode=r.mode),r.redirect&&(this.redirect=r.redirect),r.integrity&&(this.integrity=r.integrity),r.referrer&&(this.referrer=r.referrer),this.transferCache=r.transferCache}if(this.headers??=new Ot,this.context??=new cr,!this.params)this.params=new nn,this.urlWithParams=e;else{let d=this.params.toString();if(d.length===0)this.urlWithParams=e;else{let u=e.indexOf("?"),m=u===-1?"?":u<e.length-1?"&":"";this.urlWithParams=e+m+d}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||sd(this.body)||ld(this.body)||cd(this.body)||Am(this.body)?this.body:this.body instanceof nn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||cd(this.body)?null:ld(this.body)?this.body.type||null:sd(this.body)?null:typeof this.body=="string"?md:this.body instanceof nn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?fd:null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,o=t.responseType||this.responseType,r=t.keepalive??this.keepalive,d=t.priority||this.priority,u=t.cache||this.cache,m=t.mode||this.mode,v=t.redirect||this.redirect,E=t.credentials||this.credentials,D=t.referrer||this.referrer,V=t.integrity||this.integrity,L=t.transferCache??this.transferCache,B=t.timeout??this.timeout,ye=t.body!==void 0?t.body:this.body,G=t.withCredentials??this.withCredentials,Y=t.reportProgress??this.reportProgress,we=t.headers||this.headers,dt=t.params||this.params,Ae=t.context??this.context;return t.setHeaders!==void 0&&(we=Object.keys(t.setHeaders).reduce((zt,Pn)=>zt.set(Pn,t.setHeaders[Pn]),we)),t.setParams&&(dt=Object.keys(t.setParams).reduce((zt,Pn)=>zt.set(Pn,t.setParams[Pn]),dt)),new n(e,i,ye,{params:dt,headers:we,context:Ae,reportProgress:Y,responseType:o,withCredentials:G,transferCache:L,keepalive:r,cache:u,priority:d,timeout:B,mode:m,redirect:v,credentials:E,referrer:D,integrity:V})}},Nn=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Nn||{}),ci=class{headers;status;statusText;url;ok;type;redirected;constructor(t,e=200,i="OK"){this.headers=t.headers||new Ot,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.redirected=t.redirected,this.ok=this.status>=200&&this.status<300}},dr=class n extends ci{constructor(t={}){super(t)}type=Nn.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Qi=class n extends ci{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Nn.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected})}},si=class extends ci{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},km=200,Fm=204;function Ps(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var K=(()=>{class n{handler;constructor(e){this.handler=e}request(e,i,o={}){let r;if(e instanceof ai)r=e;else{let m;o.headers instanceof Ot?m=o.headers:m=new Ot(o.headers);let v;o.params&&(o.params instanceof nn?v=o.params:v=new nn({fromObject:o.params})),r=new ai(e,i,o.body!==void 0?o.body:null,{headers:m,context:o.context,params:v,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache,keepalive:o.keepalive,priority:o.priority,cache:o.cache,mode:o.mode,redirect:o.redirect,credentials:o.credentials,referrer:o.referrer,integrity:o.integrity,timeout:o.timeout})}let d=U(r).pipe(Mn(m=>this.handler.handle(m)));if(e instanceof ai||o.observe==="events")return d;let u=d.pipe(kt(m=>m instanceof Qi));switch(o.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return u.pipe(ee(m=>{if(m.body!==null&&!(m.body instanceof ArrayBuffer))throw new j(2806,!1);return m.body}));case"blob":return u.pipe(ee(m=>{if(m.body!==null&&!(m.body instanceof Blob))throw new j(2807,!1);return m.body}));case"text":return u.pipe(ee(m=>{if(m.body!==null&&typeof m.body!="string")throw new j(2808,!1);return m.body}));case"json":default:return u.pipe(ee(m=>m.body))}case"response":return u;default:throw new j(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new nn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,o={}){return this.request("PATCH",e,Ps(o,i))}post(e,i,o={}){return this.request("POST",e,Ps(o,i))}put(e,i,o={}){return this.request("PUT",e,Ps(o,i))}static \u0275fac=function(i){return new(i||n)(F(li))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})();var Rm=new W("");function Nm(n,t){return t(n)}function Lm(n,t,e){return(i,o)=>vt(e,()=>t(i,r=>n(r,o)))}var Ds=new W(""),gd=new W(""),hd=new W("",{providedIn:"root",factory:()=>!0});var ur=(()=>{class n extends li{backend;injector;chain=null;pendingTasks=w(Za);contributeToStability=w(hd);constructor(e,i){super(),this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Ds),...this.injector.get(gd,[])]));this.chain=i.reduceRight((o,r)=>Lm(o,r,this.injector),Nm)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,o=>this.backend.handle(o)).pipe(Xn(i))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(F(Xi),F(un))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})();var Vm=/^\)\]\}',?\n/,jm=RegExp(`^${pd}:`,"m");function zm(n){return"responseURL"in n&&n.responseURL?n.responseURL:jm.test(n.getAllResponseHeaders())?n.getResponseHeader(pd):null}var Ms=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new j(-2800,!1);let i=this.xhrFactory;return U(null).pipe(at(()=>new Kn(r=>{let d=i.build();if(d.open(e.method,e.urlWithParams),e.withCredentials&&(d.withCredentials=!0),e.headers.forEach((G,Y)=>d.setRequestHeader(G,Y.join(","))),e.headers.has(ud)||d.setRequestHeader(ud,Tm),!e.headers.has(dd)){let G=e.detectContentTypeHeader();G!==null&&d.setRequestHeader(dd,G)}if(e.timeout&&(d.timeout=e.timeout),e.responseType){let G=e.responseType.toLowerCase();d.responseType=G!=="json"?G:"text"}let u=e.serializeBody(),m=null,v=()=>{if(m!==null)return m;let G=d.statusText||"OK",Y=new Ot(d.getAllResponseHeaders()),we=zm(d)||e.url;return m=new dr({headers:Y,status:d.status,statusText:G,url:we}),m},E=()=>{let{headers:G,status:Y,statusText:we,url:dt}=v(),Ae=null;Y!==Fm&&(Ae=typeof d.response>"u"?d.responseText:d.response),Y===0&&(Y=Ae?km:0);let zt=Y>=200&&Y<300;if(e.responseType==="json"&&typeof Ae=="string"){let Pn=Ae;Ae=Ae.replace(Vm,"");try{Ae=Ae!==""?JSON.parse(Ae):null}catch(kp){Ae=Pn,zt&&(zt=!1,Ae={error:kp,text:Ae})}}zt?(r.next(new Qi({body:Ae,headers:G,status:Y,statusText:we,url:dt||void 0})),r.complete()):r.error(new si({error:Ae,headers:G,status:Y,statusText:we,url:dt||void 0}))},D=G=>{let{url:Y}=v(),we=new si({error:G,status:d.status||0,statusText:d.statusText||"Unknown Error",url:Y||void 0});r.error(we)},V=D;e.timeout&&(V=G=>{let{url:Y}=v(),we=new si({error:new DOMException("Request timed out","TimeoutError"),status:d.status||0,statusText:d.statusText||"Request timeout",url:Y||void 0});r.error(we)});let L=!1,B=G=>{L||(r.next(v()),L=!0);let Y={type:Nn.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(Y.total=G.total),e.responseType==="text"&&d.responseText&&(Y.partialText=d.responseText),r.next(Y)},ye=G=>{let Y={type:Nn.UploadProgress,loaded:G.loaded};G.lengthComputable&&(Y.total=G.total),r.next(Y)};return d.addEventListener("load",E),d.addEventListener("error",D),d.addEventListener("timeout",V),d.addEventListener("abort",D),e.reportProgress&&(d.addEventListener("progress",B),u!==null&&d.upload&&d.upload.addEventListener("progress",ye)),d.send(u),r.next({type:Nn.Sent}),()=>{d.removeEventListener("error",D),d.removeEventListener("abort",D),d.removeEventListener("load",E),d.removeEventListener("timeout",V),e.reportProgress&&(d.removeEventListener("progress",B),u!==null&&d.upload&&d.upload.removeEventListener("progress",ye)),d.readyState!==d.DONE&&d.abort()}})))}static \u0275fac=function(i){return new(i||n)(F(Rn))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),vd=new W(""),Um="XSRF-TOKEN",Bm=new W("",{providedIn:"root",factory:()=>Um}),Gm="X-XSRF-TOKEN",$m=new W("",{providedIn:"root",factory:()=>Gm}),eo=class{},Hm=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,i){this.doc=e,this.cookieName=i}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Wi(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||n)(F(me),F(Bm))};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})();function Wm(n,t){let e=n.url.toLowerCase();if(!w(vd)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=w(eo).getToken(),o=w($m);return i!=null&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,i)})),t(n)}var Os=(function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n})(Os||{});function qm(n,t){return{\u0275kind:n,\u0275providers:t}}function Is(...n){let t=[K,Ms,ur,{provide:li,useExisting:ur},{provide:Xi,useFactory:()=>w(Rm,{optional:!0})??w(Ms)},{provide:Ds,useValue:Wm,multi:!0},{provide:vd,useValue:!0},{provide:eo,useClass:Hm}];for(let e of n)t.push(...e.\u0275providers);return Dn(t)}function As(n){return qm(Os.Interceptors,n.map(t=>({provide:Ds,useValue:t,multi:!0})))}var bd=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(F(me))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ts=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:function(i){let o=null;return i?o=new(i||n):o=F(Km),o},providedIn:"root"})}return n})(),Km=(()=>{class n extends Ts{_doc;constructor(e){super(),this._doc=e}sanitize(e,i){if(i==null)return null;switch(e){case An.NONE:return i;case An.HTML:return ei(i,"HTML")?In(i):rc(this._doc,String(i)).toString();case An.STYLE:return ei(i,"Style")?In(i):i;case An.SCRIPT:if(ei(i,"Script"))return In(i);throw new j(5200,!1);case An.URL:return ei(i,"URL")?In(i):oc(String(i));case An.RESOURCE_URL:if(ei(i,"ResourceURL"))return In(i);throw new j(5201,!1);default:throw new j(5202,!1)}}bypassSecurityTrustHtml(e){return Ql(e)}bypassSecurityTrustStyle(e){return ec(e)}bypassSecurityTrustScript(e){return tc(e)}bypassSecurityTrustUrl(e){return nc(e)}bypassSecurityTrustResourceUrl(e){return ic(e)}static \u0275fac=function(i){return new(i||n)(F(me))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var q="primary",ho=Symbol("RouteTitle"),Ls=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function jn(n){return new Ls(n)}function Md(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let o={};for(let r=0;r<i.length;r++){let d=i[r],u=n[r];if(d[0]===":")o[d.substring(1)]=u;else if(d!==u.path)return null}return{consumed:n.slice(0,i.length),posParams:o}}function Jm(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!$t(n[e],t[e]))return!1;return!0}function $t(n,t){let e=n?Vs(n):void 0,i=t?Vs(t):void 0;if(!e||!i||e.length!=i.length)return!1;let o;for(let r=0;r<e.length;r++)if(o=e[r],!Dd(n[o],t[o]))return!1;return!0}function Vs(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Dd(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((o,r)=>i[r]===o)}else return n===t}function Od(n){return n.length>0?n[n.length-1]:null}function rn(n){return Vl(n)?n:Ni(n)?ut(Promise.resolve(n)):U(n)}var Xm={exact:Ad,subset:Td},Id={exact:Qm,subset:ef,ignored:()=>!0};function xd(n,t,e){return Xm[e.paths](n.root,t.root,e.matrixParams)&&Id[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function Qm(n,t){return $t(n,t)}function Ad(n,t,e){if(!Ln(n.segments,t.segments)||!fr(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!Ad(n.children[i],t.children[i],e))return!1;return!0}function ef(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Dd(n[e],t[e]))}function Td(n,t,e){return kd(n,t,t.segments,e)}function kd(n,t,e,i){if(n.segments.length>e.length){let o=n.segments.slice(0,e.length);return!(!Ln(o,e)||t.hasChildren()||!fr(o,e,i))}else if(n.segments.length===e.length){if(!Ln(n.segments,e)||!fr(n.segments,e,i))return!1;for(let o in t.children)if(!n.children[o]||!Td(n.children[o],t.children[o],i))return!1;return!0}else{let o=e.slice(0,n.segments.length),r=e.slice(n.segments.length);return!Ln(n.segments,o)||!fr(n.segments,o,i)||!n.children[q]?!1:kd(n.children[q],t,r,i)}}function fr(n,t,e){return t.every((i,o)=>Id[e](n[o].parameters,i.parameters))}var Wt=class{root;queryParams;fragment;_queryParamMap;constructor(t=new fe([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=jn(this.queryParams),this._queryParamMap}toString(){return of.serialize(this)}},fe=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gr(this)}},hn=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=jn(this.parameters),this._parameterMap}toString(){return Rd(this)}};function tf(n,t){return Ln(n,t)&&n.every((e,i)=>$t(e.parameters,t[i].parameters))}function Ln(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function nf(n,t){let e=[];return Object.entries(n.children).forEach(([i,o])=>{i===q&&(e=e.concat(t(o,i)))}),Object.entries(n.children).forEach(([i,o])=>{i!==q&&(e=e.concat(t(o,i)))}),e}var vo=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>new zn,providedIn:"root"})}return n})(),zn=class{parse(t){let e=new zs(t);return new Wt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${to(t.root,!0)}`,i=sf(t.queryParams),o=typeof t.fragment=="string"?`#${rf(t.fragment)}`:"";return`${e}${i}${o}`}},of=new zn;function gr(n){return n.segments.map(t=>Rd(t)).join("/")}function to(n,t){if(!n.hasChildren())return gr(n);if(t){let e=n.children[q]?to(n.children[q],!1):"",i=[];return Object.entries(n.children).forEach(([o,r])=>{o!==q&&i.push(`${o}:${to(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=nf(n,(i,o)=>o===q?[to(n.children[q],!1)]:[`${o}:${to(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[q]!=null?`${gr(n)}/${e[0]}`:`${gr(n)}/(${e.join("//")})`}}function Fd(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pr(n){return Fd(n).replace(/%3B/gi,";")}function rf(n){return encodeURI(n)}function js(n){return Fd(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hr(n){return decodeURIComponent(n)}function Cd(n){return hr(n.replace(/\+/g,"%20"))}function Rd(n){return`${js(n.path)}${af(n.parameters)}`}function af(n){return Object.entries(n).map(([t,e])=>`;${js(t)}=${js(e)}`).join("")}function sf(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(o=>`${pr(e)}=${pr(o)}`).join("&"):`${pr(e)}=${pr(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var lf=/^[^\/()?;#]+/;function ks(n){let t=n.match(lf);return t?t[0]:""}var cf=/^[^\/()?;=#]+/;function df(n){let t=n.match(cf);return t?t[0]:""}var uf=/^[^=?&#]+/;function pf(n){let t=n.match(uf);return t?t[0]:""}var mf=/^[^&#]+/;function ff(n){let t=n.match(mf);return t?t[0]:""}var zs=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[q]=new fe(t,e)),i}parseSegment(){let t=ks(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(t),new hn(hr(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=df(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=ks(this.remaining);o&&(i=o,this.capture(i))}t[hr(e)]=hr(i)}parseQueryParam(t){let e=pf(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let d=ff(this.remaining);d&&(i=d,this.capture(i))}let o=Cd(e),r=Cd(i);if(t.hasOwnProperty(o)){let d=t[o];Array.isArray(d)||(d=[d],t[o]=d),d.push(r)}else t[o]=r}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=ks(this.remaining),o=this.remaining[i.length];if(o!=="/"&&o!==")"&&o!==";")throw new j(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=q);let d=this.parseChildren();e[r]=Object.keys(d).length===1?d[q]:new fe([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new j(4011,!1)}};function Nd(n){return n.segments.length>0?new fe([],{[q]:n}):n}function Ld(n){let t={};for(let[i,o]of Object.entries(n.children)){let r=Ld(o);if(i===q&&r.segments.length===0&&r.hasChildren())for(let[d,u]of Object.entries(r.children))t[d]=u;else(r.segments.length>0||r.hasChildren())&&(t[i]=r)}let e=new fe(n.segments,t);return gf(e)}function gf(n){if(n.numberOfChildren===1&&n.children[q]){let t=n.children[q];return new fe(n.segments.concat(t.segments),t.children)}return n}function vn(n){return n instanceof Wt}function Vd(n,t,e=null,i=null){let o=jd(n);return zd(o,t,e,i)}function jd(n){let t;function e(r){let d={};for(let m of r.children){let v=e(m);d[m.outlet]=v}let u=new fe(r.url,d);return r===n&&(t=u),u}let i=e(n.root),o=Nd(i);return t??o}function zd(n,t,e,i){let o=n;for(;o.parent;)o=o.parent;if(t.length===0)return Fs(o,o,o,e,i);let r=hf(t);if(r.toRoot())return Fs(o,o,new fe([],{}),e,i);let d=vf(r,o,n),u=d.processChildren?io(d.segmentGroup,d.index,r.commands):Bd(d.segmentGroup,d.index,r.commands);return Fs(o,d.segmentGroup,u,e,i)}function vr(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ao(n){return typeof n=="object"&&n!=null&&n.outlets}function Fs(n,t,e,i,o){let r={};i&&Object.entries(i).forEach(([m,v])=>{r[m]=Array.isArray(v)?v.map(E=>`${E}`):`${v}`});let d;n===t?d=e:d=Ud(n,t,e);let u=Nd(Ld(d));return new Wt(u,r,o)}function Ud(n,t,e){let i={};return Object.entries(n.children).forEach(([o,r])=>{r===t?i[o]=e:i[o]=Ud(r,t,e)}),new fe(n.segments,i)}var br=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&vr(i[0]))throw new j(4003,!1);let o=i.find(ao);if(o&&o!==Od(i))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function hf(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new br(!0,0,n);let t=0,e=!1,i=n.reduce((o,r,d)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let u={};return Object.entries(r.outlets).forEach(([m,v])=>{u[m]=typeof v=="string"?v.split("/"):v}),[...o,{outlets:u}]}if(r.segmentPath)return[...o,r.segmentPath]}return typeof r!="string"?[...o,r]:d===0?(r.split("/").forEach((u,m)=>{m==0&&u==="."||(m==0&&u===""?e=!0:u===".."?t++:u!=""&&o.push(u))}),o):[...o,r]},[]);return new br(e,t,i)}var pi=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function vf(n,t,e){if(n.isAbsolute)return new pi(t,!0,0);if(!e)return new pi(t,!1,NaN);if(e.parent===null)return new pi(e,!0,0);let i=vr(n.commands[0])?0:1,o=e.segments.length-1+i;return bf(e,o,n.numberOfDoubleDots)}function bf(n,t,e){let i=n,o=t,r=e;for(;r>o;){if(r-=o,i=i.parent,!i)throw new j(4005,!1);o=i.segments.length}return new pi(i,!1,o-r)}function _f(n){return ao(n[0])?n[0].outlets:{[q]:n}}function Bd(n,t,e){if(n??=new fe([],{}),n.segments.length===0&&n.hasChildren())return io(n,t,e);let i=xf(n,t,e),o=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let r=new fe(n.segments.slice(0,i.pathIndex),{});return r.children[q]=new fe(n.segments.slice(i.pathIndex),n.children),io(r,0,o)}else return i.match&&o.length===0?new fe(n.segments,{}):i.match&&!n.hasChildren()?Us(n,t,e):i.match?io(n,0,o):Us(n,t,e)}function io(n,t,e){if(e.length===0)return new fe(n.segments,{});{let i=_f(e),o={};if(Object.keys(i).some(r=>r!==q)&&n.children[q]&&n.numberOfChildren===1&&n.children[q].segments.length===0){let r=io(n.children[q],t,e);return new fe(n.segments,r.children)}return Object.entries(i).forEach(([r,d])=>{typeof d=="string"&&(d=[d]),d!==null&&(o[r]=Bd(n.children[r],t,d))}),Object.entries(n.children).forEach(([r,d])=>{i[r]===void 0&&(o[r]=d)}),new fe(n.segments,o)}}function xf(n,t,e){let i=0,o=t,r={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(i>=e.length)return r;let d=n.segments[o],u=e[i];if(ao(u))break;let m=`${u}`,v=i<e.length-1?e[i+1]:null;if(o>0&&m===void 0)break;if(m&&v&&typeof v=="object"&&v.outlets===void 0){if(!wd(m,v,d))return r;i+=2}else{if(!wd(m,{},d))return r;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}function Us(n,t,e){let i=n.segments.slice(0,t),o=0;for(;o<e.length;){let r=e[o];if(ao(r)){let m=Cf(r.outlets);return new fe(i,m)}if(o===0&&vr(e[0])){let m=n.segments[t];i.push(new hn(m.path,yd(e[0]))),o++;continue}let d=ao(r)?r.outlets[q]:`${r}`,u=o<e.length-1?e[o+1]:null;d&&u&&vr(u)?(i.push(new hn(d,yd(u))),o+=2):(i.push(new hn(d,{})),o++)}return new fe(i,{})}function Cf(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=Us(new fe([],{}),0,i))}),t}function yd(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function wd(n,t,e){return n==e.path&&$t(t,e.parameters)}var oo="imperative",je=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(je||{}),yt=class{id;url;constructor(t,e){this.id=t,this.url=e}},Un=class extends yt{type=je.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",o=null){super(t,e),this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},It=class extends yt{urlAfterRedirects;type=je.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},lt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(lt||{}),so=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(so||{}),Ht=class extends yt{reason;code;type=je.NavigationCancel;constructor(t,e,i,o){super(t,e),this.reason=i,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},on=class extends yt{reason;code;type=je.NavigationSkipped;constructor(t,e,i,o){super(t,e),this.reason=i,this.code=o}},fi=class extends yt{error;target;type=je.NavigationError;constructor(t,e,i,o){super(t,e),this.error=i,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},lo=class extends yt{urlAfterRedirects;state;type=je.RoutesRecognized;constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_r=class extends yt{urlAfterRedirects;state;type=je.GuardsCheckStart;constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xr=class extends yt{urlAfterRedirects;state;shouldActivate;type=je.GuardsCheckEnd;constructor(t,e,i,o,r){super(t,e),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Cr=class extends yt{urlAfterRedirects;state;type=je.ResolveStart;constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yr=class extends yt{urlAfterRedirects;state;type=je.ResolveEnd;constructor(t,e,i,o){super(t,e),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wr=class{route;type=je.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Er=class{route;type=je.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Sr=class{snapshot;type=je.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pr=class{snapshot;type=je.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mr=class{snapshot;type=je.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dr=class{snapshot;type=je.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var co=class{},gi=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function yf(n){return!(n instanceof co)&&!(n instanceof gi)}function wf(n,t){return n.providers&&!n._injector&&(n._injector=ns(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Vt(n){return n.outlet||q}function Ef(n,t){let e=n.filter(i=>Vt(i)===t);return e.push(...n.filter(i=>Vt(i)!==t)),e}function bi(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Or=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return bi(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new _i(this.rootInjector)}},_i=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let o=this.getOrCreateContext(e);o.outlet=i,this.contexts.set(e,o)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Or(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(F(un))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ir=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Bs(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=Bs(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Gs(t,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return Gs(t,this._root).map(e=>e.value)}};function Bs(n,t){if(n===t.value)return t;for(let e of t.children){let i=Bs(n,e);if(i)return i}return null}function Gs(n,t){if(n===t.value)return[t];for(let e of t.children){let i=Gs(n,e);if(i.length)return i.unshift(t),i}return[]}var Ct=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function ui(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var uo=class extends Ir{snapshot;constructor(t,e){super(t),this.snapshot=e,Js(this,t)}toString(){return this.snapshot.toString()}};function Gd(n){let t=Sf(n),e=new $e([new hn("",{})]),i=new $e({}),o=new $e({}),r=new $e({}),d=new $e(""),u=new ct(e,i,r,d,o,q,n,t.root);return u.snapshot=t.root,new uo(new Ct(u,[]),t)}function Sf(n){let t={},e={},i={},r=new Vn([],t,i,"",e,q,n,null,{});return new po("",new Ct(r,[]))}var ct=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,o,r,d,u,m){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=o,this.dataSubject=r,this.outlet=d,this.component=u,this._futureSnapshot=m,this.title=this.dataSubject?.pipe(ee(v=>v[ho]))??U(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=o,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(t=>jn(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(t=>jn(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ar(n,t,e="emptyOnly"){let i,{routeConfig:o}=n;return t!==null&&(e==="always"||o?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:O(O({},t.params),n.params),data:O(O({},t.data),n.data),resolve:O(O(O(O({},n.data),t.data),o?.data),n._resolvedData)}:i={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},o&&Hd(o)&&(i.resolve[ho]=o.title),i}var Vn=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ho]}constructor(t,e,i,o,r,d,u,m,v){this.url=t,this.params=e,this.queryParams=i,this.fragment=o,this.data=r,this.outlet=d,this.component=u,this.routeConfig=m,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=jn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=jn(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},po=class extends Ir{url;constructor(t,e){super(e),this.url=t,Js(this,e)}toString(){return $d(this._root)}};function Js(n,t){t.value._routerState=n,t.children.forEach(e=>Js(n,e))}function $d(n){let t=n.children.length>0?` { ${n.children.map($d).join(", ")} } `:"";return`${n.value}${t}`}function Rs(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,$t(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),$t(t.params,e.params)||n.paramsSubject.next(e.params),Jm(t.url,e.url)||n.urlSubject.next(e.url),$t(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $s(n,t){let e=$t(n.params,t.params)&&tf(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||$s(n.parent,t.parent))}function Hd(n){return typeof n.title=="string"||n.title===null}var Wd=new W(""),an=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=q;activateEvents=new ue;deactivateEvents=new ue;attachEvents=new ue;detachEvents=new ue;routerOutletData=bc(void 0);parentContexts=w(_i);location=w(ti);changeDetector=w(mn);inputBinder=w(Rr,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:o}=e.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=e;let o=this.location,d=e.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,m=new Hs(e,u,o.injector,this.routerOutletData);this.activated=o.createComponent(d,{index:o.length,injector:m,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=se({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Et]})}return n})(),Hs=class{route;childContexts;parent;outletData;constructor(t,e,i,o){this.route=t,this.childContexts=e,this.parent=i,this.outletData=o}get(t,e){return t===ct?this.route:t===_i?this.childContexts:t===Wd?this.outletData:this.parent.get(t,e)}},Rr=new W("");var Xs=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=M({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,o){i&1&&b(0,"router-outlet")},dependencies:[an],encapsulation:2})}return n})();function Qs(n){let t=n.children&&n.children.map(Qs),e=t?ae(O({},n),{children:t}):O({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==q&&(e.component=Xs),e}function Pf(n,t,e){let i=mo(n,t._root,e?e._root:void 0);return new uo(i,t)}function mo(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let o=Mf(n,t,e);return new Ct(i,o)}else{if(n.shouldAttach(t.value)){let r=n.retrieve(t.value);if(r!==null){let d=r.route;return d.value._futureSnapshot=t.value,d.children=t.children.map(u=>mo(n,u)),d}}let i=Df(t.value),o=t.children.map(r=>mo(n,r));return new Ct(i,o)}}function Mf(n,t,e){return t.children.map(i=>{for(let o of e.children)if(n.shouldReuseRoute(i.value,o.value.snapshot))return mo(n,i,o);return mo(n,i)})}function Df(n){return new ct(new $e(n.url),new $e(n.params),new $e(n.queryParams),new $e(n.fragment),new $e(n.data),n.outlet,n.component,n)}var hi=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},qd="ngNavigationCancelingError";function Tr(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=vn(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=Yd(!1,lt.Redirect);return o.url=e,o.navigationBehaviorOptions=i,o}function Yd(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[qd]=!0,e.cancellationCode=t,e}function Of(n){return Zd(n)&&vn(n.url)}function Zd(n){return!!n&&n[qd]}var If=(n,t,e,i)=>ee(o=>(new Ws(t,o.targetRouterState,o.currentRouterState,e,i).activate(n),o)),Ws=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,o,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=o,this.inputBindingEnabled=r}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Rs(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let o=ui(e);t.children.forEach(r=>{let d=r.value.outlet;this.deactivateRoutes(r,o[d],i),delete o[d]}),Object.values(o).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(t,e,i){let o=t.value,r=e?e.value:null;if(o===r)if(o.component){let d=i.getContext(o.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,i);else r&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),o=i&&t.value.component?i.children:e,r=ui(t);for(let d of Object.values(r))this.deactivateRouteAndItsChildren(d,o);if(i&&i.outlet){let d=i.outlet.detach(),u=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:d,route:t,contexts:u})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),o=i&&t.value.component?i.children:e,r=ui(t);for(let d of Object.values(r))this.deactivateRouteAndItsChildren(d,o);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let o=ui(e);t.children.forEach(r=>{this.activateRoutes(r,o[r.value.outlet],i),this.forwardEvent(new Dr(r.value.snapshot))}),t.children.length&&this.forwardEvent(new Pr(t.value.snapshot))}activateRoutes(t,e,i){let o=t.value,r=e?e.value:null;if(Rs(o),o===r)if(o.component){let d=i.getOrCreateContext(o.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,i);else if(o.component){let d=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let u=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(u.contexts),d.attachRef=u.componentRef,d.route=u.route.value,d.outlet&&d.outlet.attach(u.componentRef,u.route.value),Rs(u.route.value),this.activateChildRoutes(t,null,d.children)}else d.attachRef=null,d.route=o,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(t,null,d.children)}else this.activateChildRoutes(t,null,i)}},kr=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},mi=class{component;route;constructor(t,e){this.component=t,this.route=e}};function Af(n,t,e){let i=n._root,o=t?t._root:null;return no(i,o,e,[i.value])}function Tf(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function xi(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!Wl(n)?n:t.get(n):i}function no(n,t,e,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let r=ui(t);return n.children.forEach(d=>{kf(d,r[d.value.outlet],e,i.concat([d.value]),o),delete r[d.value.outlet]}),Object.entries(r).forEach(([d,u])=>ro(u,e.getContext(d),o)),o}function kf(n,t,e,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let r=n.value,d=t?t.value:null,u=e?e.getContext(n.value.outlet):null;if(d&&r.routeConfig===d.routeConfig){let m=Ff(d,r,r.routeConfig.runGuardsAndResolvers);m?o.canActivateChecks.push(new kr(i)):(r.data=d.data,r._resolvedData=d._resolvedData),r.component?no(n,t,u?u.children:null,i,o):no(n,t,e,i,o),m&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new mi(u.outlet.component,d))}else d&&ro(t,u,o),o.canActivateChecks.push(new kr(i)),r.component?no(n,null,u?u.children:null,i,o):no(n,null,e,i,o);return o}function Ff(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Ln(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ln(n.url,t.url)||!$t(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$s(n,t)||!$t(n.queryParams,t.queryParams);case"paramsChange":default:return!$s(n,t)}}function ro(n,t,e){let i=ui(n),o=n.value;Object.entries(i).forEach(([r,d])=>{o.component?t?ro(d,t.children.getContext(r),e):ro(d,null,e):ro(d,t,e)}),o.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new mi(t.outlet.component,o)):e.canDeactivateChecks.push(new mi(null,o)):e.canDeactivateChecks.push(new mi(null,o))}function bo(n){return typeof n=="function"}function Rf(n){return typeof n=="boolean"}function Nf(n){return n&&bo(n.canLoad)}function Lf(n){return n&&bo(n.canActivate)}function Vf(n){return n&&bo(n.canActivateChild)}function jf(n){return n&&bo(n.canDeactivate)}function zf(n){return n&&bo(n.canMatch)}function Kd(n){return n instanceof jl||n?.name==="EmptyError"}var mr=Symbol("INITIAL_VALUE");function vi(){return at(n=>$a(n.map(t=>t.pipe(cn(1),Hl(mr)))).pipe(ee(t=>{for(let e of t)if(e!==!0){if(e===mr)return mr;if(e===!1||Uf(e))return e}return!0}),kt(t=>t!==mr),cn(1)))}function Uf(n){return vn(n)||n instanceof hi}function Bf(n,t){return wt(e=>{let{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:r,canDeactivateChecks:d}}=e;return d.length===0&&r.length===0?U(ae(O({},e),{guardsResult:!0})):Gf(d,i,o,n).pipe(wt(u=>u&&Rf(u)?$f(i,r,n,t):U(u)),ee(u=>ae(O({},e),{guardsResult:u})))})}function Gf(n,t,e,i){return ut(n).pipe(wt(o=>Zf(o.component,o.route,e,t,i)),dn(o=>o!==!0,!0))}function $f(n,t,e,i){return ut(t).pipe(Mn(o=>zl(Wf(o.route.parent,i),Hf(o.route,i),Yf(n,o.path,e),qf(n,o.route,e))),dn(o=>o!==!0,!0))}function Hf(n,t){return n!==null&&t&&t(new Mr(n)),U(!0)}function Wf(n,t){return n!==null&&t&&t(new Sr(n)),U(!0)}function qf(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return U(!0);let o=i.map(r=>Bo(()=>{let d=bi(t)??e,u=xi(r,d),m=Lf(u)?u.canActivate(t,n):vt(d,()=>u(t,n));return rn(m).pipe(dn())}));return U(o).pipe(vi())}function Yf(n,t,e){let i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(d=>Tf(d)).filter(d=>d!==null).map(d=>Bo(()=>{let u=d.guards.map(m=>{let v=bi(d.node)??e,E=xi(m,v),D=Vf(E)?E.canActivateChild(i,n):vt(v,()=>E(i,n));return rn(D).pipe(dn())});return U(u).pipe(vi())}));return U(r).pipe(vi())}function Zf(n,t,e,i,o){let r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||r.length===0)return U(!0);let d=r.map(u=>{let m=bi(t)??o,v=xi(u,m),E=jf(v)?v.canDeactivate(n,t,e,i):vt(m,()=>v(n,t,e,i));return rn(E).pipe(dn())});return U(d).pipe(vi())}function Kf(n,t,e,i){let o=t.canLoad;if(o===void 0||o.length===0)return U(!0);let r=o.map(d=>{let u=xi(d,n),m=Nf(u)?u.canLoad(t,e):vt(n,()=>u(t,e));return rn(m)});return U(r).pipe(vi(),Jd(i))}function Jd(n){return Nl(He(t=>{if(typeof t!="boolean")throw Tr(n,t)}),ee(t=>t===!0))}function Jf(n,t,e,i){let o=t.canMatch;if(!o||o.length===0)return U(!0);let r=o.map(d=>{let u=xi(d,n),m=zf(u)?u.canMatch(t,e):vt(n,()=>u(t,e));return rn(m)});return U(r).pipe(vi(),Jd(i))}var fo=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},go=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function di(n){return Ti(new fo(n))}function Xf(n){return Ti(new j(4e3,!1))}function Qf(n){return Ti(Yd(!1,lt.GuardRejected))}var qs=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],o=e.root;for(;;){if(i=i.concat(o.segments),o.numberOfChildren===0)return U(i);if(o.numberOfChildren>1||!o.children[q])return Xf(`${t.redirectTo}`);o=o.children[q]}}applyRedirectCommands(t,e,i,o,r){return e0(e,o,r).pipe(ee(d=>{if(d instanceof Wt)throw new go(d);let u=this.applyRedirectCreateUrlTree(d,this.urlSerializer.parse(d),t,i);if(d[0]==="/")throw new go(u);return u}))}applyRedirectCreateUrlTree(t,e,i,o){let r=this.createSegmentGroup(t,e.root,i,o);return new Wt(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([o,r])=>{if(typeof r=="string"&&r[0]===":"){let u=r.substring(1);i[o]=e[u]}else i[o]=r}),i}createSegmentGroup(t,e,i,o){let r=this.createSegments(t,e.segments,i,o),d={};return Object.entries(e.children).forEach(([u,m])=>{d[u]=this.createSegmentGroup(t,m,i,o)}),new fe(r,d)}createSegments(t,e,i,o){return e.map(r=>r.path[0]===":"?this.findPosParam(t,r,o):this.findOrReturn(r,i))}findPosParam(t,e,i){let o=i[e.path.substring(1)];if(!o)throw new j(4001,!1);return o}findOrReturn(t,e){let i=0;for(let o of e){if(o.path===t.path)return e.splice(i),o;i++}return t}};function e0(n,t,e){if(typeof n=="string")return U(n);let i=n,{queryParams:o,fragment:r,routeConfig:d,url:u,outlet:m,params:v,data:E,title:D}=t;return rn(vt(e,()=>i({params:v,data:E,queryParams:o,fragment:r,routeConfig:d,url:u,outlet:m,title:D})))}var Ys={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function t0(n,t,e,i,o){let r=Xd(n,t,e);return r.matched?(i=wf(t,i),Jf(i,t,e,o).pipe(ee(d=>d===!0?r:O({},Ys)))):U(r)}function Xd(n,t,e){if(t.path==="**")return n0(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?O({},Ys):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let o=(t.matcher||Md)(e,n,t);if(!o)return O({},Ys);let r={};Object.entries(o.posParams??{}).forEach(([u,m])=>{r[u]=m.path});let d=o.consumed.length>0?O(O({},r),o.consumed[o.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function n0(n){return{matched:!0,parameters:n.length>0?Od(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Ed(n,t,e,i){return e.length>0&&r0(n,e,i)?{segmentGroup:new fe(t,o0(i,new fe(e,n.children))),slicedSegments:[]}:e.length===0&&a0(n,e,i)?{segmentGroup:new fe(n.segments,i0(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new fe(n.segments,n.children),slicedSegments:e}}function i0(n,t,e,i){let o={};for(let r of e)if(Nr(n,t,r)&&!i[Vt(r)]){let d=new fe([],{});o[Vt(r)]=d}return O(O({},i),o)}function o0(n,t){let e={};e[q]=t;for(let i of n)if(i.path===""&&Vt(i)!==q){let o=new fe([],{});e[Vt(i)]=o}return e}function r0(n,t,e){return e.some(i=>Nr(n,t,i)&&Vt(i)!==q)}function a0(n,t,e){return e.some(i=>Nr(n,t,i))}function Nr(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function s0(n,t,e){return t.length===0&&!n.children[e]}var Zs=class{};function l0(n,t,e,i,o,r,d="emptyOnly"){return new Ks(n,t,e,i,o,d,r).recognize()}var c0=31,Ks=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,o,r,d,u){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=o,this.urlTree=r,this.paramsInheritanceStrategy=d,this.urlSerializer=u,this.applyRedirects=new qs(this.urlSerializer,this.urlTree)}noMatchError(t){return new j(4002,`'${t.segmentGroup}'`)}recognize(){let t=Ed(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ee(({children:e,rootSnapshot:i})=>{let o=new Ct(i,e),r=new po("",o),d=Vd(i,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(d),{state:r,tree:d}}))}match(t){let e=new Vn([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),q,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,q,e).pipe(ee(i=>({children:i,rootSnapshot:e})),Jn(i=>{if(i instanceof go)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof fo?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,o,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,r):this.processSegment(t,e,i,i.segments,o,!0,r).pipe(ee(d=>d instanceof Ct?[d]:[]))}processChildren(t,e,i,o){let r=[];for(let d of Object.keys(i.children))d==="primary"?r.unshift(d):r.push(d);return ut(r).pipe(Mn(d=>{let u=i.children[d],m=Ef(e,d);return this.processSegmentGroup(t,m,u,d,o)}),$l((d,u)=>(d.push(...u),d)),Wa(null),Gl(),wt(d=>{if(d===null)return di(i);let u=Qd(d);return d0(u),U(u)}))}processSegment(t,e,i,o,r,d,u){return ut(e).pipe(Mn(m=>this.processSegmentAgainstRoute(m._injector??t,e,m,i,o,r,d,u).pipe(Jn(v=>{if(v instanceof fo)return U(null);throw v}))),dn(m=>!!m),Jn(m=>{if(Kd(m))return s0(i,o,r)?U(new Zs):di(i);throw m}))}processSegmentAgainstRoute(t,e,i,o,r,d,u,m){return Vt(i)!==d&&(d===q||!Nr(o,r,i))?di(o):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,o,i,r,d,m):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(t,o,e,i,r,d,m):di(o)}expandSegmentAgainstRouteUsingRedirect(t,e,i,o,r,d,u){let{matched:m,parameters:v,consumedSegments:E,positionalParamSegments:D,remainingSegments:V}=Xd(e,o,r);if(!m)return di(e);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>c0&&(this.allowRedirects=!1));let L=new Vn(r,v,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Sd(o),Vt(o),o.component??o._loadedComponent??null,o,Pd(o)),B=Ar(L,u,this.paramsInheritanceStrategy);return L.params=Object.freeze(B.params),L.data=Object.freeze(B.data),this.applyRedirects.applyRedirectCommands(E,o.redirectTo,D,L,t).pipe(at(G=>this.applyRedirects.lineralizeSegments(o,G)),wt(G=>this.processSegment(t,i,e,G.concat(V),d,!1,u)))}matchSegmentAgainstRoute(t,e,i,o,r,d){let u=t0(e,i,o,t,this.urlSerializer);return i.path==="**"&&(e.children={}),u.pipe(at(m=>m.matched?(t=i._injector??t,this.getChildConfig(t,i,o).pipe(at(({routes:v})=>{let E=i._loadedInjector??t,{parameters:D,consumedSegments:V,remainingSegments:L}=m,B=new Vn(V,D,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Sd(i),Vt(i),i.component??i._loadedComponent??null,i,Pd(i)),ye=Ar(B,d,this.paramsInheritanceStrategy);B.params=Object.freeze(ye.params),B.data=Object.freeze(ye.data);let{segmentGroup:G,slicedSegments:Y}=Ed(e,V,L,v);if(Y.length===0&&G.hasChildren())return this.processChildren(E,v,G,B).pipe(ee(dt=>new Ct(B,dt)));if(v.length===0&&Y.length===0)return U(new Ct(B,[]));let we=Vt(i)===r;return this.processSegment(E,v,G,Y,we?q:r,!0,B).pipe(ee(dt=>new Ct(B,dt instanceof Ct?[dt]:[])))}))):di(e)))}getChildConfig(t,e,i){return e.children?U({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?U({routes:e._loadedRoutes,injector:e._loadedInjector}):Kf(t,e,i,this.urlSerializer).pipe(wt(o=>o?this.configLoader.loadChildren(t,e).pipe(He(r=>{e._loadedRoutes=r.routes,e._loadedInjector=r.injector})):Qf(e))):U({routes:[],injector:t})}};function d0(n){n.sort((t,e)=>t.value.outlet===q?-1:e.value.outlet===q?1:t.value.outlet.localeCompare(e.value.outlet))}function u0(n){let t=n.value.routeConfig;return t&&t.path===""}function Qd(n){let t=[],e=new Set;for(let i of n){if(!u0(i)){t.push(i);continue}let o=t.find(r=>i.value.routeConfig===r.value.routeConfig);o!==void 0?(o.children.push(...i.children),e.add(o)):t.push(i)}for(let i of e){let o=Qd(i.children);t.push(new Ct(i.value,o))}return t.filter(i=>!e.has(i))}function Sd(n){return n.data||{}}function Pd(n){return n.resolve||{}}function p0(n,t,e,i,o,r){return wt(d=>l0(n,t,e,i,d.extractedUrl,o,r).pipe(ee(({state:u,tree:m})=>ae(O({},d),{targetSnapshot:u,urlAfterRedirects:m}))))}function m0(n,t){return wt(e=>{let{targetSnapshot:i,guards:{canActivateChecks:o}}=e;if(!o.length)return U(e);let r=new Set(o.map(m=>m.route)),d=new Set;for(let m of r)if(!d.has(m))for(let v of eu(m))d.add(v);let u=0;return ut(d).pipe(Mn(m=>r.has(m)?f0(m,i,n,t):(m.data=Ar(m,m.parent,n).resolve,U(void 0))),He(()=>u++),qa(1),wt(m=>u===d.size?U(e):Xt))})}function eu(n){let t=n.children.map(e=>eu(e)).flat();return[n,...t]}function f0(n,t,e,i){let o=n.routeConfig,r=n._resolve;return o?.title!==void 0&&!Hd(o)&&(r[ho]=o.title),Bo(()=>(n.data=Ar(n,n.parent,e).resolve,g0(r,n,t,i).pipe(ee(d=>(n._resolvedData=d,n.data=O(O({},n.data),d),null)))))}function g0(n,t,e,i){let o=Vs(n);if(o.length===0)return U({});let r={};return ut(o).pipe(wt(d=>h0(n[d],t,e,i).pipe(dn(),He(u=>{if(u instanceof hi)throw Tr(new zn,u);r[d]=u}))),qa(1),ee(()=>r),Jn(d=>Kd(d)?Xt:Ti(d)))}function h0(n,t,e,i){let o=bi(t)??i,r=xi(n,o),d=r.resolve?r.resolve(t,e):vt(o,()=>r(t,e));return rn(d)}function Ns(n){return at(t=>{let e=n(t);return e?ut(e).pipe(ee(()=>t)):U(t)})}var el=(()=>{class n{buildTitle(e){let i,o=e.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(r=>r.outlet===q);return i}getResolvedTitleForRoute(e){return e.data[ho]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>w(tu),providedIn:"root"})}return n})(),tu=(()=>{class n extends el{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(F(bd))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ci=new W("",{providedIn:"root",factory:()=>({})}),_o=new W(""),nu=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=w(hc);loadComponent(e,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return U(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let o=rn(vt(e,()=>i.loadComponent())).pipe(ee(ou),at(ru),He(d=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=d}),Xn(()=>{this.componentLoaders.delete(i)})),r=new Ga(o,()=>new rt).pipe(Ba());return this.componentLoaders.set(i,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return U({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=iu(i,this.compiler,e,this.onLoadEndListener).pipe(Xn(()=>{this.childrenLoaders.delete(i)})),d=new Ga(r,()=>new rt).pipe(Ba());return this.childrenLoaders.set(i,d),d}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iu(n,t,e,i){return rn(vt(e,()=>n.loadChildren())).pipe(ee(ou),at(ru),wt(o=>o instanceof dc||Array.isArray(o)?U(o):ut(t.compileModuleAsync(o))),ee(o=>{i&&i(n);let r,d,u=!1;return Array.isArray(o)?(d=o,u=!0):(r=o.create(e).injector,d=r.get(_o,[],{optional:!0,self:!0}).flat()),{routes:d.map(Qs),injector:r}}))}function v0(n){return n&&typeof n=="object"&&"default"in n}function ou(n){return v0(n)?n.default:n}function ru(n){return U(n)}var Lr=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>w(b0),providedIn:"root"})}return n})(),b0=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),au=new W("");var su=new W(""),lu=(()=>{class n{currentNavigation=Ft(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new rt;transitionAbortWithErrorSubject=new rt;configLoader=w(nu);environmentInjector=w(un);destroyRef=w(On);urlSerializer=w(vo);rootContexts=w(_i);location=w(mt);inputBindingEnabled=w(Rr,{optional:!0})!==null;titleStrategy=w(el);options=w(Ci,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=w(Lr);createViewTransition=w(au,{optional:!0});navigationErrorHandler=w(su,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>U(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=o=>this.events.next(new wr(o)),i=o=>this.events.next(new Er(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;Ve(()=>{this.transitions?.next(ae(O({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))})}setupNavigations(e){return this.transitions=new $e(null),this.transitions.pipe(kt(i=>i!==null),at(i=>{let o=!1;return U(i).pipe(at(r=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",lt.SupersededByNewNavigation),Xt;this.currentTransition=i,this.currentNavigation.set({id:r.id,initialUrl:r.rawUrl,extractedUrl:r.extractedUrl,targetBrowserUrl:typeof r.extras.browserUrl=="string"?this.urlSerializer.parse(r.extras.browserUrl):r.extras.browserUrl,trigger:r.source,extras:r.extras,previousNavigation:this.lastSuccessfulNavigation?ae(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>r.abortController.abort()});let d=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=r.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!d&&u!=="reload")return this.events.next(new on(r.id,this.urlSerializer.serialize(r.rawUrl),"",so.IgnoredSameUrlNavigation)),r.resolve(!1),Xt;if(this.urlHandlingStrategy.shouldProcessUrl(r.rawUrl))return U(r).pipe(at(m=>(this.events.next(new Un(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),m.id!==this.navigationId?Xt:Promise.resolve(m))),p0(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),He(m=>{i.targetSnapshot=m.targetSnapshot,i.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation.update(E=>(E.finalUrl=m.urlAfterRedirects,E));let v=new lo(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(r.currentRawUrl)){let{id:m,extractedUrl:v,source:E,restoredState:D,extras:V}=r,L=new Un(m,this.urlSerializer.serialize(v),E,D);this.events.next(L);let B=Gd(this.rootComponentType).snapshot;return this.currentTransition=i=ae(O({},r),{targetSnapshot:B,urlAfterRedirects:v,extras:ae(O({},V),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(ye=>(ye.finalUrl=v,ye)),U(i)}else return this.events.next(new on(r.id,this.urlSerializer.serialize(r.extractedUrl),"",so.IgnoredByUrlHandlingStrategy)),r.resolve(!1),Xt}),He(r=>{let d=new _r(r.id,this.urlSerializer.serialize(r.extractedUrl),this.urlSerializer.serialize(r.urlAfterRedirects),r.targetSnapshot);this.events.next(d)}),ee(r=>(this.currentTransition=i=ae(O({},r),{guards:Af(r.targetSnapshot,r.currentSnapshot,this.rootContexts)}),i)),Bf(this.environmentInjector,r=>this.events.next(r)),He(r=>{if(i.guardsResult=r.guardsResult,r.guardsResult&&typeof r.guardsResult!="boolean")throw Tr(this.urlSerializer,r.guardsResult);let d=new xr(r.id,this.urlSerializer.serialize(r.extractedUrl),this.urlSerializer.serialize(r.urlAfterRedirects),r.targetSnapshot,!!r.guardsResult);this.events.next(d)}),kt(r=>r.guardsResult?!0:(this.cancelNavigationTransition(r,"",lt.GuardRejected),!1)),Ns(r=>{if(r.guards.canActivateChecks.length!==0)return U(r).pipe(He(d=>{let u=new Cr(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),at(d=>{let u=!1;return U(d).pipe(m0(this.paramsInheritanceStrategy,this.environmentInjector),He({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(d,"",lt.NoDataFromResolver)}}))}),He(d=>{let u=new yr(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}))}),Ns(r=>{let d=u=>{let m=[];if(u.routeConfig?.loadComponent){let v=bi(u)??this.environmentInjector;m.push(this.configLoader.loadComponent(v,u.routeConfig).pipe(He(E=>{u.component=E}),ee(()=>{})))}for(let v of u.children)m.push(...d(v));return m};return $a(d(r.targetSnapshot.root)).pipe(Wa(null),cn(1))}),Ns(()=>this.afterPreactivation()),at(()=>{let{currentSnapshot:r,targetSnapshot:d}=i,u=this.createViewTransition?.(this.environmentInjector,r.root,d.root);return u?ut(u).pipe(ee(()=>i)):U(i)}),ee(r=>{let d=Pf(e.routeReuseStrategy,r.targetSnapshot,r.currentRouterState);return this.currentTransition=i=ae(O({},r),{targetRouterState:d}),this.currentNavigation.update(u=>(u.targetRouterState=d,u)),i}),He(()=>{this.events.next(new co)}),If(this.rootContexts,e.routeReuseStrategy,r=>this.events.next(r),this.inputBindingEnabled),cn(1),ki(new Kn(r=>{let d=i.abortController.signal,u=()=>r.next();return d.addEventListener("abort",u),()=>d.removeEventListener("abort",u)}).pipe(kt(()=>!o&&!i.targetRouterState),He(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",lt.Aborted)}))),He({next:r=>{o=!0,this.lastSuccessfulNavigation=Ve(this.currentNavigation),this.events.next(new It(r.id,this.urlSerializer.serialize(r.extractedUrl),this.urlSerializer.serialize(r.urlAfterRedirects))),this.titleStrategy?.updateTitle(r.targetRouterState.snapshot),r.resolve(!0)},complete:()=>{o=!0}}),ki(this.transitionAbortWithErrorSubject.pipe(He(r=>{throw r}))),Xn(()=>{o||this.cancelNavigationTransition(i,"",lt.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Jn(r=>{if(this.destroyed)return i.resolve(!1),Xt;if(o=!0,Zd(r))this.events.next(new Ht(i.id,this.urlSerializer.serialize(i.extractedUrl),r.message,r.cancellationCode)),Of(r)?this.events.next(new gi(r.url,r.navigationBehaviorOptions)):i.resolve(!1);else{let d=new fi(i.id,this.urlSerializer.serialize(i.extractedUrl),r,i.targetSnapshot??void 0);try{let u=vt(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(u instanceof hi){let{message:m,cancellationCode:v}=Tr(this.urlSerializer,u);this.events.next(new Ht(i.id,this.urlSerializer.serialize(i.extractedUrl),m,v)),this.events.next(new gi(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(d),r}catch(u){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(u)}}return Xt}))}))}cancelNavigationTransition(e,i,o){let r=new Ht(e.id,this.urlSerializer.serialize(e.extractedUrl),i,o);this.events.next(r),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=Ve(this.currentNavigation),o=i?.targetBrowserUrl??i?.extractedUrl;return e.toString()!==o?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _0(n){return n!==oo}var cu=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>w(x0),providedIn:"root"})}return n})(),Fr=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},x0=(()=>{class n extends Fr{static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),du=(()=>{class n{urlSerializer=w(vo);options=w(Ci,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=w(mt);urlHandlingStrategy=w(Lr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Wt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:o}){let r=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,d=o??r;return d instanceof Wt?this.urlSerializer.serialize(d):d}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:o}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,o),this.routerState=e):this.rawUrlTree=o}routerState=Gd(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:()=>w(C0),providedIn:"root"})}return n})(),C0=(()=>{class n extends du{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof Un?this.updateStateMemento():e instanceof on?this.commitTransition(i):e instanceof lo?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof co?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Ht&&e.code!==lt.SupersededByNewNavigation&&e.code!==lt.Redirect?this.restoreHistory(i):e instanceof fi?this.restoreHistory(i,!0):e instanceof It&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:o}){let{replaceUrl:r,state:d}=i;if(this.location.isCurrentPathEqualTo(e)||r){let u=this.browserPageId,m=O(O({},d),this.generateNgRouterState(o,u));this.location.replaceState(e,"",m)}else{let u=O(O({},d),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(e,"",u)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,r=this.currentPageId-o;r!==0?this.location.historyGo(r):this.getCurrentUrlTree()===e.finalUrl&&r===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tl(n,t){n.events.pipe(kt(e=>e instanceof It||e instanceof Ht||e instanceof fi||e instanceof on),ee(e=>e instanceof It||e instanceof on?0:(e instanceof Ht?e.code===lt.Redirect||e.code===lt.SupersededByNewNavigation:!1)?2:1),kt(e=>e!==2),cn(1)).subscribe(()=>{t()})}var y0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},w0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=w(os);stateManager=w(du);options=w(Ci,{optional:!0})||{};pendingTasks=w(Zl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=w(lu);urlSerializer=w(vo);location=w(mt);urlHandlingStrategy=w(Lr);injector=w(un);_events=new rt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=w(cu);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=w(_o,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!w(Rr,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Rl;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,r=Ve(this.navigationTransitions.currentNavigation);if(o!==null&&r!==null){if(this.stateManager.handleRouterEvent(i,r),i instanceof Ht&&i.code!==lt.Redirect&&i.code!==lt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof It)this.navigated=!0;else if(i instanceof gi){let d=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),m=O({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_0(o.source)},d);this.scheduleNavigation(u,oo,null,m,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}yf(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,o)=>{this.navigateToSyncWithBrowser(e,o,i)})}navigateToSyncWithBrowser(e,i,o){let r={replaceUrl:!0},d=o?.navigationId?o:null;if(o){let m=O({},o);delete m.navigationId,delete m.\u0275routerPageId,Object.keys(m).length!==0&&(r.state=m)}let u=this.parseUrl(e);this.scheduleNavigation(u,i,d,r).catch(m=>{this.disposed||this.injector.get(Fi)(m)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ve(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Qs),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:o,queryParams:r,fragment:d,queryParamsHandling:u,preserveFragment:m}=i,v=m?this.currentUrlTree.fragment:d,E=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":E=O(O({},this.currentUrlTree.queryParams),r);break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=r||null}E!==null&&(E=this.removeEmptyProps(E));let D;try{let V=o?o.snapshot:this.routerState.snapshot.root;D=jd(V)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),D=this.currentUrlTree.root}return zd(D,e,E,v??null)}navigateByUrl(e,i={skipLocationChange:!1}){let o=vn(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(r,oo,null,i)}navigate(e,i={skipLocationChange:!1}){return E0(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let o;if(i===!0?o=O({},y0):i===!1?o=O({},w0):o=i,vn(e))return xd(this.currentUrlTree,e,o);let r=this.parseUrl(e);return xd(this.currentUrlTree,r,o)}removeEmptyProps(e){return Object.entries(e).reduce((i,[o,r])=>(r!=null&&(i[o]=r),i),{})}scheduleNavigation(e,i,o,r,d){if(this.disposed)return Promise.resolve(!1);let u,m,v;d?(u=d.resolve,m=d.reject,v=d.promise):v=new Promise((D,V)=>{u=D,m=V});let E=this.pendingTasks.add();return tl(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(E))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:r,resolve:u,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(D=>Promise.reject(D))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function E0(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new j(4008,!1)}var oe=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ft(null);get href(){return Ve(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new rt;applicationErrorHandler=w(Fi);options=w(Ci,{optional:!0});constructor(e,i,o,r,d,u){this.router=e,this.route=i,this.tabIndexAttribute=o,this.renderer=r,this.el=d,this.locationStrategy=u,this.reactiveHref.set(w(new vc("href"),{optional:!0}));let m=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement=m==="a"||m==="area"||!!(typeof customElements=="object"&&customElements.get(m)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,i=o=>o==="merge"||o==="preserve";e||=i(this.queryParamsHandling),e||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(o=>{o instanceof It&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(vn(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,o,r,d){let u=this.urlTree;if(u===null||this.isAnchorElement&&(e!==0||i||o||r||d||typeof this.target=="string"&&this.target!="_self"))return!0;let m={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,m)?.catch(v=>{this.applicationErrorHandler(v)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,i){let o=this.renderer,r=this.el.nativeElement;i!==null?o.setAttribute(r,e,i):o.removeAttribute(r,e)}get urlTree(){return this.routerLinkInput===null?null:vn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(x(pe),x(ct),Ka("tabindex"),x(We),x(De),x(oi))};static \u0275dir=se({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,o){i&1&&h("click",function(d){return o.onClick(d.button,d.ctrlKey,d.shiftKey,d.altKey,d.metaKey)}),i&2&&bt("href",o.reactiveHref(),sc)("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",fn],skipLocationChange:[2,"skipLocationChange","skipLocationChange",fn],replaceUrl:[2,"replaceUrl","replaceUrl",fn],routerLink:"routerLink"},features:[Et]})}return n})();var P0=new W("");function nl(n,...t){return Dn([{provide:_o,multi:!0,useValue:n},[],{provide:ct,useFactory:M0,deps:[pe]},{provide:pc,multi:!0,useFactory:D0},t.map(e=>e.\u0275providers)])}function M0(n){return n.routerState.root}function D0(){let n=w(st);return t=>{let e=n.get(Fn);if(t!==e.components[0])return;let i=n.get(pe),o=n.get(O0);n.get(I0)===1&&i.initialNavigation(),n.get(A0,null,{optional:!0})?.setUpPreloading(),n.get(P0,null,{optional:!0})?.init(),i.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var O0=new W("",{factory:()=>new rt}),I0=new W("",{providedIn:"root",factory:()=>1});var A0=new W("");var T0="@",k0=(()=>{class n{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=w(st);loadingSchedulerFn=w(F0,{optional:!0});_engine;constructor(e,i,o,r,d){this.doc=e,this.delegate=i,this.zone=o,this.animationType=r,this.moduleImpl=d}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-GFB7FN53.js").then(o=>o),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(e):i=e(),i.catch(o=>{throw new j(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:r})=>{this._engine=o(this.animationType,this.doc);let d=new r(this.delegate,this._engine,this.zone);return this.delegate=d,d})}createRenderer(e,i){let o=this.delegate.createRenderer(e,i);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let r=new il(o);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(d=>{let u=d.createRenderer(e,i);r.use(u),this.scheduler??=this.injector.get(Yl,null,{optional:!0}),this.scheduler?.notify(10)}).catch(d=>{r.use(o)}),r}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(i){ts()};static \u0275prov=I({token:n,factory:n.\u0275fac})}return n})(),il=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,i,o){this.delegate.insertBefore(t,e,i,o)}removeChild(t,e,i){this.delegate.removeChild(t,e,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,o){this.delegate.setAttribute(t,e,i,o)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,o){this.delegate.setStyle(t,e,i,o)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){this.shouldReplay(e)&&this.replay.push(o=>o.setProperty(t,e,i)),this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i,o){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,i,o)),this.delegate.listen(t,e,i,o)}shouldReplay(t){return this.replay!==null&&t.startsWith(T0)}},F0=new W("");function uu(n="animations"){return Go("NgAsyncAnimations"),Dn([{provide:pn,useFactory:(t,e,i)=>new k0(t,e,i,n),deps:[me,Ki,Ye]},{provide:Xl,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Bn=class extends Error{};Bn.prototype.name="InvalidTokenError";function R0(n){return decodeURIComponent(atob(n).replace(/(.)/g,(t,e)=>{let i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}function N0(n){let t=n.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return R0(t)}catch{return atob(t)}}function ol(n,t){if(typeof n!="string")throw new Bn("Invalid token specified: must be a string");t||(t={});let e=t.header===!0?0:1,i=n.split(".")[e];if(typeof i!="string")throw new Bn(`Invalid token specified: missing part #${e+1}`);let o;try{o=N0(i)}catch(r){throw new Bn(`Invalid token specified: invalid base64 for part #${e+1} (${r.message})`)}try{return JSON.parse(o)}catch(r){throw new Bn(`Invalid token specified: invalid json for part #${e+1} (${r.message})`)}}var de=class n{constructor(t){this.router=t}guardarSesion(t){localStorage.setItem("jwt_token",t)}guardarUsuarioCompleto(t){localStorage.setItem("usuario_actual",JSON.stringify(t))}obtenerUsuarioCompleto(){let t=localStorage.getItem("usuario_actual");return t?JSON.parse(t):null}obtenerToken(){return localStorage.getItem("jwt_token")}estaLogueado(){let t=this.obtenerToken();if(!t)return!1;try{let i=ol(t).exp*1e3;return Date.now()<i}catch{return!1}}obtenerUsuarioActual(){let t=this.obtenerUsuarioCompleto();if(t)return t;let e=this.obtenerToken();if(e)try{let i=ol(e);return{usuarioId:i.usuarioId,nombre:i.nombre,email:i.sub,roles:i.roles}}catch(i){return console.error("Error al decodificar token",i),this.cerrarSesion(),null}return null}userHasRole(t){let e=this.obtenerUsuarioActual();if(!e||!Array.isArray(e.roles))return!1;let i=("ROLE_"+t).toUpperCase();return e.roles.map(r=>r.nombre?r.nombre.toUpperCase():"").filter(Boolean).includes(i)}cerrarSesion(){localStorage.removeItem("jwt_token"),localStorage.removeItem("usuario_actual"),this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||n)(F(pe))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var yi=class n{constructor(t){this.authService=t}galeriaLink=[];ngOnInit(){this.actualizarRutaGaleria()}actualizarRutaGaleria(){this.authService.estaLogueado()?this.galeriaLink=["/cliente/productos-realizados"]:this.galeriaLink=["/productos-realizados"]}static \u0275fac=function(e){return new(e||n)(x(de))};static \u0275cmp=M({type:n,selectors:[["app-productos-destacados"]],decls:15,vars:1,consts:[["id","productos-realizados",1,"featured-products"],[1,"subtitle"],[1,"options-container"],[1,"option-card"],["src","assets/imagenes/galeria-portada.png","alt","Galer\xEDa de productos realizados"],[1,"card-content"],[1,"btn",3,"routerLink"]],template:function(e,i){e&1&&(s(0,"section",0)(1,"h2"),l(2,"Productos Realizados"),a(),s(3,"p",1),l(4," Descubre algunas de las tortas personalizadas que hemos creado para nuestros clientes. "),a(),s(5,"div",2)(6,"div",3),b(7,"img",4),s(8,"div",5)(9,"h3"),l(10,"Ver Galer\xEDa Completa"),a(),s(11,"p"),l(12,"Explora nuestros dise\xF1os realizados y encuentra inspiraci\xF3n para tu pr\xF3xima torta personalizada."),a(),s(13,"a",6),l(14,"Ver Galer\xEDa"),a()()()()()),e&2&&(c(13),p("routerLink",i.galeriaLink))},dependencies:[k,oe],styles:[".featured-products[_ngcontent-%COMP%]{padding:60px 40px;text-align:center;font-family:Arial,sans-serif;background-color:#fff}.featured-products[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;color:#333;margin-bottom:10px}.featured-products[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:18px;color:#777;max-width:600px;margin:0 auto 40px}.options-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:40px;flex-wrap:wrap}.option-card[_ngcontent-%COMP%]{width:400px;border:1px solid #e0e0e0;border-radius:10px;overflow:hidden;box-shadow:0 4px 12px #00000014;transition:transform .3s ease,box-shadow .3s ease}.option-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 8px 20px #0000001f}.option-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:370px;height:370px;object-fit:cover}.card-content[_ngcontent-%COMP%]{padding:30px}.card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;margin-bottom:15px;color:#000}.card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#000;line-height:1.6;margin-bottom:25px}.card-content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#eb7221;color:#fff;padding:12px 25px;border-radius:5px;text-decoration:none;font-weight:700;display:inline-block}"]})};var J={production:!0,apiUrl:"/api"};var wi=class n{http=w(K);apiUrl=J.apiUrl+"/resenas";getResenasPublicas(){return this.http.get(this.apiUrl)}obtenerTodasLasResenasAdmin(){return this.http.get(`${this.apiUrl}/todas`)}actualizarEstadoResena(t,e){let i={estado:e};return this.http.put(`${this.apiUrl}/${t}/estado`,i)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function V0(n,t){if(n&1){let e=T();s(0,"div",2)(1,"button",3),h("click",function(){C(e);let o=f();return y(o.anterior())}),l(2," \u276E "),a(),s(3,"div",4)(4,"div",5),b(5,"img",6),a(),s(6,"div",7)(7,"blockquote"),l(8),a(),s(9,"div",8)(10,"span"),l(11),a()(),s(12,"cite")(13,"span",9),l(14),a(),s(15,"span",10),l(16),P(17,"date"),a()()()(),s(18,"button",11),h("click",function(){C(e);let o=f();return y(o.siguiente())}),l(19," \u276F "),a()()}if(n&2){let e=f();c(5),p("src",e.resenaActual.fotoUrl,ve),c(3),g(" \u201C",e.resenaActual.comentario,"\u201D "),c(3),S("\u2605".repeat(e.resenaActual.valoracion)),c(3),S(e.resenaActual.usuario),c(2),g("Pedido realizado el ",A(17,5,e.resenaActual.fecha,"mediumDate"))}}var Vr=class n{constructor(t){this.resenaService=t}listaDeResenas=[];indiceActual=0;ngOnInit(){this.resenaService.getResenasPublicas().subscribe(t=>{this.listaDeResenas=t},t=>console.error("Error al obtener rese\xF1as:",t))}get resenaActual(){return this.listaDeResenas.length?this.listaDeResenas[this.indiceActual]:null}siguiente(){this.indiceActual<this.listaDeResenas.length-1?this.indiceActual++:this.indiceActual=0}anterior(){this.indiceActual>0?this.indiceActual--:this.indiceActual=this.listaDeResenas.length-1}static \u0275fac=function(e){return new(e||n)(x(wi))};static \u0275cmp=M({type:n,selectors:[["app-resenas"]],decls:4,vars:1,consts:[["id","resenas",1,"reviews-section"],["class","review-wrapper",4,"ngIf"],[1,"review-wrapper"],["aria-label","Anterior",1,"nav-arrow","left",3,"click"],[1,"review-card","fade"],[1,"review-image"],["alt","Foto del producto rese\xF1ado",3,"src"],[1,"review-content"],[1,"review-rating"],[1,"author"],[1,"product"],["aria-label","Siguiente",1,"nav-arrow","right",3,"click"]],template:function(e,i){e&1&&(s(0,"section",0)(1,"h2"),l(2,"Rese\xF1as de Nuestros Clientes"),a(),_(3,V0,20,8,"div",1),a()),e&2&&(c(3),p("ngIf",i.resenaActual))},dependencies:[k,N,ce],styles:[".reviews-section[_ngcontent-%COMP%]{padding:60px 40px;background-color:#fafafa;font-family:Arial,sans-serif;text-align:center}.reviews-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;color:#333;margin-bottom:40px}.review-card[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;display:flex;align-items:center;gap:40px;background-color:#fff;padding:40px;border-radius:10px;box-shadow:0 4px 12px #00000014;text-align:left}.review-content[_ngcontent-%COMP%]   blockquote[_ngcontent-%COMP%]{font-size:18px;color:#555;line-height:1.7;border-left:4px solid #eb7221;padding-left:20px;margin:0 0 20px;font-style:italic}.review-content[_ngcontent-%COMP%]   cite[_ngcontent-%COMP%]{font-weight:700;color:#333;display:block}.review-rating[_ngcontent-%COMP%]{color:#ffc107;font-size:20px;margin-bottom:15px}.review-content[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{color:#eb7221}.review-content[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{color:#777;font-weight:400}.reviews-section[_ngcontent-%COMP%]{padding:60px 40px;background-color:#fafafa;font-family:Arial,sans-serif;text-align:center;position:relative}.reviews-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;color:#333;margin-bottom:50px}.review-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.review-card[_ngcontent-%COMP%]{max-width:900px;display:flex;align-items:center;gap:40px;background-color:#fff;padding:40px;border-radius:12px;box-shadow:0 6px 18px #00000014;text-align:left;transition:all .5s ease;opacity:1}.review-card.fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .6s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.97)}to{opacity:1;transform:scale(1)}}.review-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px;height:250px;object-fit:cover;border-radius:10px}.review-content[_ngcontent-%COMP%]   blockquote[_ngcontent-%COMP%]{font-size:18px;color:#555;line-height:1.7;border-left:4px solid #eb7221;padding-left:20px;margin-bottom:20px;font-style:italic}.review-rating[_ngcontent-%COMP%]{color:#ffc107;font-size:22px;margin-bottom:15px}.review-content[_ngcontent-%COMP%]   cite[_ngcontent-%COMP%]{display:block;font-weight:700;color:#333}.review-content[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{color:#eb7221;display:block}.review-content[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{color:#777;font-weight:400;font-size:14px}.nav-arrow[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background-color:#eb7221e6;color:#fff;border:none;border-radius:50%;font-size:28px;width:50px;height:50px;cursor:pointer;transition:background-color .3s,transform .2s;z-index:10}.nav-arrow[_ngcontent-%COMP%]:hover{background-color:#d55f15;transform:translateY(-50%) scale(1.1)}.nav-arrow.left[_ngcontent-%COMP%]{left:10px}.nav-arrow.right[_ngcontent-%COMP%]{right:10px}@media (max-width: 768px){.review-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:20px;padding:30px}.review-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px}.nav-arrow[_ngcontent-%COMP%]{font-size:24px;width:45px;height:45px}}"]})};var Cu=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(x(We),x(De))};static \u0275dir=se({type:n})}return n})(),Di=(()=>{class n extends Cu{static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=se({type:n,features:[qe]})}return n})(),xn=new W(""),j0={provide:xn,useExisting:pt(()=>Po),multi:!0},Po=(()=>{class n extends Di{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=se({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&h("change",function(d){return o.onChange(d.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[Ee([j0]),qe]})}return n})(),z0={provide:xn,useExisting:pt(()=>X),multi:!0};function U0(){let n=Mt()?Mt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var B0=new W(""),X=(()=>{class n extends Cu{_compositionMode;_composing=!1;constructor(e,i,o){super(e,i),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!U0())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(x(We),x(De),x(B0,8))};static \u0275dir=se({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&h("input",function(d){return o._handleInput(d.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(d){return o._compositionEnd(d.target.value)})},standalone:!1,features:[Ee([z0]),qe]})}return n})();function ll(n){return n==null||cl(n)===0}function cl(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var $n=new W(""),Zr=new W(""),G0=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,$=class{static min(t){return yu(t)}static max(t){return wu(t)}static required(t){return Eu(t)}static requiredTrue(t){return $0(t)}static email(t){return H0(t)}static minLength(t){return W0(t)}static maxLength(t){return q0(t)}static pattern(t){return Y0(t)}static nullValidator(t){return zr()}static compose(t){return Iu(t)}static composeAsync(t){return Au(t)}};function yu(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function wu(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function Eu(n){return ll(n.value)?{required:!0}:null}function $0(n){return n.value===!0?null:{required:!0}}function H0(n){return ll(n.value)||G0.test(n.value)?null:{email:!0}}function W0(n){return t=>{let e=t.value?.length??cl(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function q0(n){return t=>{let e=t.value?.length??cl(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function Y0(n){if(!n)return zr;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(ll(i.value))return null;let o=i.value;return t.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}function zr(n){return null}function Su(n){return n!=null}function Pu(n){return Ni(n)?ut(n):n}function Mu(n){let t={};return n.forEach(e=>{t=e!=null?O(O({},t),e):t}),Object.keys(t).length===0?null:t}function Du(n,t){return t.map(e=>e(n))}function Z0(n){return!n.validate}function Ou(n){return n.map(t=>Z0(t)?t:e=>t.validate(e))}function Iu(n){if(!n)return null;let t=n.filter(Su);return t.length==0?null:function(e){return Mu(Du(e,t))}}function dl(n){return n!=null?Iu(Ou(n)):null}function Au(n){if(!n)return null;let t=n.filter(Su);return t.length==0?null:function(e){let i=Du(e,t).map(Pu);return Ul(i).pipe(ee(Mu))}}function ul(n){return n!=null?Au(Ou(n)):null}function pu(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Tu(n){return n._rawValidators}function ku(n){return n._rawAsyncValidators}function rl(n){return n?Array.isArray(n)?n:[n]:[]}function Ur(n,t){return Array.isArray(n)?n.includes(t):n===t}function mu(n,t){let e=rl(t);return rl(n).forEach(o=>{Ur(e,o)||e.push(o)}),e}function fu(n,t){return rl(t).filter(e=>!Ur(n,e))}var Br=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=dl(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ul(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},sn=class extends Br{name;get formDirective(){return null}get path(){return null}},bn=class extends Br{_parent=null;name=null;valueAccessor=null},Gr=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},K0={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},nw=ae(O({},K0),{"[class.ng-submitted]":"isSubmitted"}),re=(()=>{class n extends Gr{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(x(bn,2))};static \u0275dir=se({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Z("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[qe]})}return n})(),ze=(()=>{class n extends Gr{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(x(sn,10))};static \u0275dir=se({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Z("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},standalone:!1,features:[qe]})}return n})();var xo="VALID",jr="INVALID",Ei="PENDING",Co="DISABLED",_n=class{},$r=class extends _n{value;source;constructor(t,e){super(),this.value=t,this.source=e}},wo=class extends _n{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Eo=class extends _n{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Si=class extends _n{status;source;constructor(t,e){super(),this.status=t,this.source=e}},Hr=class extends _n{source;constructor(t){super(),this.source=t}},So=class extends _n{source;constructor(t){super(),this.source=t}};function pl(n){return(Kr(n)?n.validators:n)||null}function J0(n){return Array.isArray(n)?dl(n):n||null}function ml(n,t){return(Kr(t)?t.asyncValidators:n)||null}function X0(n){return Array.isArray(n)?ul(n):n||null}function Kr(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Fu(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new j(1e3,"");if(!i[e])throw new j(1001,"")}function Ru(n,t,e){n._forEachChild((i,o)=>{if(e[o]===void 0)throw new j(1002,"")})}var Pi=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Ve(this.statusReactive)}set status(t){Ve(()=>this.statusReactive.set(t))}_status=ii(()=>this.statusReactive());statusReactive=Ft(void 0);get valid(){return this.status===xo}get invalid(){return this.status===jr}get pending(){return this.status==Ei}get disabled(){return this.status===Co}get enabled(){return this.status!==Co}errors;get pristine(){return Ve(this.pristineReactive)}set pristine(t){Ve(()=>this.pristineReactive.set(t))}_pristine=ii(()=>this.pristineReactive());pristineReactive=Ft(!0);get dirty(){return!this.pristine}get touched(){return Ve(this.touchedReactive)}set touched(t){Ve(()=>this.touchedReactive.set(t))}_touched=ii(()=>this.touchedReactive());touchedReactive=Ft(!1);get untouched(){return!this.touched}_events=new rt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(mu(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(mu(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(fu(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(fu(t,this._rawAsyncValidators))}hasValidator(t){return Ur(this._rawValidators,t)}hasAsyncValidator(t){return Ur(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(ae(O({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Eo(!0,i))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Eo(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(ae(O({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new wo(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new wo(!0,i))}markAsPending(t={}){this.status=Ei;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Si(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(ae(O({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Co,this.errors=null,this._forEachChild(o=>{o.disable(ae(O({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new $r(this.value,i)),this._events.next(new Si(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(O({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=xo,this._forEachChild(i=>{i.enable(ae(O({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ae(O({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xo||this.status===Ei)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new $r(this.value,e)),this._events.next(new Si(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(ae(O({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Co:xo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Ei,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let i=Pu(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,o)=>i&&i._find(o),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Si(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new ue,this.statusChanges=new ue}_calculateStatus(){return this._allControlsDisabled()?Co:this.errors?jr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ei)?Ei:this._anyControlsHaveStatus(jr)?jr:xo}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),o=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),o&&this._events.next(new wo(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Eo(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Kr(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=J0(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=X0(this._rawAsyncValidators)}},Mi=class extends Pi{constructor(t,e,i){super(pl(e),ml(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Ru(this,!0,t),Object.keys(t).forEach(i=>{Fu(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let o=this.controls[i];o&&o.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,o)=>{i.reset(t?t[o]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new So(this))}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,o)=>((i.enabled||this.disabled)&&(e[o]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((o,r)=>{i=e(i,o,r)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var al=class extends Mi{};var Oi=new W("",{providedIn:"root",factory:()=>Mo}),Mo="always";function Nu(n,t){return[...t.path,n]}function Wr(n,t,e=Mo){fl(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),eg(n,t),ng(n,t),tg(n,t),Q0(n,t)}function gu(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Yr(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function qr(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Q0(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function fl(n,t){let e=Tu(n);t.validator!==null?n.setValidators(pu(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=ku(n);t.asyncValidator!==null?n.setAsyncValidators(pu(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let o=()=>n.updateValueAndValidity();qr(t._rawValidators,o),qr(t._rawAsyncValidators,o)}function Yr(n,t){let e=!1;if(n!==null){if(t.validator!==null){let o=Tu(n);if(Array.isArray(o)&&o.length>0){let r=o.filter(d=>d!==t.validator);r.length!==o.length&&(e=!0,n.setValidators(r))}}if(t.asyncValidator!==null){let o=ku(n);if(Array.isArray(o)&&o.length>0){let r=o.filter(d=>d!==t.asyncValidator);r.length!==o.length&&(e=!0,n.setAsyncValidators(r))}}}let i=()=>{};return qr(t._rawValidators,i),qr(t._rawAsyncValidators,i),e}function eg(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Lu(n,t)})}function tg(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Lu(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Lu(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ng(n,t){let e=(i,o)=>{t.valueAccessor.writeValue(i),o&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Vu(n,t){n==null,fl(n,t)}function ig(n,t){return Yr(n,t)}function ju(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function og(n){return Object.getPrototypeOf(n.constructor)===Di}function zu(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Uu(n,t){if(!t)return null;Array.isArray(t);let e,i,o;return t.forEach(r=>{r.constructor===X?e=r:og(r)?i=r:o=r}),o||i||e||null}function rg(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var ag={provide:sn,useExisting:pt(()=>gl)},yo=Promise.resolve(),gl=(()=>{class n extends sn{callSetDisabledState;get submitted(){return Ve(this.submittedReactive)}_submitted=ii(()=>this.submittedReactive());submittedReactive=Ft(!1);_directives=new Set;form;ngSubmit=new ue;options;constructor(e,i,o){super(),this.callSetDisabledState=o,this.form=new Mi({},dl(e),ul(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){yo.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Wr(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){yo.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){yo.then(()=>{let i=this._findContainer(e.path),o=new Mi({});Vu(o,e),i.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){yo.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){yo.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),zu(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new Hr(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(x($n,10),x(Zr,10),x(Oi,8))};static \u0275dir=se({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&h("submit",function(d){return o.onSubmit(d)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ee([ag]),qe]})}return n})();function hu(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function vu(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Gn=class extends Pi{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(pl(e),ml(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kr(e)&&(e.nonNullable||e.initialValueIsDefault)&&(vu(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new So(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){hu(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){hu(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){vu(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var sg=n=>n instanceof Gn;var lg={provide:bn,useExisting:pt(()=>Ie)},bu=Promise.resolve(),Ie=(()=>{class n extends bn{_changeDetectorRef;callSetDisabledState;control=new Gn;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ue;constructor(e,i,o,r,d,u){super(),this._changeDetectorRef=d,this.callSetDisabledState=u,this._parent=e,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Uu(this,r)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),ju(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Wr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){bu.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,o=i!==0&&fn(i);bu.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Nu(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(x(sn,9),x($n,10),x(Zr,10),x(xn,10),x(mn,8),x(Oi,8))};static \u0275dir=se({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ee([lg]),qe,Et]})}return n})();var Ue=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=se({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),cg={provide:xn,useExisting:pt(()=>Hn),multi:!0},Hn=(()=>{class n extends Di{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=se({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&h("input",function(d){return o.onChange(d.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[Ee([cg]),qe]})}return n})(),dg={provide:xn,useExisting:pt(()=>Wn),multi:!0};var ug=(()=>{class n{_accessors=[];add(e,i){this._accessors.push([e,i])}remove(e){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===e){this._accessors.splice(i,1);return}}select(e){this._accessors.forEach(i=>{this._isSameGroup(i,e)&&i[1]!==e&&i[1].fireUncheck(e.value)})}_isSameGroup(e,i){return e[0].control?e[0]._parent===i._control._parent&&e[1].name===i.name:!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wn=(()=>{class n extends Di{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=w(Oi,{optional:!0})??Mo;constructor(e,i,o,r){super(e,i),this._registry=o,this._injector=r}ngOnInit(){this._control=this._injector.get(bn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(i){return new(i||n)(x(We),x(De),x(ug),x(st))};static \u0275dir=se({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,o){i&1&&h("change",function(){return o.onChange()})("blur",function(){return o.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[Ee([dg]),qe]})}return n})();var Bu=new W("");var pg={provide:sn,useExisting:pt(()=>Ze)},Ze=(()=>{class n extends sn{callSetDisabledState;get submitted(){return Ve(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=ii(()=>this._submittedReactive());_submittedReactive=Ft(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new ue;constructor(e,i,o){super(),this.callSetDisabledState=o,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Yr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return Wr(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){gu(e.control||null,e,!1),rg(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),zu(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Hr(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0,i={}){this.form.reset(e,i),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,o=this.form.get(e.path);i!==o&&(gu(i||null,e),sg(o)&&(Wr(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);Vu(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&ig(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){fl(this.form,this),this._oldForm&&Yr(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(x($n,10),x(Zr,10),x(Oi,8))};static \u0275dir=se({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&h("submit",function(d){return o.onSubmit(d)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ee([pg]),qe,Et]})}return n})();var mg={provide:bn,useExisting:pt(()=>Ke)},Ke=(()=>{class n extends bn{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new ue;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,i,o,r,d){super(),this._ngModelWarningConfig=d,this._parent=e,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Uu(this,r)}ngOnChanges(e){this._added||this._setUpControl(),ju(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Nu(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(x(sn,13),x($n,10),x(Zr,10),x(xn,10),x(Bu,8))};static \u0275dir=se({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ee([mg]),qe,Et]})}return n})();var fg={provide:xn,useExisting:pt(()=>et),multi:!0};function Gu(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function gg(n){return n.split(":")[0]}var et=(()=>{class n extends Di{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;appRefInjector=w(Fn).injector;destroyRef=w(On);cdr=w(mn);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,is({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(e){this.cdr.markForCheck(),this.value=e;let i=this._getOptionId(e),o=Gu(i,e);this.setProperty("value",o)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=gg(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=se({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&h("change",function(d){return o.onChange(d.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ee([fg]),qe]})}return n})(),tt=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,o){this._element=e,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(Gu(this.id,e)),this._select._writeValueAfterRender())}set value(e){this._setElementValue(e),this._select&&this._select._writeValueAfterRender()}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(x(De),x(We),x(et,9))};static \u0275dir=se({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),hg={provide:xn,useExisting:pt(()=>$u),multi:!0};function _u(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function vg(n){return n.split(":")[0]}var $u=(()=>{class n extends Di{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let o=e.map(r=>this._getOptionId(r));i=(r,d)=>{r._setSelected(o.indexOf(d.toString())>-1)}}else i=(o,r)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let o=[],r=i.selectedOptions;if(r!==void 0){let d=r;for(let u=0;u<d.length;u++){let m=d[u],v=this._getOptionValue(m.value);o.push(v)}}else{let d=i.options;for(let u=0;u<d.length;u++){let m=d[u];if(m.selected){let v=this._getOptionValue(m.value);o.push(v)}}}this.value=o,e(o)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=vg(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=se({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&h("change",function(d){return o.onChange(d.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ee([hg]),qe]})}return n})(),nt=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,o){this._element=e,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(_u(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(_u(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(x(De),x(We),x($u,9))};static \u0275dir=se({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function Hu(n){return typeof n=="number"?n:parseFloat(n)}var hl=(()=>{class n{_validator=zr;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):zr,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=se({type:n,features:[Et]})}return n})(),bg={provide:$n,useExisting:pt(()=>vl),multi:!0},vl=(()=>{class n extends hl{max;inputName="max";normalizeInput=e=>Hu(e);createValidator=e=>wu(e);static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=se({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,o){i&2&&bt("max",o._enabled?o.max:null)},inputs:{max:"max"},standalone:!1,features:[Ee([bg]),qe]})}return n})(),_g={provide:$n,useExisting:pt(()=>Do),multi:!0},Do=(()=>{class n extends hl{min;inputName="min";normalizeInput=e=>Hu(e);createValidator=e=>yu(e);static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=se({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,o){i&2&&bt("min",o._enabled?o.min:null)},inputs:{min:"min"},standalone:!1,features:[Ee([_g]),qe]})}return n})(),xg={provide:$n,useExisting:pt(()=>ln),multi:!0};var ln=(()=>{class n extends hl{required;inputName="required";normalizeInput=fn;createValidator=e=>Eu;enabled(e){return e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=St(n)))(o||n)}})();static \u0275dir=se({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&bt("required",o._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Ee([xg]),qe]})}return n})();var Wu=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Xe({type:n});static \u0275inj=Je({})}return n})(),sl=class extends Pi{constructor(t,e,i){super(pl(e),ml(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){Array.isArray(t)?t.forEach(i=>{this.controls.push(i),this._registerControl(i)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let o=this._adjustIndex(t);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),e&&(this.controls.splice(o,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){Ru(this,!1,t),t.forEach((i,o)=>{Fu(this,!1,o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,o)=>{i.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new So(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function xu(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var it=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,i=null){let o=this._reduceControls(e),r={};return xu(i)?r=i:i!==null&&(r.validators=i.validator,r.asyncValidators=i.asyncValidator),new Mi(o,r)}record(e,i=null){let o=this._reduceControls(e);return new al(o,i)}control(e,i,o){let r={};return this.useNonNullable?(xu(i)?r=i:(r.validators=i,r.asyncValidators=o),new Gn(e,ae(O({},r),{nonNullable:!0}))):new Gn(e,i,o)}array(e,i,o){let r=e.map(d=>this._createControl(d));return new sl(r,i,o)}_reduceControls(e){let i={};return Object.keys(e).forEach(o=>{i[o]=this._createControl(e[o])}),i}_createControl(e){if(e instanceof Gn)return e;if(e instanceof Pi)return e;if(Array.isArray(e)){let i=e[0],o=e.length>1?e[1]:null,r=e.length>2?e[2]:null;return this.control(i,o,r)}else return this.control(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Me=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Oi,useValue:e.callSetDisabledState??Mo}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Xe({type:n});static \u0275inj=Je({imports:[Wu]})}return n})(),ot=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Bu,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Oi,useValue:e.callSetDisabledState??Mo}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Xe({type:n});static \u0275inj=Je({imports:[Wu]})}return n})();var Yt=class n{http=w(K);apiUrl=J.apiUrl+"/contacto";obtenerMiHistorial(){return this.http.get(`${this.apiUrl}/mi-historial`)}obtenerPorId(t){return this.http.get(`${this.apiUrl}/${t}`)}enviarMensaje(t){return this.http.post(this.apiUrl,t)}obtenerTodasLasConsultas(){return this.http.get(`${this.apiUrl}/todos`)}registrar(t){return this.http.post(this.apiUrl,t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function Cg(n,t){n&1&&(s(0,"div",7),l(1," \xA1Mensaje enviado! Te responderemos pronto. "),a())}function yg(n,t){if(n&1){let e=T();s(0,"form",8),h("ngSubmit",function(){C(e);let o=f();return y(o.enviarMensaje())}),s(1,"div",9)(2,"label",10),l(3,"Nombre completo"),a(),b(4,"input",11),a(),s(5,"div",9)(6,"label",12),l(7,"Correo Electr\xF3nico"),a(),b(8,"input",13),a(),s(9,"div",9)(10,"label",14),l(11,"Tel\xE9fono"),a(),b(12,"input",15),a(),s(13,"div",9)(14,"label",16),l(15,"Motivo de la consulta:"),a(),b(16,"textarea",17),a(),s(17,"button",18),l(18,"Enviar Mensaje"),a()()}if(n&2){let e=f();p("formGroup",e.contactoForm),c(17),p("disabled",e.contactoForm.invalid)}}var Jr=class n{contactoForm;estaLogueado=!1;mensajeEnviado=!1;fb=w(it);authService=w(de);contactoService=w(Yt);constructor(){this.contactoForm=this.fb.group({nombre:["",$.required],email:["",[$.required,$.email]],telefono:[""],mensaje:["",$.required]})}ngOnInit(){if(this.estaLogueado=this.authService.estaLogueado(),this.estaLogueado){let t=this.authService.obtenerUsuarioActual();this.contactoForm.patchValue({nombre:t.nombre,email:t.email}),this.contactoForm.get("nombre")?.disable(),this.contactoForm.get("email")?.disable()}}enviarMensaje(){if(this.contactoForm.invalid){alert("Por favor, completa todos los campos requeridos.");return}let t=this.contactoForm.getRawValue();this.contactoService.enviarMensaje(t).subscribe({next:e=>{this.mensajeEnviado=!0,this.contactoForm.reset(),this.estaLogueado&&this.ngOnInit()},error:e=>{console.error("Error al enviar consulta:",e),alert("Hubo un error al enviar tu mensaje. Intenta m\xE1s tarde.")}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-contacto"]],decls:13,vars:2,consts:[["id","contacto",1,"contact-section"],[1,"contact-container"],[1,"contact-image"],["src","assets/imagenes/contacto.png","alt","Imagen de contacto con postres"],[1,"contact-form-wrapper"],["class","alert-success",4,"ngIf"],["class","contact-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert-success"],[1,"contact-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","formControlName","nombre"],["for","email"],["type","email","id","email","formControlName","email"],["for","telefono"],["type","tel","id","telefono","formControlName","telefono"],["for","mensaje"],["id","mensaje","formControlName","mensaje","rows","4"],["type","submit",1,"btn",3,"disabled"]],template:function(e,i){e&1&&(s(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),l(4,"\xBFTienes alguna duda?"),a(),s(5,"p"),l(6,"Consulta y nos pondremos en contacto contigo. O reg\xEDstrate y realiza un pedido con nosotros."),a(),b(7,"img",3),a(),s(8,"div",4)(9,"h3"),l(10,"CONTACTO"),a(),_(11,Cg,2,0,"div",5)(12,yg,19,2,"form",6),a()()()),e&2&&(c(11),p("ngIf",i.mensajeEnviado),c(),p("ngIf",!i.mensajeEnviado))},dependencies:[k,N,ot,Ue,X,re,ze,Ze,Ke],styles:[".contact-section[_ngcontent-%COMP%]{padding:80px 40px;background-color:#fff;font-family:Arial,sans-serif}.contact-container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;display:flex;align-items:center;gap:60px}.contact-image[_ngcontent-%COMP%]{flex:1}.contact-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:10px;display:block}.contact-form-wrapper[_ngcontent-%COMP%]{flex:1}.contact-form-wrapper[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#eb7221;font-size:16px;margin-bottom:10px}.contact-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;color:#333;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#555;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ccc;border-radius:5px;font-size:16px;box-sizing:border-box}.btn[_ngcontent-%COMP%]{background-color:#eb7221;color:#fff;padding:15px 30px;border-radius:5px;text-decoration:none;font-weight:700;border:none;cursor:pointer;font-size:16px}.alert-success[_ngcontent-%COMP%]{padding:1rem;background-color:#d4edda;color:#155724;border:1px solid #c3e6cb;border-radius:5px;text-align:center;margin-bottom:1rem;font-weight:600}.contact-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#e9ecef;opacity:.7}"]})};var Xr=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-llamada-a-catalogo"]],decls:27,vars:0,consts:[[1,"call-to-action-section"],[1,"cta-content"],[1,"cta-icon"],[1,"cta-subtitle"],[1,"features-block"],[1,"feature-item"],[1,"cta-buttons"],["routerLink","/catalogo",1,"btn","btn-primary"]],template:function(e,i){e&1&&(s(0,"section",0)(1,"div",1)(2,"span",2),l(3,"\u{1F370}"),a(),s(4,"h2"),l(5,"Transforma un D\xEDa Com\xFAn en un Momento Dulce"),a(),s(6,"p",3),l(7," En D'Juancito, cada creaci\xF3n es una obra de arte. Explora nuestro men\xFA y descubre por qu\xE9 somos la elecci\xF3n perfecta para tus celebraciones. "),a(),s(8,"div",4)(9,"div",5)(10,"h3"),l(11,"Dise\xF1o a tu Medida"),a(),s(12,"p"),l(13,"Personaliza cada capa, relleno y decoraci\xF3n para crear la torta de tus sue\xF1os."),a()(),s(14,"div",5)(15,"h3"),l(16,"Frescura Garantizada"),a(),s(17,"p"),l(18,"Horneamos solo con ingredientes de alta calidad y entregamos en la fecha exacta."),a()(),s(19,"div",5)(20,"h3"),l(21,"Precios Transparentes"),a(),s(22,"p"),l(23,"Calcula el costo de tu dise\xF1o en tiempo real, sin sorpresas."),a()()(),s(24,"div",6)(25,"a",7),l(26,"Ver Cat\xE1logo Completo"),a()()()())},dependencies:[oe],styles:[".call-to-action-section[_ngcontent-%COMP%]{background-color:#f7e0d8;padding:80px 40px;text-align:center;font-family:Arial,sans-serif;border-top:1px solid #eb7221}.cta-content[_ngcontent-%COMP%]{max-width:850px;margin:0 auto}.cta-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:40px;color:#555;margin-bottom:10px;font-weight:700;letter-spacing:1px}.cta-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:17px;color:#777;line-height:1.6;margin-bottom:35px}.cta-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px}.btn[_ngcontent-%COMP%]{padding:16px 35px;border-radius:4px;text-decoration:none;font-weight:700;font-size:15px;transition:all .3s ease;border:2px solid transparent;text-transform:uppercase}.btn-primary[_ngcontent-%COMP%]{background-color:#eb7221;color:#fff;border-color:#eb7221}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#eb7221;transform:translateY(-1px)}.cta-icon[_ngcontent-%COMP%]{font-size:60px;display:block;margin-bottom:20px}.features-block[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;margin-bottom:50px;margin-top:40px}.feature-item[_ngcontent-%COMP%]{flex:1;text-align:center;padding:15px;border-radius:8px;background-color:#ffffffb3;box-shadow:0 2px 5px #0000000d}.feature-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;color:#eb7221;margin-bottom:5px}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#777}"]})};var bl=class{constructor(t,e){this.open=t,this.close=e||t}isManual(){return this.open==="manual"||this.close==="manual"}},wg={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};function Eg(n,t=wg){let e=(n||"").trim();if(e.length===0)return[];let i=e.split(/\s+/).map(r=>r.split(":")).map(r=>{let d=t[r[0]]||r;return new bl(d[0],d[1])}),o=i.filter(r=>r.isManual());if(o.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(o.length===1&&i.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return i}function qu(n,t){let e=Eg(t.triggers),i=t.target;if(e.length===1&&e[0].isManual())return Function.prototype;let o=[],r=[],d=()=>{r.forEach(u=>o.push(u())),r.length=0};return e.forEach(u=>{let m=u.open===u.close,v=m?t.toggle:t.show;if(!m&&u.close&&t.hide){let E=u.close,D=t.hide,V=()=>n.listen(i,E,D);r.push(V)}v&&o.push(n.listen(i,u.open,()=>v(d)))}),()=>{o.forEach(u=>u())}}function Yu(n,t){return t.outsideClick?n.listen("document","click",e=>{t.target&&t.target.contains(e.target)||t.targets&&t.targets.some(i=>i.contains(e.target))||t.hide&&t.hide()}):Function.prototype}function Zu(n,t){return t.outsideEsc?n.listen("document","keyup.esc",e=>{t.target&&t.target.contains(e.target)||t.targets&&t.targets.some(i=>i.contains(e.target))||t.hide&&t.hide()}):Function.prototype}var Fe=typeof window<"u"&&window||{},Re=Fe.document,Cw=Fe.location,yw=Fe.gc?()=>Fe.gc():()=>null,ww=Fe.performance?Fe.performance:null,Ew=Fe.Event,Sw=Fe.MouseEvent,Pw=Fe.KeyboardEvent,Mw=Fe.EventTarget,Dw=Fe.History,Ow=Fe.Location,Iw=Fe.EventListener,Ku=(function(n){return n.isBs4="bs4",n.isBs5="bs5",n})(Ku||{}),Cn;function Ju(){let n=Fe.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),Fe.document.head.appendChild(n);let t=Fe.getComputedStyle(n).paddingLeft;return t&&parseFloat(t)?(Fe.document.head.removeChild(n),"bs4"):(Fe.document.head.removeChild(n),"bs5")}function Sg(){return Cn||(Cn=Ju()),Cn==="bs4"}function Pg(){return Cn||(Cn=Ju()),Cn==="bs5"}function yn(){return{isBs4:Sg(),isBs5:Pg()}}function Mg(){let n=yn(),t=Object.keys(n).find(e=>n[e]);return Ku[t]}var Qr=class{constructor(){this.length=0,this.asArray=[]}get(t){if(this.length===0||t<0||t>=this.length)return;let e=this.head;for(let i=0;i<t;i++)e=e?.next;return e?.value}add(t,e=this.length){if(e<0||e>this.length)throw new Error("Position is out of the list");let i={value:t,next:void 0,previous:void 0};if(this.length===0)this.head=i,this.tail=i,this.current=i;else if(e===0&&this.head)i.next=this.head,this.head.previous=i,this.head=i;else if(e===this.length&&this.tail)this.tail.next=i,i.previous=this.tail,this.tail=i;else{let o=this.getNode(e-1),r=o?.next;o&&r&&(o.next=i,r.previous=i,i.previous=o,i.next=r)}this.length++,this.createInternalArrayRepresentation()}remove(t=0){if(this.length===0||t<0||t>=this.length)throw new Error("Position is out of the list");if(t===0&&this.head)this.head=this.head.next,this.head?this.head.previous=void 0:this.tail=void 0;else if(t===this.length-1&&this.tail?.previous)this.tail=this.tail.previous,this.tail.next=void 0;else{let e=this.getNode(t);e?.next&&e.previous&&(e.next.previous=e.previous,e.previous.next=e.next)}this.length--,this.createInternalArrayRepresentation()}set(t,e){if(this.length===0||t<0||t>=this.length)throw new Error("Position is out of the list");let i=this.getNode(t);i&&(i.value=e,this.createInternalArrayRepresentation())}toArray(){return this.asArray}findAll(t){let e=this.head,i=[];if(!e)return i;for(let o=0;o<this.length;o++){if(!e)return i;t(e.value,o)&&i.push({index:o,value:e.value}),e=e.next}return i}push(...t){return t.forEach(e=>{this.add(e)}),this.length}pop(){if(this.length===0)return;let t=this.tail;return this.remove(this.length-1),t?.value}unshift(...t){return t.reverse(),t.forEach(e=>{this.add(e,0)}),this.length}shift(){if(this.length===0)return;let t=this.head?.value;return this.remove(),t}forEach(t){let e=this.head;for(let i=0;i<this.length;i++){if(!e)return;t(e.value,i),e=e.next}}indexOf(t){let e=this.head,i=-1;for(let o=0;o<this.length;o++){if(!e)return i;if(e.value===t){i=o;break}e=e.next}return i}some(t){let e=this.head,i=!1;for(;e&&!i;){if(t(e.value)){i=!0;break}e=e.next}return i}every(t){let e=this.head,i=!0;for(;e&&i;)t(e.value)||(i=!1),e=e.next;return i}toString(){return"[Linked List]"}find(t){let e=this.head;for(let i=0;i<this.length;i++){if(!e)return;if(t(e.value,i))return e.value;e=e.next}}findIndex(t){let e=this.head;for(let i=0;i<this.length;i++){if(!e)return-1;if(t(e.value,i))return i;e=e.next}return-1}getNode(t){if(this.length===0||t<0||t>=this.length)throw new Error("Position is out of the list");let e=this.head;for(let i=0;i<t;i++)e=e?.next;return e}createInternalArrayRepresentation(){let t=[],e=this.head;for(;e;)t.push(e.value),e=e.next;this.asArray=t}};var ea=class{static reflow(t){t.offsetHeight}static getStyles(t){let e=t.ownerDocument.defaultView;return(!e||!e.opener)&&(e=Fe),e.getComputedStyle(t)}static stackOverflowConfig(){let t=Mg();return{crossorigin:"anonymous",integrity:t==="bs5"?"sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65":"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2",cdnLink:t==="bs5"?"https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css":"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"}}};var Aw=typeof console>"u"||!("warn"in console);var Xu=["*"],Dg=n=>({display:n});function Og(n,t){if(n&1){let e=T();s(0,"li",7),h("click",function(){let o=C(e).index,r=f(2);return y(r.selectSlide(o))}),a()}if(n&2){let e=t.$implicit;Z("active",e.active===!0)}}function Ig(n,t){if(n&1&&(Ne(0),s(1,"ol",5),_(2,Og,1,2,"li",6),a(),Le()),n&2){let e=f();c(2),p("ngForOf",e.indicatorsSlides())}}function Ag(n,t){if(n&1){let e=T();s(0,"button",9),h("click",function(){let o=C(e).index,r=f(2);return y(r.selectSlide(o))}),a()}if(n&2){let e=t.$implicit,i=t.index,o=f(2);Z("active",e.active===!0),bt("data-bs-target","#carousel"+o.currentId)("data-bs-slide-to",i)}}function Tg(n,t){if(n&1&&(Ne(0),s(1,"div",5),_(2,Ag,1,4,"button",8),a(),Le()),n&2){let e=f();c(2),p("ngForOf",e.indicatorsSlides())}}function kg(n,t){if(n&1){let e=T();s(0,"a",10),h("click",function(){C(e);let o=f();return y(o.previousSlide())}),b(1,"span",11),s(2,"span",12),l(3,"Previous"),a()()}if(n&2){let e=f();Z("disabled",e.checkDisabledClass("prev")),bt("data-bs-target","#carousel"+e.currentId)}}function Fg(n,t){if(n&1){let e=T();s(0,"a",13),h("click",function(){C(e);let o=f();return y(o.nextSlide())}),b(1,"span",14),s(2,"span",12),l(3,"Next"),a()()}if(n&2){let e=f();Z("disabled",e.checkDisabledClass("next")),bt("data-bs-target","#carousel"+e.currentId)}}var Rg=(()=>{let t=class t{constructor(){this.interval=5e3,this.noPause=!1,this.noWrap=!1,this.showIndicators=!0,this.pauseOnFocus=!1,this.indicatorsByChunk=!1,this.itemsPerSlide=1,this.singleSlideOffset=!1}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function Ng(n,t){let e=n.length;for(;e--;)if(t(n[e],e,n))return e;return-1}function Lg(n,t){let e=[],i=Math.ceil(n.length/t),o=0;for(;o<i;){let r=n.splice(0,o===i-1&&t<n.length?n.length:t);e.push(r),o++}return e}function Vg(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}var ht=(function(n){return n[n.UNKNOWN=0]="UNKNOWN",n[n.NEXT=1]="NEXT",n[n.PREV=2]="PREV",n})(ht||{}),jg=1,_l=(()=>{let t=class t{set activeSlide(i){this.multilist||(Vg(i)&&(this.customActiveSlide=i),this._slides.length&&i!==this._currentActiveSlide&&this._select(i))}get activeSlide(){return this._currentActiveSlide||0}get interval(){return this._interval}set interval(i){this._interval=i,this.restartTimer()}get slides(){return this._slides.toArray()}get isFirstSlideVisible(){let i=this.getVisibleIndexes();return!i||i instanceof Array&&!i.length?!1:i.includes(0)}get isLastSlideVisible(){let i=this.getVisibleIndexes();return!i||i instanceof Array&&!i.length?!1:i.includes(this._slides.length-1)}get _bsVer(){return yn()}constructor(i,o,r){this.ngZone=o,this.platformId=r,this.noWrap=!1,this.noPause=!1,this.showIndicators=!0,this.pauseOnFocus=!1,this.indicatorsByChunk=!1,this.itemsPerSlide=1,this.singleSlideOffset=!1,this.isAnimated=!1,this.activeSlideChange=new ue(!1),this.slideRangeChange=new ue,this.startFromIndex=0,this._interval=5e3,this._slides=new Qr,this._currentVisibleSlidesIndex=0,this.isPlaying=!1,this.destroyed=!1,this.currentId=0,this.getActive=d=>d.active,this.makeSlidesConsistent=d=>{d.forEach((u,m)=>u.item.order=m)},Object.assign(this,i),this.currentId=jg++}ngAfterViewInit(){setTimeout(()=>{this.singleSlideOffset&&(this.indicatorsByChunk=!1),this.multilist&&(this._chunkedSlides=Lg(this.mapSlidesAndIndexes(),this.itemsPerSlide),this.selectInitialSlides()),this.customActiveSlide&&!this.multilist&&this._select(this.customActiveSlide)},0)}ngOnDestroy(){this.destroyed=!0}addSlide(i){this._slides.add(i),this.multilist&&this._slides.length<=this.itemsPerSlide&&(i.active=!0),!this.multilist&&this.isAnimated&&(i.isAnimated=!0),!this.multilist&&this._slides.length===1&&(this._currentActiveSlide=void 0,this.customActiveSlide||(this.activeSlide=0),this.play()),this.multilist&&this._slides.length>this.itemsPerSlide&&this.play()}removeSlide(i){let o=this._slides.indexOf(i);if(this._currentActiveSlide===o){let r;this._slides.length>1&&(r=this.isLast(o)?this.noWrap?o-1:0:o),this._slides.remove(o),setTimeout(()=>{this._select(r)},0)}else{this._slides.remove(o);let r=this.getCurrentSlideIndex();setTimeout(()=>{this._currentActiveSlide=r,this.activeSlideChange.emit(this._currentActiveSlide)},0)}}nextSlideFromInterval(i=!1){this.move(ht.NEXT,i)}nextSlide(i=!1){this.isPlaying&&this.restartTimer(),this.move(ht.NEXT,i)}previousSlide(i=!1){this.isPlaying&&this.restartTimer(),this.move(ht.PREV,i)}getFirstVisibleIndex(){return this.slides.findIndex(this.getActive)}getLastVisibleIndex(){return Ng(this.slides,this.getActive)}move(i,o=!1){let r=this.getFirstVisibleIndex(),d=this.getLastVisibleIndex();this.noWrap&&(i===ht.NEXT&&this.isLast(d)||i===ht.PREV&&r===0)||(this.multilist?this.moveMultilist(i):this.activeSlide=this.findNextSlideIndex(i,o)||0)}keydownPress(i){if(i.keyCode===13||i.key==="Enter"||i.keyCode===32||i.key==="Space"){this.nextSlide(),i.preventDefault();return}if(i.keyCode===37||i.key==="LeftArrow"){this.previousSlide();return}if(i.keyCode===39||i.key==="RightArrow"){this.nextSlide();return}}onMouseLeave(){this.pauseOnFocus||this.play()}onMouseUp(){this.pauseOnFocus||this.play()}pauseFocusIn(){this.pauseOnFocus&&(this.isPlaying=!1,this.resetTimer())}pauseFocusOut(){this.play()}selectSlide(i){this.isPlaying&&this.restartTimer(),this.multilist?this.selectSlideRange(this.indicatorsByChunk?i*this.itemsPerSlide:i):this.activeSlide=this.indicatorsByChunk?i*this.itemsPerSlide:i}play(){this.isPlaying||(this.isPlaying=!0,this.restartTimer())}pause(){this.noPause||(this.isPlaying=!1,this.resetTimer())}getCurrentSlideIndex(){return this._slides.findIndex(this.getActive)}isLast(i){return i+1>=this._slides.length}isFirst(i){return i===0}indicatorsSlides(){return this.slides.filter((i,o)=>!this.indicatorsByChunk||o%this.itemsPerSlide===0)}selectInitialSlides(){let i=this.startFromIndex<=this._slides.length?this.startFromIndex:0;if(this.hideSlides(),this.singleSlideOffset){if(this._slidesWithIndexes=this.mapSlidesAndIndexes(),this._slides.length-i<this.itemsPerSlide){let o=this._slidesWithIndexes.slice(0,i);this._slidesWithIndexes=[...this._slidesWithIndexes,...o].slice(o.length).slice(0,this.itemsPerSlide)}else this._slidesWithIndexes=this._slidesWithIndexes.slice(i,i+this.itemsPerSlide);this._slidesWithIndexes.forEach(o=>o.item.active=!0),this.makeSlidesConsistent(this._slidesWithIndexes)}else this.selectRangeByNestedIndex(i);this.slideRangeChange.emit(this.getVisibleIndexes())}findNextSlideIndex(i,o){let r=0;if(!(!o&&this.isLast(this.activeSlide)&&i!==ht.PREV&&this.noWrap)){switch(i){case ht.NEXT:if(typeof this._currentActiveSlide>"u"){r=0;break}if(!this.isLast(this._currentActiveSlide)){r=this._currentActiveSlide+1;break}r=!o&&this.noWrap?this._currentActiveSlide:0;break;case ht.PREV:if(typeof this._currentActiveSlide>"u"){r=0;break}if(this._currentActiveSlide>0){r=this._currentActiveSlide-1;break}if(!o&&this.noWrap){r=this._currentActiveSlide;break}r=this._slides.length-1;break;default:throw new Error("Unknown direction")}return r}}mapSlidesAndIndexes(){return this.slides.slice().map((i,o)=>({index:o,item:i}))}selectSlideRange(i){if(!this.isIndexInRange(i)){if(this.hideSlides(),!this.singleSlideOffset)this.selectRangeByNestedIndex(i);else{let o=this.isIndexOnTheEdges(i)?i:i-this.itemsPerSlide+1,r=this.isIndexOnTheEdges(i)?i+this.itemsPerSlide:i+1;this._slidesWithIndexes=this.mapSlidesAndIndexes().slice(o,r),this.makeSlidesConsistent(this._slidesWithIndexes),this._slidesWithIndexes.forEach(d=>d.item.active=!0)}this.slideRangeChange.emit(this.getVisibleIndexes())}}selectRangeByNestedIndex(i){if(!this._chunkedSlides)return;let o=this._chunkedSlides.map((r,d)=>({index:d,list:r})).find(r=>r.list.find(d=>d.index===i)!==void 0);o&&(this._currentVisibleSlidesIndex=o.index,this._chunkedSlides[o.index].forEach(r=>{r.item.active=!0}))}isIndexOnTheEdges(i){return i+1-this.itemsPerSlide<=0||i+this.itemsPerSlide<=this._slides.length}isIndexInRange(i){return this.singleSlideOffset&&this._slidesWithIndexes?this._slidesWithIndexes.map(r=>r.index).indexOf(i)>=0:i<=this.getLastVisibleIndex()&&i>=this.getFirstVisibleIndex()}hideSlides(){this.slides.forEach(i=>i.active=!1)}isVisibleSlideListLast(){return this._chunkedSlides?this._currentVisibleSlidesIndex===this._chunkedSlides.length-1:!1}isVisibleSlideListFirst(){return this._currentVisibleSlidesIndex===0}moveSliderByOneItem(i){let o,r,d,u;if(this.noWrap){o=this.getFirstVisibleIndex(),r=this.getLastVisibleIndex(),d=i===ht.NEXT?o:r,u=i!==ht.NEXT?o-1:this.isLast(r)?0:r+1;let v=this._slides.get(d);v&&(v.active=!1);let E=this._slides.get(u);E&&(E.active=!0);let D=this.mapSlidesAndIndexes().filter(V=>V.item.active);this.makeSlidesConsistent(D),this.singleSlideOffset&&(this._slidesWithIndexes=D),this.slideRangeChange.emit(this.getVisibleIndexes());return}if(!this._slidesWithIndexes||!this._slidesWithIndexes[0])return;let m;if(o=this._slidesWithIndexes[0].index,r=this._slidesWithIndexes[this._slidesWithIndexes.length-1].index,i===ht.NEXT){this._slidesWithIndexes.shift(),m=this.isLast(r)?0:r+1;let v=this._slides.get(m);v&&this._slidesWithIndexes.push({index:m,item:v})}else{this._slidesWithIndexes.pop(),m=this.isFirst(o)?this._slides.length-1:o-1;let v=this._slides.get(m);v&&(this._slidesWithIndexes=[{index:m,item:v},...this._slidesWithIndexes])}this.hideSlides(),this._slidesWithIndexes.forEach(v=>v.item.active=!0),this.makeSlidesConsistent(this._slidesWithIndexes),this.slideRangeChange.emit(this._slidesWithIndexes.map(v=>v.index))}moveMultilist(i){this.singleSlideOffset?this.moveSliderByOneItem(i):(this.hideSlides(),this.noWrap?this._currentVisibleSlidesIndex=i===ht.NEXT?this._currentVisibleSlidesIndex+1:this._currentVisibleSlidesIndex-1:i===ht.NEXT?this._currentVisibleSlidesIndex=this.isVisibleSlideListLast()?0:this._currentVisibleSlidesIndex+1:this.isVisibleSlideListFirst()?this._currentVisibleSlidesIndex=this._chunkedSlides?this._chunkedSlides.length-1:0:this._currentVisibleSlidesIndex=this._currentVisibleSlidesIndex-1,this._chunkedSlides&&this._chunkedSlides[this._currentVisibleSlidesIndex].forEach(o=>o.item.active=!0),this.slideRangeChange.emit(this.getVisibleIndexes()))}getVisibleIndexes(){if(!this.singleSlideOffset&&this._chunkedSlides)return this._chunkedSlides[this._currentVisibleSlidesIndex].map(i=>i.index);if(this._slidesWithIndexes)return this._slidesWithIndexes.map(i=>i.index)}_select(i){if(isNaN(i)){this.pause();return}if(!this.multilist&&typeof this._currentActiveSlide<"u"){let r=this._slides.get(this._currentActiveSlide);typeof r<"u"&&(r.active=!1)}let o=this._slides.get(i);typeof o<"u"&&(this._currentActiveSlide=i,o.active=!0,this.activeSlide=i,this.activeSlideChange.emit(i))}restartTimer(){this.resetTimer();let i=+this.interval;!isNaN(i)&&i>0&&ri(this.platformId)&&(this.currentInterval=this.ngZone.runOutsideAngular(()=>window.setInterval(()=>{let o=+this.interval;this.ngZone.run(()=>{this.isPlaying&&!isNaN(this.interval)&&o>0&&this.slides.length?this.nextSlideFromInterval():this.pause()})},i)))}get multilist(){return this.itemsPerSlide>1}resetTimer(){this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0)}checkDisabledClass(i){return i==="prev"?this.activeSlide===0&&this.noWrap&&!this.multilist||this.isFirstSlideVisible&&this.noWrap&&this.multilist:this.isLast(this.activeSlide)&&this.noWrap&&!this.multilist||this.isLastSlideVisible&&this.noWrap&&this.multilist}};t.\u0275fac=function(o){return new(o||t)(x(Rg),x(Ye),x(Rt))},t.\u0275cmp=M({type:t,selectors:[["carousel"]],inputs:{noWrap:"noWrap",noPause:"noPause",showIndicators:"showIndicators",pauseOnFocus:"pauseOnFocus",indicatorsByChunk:"indicatorsByChunk",itemsPerSlide:"itemsPerSlide",singleSlideOffset:"singleSlideOffset",isAnimated:"isAnimated",activeSlide:"activeSlide",startFromIndex:"startFromIndex",interval:"interval"},outputs:{activeSlideChange:"activeSlideChange",slideRangeChange:"slideRangeChange"},ngContentSelectors:Xu,decls:7,vars:8,consts:[["tabindex","0",1,"carousel","slide",3,"mouseenter","mouseleave","mouseup","keydown","focusin","focusout","id"],[4,"ngIf"],[1,"carousel-inner",3,"ngStyle"],["class","left carousel-control carousel-control-prev","href","javascript:void(0);","tabindex","0","role","button",3,"disabled","click",4,"ngIf"],["class","right carousel-control carousel-control-next","href","javascript:void(0);","tabindex","0","role","button",3,"disabled","click",4,"ngIf"],[1,"carousel-indicators"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],["type","button","aria-current","true",3,"active","click",4,"ngFor","ngForOf"],["type","button","aria-current","true",3,"click"],["href","javascript:void(0);","tabindex","0","role","button",1,"left","carousel-control","carousel-control-prev",3,"click"],["aria-hidden","true",1,"icon-prev","carousel-control-prev-icon"],[1,"sr-only","visually-hidden"],["href","javascript:void(0);","tabindex","0","role","button",1,"right","carousel-control","carousel-control-next",3,"click"],["aria-hidden","true",1,"icon-next","carousel-control-next-icon"]],template:function(o,r){o&1&&(Li(),s(0,"div",0),h("mouseenter",function(){return r.pause()})("mouseleave",function(){return r.onMouseLeave()})("mouseup",function(){return r.onMouseUp()})("keydown",function(u){return r.keydownPress(u)})("focusin",function(){return r.pauseFocusIn()})("focusout",function(){return r.pauseFocusOut()}),_(1,Ig,3,1,"ng-container",1)(2,Tg,3,1,"ng-container",1),s(3,"div",2),Vi(4),a(),_(5,kg,4,3,"a",3)(6,Fg,4,3,"a",4),a()),o&2&&(p("id","carousel"+r.currentId),c(),p("ngIf",!r._bsVer.isBs5&&r.showIndicators&&r.slides.length>1),c(),p("ngIf",r._bsVer.isBs5&&r.showIndicators&&r.slides.length>1),c(),p("ngStyle",Bt(6,Dg,r.multilist?"flex":"block")),c(2),p("ngIf",r.slides.length>1),c(),p("ngIf",r.slides.length>1))},dependencies:[N,z,hs],encapsulation:2});let n=t;return n})(),Qu=(()=>{let t=class t{constructor(i){this.active=!1,this.itemWidth="100%",this.order=0,this.isAnimated=!1,this.addClass=!0,this.multilist=!1,this.carousel=i}ngOnInit(){this.carousel.addSlide(this),this.itemWidth=`${100/this.carousel.itemsPerSlide}%`,this.multilist=this.carousel?.itemsPerSlide>1}ngOnDestroy(){this.carousel.removeSlide(this)}};t.\u0275fac=function(o){return new(o||t)(x(_l))},t.\u0275cmp=M({type:t,selectors:[["slide"]],hostVars:15,hostBindings:function(o,r){o&2&&(bt("aria-hidden",!r.active),ni("width",r.itemWidth)("order",r.order),Z("multilist-margin",r.multilist)("active",r.active)("carousel-animation",r.isAnimated)("item",r.addClass)("carousel-item",r.addClass))},inputs:{active:"active"},ngContentSelectors:Xu,decls:2,vars:2,consts:[[1,"item"]],template:function(o,r){o&1&&(Li(),be(0,"div",0),Vi(1),ge()),o&2&&Z("active",r.active)},styles:[".carousel-animation[_nghost-%COMP%]{transition:opacity .6s ease,visibility .6s ease;float:left}.carousel-animation.active[_nghost-%COMP%]{opacity:1;visibility:visible}.carousel-animation[_nghost-%COMP%]:not(.active){display:block;position:absolute;opacity:0;visibility:hidden}.multilist-margin[_nghost-%COMP%]{margin-right:auto}.carousel-item[_nghost-%COMP%]{perspective:1000px}"]});let n=t;return n})(),ep=(()=>{let t=class t{static forRoot(){return{ngModule:t,providers:[]}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Xe({type:t}),t.\u0275inj=Je({});let n=t;return n})();var Zt=class n{constructor(t){this.http=t}apiUrl=J.apiUrl+"/promociones";getPromocionesActivas(){return this.http.get(`${this.apiUrl}/activas`)}getPromocionById(t){return this.http.get(`${this.apiUrl}/${t}`)}obtenerTodasLasPromociones(){return this.http.get(`${this.apiUrl}/todas`)}crearPromocion(t){return this.http.post(this.apiUrl,t)}actualizarPromocion(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}eliminarPromocion(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ug=()=>["/ofertas"];function Bg(n,t){if(n&1&&b(0,"img",7),n&2){let e=f().$implicit;p("src",e.imagenUrl,ve)}}function Gg(n,t){if(n&1&&(s(0,"slide"),_(1,Bg,1,1,"img",4),s(2,"div",5)(3,"h1"),l(4),a(),s(5,"p"),l(6),a(),s(7,"a",6),l(8,"Ver M\xE1s"),a()()()),n&2){let e=t.$implicit;c(),p("ngIf",e.imagenUrl),c(3),S(e.titulo),c(2),S(e.descripcion),c(),p("routerLink",Wo(4,Ug))}}function $g(n,t){if(n&1&&(s(0,"div",1)(1,"carousel",2),_(2,Gg,9,5,"slide",3),a()()),n&2){let e=f();c(),p("isAnimated",!0)("showIndicators",!0)("interval",5e3),c(),p("ngForOf",e.promociones)}}var ta=class n{constructor(t){this.promocionService=t}promociones=[];ngOnInit(){this.promocionService.getPromocionesActivas().subscribe(t=>{this.promociones=t})}static \u0275fac=function(e){return new(e||n)(x(Zt))};static \u0275cmp=M({type:n,selectors:[["app-carrusel-principal"]],decls:1,vars:1,consts:[["class","announcement-bar","id","carrusel",4,"ngIf"],["id","carrusel",1,"announcement-bar"],[3,"isAnimated","showIndicators","interval"],[4,"ngFor","ngForOf"],["alt","slide de promoci\xF3n","class","slide-image",3,"src",4,"ngIf"],[1,"carousel-caption"],[1,"btn","btn-primary",3,"routerLink"],["alt","slide de promoci\xF3n",1,"slide-image",3,"src"]],template:function(e,i){e&1&&_(0,$g,3,4,"div",0),e&2&&p("ngIf",i.promociones.length>0)},dependencies:[k,z,N,ep,Qu,_l,oe],styles:["[_nghost-%COMP%]     .carousel{height:500px}.slide-image[_ngcontent-%COMP%]{width:100%;height:500px;object-fit:cover;filter:brightness(.6)}.carousel-caption[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;color:#fff;width:80%;max-width:700px}.carousel-caption[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;font-weight:700;margin-bottom:20px;text-shadow:2px 2px 8px rgba(0,0,0,.7)}.carousel-caption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;margin-bottom:30px;text-shadow:1px 1px 6px rgba(0,0,0,.7)}.carousel-caption[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:2px solid white;padding:12px 30px;font-size:16px;font-weight:700;text-decoration:none;border-radius:5px;transition:all .3s ease}.carousel-caption[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#fff;color:#333}[_nghost-%COMP%]     .carousel-indicators button{width:12px;height:12px;border-radius:50%;margin:0 8px;background-color:#ffffff80}[_nghost-%COMP%]     .carousel-indicators .active{background-color:#fff}"]})};var na=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-inicio"]],decls:19,vars:0,consts:[[1,"hero-section"],[1,"hero-container"],[1,"hero-text"],[1,"hero-buttons"],["routerLink","/catalogo",1,"btn","btn-primary"],["href","#contacto",1,"btn","btn-secondary"],[1,"hero-image"],["src","assets/imagenes/logo.png","alt","Emblema de Reposter\xEDa D'Juancito"]],template:function(e,i){e&1&&(b(0,"app-carrusel-principal"),s(1,"section",0)(2,"div",1)(3,"div",2)(4,"h1"),l(5,'"Donde el Sabor se Convierte en Recuerdo"'),a(),s(6,"p"),l(7," Bienvenidos a nuestro rinc\xF3n dulce, donde cada pastel, torta y postre se hace con amor y dedicaci\xF3n. Aqu\xED horneamos momentos especiales, combinando sabor, creatividad y detalles \xFAnicos que transforman cualquier ocasi\xF3n en un recuerdo inolvidable. "),a(),s(8,"div",3)(9,"a",4),l(10,"Realiza tu pedido"),a(),s(11,"a",5),l(12,"Env\xEDanos un Mensaje"),a()()(),s(13,"div",6),b(14,"img",7),a()()(),b(15,"app-productos-destacados")(16,"app-resenas")(17,"app-llamada-a-catalogo")(18,"app-contacto"))},dependencies:[oe,yi,Vr,Jr,Xr,ta],styles:[".hero-section[_ngcontent-%COMP%]{background-color:#fdf6f2;padding:80px 40px;font-family:Arial,sans-serif}.hero-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:60px}.hero-text[_ngcontent-%COMP%]{flex:1}.hero-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:52px;color:#333;margin-bottom:25px;line-height:1.2}.hero-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#3d3d3d;line-height:1.7;margin-bottom:35px}.hero-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.hero-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:15px 30px;border-radius:8px;text-decoration:none;font-weight:700;font-size:16px;transition:all .3s ease}.hero-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#eb7221;color:#fff}.hero-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#eb7221}.hero-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:transparent;color:#333;border:2px solid #333}.hero-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background-color:#eb7221;color:#fff;border-color:#eb7221}.hero-image[_ngcontent-%COMP%]{flex-basis:400px}.hero-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:50%}"]})};var Ii=class n{constructor(t){this.http=t}baseUrl=J.apiUrl;subirImagen(t){let e=new FormData;return e.append("file",t),this.http.post(`${this.baseUrl}/cloudinary/subir`,e)}getProductos(){return this.http.get(`${this.baseUrl}/productos`)}getProductosPorCategoria(t){return this.http.get(`${this.baseUrl}/productos/categoria/${t}`)}getProductosPersonalizables(){return this.http.get(`${this.baseUrl}/productos/personalizables`)}getProductosPredeterminados(){return this.http.get(`${this.baseUrl}/productos/predeterminados`)}getProductosPorNombre(t){return this.http.get(`${this.baseUrl}/productos/buscar/${t}`)}crearProducto(t){return this.http.post(`${this.baseUrl}/productos`,t)}actualizarProducto(t,e){return this.http.put(`${this.baseUrl}/productos/${t}`,e)}eliminarProducto(t){return this.http.delete(`${this.baseUrl}/productos/${t}`)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ge=class n{items=new $e([]);items$=this.items.asObservable();constructor(){this.cargar()}agregarAlCarrito(t){if("precioUnitario"in t)this.agregarItem(t);else{let e=t,i={productoId:e.productoId,nombre:e.nombre,imagenUrl:e.imagenUrl,precioBase:e.precioBase,precioUnitario:e.precioBase,cantidad:1,subtotal:e.precioBase,personalizable:e.personalizable,personalizacion:e.personalizacion};this.agregarItem(i)}}agregarItem(t){let e=this.items.getValue(),i=e.find(o=>o.productoId===t.productoId);i?(i.cantidad+=t.cantidad,i.subtotal=i.precioUnitario*i.cantidad):(t.subtotal=t.precioUnitario*t.cantidad,e.push(t)),this.items.next(e),this.guardar()}cambiarCantidad(t,e){if(e<1)return;let i=this.items.getValue(),o=i.find(r=>r.productoId===t);o&&(o.cantidad=e,o.subtotal=o.precioUnitario*e,this.items.next(i),this.guardar())}eliminar(t){let e=this.items.getValue().filter(i=>i.productoId!==t);this.items.next(e),this.guardar()}obtenerItems(){return this.items.getValue()}calcularTotal(){return this.items.getValue().reduce((t,e)=>t+e.subtotal,0)}calcularAhorroTotal(){return this.items.getValue().reduce((t,e)=>t+(e.precioBase-e.precioUnitario)*e.cantidad,0)}vaciar(){this.items.next([]),localStorage.removeItem("carrito_djuancito")}limpiar(){this.vaciar()}guardar(){localStorage.setItem("carrito_djuancito",JSON.stringify(this.items.getValue()))}cargar(){let t=localStorage.getItem("carrito_djuancito");if(t)try{this.items.next(JSON.parse(t))}catch(e){console.error("Error cargando carrito",e)}}actualizarPersonalizacion(t,e){let i=this.items.getValue(),o=i.find(r=>r.productoId===t);if(o){o.personalizacion=e;let r=e.costoAdicional||0;o.precioUnitario=o.precioBase+r,o.subtotal=o.precioUnitario*o.cantidad,this.items.next(i),this.guardar()}else console.error(`No se encontr\xF3 el producto con ID ${t} en el carrito.`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function tp(n){n||(n=w(On));let t=new Kn(e=>{if(n.destroyed){e.next();return}return n.onDestroy(e.next.bind(e))});return e=>e.pipe(ki(t))}var sp=(function(n){return n.top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top",n})(sp||{}),El=(function(n){return n.top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top",n})(El||{});function Yn(n,t){if(n.nodeType!==1)return[];let i=n.ownerDocument.defaultView?.getComputedStyle(n,null);return t?i&&i[t]:i}function Sl(n){if(!n)return document.documentElement;let t=null,e=n?.offsetParent,i;for(;e===t&&n.nextElementSibling&&i!==n.nextElementSibling;)i=n.nextElementSibling,e=i.offsetParent;let o=e&&e.nodeName;return!o||o==="BODY"||o==="HTML"?i?i.ownerDocument.documentElement:document.documentElement:e&&["TH","TD","TABLE"].indexOf(e.nodeName)!==-1&&Yn(e,"position")==="static"?Sl(e):e}function Hg(n){let{nodeName:t}=n;return t==="BODY"?!1:t==="HTML"||Sl(n.firstElementChild)===n}function Cl(n){return n.parentNode!==null?Cl(n.parentNode):n}function aa(n,t){if(!n||!n.nodeType||!t||!t.nodeType)return document.documentElement;let e=n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=e?n:t,o=e?t:n,r=document.createRange();r.setStart(i,0),r.setEnd(o,0);let d=r.commonAncestorContainer;if(n!==d&&t!==d||i.contains(o))return Hg(d)?d:Sl(d);let u=Cl(n);return u.host?aa(u.host,t):aa(n,Cl(t).host)}function lp(n){if(!n||!n.parentElement)return document.documentElement;let t=n.parentElement;for(;t?.parentElement&&Yn(t,"transform")==="none";)t=t.parentElement;return t||document.documentElement}function np(n,t){let e=t==="x"?"Left":"Top",i=e==="Left"?"Right":"Bottom";return parseFloat(n[`border${e}Width`])+parseFloat(n[`border${i}Width`])}function ip(n,t,e){let i=t,o=e;return Math.max(i[`offset${n}`],i[`scroll${n}`],o[`client${n}`],o[`offset${n}`],o[`scroll${n}`],0)}function cp(n){let t=n.body,e=n.documentElement;return{height:ip("Height",t,e),width:ip("Width",t,e)}}function Oo(n){return ae(O({},n),{right:(n.left||0)+n.width,bottom:(n.top||0)+n.height})}function Wg(n){return n!==""&&!isNaN(parseFloat(n))&&isFinite(Number(n))}function Se(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function op(n){let t=n.getBoundingClientRect();if(!(t&&Se(t.top)&&Se(t.left)&&Se(t.bottom)&&Se(t.right)))return t;let e={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},i=n.nodeName==="HTML"?cp(n.ownerDocument):void 0,o=i?.width||n.clientWidth||Se(t.right)&&Se(e.left)&&t.right-e.left||0,r=i?.height||n.clientHeight||Se(t.bottom)&&Se(e.top)&&t.bottom-e.top||0,d=n.offsetWidth-o,u=n.offsetHeight-r;if(d||u){let m=Yn(n);d-=np(m,"x"),u-=np(m,"y"),e.width-=d,e.height-=u}return Oo(e)}function Pl(n,t,e=!1){let i=t.nodeName==="HTML",o=op(n),r=op(t),d=Yn(t),u=parseFloat(d.borderTopWidth),m=parseFloat(d.borderLeftWidth);e&&i&&(r.top=Math.max(r.top??0,0),r.left=Math.max(r.left??0,0));let v=Oo({top:(o.top??0)-(r.top??0)-u,left:(o.left??0)-(r.left??0)-m,width:o.width,height:o.height});if(v.marginTop=0,v.marginLeft=0,i){let E=parseFloat(d.marginTop),D=parseFloat(d.marginLeft);Se(v.top)&&(v.top-=u-E),Se(v.bottom)&&(v.bottom-=u-E),Se(v.left)&&(v.left-=m-D),Se(v.right)&&(v.right-=m-D),v.marginTop=E,v.marginLeft=D}return v}function Ml(n){return n.nodeName==="HTML"?n:n.parentNode||n.host}function dp(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body;default:}let{overflow:t,overflowX:e,overflowY:i}=Yn(n);return/(auto|scroll|overlay)/.test(String(t)+String(i)+String(e))?n:dp(Ml(n))}function rp(n,t="top"){let e=t==="top"?"scrollTop":"scrollLeft",i=n.nodeName;if(i==="BODY"||i==="HTML"){let o=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||o)[e]}return n[e]}function qg(n,t=!1){let e=n.ownerDocument.documentElement,i=Pl(n,e),o=Math.max(e.clientWidth,window.innerWidth||0),r=Math.max(e.clientHeight,window.innerHeight||0),d=t?0:rp(e),u=t?0:rp(e,"left"),m={top:d-Number(i?.top)+Number(i?.marginTop),left:u-Number(i?.left)+Number(i?.marginLeft),width:o,height:r};return Oo(m)}function up(n){let t=n.nodeName;return t==="BODY"||t==="HTML"?!1:Yn(n,"position")==="fixed"?!0:up(Ml(n))}function Dl(n,t,e=0,i,o=!1){let r={top:0,left:0},d=o?lp(n):aa(n,t);if(i==="viewport")r=qg(d,o);else{let u;i==="scrollParent"?(u=dp(Ml(t)),u.nodeName==="BODY"&&(u=n.ownerDocument.documentElement)):i==="window"?u=n.ownerDocument.documentElement:u=i;let m=Pl(u,d,o);if(m&&u.nodeName==="HTML"&&!up(d)){let{height:v,width:E}=cp(n.ownerDocument);Se(r.top)&&Se(m.top)&&Se(m.marginTop)&&(r.top+=m.top-m.marginTop),Se(r.top)&&(r.bottom=Number(v)+Number(m.top)),Se(r.left)&&Se(m.left)&&Se(m.marginLeft)&&(r.left+=m.left-m.marginLeft),Se(r.top)&&(r.right=Number(E)+Number(m.left))}else m&&(r=m)}return Se(r.left)&&(r.left+=e),Se(r.top)&&(r.top+=e),Se(r.right)&&(r.right-=e),Se(r.bottom)&&(r.bottom-=e),r}function Yg({width:n,height:t}){return n*t}function pp(n,t,e,i,o=["top","bottom","right","left"],r="viewport",d=0){if(n.indexOf("auto")===-1)return n;let u=Dl(e,i,d,r),m={top:{width:u?.width??0,height:(t?.top??0)-(u?.top??0)},right:{width:(u?.right??0)-(t?.right??0),height:u?.height??0},bottom:{width:u?.width??0,height:(u?.bottom??0)-(t?.bottom??0)},left:{width:(t.left??0)-(u?.left??0),height:u?.height??0}},v=Object.keys(m).map(L=>ae(O({position:L},m[L]),{area:Yg(m[L])})).sort((L,B)=>B.area-L.area),E=v.filter(({width:L,height:B})=>L>=e.clientWidth&&B>=e.clientHeight);E=E.filter(({position:L})=>o.some(B=>B===L));let D=E.length>0?E[0].position:v[0].position,V=n.split(" ")[1];return e.className=e.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${yn().isBs5?El[D]:D}`),D+(V?`-${V}`:"")}function Zg(n){return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(n.offsets.target.left??0),top:Math.round(n.offsets.target.top??0),bottom:Math.round(n.offsets.target.bottom??0),right:Math.floor(n.offsets.target.right??0)}}function Kg(n){let t={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,e=>t[e])}function Jg(n){return n==="right"?"left":n==="left"?"right":n}var ia=(n,t=0)=>n?parseFloat(n):t;function mp(n){let e=n.ownerDocument.defaultView?.getComputedStyle(n),i=ia(e?.marginTop)+ia(e?.marginBottom),o=ia(e?.marginLeft)+ia(e?.marginRight);return{width:Number(n.offsetWidth)+o,height:Number(n.offsetHeight)+i}}function fp(n,t,e){let i=e?lp(n):aa(n,t);return Pl(t,i,e)}function yl(n,t,e){let i=e.split(" ")[0],o=mp(n),r={width:o.width,height:o.height},d=["right","left"].indexOf(i)!==-1,u=d?"top":"left",m=d?"left":"top",v=d?"height":"width",E=d?"width":"height";return r[u]=(t[u]??0)+t[v]/2-o[v]/2,r[m]=i===m?(t[m]??0)-o[E]:t[Kg(m)]??0,r}function gp(n,t){return!!n.modifiers[t]?.enabled}var Xg={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function oa(n,t){return yn().isBs5?Xg[t].includes(n):!1}function Qg(n){return yn().isBs5?oa(n,"end")?"ms-2":oa(n,"start")?"me-2":oa(n,"top")?"mb-2":oa(n,"bottom")?"mt-2":"":""}function eh(n,t){let e=n.instance.target,i=e.className,o=yn().isBs5?El[n.placement]:n.placement;if(n.placementAuto&&(i=i.replace(/bs-popover-auto/g,`bs-popover-${o}`),i=i.replace(/ms-2|me-2|mb-2|mt-2/g,""),i=i.replace(/bs-tooltip-auto/g,`bs-tooltip-${o}`),i=i.replace(/\sauto/g,` ${o}`),i.indexOf("popover")!==-1&&(i=i+" "+Qg(o)),i.indexOf("popover")!==-1&&i.indexOf("popover-auto")===-1&&(i+=" popover-auto"),i.indexOf("tooltip")!==-1&&i.indexOf("tooltip-auto")===-1&&(i+=" tooltip-auto")),i=i.replace(/left|right|top|bottom|end|start/g,`${o.split(" ")[0]}`),t){t.setAttribute(e,"class",i);return}e.className=i}function ap(n,t,e){!n||!t||Object.keys(t).forEach(i=>{let o="";if(["width","height","top","right","bottom","left"].indexOf(i)!==-1&&Wg(t[i])&&(o="px"),e){e.setStyle(n,i,`${String(t[i])}${o}`);return}n.style[i]=String(t[i])+o})}function th(n){let t=n.offsets.target,e=n.instance.target.querySelector(".arrow");if(!e)return n;let i=["left","right"].indexOf(n.placement.split(" ")[0])!==-1,o=i?"height":"width",r=i?"Top":"Left",d=r.toLowerCase(),u=i?"left":"top",m=i?"bottom":"right",v=mp(e)[o],E=n.placement.split(" ")[1];(n.offsets.host[m]??0)-v<(t[d]??0)&&(t[d]-=(t[d]??0)-((n.offsets.host[m]??0)-v)),Number(n.offsets.host[d])+Number(v)>(t[m]??0)&&(t[d]+=Number(n.offsets.host[d])+Number(v)-Number(t[m])),t=Oo(t);let D=Yn(n.instance.target),V=parseFloat(D[`margin${r}`])||0,L=parseFloat(D[`border${r}Width`])||0,B;if(!E)B=Number(n.offsets.host[d])+Number(n.offsets.host[o]/2-v/2);else{let G=parseFloat(D.borderRadius)||0,Y=Number(V+L+G);B=d===E?Number(n.offsets.host[d])+Y:Number(n.offsets.host[d])+Number(n.offsets.host[o]-Y)}let ye=B-(t[d]??0)-V-L;return ye=Math.max(Math.min(t[o]-(v+5),ye),0),n.offsets.arrow={[d]:Math.round(ye),[u]:""},n.instance.arrow=e,n}function nh(n){if(n.offsets.target=Oo(n.offsets.target),!gp(n.options,"flip"))return n.offsets.target=O(O({},n.offsets.target),yl(n.instance.target,n.offsets.host,n.placement)),n;let t=Dl(n.instance.target,n.instance.host,0,"viewport",!1),e=n.placement.split(" ")[0],i=n.placement.split(" ")[1]||"",o=n.offsets.host,r=n.instance.target,d=n.instance.host,u=pp("auto",o,r,d,n.options.allowedPositions),m=[e,u];return m.forEach((v,E)=>{if(e!==v||m.length===E+1)return;e=n.placement.split(" ")[0];let D=e==="left"&&Math.floor(n.offsets.target.right??0)>Math.floor(n.offsets.host.left??0)||e==="right"&&Math.floor(n.offsets.target.left??0)<Math.floor(n.offsets.host.right??0)||e==="top"&&Math.floor(n.offsets.target.bottom??0)>Math.floor(n.offsets.host.top??0)||e==="bottom"&&Math.floor(n.offsets.target.top??0)<Math.floor(n.offsets.host.bottom??0),V=Math.floor(n.offsets.target.left??0)<Math.floor(t.left??0),L=Math.floor(n.offsets.target.right??0)>Math.floor(t.right??0),B=Math.floor(n.offsets.target.top??0)<Math.floor(t.top??0),ye=Math.floor(n.offsets.target.bottom??0)>Math.floor(t.bottom??0),G=e==="left"&&V||e==="right"&&L||e==="top"&&B||e==="bottom"&&ye,Y=["top","bottom"].indexOf(e)!==-1,we=Y&&i==="left"&&V||Y&&i==="right"&&L||!Y&&i==="left"&&B||!Y&&i==="right"&&ye;(D||G||we)&&((D||G)&&(e=m[E+1]),we&&(i=Jg(i)),n.placement=e+(i?` ${i}`:""),n.offsets.target=O(O({},n.offsets.target),yl(n.instance.target,n.offsets.host,n.placement)))}),n}function ih(n,t,e,i){if(!n||!t)return;let o=fp(n,t);!e.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!e.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(e="auto");let r=!!e.match(/auto/g),d=e.match(/auto\s(left|right|top|bottom|start|end)/)?e.split(" ")[1]||"auto":e,u=d.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);u&&(d=u[1]+(u[2]?` ${u[2]}`:"")),["left right","right left","top bottom","bottom top"].indexOf(d)!==-1&&(d="auto"),d=pp(d,o,n,t,i?i.allowedPositions:void 0);let m=yl(n,o,d);return{options:i||{modifiers:{}},instance:{target:n,host:t,arrow:void 0},offsets:{target:m,host:o,arrow:void 0},positionFixed:!1,placement:d,placementAuto:r}}function oh(n){if(!gp(n.options,"preventOverflow"))return n;let t="transform",e=n.instance.target.style,{top:i,left:o,[t]:r}=e;e.top="",e.left="",e[t]="";let d=Dl(n.instance.target,n.instance.host,0,n.options.modifiers.preventOverflow?.boundariesElement||"scrollParent",!1);e.top=i,e.left=o,e[t]=r;let u=["left","right","top","bottom"],m={primary(v){let E=n.offsets.target[v];return(n.offsets.target[v]??0)<(d[v]??0)&&(E=Math.max(n.offsets.target[v]??0,d[v]??0)),{[v]:E}},secondary(v){let E=v==="right",D=E?"left":"top",V=E?"width":"height",L=n.offsets.target[D];return(n.offsets.target[v]??0)>(d[v]??0)&&(L=Math.min(n.offsets.target[D]??0,(d[v]??0)-n.offsets.target[V])),{[D]:L}}};return u.forEach(v=>{let E=["left","top","start"].indexOf(v)!==-1?m.primary:m.secondary;n.offsets.target=O(O({},n.offsets.target),E(v))}),n}function rh(n){let t=n.placement,e=t.split(" ")[0],i=t.split(" ")[1];if(i){let{host:o,target:r}=n.offsets,d=["bottom","top"].indexOf(e)!==-1,u=d?"left":"top",m=d?"width":"height",v={start:{[u]:o[u]},end:{[u]:(o[u]??0)+o[m]-r[m]}};n.offsets.target=ae(O({},r),{[u]:u===i?v.start[u]:v.end[u]})}return n}var wl=class{position(t,e){return this.offset(t,e)}offset(t,e){return fp(e,t)}positionElements(t,e,i,o,r){let d=[nh,rh,oh,th],u=sp[i],m=ih(e,t,u,r);if(m)return d.reduce((v,E)=>E(v),m)}},ah=new wl;function sh(n,t,e,i,o,r){let d=ah.positionElements(n,t,e,i,o);if(!d)return;let u=Zg(d);ap(t,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${u.left}px, ${u.top}px, 0px)`},r),d.instance.arrow&&ap(d.instance.arrow,d.offsets.arrow,r),eh(d,r)}var Io=(()=>{let t=class t{constructor(i,o,r){this.update$$=new rt,this.positionElements=new Map,this.isDisabled=!1,ri(r)&&i.runOutsideAngular(()=>{this.triggerEvent$=Bl(Ha(window,"scroll",{passive:!0}),Ha(window,"resize",{passive:!0}),U(0,Ll),this.update$$),this.triggerEvent$.pipe(tp()).subscribe(()=>{this.isDisabled||this.positionElements.forEach(d=>{sh(ra(d.target),ra(d.element),d.attachment,d.appendToBody,this.options,o.createRenderer(null,null))})})})}position(i){this.addPositionElement(i)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(i){this.positionElements.set(ra(i.element),i)}calcPosition(){this.update$$.next(null)}deletePositionElement(i){this.positionElements.delete(ra(i))}setOptions(i){this.options=i}};t.\u0275fac=function(o){return new(o||t)(F(Ye),F(pn),F(Rt))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function ra(n){return typeof n=="string"?document.querySelector(n):n instanceof De?n.nativeElement:n??null}var Zn=class{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}},Ol=class{constructor(t,e,i,o,r,d,u,m,v){this._viewContainerRef=t,this._renderer=e,this._elementRef=i,this._injector=o,this._componentFactoryResolver=r,this._ngZone=d,this._applicationRef=u,this._posService=m,this._document=v,this.onBeforeShow=new ue,this.onShown=new ue,this.onBeforeHide=new ue,this.onHidden=new ue,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return this._isHiding?!1:!!this._componentRef}attach(t){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(t),this}to(t){return this.container=t||this.container,this}position(t){return t?(this.attachment=t.attachment||this.attachment,this._elementRef=t.target||this._elementRef,this):this}provide(t){return this._providers.push(t),this}show(t={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(t.content,t.context,t.initialState);let e=st.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(e,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,t),this.container instanceof De&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),typeof this.container=="string"&&typeof this._document<"u"){let i=this._document.querySelector(this.container)||this._document.querySelector(this.containerDefaultSelector);if(!i)return;i.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(t.id?{id:t.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(t){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);let e=this._componentRef.location.nativeElement;return e.parentNode?.removeChild(e),this._contentRef?.componentRef?.destroy(),this._viewContainerRef&&this._contentRef?.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef?.viewRef?.destroy(),this._componentRef?.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(t?{id:t}:null),this}toggle(){if(this.isShown){this.hide();return}this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(t){this.triggers=t.triggers||this.triggers,this._listenOpts.outsideClick=t.outsideClick,this._listenOpts.outsideEsc=t.outsideEsc,t.target=t.target||this._elementRef?.nativeElement;let e=this._listenOpts.hide=()=>t.hide?t.hide():void this.hide(),i=this._listenOpts.show=r=>{t.show?t.show(r):this.show(r),r()},o=r=>{this.isShown?e():i(r)};return this._renderer&&(this._unregisterListenersFn=qu(this._renderer,{target:t.target,triggers:t.triggers,show:i,hide:e,toggle:o})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(t,e){return t&&e&&(this._inlineViewRef=t.createEmbeddedView(e)),this}_registerOutsideClick(){if(!this._componentRef||!this._componentRef.location)return;let t=Function.prototype,e=Function.prototype;if(this._listenOpts.outsideClick){let i=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(t=Yu(this._renderer,{targets:[i,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}if(this._listenOpts.outsideEsc&&this._renderer&&this._elementRef){let i=this._componentRef.location.nativeElement;e=Zu(this._renderer,{targets:[i,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()})}this._globalListener=()=>{t(),e()}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef?.location,target:this._elementRef,attachment:this.attachment,appendToBody:this.container==="body"})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{this._componentRef&&this._posService.calcPosition()}))}_unsubscribePositioning(){this._zoneSubscription&&(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(t,e,i){if(!t)return new Zn([]);if(t instanceof Ri){if(this._viewContainerRef){let d=this._viewContainerRef.createEmbeddedView(t,e);return d.markForCheck(),new Zn([d.rootNodes],d)}let r=t.createEmbeddedView({});return this._applicationRef.attachView(r),new Zn([r.rootNodes],r)}if(typeof t=="function"){let r=this._componentFactoryResolver.resolveComponentFactory(t),d=st.create({providers:this._providers,parent:this._injector}),u=r.create(d);return Object.assign(u.instance,i),this._applicationRef.attachView(u.hostView),new Zn([[u.location.nativeElement]],u.hostView,u)}let o=this._renderer?[this._renderer.createText(`${t}`)]:[];return new Zn([o])}},Ao=(()=>{let t=class t{constructor(i,o,r,d,u,m){this._componentFactoryResolver=i,this._ngZone=o,this._injector=r,this._posService=d,this._applicationRef=u,this._document=m}createLoader(i,o,r){return new Ol(o,r,i,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService,this._document)}};t.\u0275fac=function(o){return new(o||t)(F(cc),F(Ye),F(st),F(Io),F(Fn),F(me))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function hp(n){return n!=null&&`${n}`!="false"}var Il;try{Il=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Il=!1}var bp=(()=>{let t=class t{constructor(i){this._platformId=i,this.isBrowser=this._platformId?ri(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Il)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(o){return new(o||t)(F(Rt))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var _p=(()=>{let t=class t{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return uh(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let o=dh(_h(i));if(o&&(vp(o)===-1||!this.isVisible(o)))return!1;let r=i.nodeName.toLowerCase(),d=vp(i);return i.hasAttribute("contenteditable")?d!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!vh(i)?!1:r==="audio"?i.hasAttribute("controls")?d!==-1:!1:r==="video"?d===-1?!1:d!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,o){return bh(i)&&!this.isDisabled(i)&&(o?.ignoreVisibility||this.isVisible(i))}};t.\u0275fac=function(o){return new(o||t)(F(bp))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function dh(n){try{return n.frameElement}catch{return null}}function uh(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function ph(n){let t=n.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function mh(n){return gh(n)&&n.type=="hidden"}function fh(n){return hh(n)&&n.hasAttribute("href")}function gh(n){return n.nodeName.toLowerCase()=="input"}function hh(n){return n.nodeName.toLowerCase()=="a"}function xp(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let t=n.getAttribute("tabindex");return t=="-32768"?!1:!!(t&&!isNaN(parseInt(t,10)))}function vp(n){if(!xp(n))return null;let t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function vh(n){let t=n.nodeName.toLowerCase(),e=t==="input"&&n.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function bh(n){return mh(n)?!1:ph(n)||fh(n)||n.hasAttribute("contenteditable")||xp(n)}function _h(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var xh=(()=>{let t=class t{constructor(){this._focusTrapStack=[]}register(i){this._focusTrapStack=this._focusTrapStack.filter(r=>r!==i);let o=this._focusTrapStack;o.length&&o[o.length-1]._disable(),o.push(i),i._enable()}deregister(i){i._disable();let o=this._focusTrapStack,r=o.indexOf(i);r!==-1&&(o.splice(r,1),o.length&&o[o.length-1]._enable())}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Al=class{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,i,o,r=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let i=0;i<e.length;i++)e[i].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[i]):e[i].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[i]);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){let t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){let e=this._getFirstTabbableElement(t);return e?.focus(),!!e}return t.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){let t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){let t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let i=0;i<e.length;i++){let o=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(o)return o}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let i=e.length-1;i>=0;i--){let o=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(o)return o}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(cn(1)).subscribe(t)}},Ch=(()=>{let t=class t{constructor(i,o,r){this._checker=i,this._ngZone=o,this._document=r}create(i,o=!1){return new Al(i,this._checker,this._ngZone,this._document,o)}};t.\u0275fac=function(o){return new(o||t)(F(_p),F(Ye),F(me))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Cp=(()=>{let t=class t{get enabled(){return this.focusTrap.enabled}set enabled(i){this.focusTrap.enabled=hp(i)}get autoCapture(){return this._autoCapture}set autoCapture(i){this._autoCapture=hp(i)}constructor(i,o,r){this._elementRef=i,this._focusTrapFactory=o,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=r,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(i){let o=i.autoCapture;o&&!o.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}};t.\u0275fac=function(o){return new(o||t)(x(De),x(Ch),x(me))},t.\u0275dir=se({type:t,selectors:[["","focusTrap",""]],inputs:{enabled:[0,"cdkTrapFocus","enabled"],autoCapture:[0,"cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[Ee([xh,bp,_p]),Et]});let n=t;return n})(),yp=(()=>{let t=class t{static forRoot(){return{ngModule:t,providers:[]}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Xe({type:t}),t.\u0275inj=Je({imports:[k]});let n=t;return n})();var yh=["*"],wn=(()=>{let t=class t{constructor(){this.hide=()=>{},this.setClass=()=>{}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"platform"});let n=t;return n})();var wp=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"platform"});let n=t;return n})(),sa={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},wh=new W("override-default-config"),Kt={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",IN:"in",SHOW:"show"};var la={MODAL:300,BACKDROP:150},Tl={BACKRDOP:"backdrop-click",ESC:"esc",BACK:"browser-back-navigation-clicked"},Eh=(()=>{let t=class t{get isAnimated(){return this._isAnimated}set isAnimated(i){this._isAnimated=i}get isShown(){return this._isShown}set isShown(i){this._isShown=i,i?this.renderer.addClass(this.element.nativeElement,`${Kt.SHOW}`):this.renderer.removeClass(this.element.nativeElement,`${Kt.SHOW}`)}constructor(i,o){this._isAnimated=!1,this._isShown=!1,this.element=i,this.renderer=o}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,`${Kt.FADE}`),ea.reflow(this.element.nativeElement)),this.isShown=!0}};t.\u0275fac=function(o){return new(o||t)(x(De),x(We))},t.\u0275cmp=M({type:t,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(o,r){},encapsulation:2});let n=t;return n})(),Sh=1,jt=(()=>{let t=class t{constructor(i,o,r){this.clf=o,this.modalDefaultOption=r,this.onShow=new ue,this.onShown=new ue,this.onHide=new ue,this.onHidden=new ue,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.lastHiddenId=null,this.loaders=[],this._focusEl=null,this._backdropLoader=this.clf.createLoader(),this._renderer=i.createRenderer(null,null),this.config=r?Object.assign({},sa,r):sa}show(i,o){this._focusEl=Re.activeElement,this.modalsCount++,this.lastHiddenId=null,this._createLoaders();let r=o?.id||Sh++;return this.config=this.modalDefaultOption?Object.assign({},sa,this.modalDefaultOption,o):Object.assign({},sa,o),this.config.id=r,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(i)}hide(i){this.lastHiddenId!==i&&(this.lastHiddenId=i,(this.modalsCount===1||i==null)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&i!=null?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(i),this.removeLoaders(i)},this.config.animated?la.BACKDROP:0),this._focusEl&&this._focusEl.focus())}_showBackdrop(){let i=this.config.backdrop===!0||this.config.backdrop==="static",o=!this.backdropRef||!this.backdropRef.instance.isShown;this.modalsCount===1&&(this.removeBackdrop(),i&&o&&(this._backdropLoader.attach(Eh).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){if(!this.backdropRef)return;this.backdropRef.instance.isShown=!1;let i=this.config.animated?la.BACKDROP:0;setTimeout(()=>this.removeBackdrop(),i)}_showModal(i){let o=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(let u of this.config.providers)o.provide(u);let r=new wn,d=o.provide({provide:wp,useValue:this.config}).provide({provide:wn,useValue:r}).attach(Ph).to("body");return r.hide=()=>d.instance?.hide(),r.setClass=u=>{d.instance&&(d.instance.config.class=u)},r.onHidden=new ue,r.onHide=new ue,this.copyEvent(o.onBeforeHide,r.onHide),this.copyEvent(o.onHidden,r.onHidden),d.show({content:i,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),d.instance&&(d.instance.level=this.getModalsCount(),r.content=o.getInnerComponent(),r.id=d.instance.config?.id),r}_hideModal(i){if(i!=null){let o=this.loaders.findIndex(d=>d.instance?.config.id===i),r=this.loaders[o];r&&r.hide(i)}else this.loaders.forEach(o=>{o.instance&&o.hide(o.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(i){this.lastDismissReason=i}removeBackdrop(){this._renderer.removeClass(Re.body,Kt.OPEN),this._renderer.setStyle(Re.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=Re.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){Re&&(this.originalBodyPadding=parseInt(window.getComputedStyle(Re.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(Re.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){Re.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){let i=this._renderer.createElement("div");this._renderer.addClass(i,Kt.SCROLLBAR_MEASURER),this._renderer.appendChild(Re.body,i);let o=i.offsetWidth-i.clientWidth;return this._renderer.removeChild(Re.body,i),o}_createLoaders(){let i=this.clf.createLoader();this.copyEvent(i.onBeforeShow,this.onShow),this.copyEvent(i.onShown,this.onShown),this.copyEvent(i.onBeforeHide,this.onHide),this.copyEvent(i.onHidden,this.onHidden),this.loaders.push(i)}removeLoaders(i){if(i!=null){let o=this.loaders.findIndex(r=>r.instance?.config.id===i);o>=0&&(this.loaders.splice(o,1),this.loaders.forEach((r,d)=>{r.instance&&(r.instance.level=d+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(i,o){i.subscribe(r=>{o.emit(this.lastDismissReason||r)})}};t.\u0275fac=function(o){return new(o||t)(F(pn),F(Ao),F(wh,8))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"platform"});let n=t;return n})(),Ph=(()=>{let t=class t{constructor(i,o,r){this._element=o,this._renderer=r,this.isShown=!1,this.isAnimated=!1,this._focusEl=null,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},i)}ngOnInit(){this._focusEl=Re.activeElement,this.isAnimated&&this._renderer.addClass(this._element.nativeElement,Kt.FADE),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,Kt.SHOW)},this.isAnimated?la.BACKDROP:0),Re&&Re.body&&(this.bsModalService&&this.bsModalService.getModalsCount()===1&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(Re.body,Kt.OPEN),this._renderer.setStyle(Re.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(i){this.clickStartedInContent=i.target!==this._element.nativeElement}onClickStop(i){let o=i.target===this._element.nativeElement&&!this.clickStartedInContent;if(this.config.ignoreBackdropClick||this.config.backdrop==="static"||!o){this.clickStartedInContent=!1;return}this.bsModalService?.setDismissReason(Tl.BACKRDOP),this.hide()}onPopState(){this.bsModalService?.setDismissReason(Tl.BACK),this.hide()}onEsc(i){this.isShown&&((i.keyCode===27||i.key==="Escape")&&i.preventDefault(),this.config.keyboard&&this.level===this.bsModalService?.getModalsCount()&&(this.bsModalService?.setDismissReason(Tl.ESC),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding){if(this.config.closeInterceptor){this.config.closeInterceptor().then(()=>this._hide(),()=>{});return}this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,Kt.SHOW),setTimeout(()=>{this.isShown=!1,this.bsModalService?.hide(this.config.id),Re&&Re.body&&this.bsModalService?.getModalsCount()===0&&(this._renderer.removeClass(Re.body,Kt.OPEN),this._renderer.setStyle(Re.body,"overflow-y","")),this.bsModalService?.hide(this.config.id),this.isModalHiding=!1,this._focusEl&&this._focusEl.focus()},this.isAnimated?la.MODAL:0)}};t.\u0275fac=function(o){return new(o||t)(x(wp),x(De),x(We))},t.\u0275cmp=M({type:t,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(o,r){o&1&&h("mousedown",function(u){return r.onClickStarted(u)})("click",function(u){return r.onClickStop(u)})("popstate",function(){return r.onPopState()},es)("keydown.esc",function(u){return r.onEsc(u)},es),o&2&&bt("aria-modal",!0)("aria-labelledby",r.config.ariaLabelledBy)("aria-describedby",r.config.ariaDescribedby)},features:[Ee([jt])],ngContentSelectors:yh,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(o,r){o&1&&(Li(),s(0,"div",0)(1,"div",1),Vi(2),a()()),o&2&&Qt("modal-dialog"+(r.config.class?" "+r.config.class:""))},dependencies:[Cp],encapsulation:2});let n=t;return n})();var Ep=(()=>{let t=class t{static forRoot(){return{ngModule:t,providers:[jt,Ao,Io]}}static forChild(){return{ngModule:t,providers:[jt,Ao,Io]}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Xe({type:t}),t.\u0275inj=Je({imports:[yp]});let n=t;return n})();function Dh(n,t){if(n&1){let e=T();s(0,"label",14)(1,"div",15)(2,"input",16),h("change",function(o){let r=C(e).$implicit,d=f();return y(d.manejarSeleccion(r,o))}),a(),s(3,"div")(4,"div",17),l(5),a(),s(6,"small",18),l(7),a()()(),s(8,"span",19),l(9),P(10,"number"),a()()}if(n&2){let e=t.$implicit;c(2),p("id","adicional-"+e.adicionalId),c(3),S(e.nombre),c(2),S(e.categoria),c(2),g("+ S/ ",A(10,4,e.costoAdicional,"1.2-2"))}}var ca=class n{constructor(t,e){this.bsModalRef=t;this.carritoService=e}adicionales=[];productoId;seleccionados=[];instruccionesEspeciales="";ngOnInit(){if(!this.productoId){console.warn("Advertencia: productoId no se ha asignado al modal. No se inicializar\xE1 el estado.");return}let t=this.carritoService.obtenerItems().find(e=>e.productoId===this.productoId);t?.personalizacion&&(this.instruccionesEspeciales=t.personalizacion.descripcionExtra||"",this.seleccionados=this.adicionales.filter(e=>t.personalizacion.adicionalesSeleccionados.includes(e.adicionalId)))}manejarSeleccion(t,e){e.target.checked?this.seleccionados.push(t):this.seleccionados=this.seleccionados.filter(o=>o.adicionalId!==t.adicionalId)}agregarAlCarrito(){if(!this.productoId){console.error("ERROR CR\xCDTICO: productoId es undefined. La personalizaci\xF3n no se puede guardar."),this.bsModalRef.hide();return}let t=this.seleccionados.reduce((i,o)=>i+(o.costoAdicional||0),0),e={descripcionExtra:this.instruccionesEspeciales,costoAdicional:t,adicionalesSeleccionados:this.seleccionados.map(i=>i.adicionalId)};this.carritoService.actualizarPersonalizacion(this.productoId,e),this.bsModalRef.hide()}static \u0275fac=function(e){return new(e||n)(x(wn),x(Ge))};static \u0275cmp=M({type:n,selectors:[["app-modal-adicionales"]],inputs:{adicionales:"adicionales",productoId:"productoId"},decls:20,vars:2,consts:[[1,"modal-header","bg-primary","text-white"],[1,"modal-title","fw-bold","mb-0"],["type","button","aria-label","Close",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body","py-4"],[1,"text-primary","fw-bold","mb-3"],[1,"list-group","list-group-flush"],["class","list-group-item adicional-item",4,"ngFor","ngForOf"],[1,"my-4"],[1,"form-group"],["for","instrucciones",1,"form-label","fw-bold","text-primary"],["id","instrucciones","rows","4","placeholder","Ej: 'Feliz Cumplea\xF1os, 'Sin nueces'...",1,"form-control","rounded-3","shadow-sm",3,"ngModelChange","ngModel"],[1,"modal-footer","border-0","pt-3"],["type","button",1,"btn","btn-outline-secondary","px-5",3,"click"],["type","button",1,"btn","btn-success","btn-lg","px-5","fw-bold","shadow",3,"click"],[1,"list-group-item","adicional-item"],[1,"d-flex","align-items-center","flex-grow-1"],["type","checkbox",1,"form-check-input","me-3",3,"change","id"],[1,"fw-bold"],[1,"text-muted"],[1,"costo-adicional"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h4",1),l(2,"Elige tus Adicionales"),a(),s(3,"button",2),h("click",function(){return i.bsModalRef.hide()}),a()(),s(4,"div",3)(5,"h5",4),l(6,"Selecciona los adicionales que deseas:"),a(),s(7,"div",5),_(8,Dh,11,7,"label",6),a(),b(9,"hr",7),s(10,"div",8)(11,"label",9),l(12," Instrucciones Especiales (Opcional) "),a(),s(13,"textarea",10),ie("ngModelChange",function(r){return ne(i.instruccionesEspeciales,r)||(i.instruccionesEspeciales=r),r}),l(14,"    "),a()()(),s(15,"div",11)(16,"button",12),h("click",function(){return i.bsModalRef.hide()}),l(17," Cancelar "),a(),s(18,"button",13),h("click",function(){return i.agregarAlCarrito()}),l(19," A\xF1adir al Carrito "),a()()),e&2&&(c(8),p("ngForOf",i.adicionales),c(5),te("ngModel",i.instruccionesEspeciales))},dependencies:[k,z,Me,X,re,Ie,xe],styles:[".modal-header[_ngcontent-%COMP%]{border-radius:16px 16px 0 0;padding:1.2rem 1.5rem}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.list-group-item.adicional-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 18px;margin-bottom:8px;border:1px solid #e0e0e0;border-radius:14px!important;background:#fdfdfd;transition:all .25s ease;cursor:pointer;-webkit-user-select:none;user-select:none}.list-group-item.adicional-item[_ngcontent-%COMP%]:hover{background:#f0f8ff;border-color:#007bff;transform:translateY(-2px);box-shadow:0 8px 20px #007bff1f}.list-group-item.adicional-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked{background-color:#007bff;border-color:#007bff}.list-group-item.adicional-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:1.5em;height:1.5em}.list-group-item.adicional-item[_ngcontent-%COMP%]   .fw-bold[_ngcontent-%COMP%]{font-size:1.05rem;color:#222}.costo-adicional[_ngcontent-%COMP%]{font-weight:800!important;color:#28a745!important;font-size:1.1rem;background:#28a7451a;padding:6px 12px;border-radius:20px;min-width:90px;text-align:center}.form-control[_ngcontent-%COMP%]{border:2px solid #ddd;border-radius:12px;padding:12px 16px;font-size:1rem;transition:all .3s}.form-control[_ngcontent-%COMP%]:focus{border-color:#ee965b;box-shadow:0 0 0 4px #ee965b33;outline:none}.modal-footer[_ngcontent-%COMP%]{padding:1.5rem;gap:12px;justify-content:flex-end}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);border:none;border-radius:12px;padding:12px 30px;font-weight:700}.btn-success[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #28a7454d}"]})};var En=class n{constructor(t){this.http=t}apiUrl=J.apiUrl+"/adicionales";getAdicionales(){return this.http.get(this.apiUrl)}crear(t){return this.http.post(this.apiUrl,t)}actualizar(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}eliminar(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var Oh=()=>[];function Ih(n,t){n&1&&(s(0,"span",29),l(1," Personalizable "),a())}function Ah(n,t){if(n&1){let e=T();s(0,"button",30),h("click",function(){C(e);let o=f().$implicit,r=f();return y(r.abrirModalAdicionales(o))}),l(1," Ver Adicionales "),a()}}function Th(n,t){if(n&1){let e=T();s(0,"div",15)(1,"div",16),_(2,Ih,2,0,"span",17),s(3,"div",18),b(4,"img",19),a(),s(5,"div",20)(6,"h3",21),l(7),a(),s(8,"p",22),l(9),a(),s(10,"p",23),l(11),a(),s(12,"div",24)(13,"span",25),l(14),a(),s(15,"div",26),_(16,Ah,2,0,"button",27),s(17,"button",28),h("click",function(){let o=C(e).$implicit,r=f();return y(r.agregarAlCarrito(o))}),l(18," A\xF1adir "),a()()()()()()}if(n&2){let e=t.$implicit;c(2),p("ngIf",e.personalizable),c(2),p("src",e.imagenUrl||"assets/imagenes/default-torta.jpg",ve)("alt",e.nombre),c(3),S(e.nombre),c(2),S(e.categoria),c(2),S(e.descripcion),c(3),g("S/ ",e.precioBase),c(2),p("ngIf",e.personalizable)}}function kh(n,t){if(n&1){let e=T();s(0,"button",34),h("click",function(){let o=C(e).index,r=f(2);return y(r.cambiarPagina(o+1))}),l(1),a()}if(n&2){let e=t.index,i=f(2);Z("active",i.paginaActual===e+1),c(),g(" ",e+1," ")}}function Fh(n,t){if(n&1){let e=T();s(0,"div",31)(1,"button",32),h("click",function(){C(e);let o=f();return y(o.cambiarPagina(o.paginaActual-1))}),l(2,"Anterior"),a(),_(3,kh,2,3,"button",33),s(4,"button",32),h("click",function(){C(e);let o=f();return y(o.cambiarPagina(o.paginaActual+1))}),l(5,"Siguiente"),a()()}if(n&2){let e=f();c(),p("disabled",e.paginaActual===1),c(2),p("ngForOf",Wo(3,Oh).constructor(e.totalPaginas)),c(),p("disabled",e.paginaActual===e.totalPaginas)}}var To=class n{listaDeProductos=[];listaDeAdicionales=[];bsModalRef;filtroActivo="";searchTerm="";isLoading=!0;paginaActual=1;productosPorPagina=8;productoService=w(Ii);carritoService=w(Ge);adicionalService=w(En);modalService=w(jt);route=w(ct);constructor(){}ngOnInit(){this.adicionalService.getAdicionales().subscribe(t=>this.listaDeAdicionales=t),this.route.paramMap.subscribe(t=>{let e=t.get("filtro");this.isLoading=!0,e?(this.filtroActivo=e,this.ejecutarFiltro(this.filtroActivo)):(this.filtroActivo="",this.ejecutarFiltro(""))})}ejecutarFiltro(t){this.isLoading=!0;let e;switch(t){case"personalizable":e=this.productoService.getProductosPersonalizables();break;case"predeterminada":e=this.productoService.getProductosPredeterminados();break;case"torta":case"postre":case"bocadito":e=this.productoService.getProductosPorCategoria(t);break;default:e=this.productoService.getProductos();break}e.subscribe(i=>{this.listaDeProductos=i,this.paginaActual=1,this.isLoading=!1})}filtrarProductos(t){this.filtroActivo=t.target.value,this.searchTerm="",this.ejecutarFiltro(this.filtroActivo)}buscarProductos(){this.isLoading=!0,this.searchTerm.trim()===""?this.ejecutarFiltro(this.filtroActivo):this.productoService.getProductosPorNombre(this.searchTerm).subscribe(t=>{this.listaDeProductos=t,this.filtroActivo="",this.paginaActual=1,this.isLoading=!1})}agregarAlCarrito(t){this.carritoService.agregarAlCarrito(t),window.dispatchEvent(new CustomEvent("agregar-al-carrito",{detail:`${t.nombre} agregado al carrito`}))}abrirModalAdicionales(t){this.carritoService.obtenerItems().find(o=>o.productoId===t.productoId)||this.agregarAlCarrito(t);let i={adicionales:this.listaDeAdicionales,productoId:t.productoId};this.bsModalRef=this.modalService.show(ca,{initialState:i})}get totalPaginas(){return Math.ceil(this.listaDeProductos.length/this.productosPorPagina)}get productosPaginados(){let t=(this.paginaActual-1)*this.productosPorPagina;return this.listaDeProductos.slice(t,t+this.productosPorPagina)}cambiarPagina(t){t>=1&&t<=this.totalPaginas&&(this.paginaActual=t,window.scrollTo({top:0,behavior:"smooth"}))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-catalogo"]],decls:22,vars:4,consts:[[1,"catalogo-wrapper"],[1,"filter-bar","mb-4"],[1,"search-group"],["type","text","placeholder","BUSCAR PRODUCTO",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn-search",3,"click"],[1,"form-select","filter-select",3,"change","value"],["value",""],["value","torta"],["value","postre"],["value","bocadito"],["value","personalizable"],["routerLink","../personalizar-torta",1,"btn-torta-personalizada"],[1,"row","g-3","g-md-4"],["class","col-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],["class","pagination mt-5",4,"ngIf"],[1,"col-6","col-md-4","col-lg-3"],[1,"product-card","h-100","position-relative"],["class","badge-personalizable",4,"ngIf"],[1,"image-container"],[1,"img-fluid",3,"src","alt"],[1,"p-3"],[1,"h5","fw-bold","mb-1"],[1,"text-muted","small","mb-2"],[1,"descripcion","text-muted","small","mb-3"],[1,"d-flex","justify-content-between","align-items-end"],[1,"price","fw-bold","text-success","fs-5"],["role","group",1,"btn-group-vertical","btn-group-sm"],["class","btn btn-outline-warning btn-sm mb-1",3,"click",4,"ngIf"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"badge-personalizable"],[1,"btn","btn-outline-warning","btn-sm","mb-1",3,"click"],[1,"pagination","mt-5"],[1,"btn","btn-outline-secondary",3,"click","disabled"],["class","btn mx-1",3,"active","click",4,"ngFor","ngForOf"],[1,"btn","mx-1",3,"click"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),ie("ngModelChange",function(r){return ne(i.searchTerm,r)||(i.searchTerm=r),r}),a(),s(4,"button",4),h("click",function(){return i.buscarProductos()}),l(5,"BUSCAR"),a()(),s(6,"select",5),h("change",function(r){return i.filtrarProductos(r)}),s(7,"option",6),l(8,"TODOS"),a(),s(9,"option",7),l(10,"Tortas"),a(),s(11,"option",8),l(12,"Postres"),a(),s(13,"option",9),l(14,"Bocaditos"),a(),s(15,"option",10),l(16,"Personalizables"),a()(),s(17,"a",11),l(18," Pide tu Torta Personalizada "),a()(),s(19,"div",12),_(20,Th,19,8,"div",13),a(),_(21,Fh,6,4,"div",14),a()),e&2&&(c(3),te("ngModel",i.searchTerm),c(3),p("value",i.filtroActivo),c(14),p("ngForOf",i.productosPaginados),c(),p("ngIf",i.totalPaginas>1))},dependencies:[k,z,N,Ep,oe,Me,tt,nt,X,re,Ie],styles:[".catalogo-wrapper[_ngcontent-%COMP%]{padding:30px 15px;max-width:1400px;margin:0 auto;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.filter-bar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;align-items:center;justify-content:center;background:#f8f9fa;padding:20px;border-radius:16px;margin-bottom:30px;box-shadow:0 4px 15px #0000000d}.search-group[_ngcontent-%COMP%]{position:relative;flex:1;min-width:280px;max-width:400px}.search-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:52px;padding:0 100px 0 20px;border:2px solid #ddd;border-radius:12px;font-size:1rem;transition:all .3s}.search-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ee965b;box-shadow:0 0 0 4px #ee965b33}.btn-search[_ngcontent-%COMP%]{position:absolute;right:6px;top:6px;height:40px;padding:0 20px;background:#ee965b;color:#fff;border:none;border-radius:10px;font-weight:700;transition:all .3s}.btn-search[_ngcontent-%COMP%]:hover{background:#d97841;transform:translateY(-2px)}.filter-select[_ngcontent-%COMP%]{height:52px;padding:0 20px;border:2px solid #ddd;border-radius:12px;font-size:1rem;min-width:180px}.btn-torta-personalizada[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ee965b,#fd7e14);color:#fff;padding:14px 28px;border-radius:12px;font-weight:700;text-decoration:none;font-size:1.1rem;box-shadow:0 6px 15px #ee965b4d;transition:all .3s;white-space:nowrap}.btn-torta-personalizada[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 25px #ee965b66}.row.g-3.g-md-4[_ngcontent-%COMP%]{margin:0 -12px}.col-6[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%]{padding:12px}.product-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;overflow:hidden;box-shadow:0 6px 20px #00000014;transition:all .4s ease;height:100%;display:flex;flex-direction:column}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-12px);box-shadow:0 20px 40px #0000002e}.image-container[_ngcontent-%COMP%]{height:220px;overflow:hidden;background:#f5f5f5}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .5s ease}.product-card[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.12)}.badge-personalizable[_ngcontent-%COMP%]{position:absolute;top:14px;left:14px;background:linear-gradient(135deg,#fd7e14,#ff6b35);color:#fff;padding:8px 16px;border-radius:25px;font-size:.85rem;font-weight:700;z-index:10;box-shadow:0 4px 10px #fd7e1466}.p-3[_ngcontent-%COMP%]{padding:20px!important;display:flex;flex-direction:column;flex-grow:1}.h5[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:8px;color:#222}.text-muted.small[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.4}.descripcion[_ngcontent-%COMP%]{flex-grow:1;margin-bottom:16px;color:#555;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.price[_ngcontent-%COMP%]{font-size:1.6rem!important;font-weight:800;color:#28a745!important}.btn-group-vertical[_ngcontent-%COMP%]{gap:6px}.btn-sm[_ngcontent-%COMP%]{padding:8px 16px;font-size:.9rem;border-radius:10px;font-weight:600}.btn-success[_ngcontent-%COMP%]{background:#28a745;border:none}.btn-outline-warning[_ngcontent-%COMP%]{border-color:#fd7e14;color:#fd7e14}.btn-outline-warning[_ngcontent-%COMP%]:hover{background:#fd7e14;color:#fff}.pagination[_ngcontent-%COMP%]{justify-content:center;gap:10px;margin-top:50px}.pagination[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#ee965b;color:#fff;border:none;padding:12px 20px;border-radius:12px;font-weight:700;min-width:50px}.pagination[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{background:#d97841;transform:scale(1.1)}.pagination[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}@media (max-width: 768px){.filter-bar[_ngcontent-%COMP%]{flex-direction:column}.search-group[_ngcontent-%COMP%]{width:100%;max-width:none}.btn-torta-personalizada[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})};var Jt=class n{constructor(t){this.http=t}apiUrl=J.apiUrl+"/usuarios";registrar(t){return this.http.post(`${this.apiUrl}/registro`,t)}login(t){return this.http.post(`${this.apiUrl}/login`,t)}obtenerMiPerfil(){return this.http.get(`${this.apiUrl}/mi-perfil`)}actualizarMiPerfil(t){return this.http.put(`${this.apiUrl}/mi-perfil`,t)}cambiarPassword(t){return this.http.post(`${this.apiUrl}/cambiar-password`,t)}obtenerTodosLosUsuarios(){return this.http.get(`${this.apiUrl}/todos`)}actualizarUsuarioPorAdmin(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var da=class n{constructor(t,e,i){this.fb=t;this.usuarioService=e;this.router=i;this.registroForm=this.fb.group({nombre:["",$.required],email:["",[$.required,$.email]],password:["",[$.required,$.minLength(6)]],telefono:[""],direccion:[""]})}registroForm;onSubmit(){this.registroForm.valid&&this.usuarioService.registrar(this.registroForm.value).subscribe({next:t=>{alert("\xA1Usuario registrado con \xE9xito!"),this.router.navigate(["/iniciar-sesion"])},error:t=>{console.error("Error en el registro:",t),alert("Error en el registro: "+t.error)}})}static \u0275fac=function(e){return new(e||n)(x(it),x(Jt),x(pe))};static \u0275cmp=M({type:n,selectors:[["app-registro"]],decls:43,vars:2,consts:[[1,"register-page"],[1,"branding-column"],[1,"branding-content"],["routerLink","/",1,"logo-link"],["src","assets/imagenes/logo.png","alt","Logo de D.Juancito"],[1,"form-column"],[1,"register-form"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","formControlName","nombre","placeholder","Tu nombre y apellido"],["for","email"],["type","email","id","email","formControlName","email","placeholder","tu.correo@ejemplo.com"],["for","telefono"],["type","tel","id","telefono","formControlName","telefono","placeholder","Ej: 987654321"],["for","direccion"],["type","text","id","direccion","formControlName","direccion","placeholder","Ej: Av. Principal 123"],["for","password"],["type","password","id","password","formControlName","password","placeholder","M\xEDnimo 6 caracteres"],["type","submit",1,"btn-submit",3,"disabled"],[1,"login-link"],["routerLink","/iniciar-sesion"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),b(4,"img",4),s(5,"h2"),l(6,"D.Juancito"),a()(),s(7,"p"),l(8,'"Donde el Sabor se Convierte en Recuerdo"'),a()()(),s(9,"div",5)(10,"div",6)(11,"h2"),l(12,"Crear una Cuenta"),a(),s(13,"p"),l(14,"\xA1\xDAnete a la familia D'Juancito!"),a(),s(15,"form",7),h("ngSubmit",function(){return i.onSubmit()}),s(16,"div",8)(17,"label",9),l(18,"Nombre Completo"),a(),b(19,"input",10),a(),s(20,"div",8)(21,"label",11),l(22,"Correo Electr\xF3nico"),a(),b(23,"input",12),a(),s(24,"div",8)(25,"label",13),l(26,"Tel\xE9fono (Opcional)"),a(),b(27,"input",14),a(),s(28,"div",8)(29,"label",15),l(30,"Direcci\xF3n (Opcional)"),a(),b(31,"input",16),a(),s(32,"div",8)(33,"label",17),l(34,"Contrase\xF1a"),a(),b(35,"input",18),a(),s(36,"button",19),l(37,"Registrarse"),a(),s(38,"div",20)(39,"span"),l(40,"\xBFYa tienes una cuenta? "),s(41,"a",21),l(42,"Inicia sesi\xF3n aqu\xED"),a()()()()()()()),e&2&&(c(15),p("formGroup",i.registroForm),c(21),p("disabled",i.registroForm.invalid))},dependencies:[k,ot,Ue,X,re,ze,Ze,Ke,oe],styles:[".register-page[_ngcontent-%COMP%]{display:flex;min-height:100vh;font-family:Arial,sans-serif}.branding-column[_ngcontent-%COMP%]{flex-basis:50%;background-color:#fdf6f2;display:flex;justify-content:center;align-items:center;text-align:center;padding:40px}.branding-content[_ngcontent-%COMP%]   .logo-link[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px;text-decoration:none;margin-bottom:20px}.branding-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px;width:300px;border-radius:80%;object-fit:cover}.branding-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;color:#333;margin:0}.branding-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#777;font-style:italic}.form-column[_ngcontent-%COMP%]{flex-basis:50%;display:flex;justify-content:center;align-items:center;padding:40px}.register-form[_ngcontent-%COMP%]{width:100%;max-width:400px}.register-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px;margin-bottom:10px}.register-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#777;margin-bottom:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;font-size:16px}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:15px;border:none;border-radius:8px;background-color:#eb7221;color:#fff;font-size:16px;font-weight:700;cursor:pointer}.btn-submit[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.login-link[_ngcontent-%COMP%]{margin-top:25px;text-align:center;color:#777}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#eb7221;text-decoration:none;font-weight:700}"]})};function Rh(n,t){n&1&&(s(0,"div",17),l(1," El correo es obligatorio "),a())}function Nh(n,t){n&1&&(s(0,"div",17),l(1," Ingresa un correo v\xE1lido "),a())}function Lh(n,t){n&1&&(s(0,"span"),l(1,"Ingresar"),a())}function Vh(n,t){n&1&&(s(0,"span"),l(1,"Completar campos"),a())}var ua=class n{constructor(t,e,i,o,r){this.fb=t;this.usuarioService=e;this.authService=i;this.router=o;this.document=r;this.loginForm=this.fb.group({email:["",[$.required,$.email]],password:["",$.required]})}loginForm;defaultClientUrl="/cliente/bienvenida";ngOnInit(){}onSubmit(){this.loginForm.valid&&this.usuarioService.login(this.loginForm.value).subscribe({next:t=>{this.authService.guardarSesion(t.token),this.usuarioService.obtenerMiPerfil().subscribe({next:e=>{this.authService.guardarUsuarioCompleto(e);let i=this.document.getElementById("nombreUsuarioExito");i&&(i.textContent=`${e.nombre} `),new window.bootstrap.Modal(this.document.getElementById("modalExito")).show(),this.document.getElementById("modalExito")?.addEventListener("hidden.bs.modal",()=>{let d=e.roles?.some(m=>m.nombre==="ROLE_Administrador"),u;d?u="/admin/dashboard":(u=localStorage.getItem("redirect_after_login")==="/cliente/mi-pedido"?"/cliente/mi-pedido":this.defaultClientUrl,localStorage.removeItem("redirect_after_login")),this.router.navigate([u])},{once:!0})},error:()=>{this.mostrarModalError("Error al cargar tu perfil. Intenta m\xE1s tarde.")}})},error:t=>{let e=t.error?.message||"Credenciales inv\xE1lidas. Verifica tu correo y contrase\xF1a.";this.mostrarModalError(e)}})}mostrarModalError(t){let e=this.document.getElementById("mensajeErrorModal");e&&(e.textContent=t),new window.bootstrap.Modal(this.document.getElementById("modalError")).show()}static \u0275fac=function(e){return new(e||n)(x(it),x(Jt),x(de),x(pe),x(me))};static \u0275cmp=M({type:n,selectors:[["app-iniciar-sesion"]],decls:60,vars:10,consts:[[1,"login-page"],[1,"branding-column"],[1,"branding-content"],["routerLink","/",1,"logo-link"],["src","assets/imagenes/logo.png","alt","Logo de D.Juancito",1,"logo-img"],[1,"slogan"],[1,"form-column"],[1,"login-form"],[1,"text-muted","mb-4"],[1,"needs-validation",3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","tu.correo@ejemplo.com",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","mb-4"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control"],[1,"invalid-feedback"],[1,"form-options","mb-4"],["href","#",1,"forgot-password"],["type","submit",1,"btn-submit","w-100",3,"disabled"],[4,"ngIf"],[1,"register-link","text-center","mt-4"],["routerLink","/registrar",1,"text-primary","fw-bold"],["id","modalExito","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-0","shadow-lg","rounded-4","overflow-hidden"],[1,"modal-body","text-center","p-5","bg-gradient-success","text-white"],[1,"bi","bi-check-circle-fill",2,"font-size","5rem"],[1,"mt-4","fw-bold"],["id","nombreUsuarioExito",1,"fs-5"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light","btn-lg","px-5","mt-3","fw-bold"],["id","modalError","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-body","text-center","p-5","bg-gradient-danger","text-white"],[1,"bi","bi-x-circle-fill",2,"font-size","5rem"],["id","mensajeErrorModal",1,"fs-5"]],template:function(e,i){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),b(4,"img",4),s(5,"h2"),l(6,"D.Juancito"),a()(),s(7,"p",5),l(8,'"Donde el Sabor se Convierte en Recuerdo"'),a()()(),s(9,"div",6)(10,"div",7)(11,"h2"),l(12,"Iniciar Sesi\xF3n"),a(),s(13,"p",8),l(14,"Ingresa tus credenciales para acceder a tu cuenta."),a(),s(15,"form",9),h("ngSubmit",function(){return i.onSubmit()}),s(16,"div",10)(17,"label",11),l(18,"Correo Electr\xF3nico"),a(),b(19,"input",12),_(20,Rh,2,0,"div",13)(21,Nh,2,0,"div",13),a(),s(22,"div",14)(23,"label",15),l(24,"Contrase\xF1a"),a(),b(25,"input",16),s(26,"div",17),l(27," La contrase\xF1a es obligatoria "),a()(),s(28,"div",18)(29,"a",19),l(30,"\xBFOlvidaste tu contrase\xF1a?"),a()(),s(31,"button",20),_(32,Lh,2,0,"span",21)(33,Vh,2,0,"span",21),a(),s(34,"div",22)(35,"span"),l(36,"\xBFNo tienes una cuenta? "),a(),s(37,"a",23),l(38,"Reg\xEDstrate aqu\xED"),a()()()()()(),s(39,"div",24)(40,"div",25)(41,"div",26)(42,"div",27),b(43,"i",28),s(44,"h3",29),l(45,"\xA1Bienvenido de vuelta!"),a(),b(46,"p",30),s(47,"button",31),l(48," Continuar a mi cuenta "),a()()()()(),s(49,"div",32)(50,"div",25)(51,"div",26)(52,"div",33),b(53,"i",34),s(54,"h3",29),l(55,"\xA1Oops! Credenciales incorrectas"),a(),s(56,"p",35),l(57,"Verifica tu correo y contrase\xF1a"),a(),s(58,"button",31),l(59," Intentar de nuevo "),a()()()()()),e&2){let o,r,d,u;c(15),p("formGroup",i.loginForm),c(4),Z("is-invalid",((o=i.loginForm.get("email"))==null?null:o.invalid)&&((o=i.loginForm.get("email"))==null?null:o.touched)),c(),p("ngIf",(r=i.loginForm.get("email"))==null?null:r.hasError("required")),c(),p("ngIf",(d=i.loginForm.get("email"))==null?null:d.hasError("email")),c(4),Z("is-invalid",((u=i.loginForm.get("password"))==null?null:u.invalid)&&((u=i.loginForm.get("password"))==null?null:u.touched)),c(6),p("disabled",i.loginForm.invalid),c(),p("ngIf",!i.loginForm.invalid),c(),p("ngIf",i.loginForm.invalid)}},dependencies:[k,N,ot,Ue,X,re,ze,Ze,Ke,oe],styles:[".login-page[_ngcontent-%COMP%]{display:flex;min-height:100vh;font-family:Arial,sans-serif}.branding-column[_ngcontent-%COMP%]{flex-basis:50%;background-color:#fdf6f2;display:flex;justify-content:center;align-items:center;text-align:center;padding:40px}.branding-content[_ngcontent-%COMP%]   .logo-link[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px;text-decoration:none;margin-bottom:20px}.branding-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px;width:300px;border-radius:80%;object-fit:cover}.branding-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;color:#333;margin:0}.branding-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#777;font-style:italic}.form-column[_ngcontent-%COMP%]{flex-basis:50%;display:flex;justify-content:center;align-items:center;padding:40px}.login-form[_ngcontent-%COMP%]{width:100%;max-width:400px}.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px;margin-bottom:10px}.login-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#777;margin-bottom:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;font-size:16px}.form-options[_ngcontent-%COMP%]{text-align:right;margin-bottom:25px}.forgot-password[_ngcontent-%COMP%]{color:#eb7221;text-decoration:none;font-size:14px}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:15px;border:none;border-radius:8px;background-color:#eb7221;color:#fff;font-size:16px;font-weight:700;cursor:pointer;transition:background-color .3s ease}.btn-submit[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.register-link[_ngcontent-%COMP%]{margin-top:25px;text-align:center;color:#777}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#eb7221;text-decoration:none;font-weight:700}"]})};var Sn=class n{constructor(t){this.http=t;this.cargarOpciones(),this.cargarGarantiaSeleccionada()}api=J.apiUrl+"/config";opciones=new $e([]);opciones$=this.opciones.asObservable();seleccionado=new $e(50);seleccionado$=this.seleccionado.asObservable();cargarOpciones(){this.http.get(`${this.api}/garantias`).subscribe({next:t=>this.opciones.next(t),error:()=>this.opciones.next([30,50,70])})}cargarGarantiaSeleccionada(){this.http.get(`${this.api}/garantia/actual`).subscribe({next:t=>this.seleccionado.next(t),error:()=>this.seleccionado.next(50)})}obtenerOpciones(){return this.opciones$}obtener(){return this.seleccionado$}seleccionar(t){this.seleccionado.next(t)}obtenerTodas(){return this.http.get(`${this.api}/garantias/admin`)}crear(t){return this.http.post(`${this.api}/garantias`,t)}actualizar(t,e){return this.http.put(`${this.api}/garantias/${t}`,e)}toggleActivo(t){return this.http.patch(`${this.api}/garantias/${t}/toggle`,{})}eliminar(t){return this.http.delete(`${this.api}/garantias/${t}`)}establecerPrincipal(t){return this.http.patch(`${this.api}/garantias/${t}/principal`,{}).pipe(ee(()=>{this.cargarOpciones(),this.cargarGarantiaSeleccionada()}))}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function jh(n,t){n&1&&(s(0,"div",15),b(1,"i",16),s(2,"p",17),l(3,"Tu carrito est\xE1 vac\xEDo"),a(),s(4,"a",18),l(5," Ir a la tienda "),a()())}function zh(n,t){n&1&&(s(0,"div",62)(1,"span",63),l(2,"REGALO 100% GRATIS"),a()())}function Uh(n,t){if(n&1&&(s(0,"div",62)(1,"span",64),l(2),a()()),n&2){let e=f().$implicit;c(2),g(" -",((e.descuentoAplicado??0)*100).toFixed(0),"% OFF ")}}function Bh(n,t){if(n&1&&(s(0,"div",71)(1,"span"),l(2),a(),s(3,"span",72),l(4),P(5,"number"),a()()),n&2){let e=t.$implicit,i=f(5);c(2),g("\u2022 ",i.obtenerNombreAdicional(e)),c(2),g(" + S/ ",A(5,2,i.obtenerCostoAdicional(e),"1.2-2")," ")}}function Gh(n,t){if(n&1&&(s(0,"div",62),_(1,Bh,6,5,"div",70),a()),n&2){let e=f(2).$implicit;c(),p("ngForOf",e.personalizacion.adicionalesSeleccionados)}}function $h(n,t){if(n&1&&(s(0,"p",73),l(1),a()),n&2){let e=f(2).$implicit;c(),g(' "',e.personalizacion.descripcionExtra,'" ')}}function Hh(n,t){if(n&1&&(s(0,"div",65)(1,"p",66),l(2," Personalizaci\xF3n Extra "),a(),_(3,Gh,2,1,"div",53)(4,$h,2,1,"p",67),s(5,"div",68)(6,"small",69),l(7,"Costo adicional total"),a(),s(8,"strong",29),l(9),P(10,"number"),a()()()),n&2){let e=f().$implicit;c(3),p("ngIf",(e.personalizacion.adicionalesSeleccionados==null?null:e.personalizacion.adicionalesSeleccionados.length)>0),c(),p("ngIf",e.personalizacion.descripcionExtra),c(5),g(" S/ ",A(10,3,e.personalizacion.costoAdicional,"1.2-2")," ")}}function Wh(n,t){if(n&1&&(s(0,"p",74)(1,"del"),l(2),P(3,"number"),a()()),n&2){let e=f().$implicit;c(2),g("S/ ",A(3,1,e.precioBase*e.cantidad,"1.2-2"))}}function qh(n,t){if(n&1){let e=T();s(0,"div",45)(1,"div",24)(2,"div",46)(3,"div",47),b(4,"img",48),a(),s(5,"div",49)(6,"div",50)(7,"div",51)(8,"h5",52),l(9),a(),_(10,zh,3,0,"div",53)(11,Uh,3,1,"div",53)(12,Hh,11,6,"div",54),s(13,"div",55)(14,"button",56),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.cambiarCantidad(o,-1))}),l(15,"\u2212"),a(),s(16,"span",57),l(17),a(),s(18,"button",56),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.cambiarCantidad(o,1))}),l(19,"+"),a()()(),s(20,"div",58)(21,"p",59),l(22),P(23,"number"),a(),_(24,Wh,4,4,"p",60),s(25,"button",61),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.eliminarItem(o.productoId))}),l(26," Eliminar "),a()()()()()()()}if(n&2){let e=t.$implicit;c(4),p("src",e.imagenUrl||"assets/imagenes/default-torta.jpg",ve)("alt",e.nombre),c(5),S(e.nombre),c(),p("ngIf",e.esOfertaEspecial),c(),p("ngIf",!e.esOfertaEspecial&&(e.descuentoAplicado??0)>0),c(),p("ngIf",e.personalizacion),c(5),S(e.cantidad),c(5),g(" S/ ",A(23,9,e.precioUnitario*e.cantidad,"1.2-2")," "),c(2),p("ngIf",(e.descuentoAplicado??0)>0||e.esOfertaEspecial)}}function Yh(n,t){if(n&1&&(s(0,"div",75)(1,"p",76),l(2,"\xA1FELICITACIONES!"),a(),s(3,"p",77),l(4),P(5,"number"),a(),s(6,"small",78),l(7,"Ahorraste con promociones"),a()()),n&2){let e=f(2);c(4),g("- S/ ",A(5,1,e.descuentoTotal,"1.2-2"))}}function Zh(n,t){if(n&1&&(s(0,"option",79),l(1),P(2,"number"),a()),n&2){let e=t.$implicit,i=f(2);p("value",e)("selected",e===i.porcentajeGarantia),c(),Oe(" ",e,"% \u2192 S/ ",A(2,4,i.subtotal*e/100,"1.2-2")," ")}}function Kh(n,t){if(n&1){let e=T();s(0,"div",19)(1,"div",20),_(2,qh,27,12,"div",21),a(),s(3,"div",22)(4,"div",23)(5,"div",24)(6,"h4",25),l(7,"Resumen del Pedido"),a(),_(8,Yh,8,4,"div",26),s(9,"div",27)(10,"span"),l(11,"Subtotal sin descuento"),a(),s(12,"del"),l(13),P(14,"number"),a()(),s(15,"div",28)(16,"span"),l(17,"Subtotal a pagar"),a(),s(18,"span",29),l(19),P(20,"number"),a()(),b(21,"hr",30),s(22,"div",31)(23,"label",32),l(24,"Paga ahora:"),a(),s(25,"select",33),h("change",function(o){C(e);let r=f();return y(r.cambiarGarantia(o))}),_(26,Zh,3,7,"option",34),a()(),s(27,"div",35)(28,"span",36),l(29),a(),s(30,"strong",37),l(31),P(32,"number"),a()(),s(33,"div",38)(34,"span",36),l(35,"Resto al recibir"),a(),s(36,"strong",39),l(37),P(38,"number"),a()(),b(39,"hr",30),s(40,"div",40)(41,"h3",41),l(42,"Total"),a(),s(43,"h2",42),l(44),P(45,"number"),a()(),s(46,"div",43)(47,"strong"),l(48),P(49,"number"),a(),b(50,"br"),l(51," y el resto "),s(52,"strong"),l(53),P(54,"number"),a(),l(55," al recibir tu torta "),a(),s(56,"button",44),h("click",function(){C(e);let o=f();return y(o.confirmarPedido())}),l(57," Confirmar Pedido "),a()()()()()}if(n&2){let e=f();c(2),p("ngForOf",e.itemsDelCarrito),c(6),p("ngIf",e.descuentoTotal>0),c(5),g("S/ ",A(14,11,e.subtotalSinDescuento,"1.2-2")),c(6),g("S/ ",A(20,14,e.subtotal,"1.2-2")),c(7),p("ngForOf",e.opcionesGarantia),c(3),g("Garant\xEDa (",e.porcentajeGarantia,"%)"),c(2),g("S/ ",A(32,17,e.garantia,"1.2-2")),c(6),g("S/ ",A(38,20,e.resto,"1.2-2")),c(7),g("S/ ",A(45,23,e.subtotal,"1.2-2")),c(4),g("Paga S/ ",A(49,26,e.garantia,"1.2-2")," ahora"),c(5),g("S/ ",A(54,29,e.resto,"1.2-2"))}}var ko=class n{constructor(t,e,i,o,r){this.carritoService=t;this.garantiaService=e;this.autenticacionService=i;this.http=o;this.router=r}itemsDelCarrito=[];subtotal=0;garantia=0;resto=0;porcentajeGarantia=50;opcionesGarantia=[];adicionalesDisponibles=[];apiUrl=J.apiUrl;carritoSub;ngOnInit(){this.cargarOpcionesGarantia(),this.cargarGarantiaSeleccionada(),this.suscribirseAlCarrito(),this.cargarAdicionales()}ngOnDestroy(){this.carritoSub?.unsubscribe()}cargarAdicionales(){this.http.get(`${this.apiUrl}/adicionales`).subscribe({next:t=>this.adicionalesDisponibles=t,error:t=>console.error("Error cargando adicionales:",t)})}obtenerNombreAdicional(t){let e=this.adicionalesDisponibles.find(i=>i.adicionalId===t);return e?`${e.nombre} (${e.categoria})`:"Adicional"}obtenerCostoAdicional(t){let e=this.adicionalesDisponibles.find(i=>i.adicionalId===t);return e?e.costoAdicional:0}suscribirseAlCarrito(){this.carritoSub=this.carritoService.items$.subscribe(t=>{this.itemsDelCarrito=t,this.calcularResumen()})}cargarOpcionesGarantia(){this.garantiaService.opciones$.subscribe(t=>this.opcionesGarantia=t)}cargarGarantiaSeleccionada(){this.garantiaService.obtener().subscribe(t=>{this.porcentajeGarantia=t,this.calcularResumen()})}calcularResumen(){this.subtotal=this.itemsDelCarrito.reduce((t,e)=>t+e.precioUnitario*e.cantidad,0),this.subtotal=Math.round(this.subtotal*100)/100,this.garantia=Math.round(this.subtotal*this.porcentajeGarantia/100*100)/100,this.resto=Math.round((this.subtotal-this.garantia)*100)/100}eliminarItem(t){this.carritoService.eliminar(t)}cambiarCantidad(t,e){let i=t.cantidad+e;i>0&&this.carritoService.cambiarCantidad(t.productoId,i)}cambiarGarantia(t){let e=Number(t.target.value);this.garantiaService.seleccionar(e),this.porcentajeGarantia=e,this.calcularResumen()}get descuentoTotal(){let t=this.itemsDelCarrito.reduce((e,i)=>e+i.precioBase*i.cantidad,0);return Math.round((t-this.subtotal)*100)/100}get subtotalSinDescuento(){return this.itemsDelCarrito.reduce((t,e)=>t+e.precioBase*e.cantidad,0)}confirmarPedido(){let t=localStorage.getItem("jwt_token");if(!t){localStorage.setItem("redirect_after_login","/cliente/mi-pedido"),alert("\xA1Debes iniciar sesi\xF3n para confirmar tu pedido!"),this.router.navigate(["/iniciar-sesion"]);return}let e=this.autenticacionService.obtenerUsuarioActual();if(!e?.usuarioId){localStorage.setItem("redirect_after_login","/cliente/mi-pedido"),this.router.navigate(["/iniciar-sesion"]);return}let i=this.itemsDelCarrito.map(d=>{let u=(d.personalizacion?.adicionalesSeleccionados||[]).map(m=>{let v=this.adicionalesDisponibles.find(E=>E.adicionalId===m);return{adicionalId:m,nombre:v?.nombre||"Adicional",categoria:v?.categoria||"",costoAdicional:v?.costoAdicional||0}});return{productoId:Number(d.productoId),cantidad:Number(d.cantidad),precioUnitario:Number(d.precioUnitario),subtotal:Number((d.precioUnitario*d.cantidad).toFixed(2)),promocionId:d.promocionId?Number(d.promocionId):null,personalizacion:d.personalizacion?{descripcionExtra:d.personalizacion.descripcionExtra||null,costoAdicional:Number(d.personalizacion.costoAdicional||0),adicionalesSeleccionados:u}:null}}),o={usuarioId:Number(e.usuarioId),detalles:i,subtotal:this.subtotal.toFixed(2),garantiaPagada:this.garantia.toFixed(2),resto:this.resto.toFixed(2),total:this.subtotal.toFixed(2)};console.log("ENVIANDO PEDIDO:",JSON.stringify(o,null,2));let r=new Ot({Authorization:`Bearer ${t}`,"Content-Type":"application/json"});this.http.post(`${this.apiUrl}/pedidos`,o,{headers:r}).subscribe({next:d=>{console.log("PEDIDO CREADO CON \xC9XITO:",d),localStorage.setItem("pago_garantia",JSON.stringify({pedidoId:d.pedidoId,garantia:this.garantia,resto:this.resto,subtotal:this.subtotal,total:this.subtotal})),this.carritoService.vaciar(),this.router.navigate(["/cliente/pago-garantia"])},error:d=>{console.error("ERROR FINAL:",d),alert("Error: "+(d.error?.message||"No se pudo crear el pedido"))}})}static \u0275fac=function(e){return new(e||n)(x(Ge),x(Sn),x(de),x(K),x(pe))};static \u0275cmp=M({type:n,selectors:[["app-mi-pedido"]],decls:26,vars:10,consts:[[1,"container","py-5"],["class","text-center py-5 my-5",4,"ngIf"],["class","row g-4",4,"ngIf"],["id","modalExito","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-0","shadow-lg"],[1,"modal-body","text-center","p-5"],[1,"bi","bi-check-circle-fill","text-success",2,"font-size","5rem"],[1,"fw-bold","text-success","mt-4"],[1,"fs-5","text-muted","mb-4"],[1,"text-primary","fw-bold"],[1,"text-muted","mb-4"],[1,"d-grid","gap-3"],["routerLink","/cliente/pago-garantia","data-bs-dismiss","modal",1,"btn","btn-success","btn-lg","fw-bold"],["routerLink","/cliente/mis-pedidos","data-bs-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-center","py-5","my-5"],[1,"bi","bi-basket3","fs-1","text-muted","mb-4"],[1,"text-muted","fs-3","fw-bold"],["routerLink","/cliente/catalogo",1,"btn","btn-primary","btn-lg","px-5","mt-3"],[1,"row","g-4"],[1,"col-lg-8"],["class","card shadow-sm mb-4",4,"ngFor","ngForOf"],[1,"col-lg-4"],[1,"card","shadow-lg","sticky-top",2,"top","20px"],[1,"card-body","p-4"],[1,"text-center","mb-4","fw-bold","text-primary"],["class","bg-success-subtle rounded-3 p-3 text-center mb-4",4,"ngIf"],[1,"d-flex","justify-content-between","mb-3","text-muted"],[1,"d-flex","justify-content-between","fs-5","fw-bold","mb-4"],[1,"text-success"],[1,"my-4"],[1,"mb-4"],[1,"form-label","fw-bold","text-primary"],[1,"form-select","form-select-lg","rounded-3",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mb-2"],[1,"fs-5"],[1,"text-success","fs-5"],[1,"d-flex","justify-content-between","text-danger","fw-bold","mb-4"],[1,"fs-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0","fw-bold"],[1,"text-success","mb-0","fw-bold"],[1,"alert","alert-success","text-center","py-3","rounded-3","mb-4"],[1,"btn","btn-success","btn-lg","w-100","py-3","fw-bold","rounded-3","shadow",3,"click"],[1,"card","shadow-sm","mb-4"],[1,"row","align-items-center","g-3"],[1,"col-3","col-md-2"],[1,"img-fluid","rounded-3","shadow-sm",2,"height","110px","width","100%","object-fit","cover",3,"src","alt"],[1,"col-9","col-md-10"],[1,"d-flex","justify-content-between","align-items-start"],[1,"flex-grow-1","pe-4"],[1,"mb-2","fw-bold"],["class","mb-2",4,"ngIf"],["class","mt-3 p-3 bg-light rounded-3 border-start border-4 border-warning",4,"ngIf"],[1,"d-flex","align-items-center","gap-3","mt-3"],[1,"btn","btn-outline-secondary","btn-sm","rounded-circle",3,"click"],[1,"fw-bold","fs-4","px-3"],[1,"text-end"],[1,"fs-3","fw-bold","text-success","mb-1"],["class","text-muted small mb-3",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"mb-2"],[1,"badge","bg-success","fs-6","px-3","py-2"],[1,"badge","bg-danger","fs-6","px-3"],[1,"mt-3","p-3","bg-light","rounded-3","border-start","border-4","border-warning"],[1,"mb-2","text-primary","fw-bold","small"],["class","small mt-2 mb-1 fst-italic text-muted",4,"ngIf"],[1,"d-flex","justify-content-between","mt-2","pt-2","border-top","border-light"],[1,"text-muted","fw-bold"],["class","d-flex justify-content-between small mb-1",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","small","mb-1"],[1,"text-success","fw-bold"],[1,"small","mt-2","mb-1","fst-italic","text-muted"],[1,"text-muted","small","mb-3"],[1,"bg-success-subtle","rounded-3","p-3","text-center","mb-4"],[1,"mb-1","fw-bold","text-success"],[1,"fs-4","fw-bold","text-danger","mb-0"],[1,"text-muted"],[3,"value","selected"]],template:function(e,i){e&1&&(s(0,"div",0),_(1,jh,6,0,"div",1)(2,Kh,58,32,"div",2),a(),s(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),b(7,"i",7),s(8,"h2",8),l(9,"\xA1PEDIDO RECIBIDO!"),a(),s(10,"p",9),l(11," Tu pedido ya est\xE1 en cocina"),b(12,"br"),s(13,"strong"),l(14,"Ahora solo falta pagar la garant\xEDa:"),a()(),s(15,"h1",10),l(16),P(17,"number"),a(),s(18,"p",11),l(19),P(20,"number"),a(),s(21,"div",12)(22,"button",13),l(23," PAGAR GARANT\xCDA AHORA "),a(),s(24,"button",14),l(25," Ver mis pedidos "),a()()()()()()),e&2&&(c(),p("ngIf",i.itemsDelCarrito.length===0),c(),p("ngIf",i.itemsDelCarrito.length>0),c(14),g("S/ ",A(17,4,i.garantia,"1.2-2")),c(3),g("Resto al recibir: S/ ",A(20,7,i.resto,"1.2-2")))},dependencies:[k,z,N,oe,xe],styles:[".cart-page[_ngcontent-%COMP%]{padding:60px 20px;background-color:#f9f9f9;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;min-height:70vh}.cart-container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto}.cart-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;color:#333;font-weight:600}.cart-layout[_ngcontent-%COMP%]{display:flex;gap:40px;flex-wrap:wrap}.cart-items[_ngcontent-%COMP%]{flex:2;min-width:300px}.empty-cart[_ngcontent-%COMP%]{text-align:center;padding:50px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000000d}.item[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;padding:18px;border-radius:12px;margin-bottom:16px;box-shadow:0 2px 8px #0000000d;transition:transform .2s}.item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #00000014}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border-radius:10px;margin-right:16px}.item-details[_ngcontent-%COMP%]{flex-grow:1}.item-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 6px;font-size:1.1rem;color:#333}.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#888;font-size:.9rem}.item-price[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem;color:#2e7d32}.cart-summary[_ngcontent-%COMP%]{flex:1;background:#fff;padding:24px;border-radius:12px;box-shadow:0 2px 15px #00000014;height:fit-content;min-width:300px}.cart-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;font-weight:600;font-size:1.3rem}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:12px;font-size:.95rem}.summary-row.total[_ngcontent-%COMP%]{font-weight:700;font-size:1.3rem;color:#333}.form-select-sm[_ngcontent-%COMP%]{height:38px;padding:.25rem .5rem;font-size:.875rem;border-radius:8px;border:1px solid #ced4da;background-color:#fff;transition:all .2s}.form-select-sm[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #0d6efd40;outline:0}.text-primary[_ngcontent-%COMP%]{color:#0d6efd!important;font-weight:600}.small[_ngcontent-%COMP%]{font-size:.85rem}.alert-warning[_ngcontent-%COMP%]{background-color:#fff8e1;border:1px solid #ffe082;color:#8a6d3b;border-radius:8px;padding:10px 12px;font-size:.875rem;line-height:1.4}.btn-success[_ngcontent-%COMP%]{background-color:#2e7d32;border:none;border-radius:8px;padding:12px;font-weight:600;transition:all .2s}.btn-success[_ngcontent-%COMP%]:hover{background-color:#1b5e20;transform:translateY(-1px)}.btn-danger[_ngcontent-%COMP%]{background-color:#d32f2f;border:none;font-size:.8rem;padding:4px 8px}.btn-outline-secondary[_ngcontent-%COMP%]{border-radius:6px;font-size:.9rem;padding:2px 8px}@media (max-width: 768px){.cart-layout[_ngcontent-%COMP%]{flex-direction:column}.cart-summary[_ngcontent-%COMP%]{position:static!important}.item[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:12px}}"]})};var pa=class n{constructor(t){this.authService=t}cerrarSesion(){this.authService.cerrarSesion()}static \u0275fac=function(e){return new(e||n)(x(de))};static \u0275cmp=M({type:n,selectors:[["app-admin"]],decls:69,vars:1,consts:[[1,"admin-layout"],[1,"top-bar"],[1,"brand"],["src","assets/imagenes/logo.png","alt","Logo",1,"logo"],[1,"user-actions"],[1,"user-name"],["routerLink","/admin/perfil",1,"btn-manage"],[1,"bi","bi-person-gear"],[1,"btn-logout",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"main-with-sidebar"],[1,"sidebar"],[1,"sidebar-nav"],["routerLink","/admin/dashboard","routerLinkActive","active-link"],[1,"bi","bi-speedometer2"],["routerLink","/admin/pedidos","routerLinkActive","active-link"],[1,"bi","bi-receipt"],["routerLink","/admin/pagos","routerLinkActive","active-link"],[1,"bi","bi-credit-card"],["routerLink","/admin/productos","routerLinkActive","active-link"],[1,"bi","bi-box-seam"],["routerLink","/admin/adicionales","routerLinkActive","active-link"],[1,"bi","bi-plus-circle"],["routerLink","/admin/resenas","routerLinkActive","active-link"],[1,"bi","bi-star"],["routerLink","/admin/promociones","routerLinkActive","active-link"],[1,"bi","bi-tag"],["routerLink","/admin/consultas","routerLinkActive","active-link"],[1,"bi","bi-chat-dots"],["routerLink","/admin/usuarios","routerLinkActive","active-link"],[1,"bi","bi-people"],["routerLink","/admin/GestionGarantias","routerLinkActive","active-link"],[1,"bi","bi-shield-check"],["routerLink","/admin/GestionQr","routerLinkActive","active-link"],[1,"bi","bi-qr-code"],["routerLink","/admin/reportes","routerLinkActive","active-link"],[1,"bi","bi-graph-up"],[1,"main-content"]],template:function(e,i){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),s(4,"h3"),l(5,"D.Juancito"),a()(),s(6,"div",4)(7,"span",5),l(8),a(),s(9,"a",6),b(10,"i",7),l(11," Gestionar Cuenta "),a(),s(12,"button",8),h("click",function(){return i.cerrarSesion()}),b(13,"i",9),l(14," Cerrar Sesi\xF3n "),a()()(),s(15,"div",10)(16,"aside",11)(17,"nav",12)(18,"ul")(19,"li")(20,"a",13),b(21,"i",14),l(22," Dashboard"),a()(),s(23,"li")(24,"a",15),b(25,"i",16),l(26," Gesti\xF3n de Pedidos"),a()(),s(27,"li")(28,"a",17),b(29,"i",18),l(30," Gesti\xF3n de Pagos"),a()(),s(31,"li")(32,"a",19),b(33,"i",20),l(34," Gestionar Cat\xE1logo"),a()(),s(35,"li")(36,"a",21),b(37,"i",22),l(38," Gesti\xF3n de Adicionales"),a()(),s(39,"li")(40,"a",23),b(41,"i",24),l(42," Gesti\xF3n de Rese\xF1as"),a()(),s(43,"li")(44,"a",25),b(45,"i",26),l(46," Gesti\xF3n de Promociones"),a()(),s(47,"li")(48,"a",27),b(49,"i",28),l(50," Gesti\xF3n de Consultas"),a()(),s(51,"li")(52,"a",29),b(53,"i",30),l(54," Gesti\xF3n de Usuarios"),a()(),s(55,"li")(56,"a",31),b(57,"i",32),l(58," Opciones de Garant\xEDa"),a()(),s(59,"li")(60,"a",33),b(61,"i",34),l(62," Configuraci\xF3n QR"),a()(),s(63,"li")(64,"a",35),b(65,"i",36),l(66," Reportes"),a()()()()(),s(67,"main",37),b(68,"router-outlet"),a()()()),e&2){let o;c(8),S((o=i.authService.obtenerUsuarioActual())==null?null:o.nombre)}},dependencies:[k,oe,an],styles:[".admin-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#f8f9fa}.top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 30px;background:#fff;border-bottom:1px solid #dee2e6;box-shadow:0 2px 8px #0000000d;z-index:100}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.brand[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:2px solid #fd7e14;object-fit:cover}.brand[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.3rem;font-weight:700;color:#212529}.user-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;font-size:.95rem}.user-name[_ngcontent-%COMP%]{font-weight:600;color:#495057}.btn-manage[_ngcontent-%COMP%], .btn-logout[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;border-radius:8px;font-weight:500;text-decoration:none;transition:all .3s ease}.btn-manage[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.btn-manage[_ngcontent-%COMP%]:hover, .btn-manage.active[_ngcontent-%COMP%]{background:#0d6efd;color:#fff}.btn-logout[_ngcontent-%COMP%]{background:transparent;color:#dc3545;border:1px solid #dc3545}.btn-logout[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff}.main-with-sidebar[_ngcontent-%COMP%]{display:flex;flex-grow:1;overflow:hidden}.sidebar[_ngcontent-%COMP%]{width:280px;background:#212529;color:#f8f9fa;padding:20px 0;overflow-y:auto;box-shadow:2px 0 10px #0000001a}.sidebar-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 20px;color:#ced4da;text-decoration:none;font-weight:500;transition:all .3s ease}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#343a40;color:#fff}.sidebar-nav[_ngcontent-%COMP%]   a.active-link[_ngcontent-%COMP%]{background:#fd7e14;color:#fff;font-weight:600}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.15rem}.main-content[_ngcontent-%COMP%]{flex-grow:1;background:#f8f9fa;padding:30px;overflow-y:auto}@media (max-width: 992px){.top-bar[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:12px;padding:15px}.user-actions[_ngcontent-%COMP%]{justify-content:center;width:100%}.main-with-sidebar[_ngcontent-%COMP%]{flex-direction:column}.sidebar[_ngcontent-%COMP%]{width:100%;max-height:50vh}}"]})};var ma=class n{http=w(K);apiUrl=J.apiUrl+"/dashboard";obtenerEstadisticasAdmin(){return this.http.get(`${this.apiUrl}/admin`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function Jh(n,t){n&1&&(s(0,"div",5),b(1,"div",6),s(2,"p",7),l(3,"Cargando dashboard..."),a()())}function Xh(n,t){if(n&1&&(s(0,"div",8),l(1),a()),n&2){let e=f();c(),g(" ",e.errorMensaje," ")}}function Qh(n,t){if(n&1&&(s(0,"div",36)(1,"div",37)(2,"strong"),l(3),a(),s(4,"span",38),l(5),P(6,"number"),a()(),s(7,"div",39),l(8),a(),s(9,"div",40),l(10),a()()),n&2){let e=t.$implicit,i=f(3);c(3),g("#",e.id),c(2),g("\u2022 S/ ",A(6,5,e.total,"1.2-2")),c(3),S(e.tiempoTranscurrido),c(),p("ngClass",i.getEstadoClass(e.estado)),c(),g(" ",e.estado," ")}}function ev(n,t){if(n&1&&(s(0,"div"),_(1,Qh,11,8,"div",35),a()),n&2){let e=f(2);c(),p("ngForOf",e.stats.ultimosPedidos)}}function tv(n,t){n&1&&(s(0,"div",41),l(1," No hay pedidos recientes. "),a())}function nv(n,t){if(n&1&&(Ne(0),s(1,"div",9)(2,"div",10)(3,"h2"),l(4,"\xA1Bienvenido!"),a(),s(5,"p"),l(6," Tienes "),s(7,"strong"),l(8),a(),l(9," y "),s(10,"strong"),l(11),a(),l(12,". "),a(),s(13,"span",11),l(14),P(15,"date"),a()()(),s(16,"div",12)(17,"a",13),b(18,"i",14),l(19),a(),s(20,"a",15),b(21,"i",16),l(22),a()(),s(23,"div",17)(24,"div",18)(25,"h5",19),b(26,"i",20),l(27," \xDAltimos Pedidos"),a()(),s(28,"div",21),_(29,ev,2,1,"div",22)(30,tv,2,0,"ng-template",null,0,en),a()(),s(32,"div",23)(33,"div",24)(34,"span",25),l(35,"Pedidos Hoy"),a(),s(36,"span",26),l(37),a()(),s(38,"div",24)(39,"span",25),l(40,"Pendientes"),a(),s(41,"span",27),l(42),a()(),s(43,"div",24)(44,"span",25),l(45,"Rese\xF1as"),a(),s(46,"span",28),l(47),a()()(),s(48,"div",29)(49,"div",30)(50,"div",31)(51,"span",32),l(52,"Pedidos Totales"),a()(),s(53,"div",33)(54,"span",34),l(55),a()()(),s(56,"div",30)(57,"div",31)(58,"span",32),l(59,"Ventas Totales"),a()(),s(60,"div",33)(61,"span",34),l(62),P(63,"number"),a()()(),s(64,"div",30)(65,"div",31)(66,"span",32),l(67,"Usuarios"),a()(),s(68,"div",33)(69,"span",34),l(70),a()()()(),Le()),n&2){let e=Nt(31),i=f();c(8),g("",i.stats.pendientes," pedidos pendientes"),c(3),g("",i.stats.resenasPendientes," rese\xF1as por revisar"),c(3),g(" Hoy: ",A(15,13,i.fechaActual,"EEEE, d 'de' MMMM 'de' yyyy, HH:mm")," "),c(5),g(" Ver Pedidos Pendientes (",i.stats.pendientes,") "),c(3),g(" Revisar Rese\xF1as (",i.stats.resenasPendientes,") "),c(7),p("ngIf",i.stats.ultimosPedidos==null?null:i.stats.ultimosPedidos.length)("ngIfElse",e),c(8),S(i.stats.pedidosHoy),c(5),S(i.stats.pendientes),c(5),S(i.stats.resenasTotal),c(8),S(i.stats.pedidosTotales),c(7),g("S/ ",A(63,16,i.stats.ventasTotales,"1.2-2")),c(8),S(i.stats.usuariosRegistrados)}}var fa=class n{stats=null;isLoading=!0;errorMensaje=null;fechaActual=new Date;dashboardService=w(ma);ngOnInit(){this.cargarEstadisticas()}cargarEstadisticas(){this.isLoading=!0,this.errorMensaje=null,this.dashboardService.obtenerEstadisticasAdmin().subscribe({next:t=>{this.stats=t,this.isLoading=!1,console.log("Estad\xEDsticas recibidas:",this.stats)},error:t=>{console.error("Error al cargar estad\xEDsticas:",t),t.status===403?this.errorMensaje="No tienes permiso para ver el dashboard.":this.errorMensaje="No se pudieron cargar las estad\xEDsticas.",this.isLoading=!1}})}getEstadoClass(t){switch(t){case"PENDIENTE PAGO":return"estado-pendiente";case"EN PREPARACI\xD3N":return"estado-preparacion";case"ENTREGADO":return"estado-entregado";default:return""}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-dashboard"]],features:[Ee([{provide:ji,useValue:"es-PE"}])],decls:4,vars:3,consts:[["sinPedidos",""],[1,"dashboard-container"],["class","loading text-center p-4",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[1,"loading","text-center","p-4"],["role","status",1,"spinner-border","text-orange"],[1,"mt-2"],[1,"alert","alert-danger"],[1,"welcome-banner"],[1,"welcome-text"],[1,"current-date"],[1,"quick-actions","mb-4"],["routerLink","/admin/pedidos",1,"btn","btn-orange","me-3"],[1,"bi","bi-receipt"],["routerLink","/admin/resenas",1,"btn","btn-warning"],[1,"bi","bi-star"],[1,"card","mb-4"],[1,"card-header","bg-dark","text-white"],[1,"mb-0"],[1,"bi","bi-clock-history"],[1,"card-body","p-0"],[4,"ngIf","ngIfElse"],[1,"stats-row","quick-stats"],[1,"stat-card","quick"],[1,"stat-label"],[1,"stat-badge","orange"],[1,"stat-badge","yellow"],[1,"stat-badge","brown"],[1,"stats-row","detail-stats"],[1,"stat-card","detail"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"stat-number"],["class","pedido-item",4,"ngFor","ngForOf"],[1,"pedido-item"],[1,"pedido-info"],[1,"text-muted"],[1,"pedido-tiempo"],[1,"pedido-estado",3,"ngClass"],[1,"text-center","py-4","text-muted"]],template:function(e,i){e&1&&(s(0,"div",1),_(1,Jh,4,0,"div",2)(2,Xh,2,1,"div",3)(3,nv,71,19,"ng-container",4),a()),e&2&&(c(),p("ngIf",i.isLoading),c(),p("ngIf",i.errorMensaje),c(),p("ngIf",i.stats&&!i.isLoading))},dependencies:[k,Pe,z,N,xe,ce],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:2rem;background-color:#f8f9fa}.welcome-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3e0,#ffe0b2);border-radius:12px;padding:1.8rem 2rem;margin-bottom:2rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 15px #fd7e141a;border:1px solid #ffd7b5}.welcome-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.9rem;font-weight:700;color:#343a40;margin:0 0 .5rem}.welcome-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;color:#5a5a5a;margin:0 0 .6rem}.current-date[_ngcontent-%COMP%]{font-size:.95rem;color:#888;font-weight:500}.quick-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.btn-orange[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff;padding:.7rem 1.2rem;border-radius:8px;font-weight:600;text-decoration:none;display:inline-flex;align-items:center;gap:.5rem;transition:all .3s ease}.btn-orange[_ngcontent-%COMP%]:hover{background-color:#e96a00;transform:translateY(-2px)}.btn-warning[_ngcontent-%COMP%]{background-color:#ffc107;color:#212529}.pedido-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #eee}.pedido-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.pedido-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.95rem}.pedido-tiempo[_ngcontent-%COMP%]{font-size:.85rem;color:#888}.pedido-estado[_ngcontent-%COMP%]{padding:.35rem .8rem;border-radius:50px;font-size:.8rem;font-weight:600;text-transform:uppercase}.estado-pendiente[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.estado-preparacion[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.estado-entregado[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.stats-row[_ngcontent-%COMP%]{display:grid;gap:1.5rem;margin-bottom:2rem}.quick-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}.detail-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 2px 10px #0000000d;transition:transform .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.stat-card.quick[_ngcontent-%COMP%]{padding:1.2rem;display:flex;justify-content:space-between;align-items:center}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;font-weight:500}.stat-badge[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:1.1rem;font-weight:700;color:#fff}.stat-badge.orange[_ngcontent-%COMP%]{background:#fd7e14}.stat-badge.yellow[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.stat-badge.brown[_ngcontent-%COMP%]{background:#a1887f}.stat-card.detail[_ngcontent-%COMP%]{padding:1.4rem}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.6rem}.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#495057}.card-icon[_ngcontent-%COMP%]{font-size:1.4rem}.stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#343a40}.spinner-border.text-orange[_ngcontent-%COMP%]{color:#fd7e14}"]})};var kl=(n,t)=>{let e=w(de),i=w(pe);if(!e.estaLogueado())return i.navigate(["/iniciar-sesion"],{queryParams:{returnUrl:t.url}}),!1;let o=e.obtenerUsuarioActual(),r=n.data.roles||[];return r.length===0||o.roles?.map(m=>m.nombre)?.some(m=>r.includes(m))?!0:(i.navigate(["/cliente/bienvenida"]),!1)};function iv(n,t){if(n&1&&(s(0,"span",27),l(1),a()),n&2){let e=f();c(),S(e.cantidadCarrito)}}var ga=class n{constructor(t,e){this.authService=t;this.carritoService=e}cantidadCarrito=0;ngOnInit(){this.carritoService.items$.subscribe(t=>{this.cantidadCarrito=t.reduce((e,i)=>e+i.cantidad,0)})}static \u0275fac=function(e){return new(e||n)(x(de),x(Ge))};static \u0275cmp=M({type:n,selectors:[["app-cliente"]],decls:48,vars:2,consts:[[1,"client-layout-container"],[1,"client-layout"],[1,"top-panel"],[1,"user-info"],["src","assets/imagenes/logo.png","alt","Logo",1,"logo"],[1,"welcome"],[1,"top-actions"],["routerLink","/cliente/perfil","routerLinkActive","active",1,"btn-profile"],[1,"bi","bi-person-circle"],["routerLink","/cliente/mi-pedido","routerLinkActive","active",1,"btn-cart"],[1,"bi","bi-cart3"],["class","badge",4,"ngIf"],[1,"main-with-sidebar"],[1,"sidebar"],[1,"sidebar-nav"],["routerLink","/cliente/catalogo","routerLinkActive","active"],[1,"bi","bi-grid-3x3-gap"],["routerLink","/cliente/productos-destacados","routerLinkActive","active"],[1,"bi","bi-star-fill"],["routerLink","/cliente/pedidos","routerLinkActive","active"],[1,"bi","bi-receipt"],["routerLink","/cliente/consultas","routerLinkActive","active"],[1,"bi","bi-chat-dots"],["routerLink","/cliente/ofertas","routerLinkActive","active"],[1,"text-danger",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"main-content"],[1,"badge"]],template:function(e,i){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),b(4,"img",4),s(5,"div")(6,"h3"),l(7,"Mi Cuenta"),a(),s(8,"span",5),l(9),a()()(),s(10,"div",6)(11,"a",7),b(12,"i",8),l(13," Mi Perfil "),a(),s(14,"a",9),b(15,"i",10),l(16," Mi Carrito "),_(17,iv,2,1,"span",11),a()()(),s(18,"div",12)(19,"aside",13)(20,"nav",14)(21,"ul")(22,"li")(23,"a",15),b(24,"i",16),l(25," Cat\xE1logo"),a()(),s(26,"li")(27,"a",17),b(28,"i",18),l(29," Productos Destacados"),a()(),s(30,"li")(31,"a",19),b(32,"i",20),l(33," Mis Pedidos"),a()(),s(34,"li")(35,"a",21),b(36,"i",22),l(37," Mis Consultas"),a()(),s(38,"li")(39,"a",23),b(40,"i",22),l(41," promociones"),a()(),s(42,"li")(43,"a",24),h("click",function(){return i.authService.cerrarSesion()}),b(44,"i",25),l(45," Cerrar Sesi\xF3n"),a()()()()(),s(46,"main",26),b(47,"router-outlet"),a()()()()),e&2){let o;c(9),g("Hola, ",(o=i.authService.obtenerUsuarioActual())==null?null:o.nombre),c(8),p("ngIf",i.cantidadCarrito>0)}},dependencies:[k,N,oe,an],styles:[".client-layout-container[_ngcontent-%COMP%]{padding:20px;background-color:#f8f9fa;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.client-layout[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.top-panel[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;border-radius:12px;padding:20px;margin-bottom:25px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 8px #0000000d}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.user-info[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;border:2px solid #fd7e14;object-fit:cover}.user-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:#212529}.welcome[_ngcontent-%COMP%]{font-size:.95rem;color:#6c757d}.top-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.btn-profile[_ngcontent-%COMP%], .btn-cart[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 16px;border-radius:8px;font-weight:600;text-decoration:none;transition:all .3s ease;font-size:.95rem}.btn-profile[_ngcontent-%COMP%]{background:#e9ecef;color:#495057}.btn-profile[_ngcontent-%COMP%]:hover, .btn-profile.active[_ngcontent-%COMP%]{background:#0d6efd;color:#fff}.btn-cart[_ngcontent-%COMP%]{background:#fd7e14;color:#fff}.btn-cart[_ngcontent-%COMP%]:hover, .btn-cart.active[_ngcontent-%COMP%]{background:#e96a00}.badge[_ngcontent-%COMP%]{background:#dc3545;color:#fff;font-size:.75rem;padding:2px 6px;border-radius:50%;font-weight:700}.main-with-sidebar[_ngcontent-%COMP%]{display:flex;gap:25px}.sidebar[_ngcontent-%COMP%]{width:260px;flex-shrink:0;background:#212529;border-radius:12px;padding:20px;color:#f8f9fa}.sidebar-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 16px;color:#ced4da;text-decoration:none;border-radius:8px;margin-bottom:6px;font-weight:600;transition:all .3s ease}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .sidebar-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#fd7e14;color:#fff}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.sidebar-nav[_ngcontent-%COMP%]   a.text-danger[_ngcontent-%COMP%]{color:#f8d7da!important}.sidebar-nav[_ngcontent-%COMP%]   a.text-danger[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff!important}.main-content[_ngcontent-%COMP%]{flex-grow:1;background:#fff;border:1px solid #dee2e6;border-radius:12px;padding:30px;box-shadow:0 2px 10px #0000000d}@media (max-width: 992px){.main-with-sidebar[_ngcontent-%COMP%]{flex-direction:column}.sidebar[_ngcontent-%COMP%]{width:100%}.top-panel[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:15px}.top-actions[_ngcontent-%COMP%]{justify-content:center}}"]})};var Tt=class n{http=w(K);apiUrl=J.apiUrl+"/pedidos";entregaUrl=J.apiUrl+"/entregas";obtenerPedidosPorUsuario(t){return this.http.get(`${this.apiUrl}/usuario/${t}`)}obtenerTodosLosPedidos(){return this.http.get(`${this.apiUrl}/todos`)}actualizarEstadoPedido(t,e){let i={estado:e};return this.http.put(`${this.apiUrl}/${t}/estado`,i)}eliminarPedido(t){return this.http.delete(`${this.apiUrl}/${t}`)}actualizarPedido(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}crearEntrega(t){return this.http.post(this.entregaUrl,t)}crear(t){return this.http.post(this.apiUrl,t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var ov=(n,t,e,i)=>({"estado-entregado":n,"estado-en_preparacion":t,"estado-pendiente":e,"estado-confirmado":i});function rv(n,t){if(n&1){let e=T();s(0,"div",14)(1,"div",15)(2,"span",16),l(3),P(4,"titlecase"),a(),s(5,"div",17)(6,"h5",18),l(7),P(8,"number"),a(),s(9,"p",19),l(10),P(11,"date"),a(),s(12,"div",20)(13,"span",21),l(14),a(),s(15,"div",22),l(16),P(17,"number"),a()(),s(18,"button",23),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.verDetalle(o))}),l(19," Ver detalle "),a()()()()}if(n&2){let e=t.$implicit,i=f(2);c(2),p("ngClass",gc(17,ov,e.estado==="entregado",e.estado==="en_preparacion",e.estado.includes("pendiente"),e.estado.includes("confirmado")||e.estado.includes("aceptado"))),c(),g(" ",le(4,6,e.estado)," "),c(4),g("#ORD",A(8,8,e.pedidoId,"3.0-0")),c(3),S(A(11,11,e.fechaPedido,"dd MMMM yyyy, HH:mm")),c(4),g("",i.calcularItemsTotales(e)," \xEDtem(s)"),c(2),g("S/ ",A(17,14,e.total,"1.2-2"))}}function av(n,t){if(n&1&&(s(0,"div",12),_(1,rv,20,22,"div",13),a()),n&2){let e=f();c(),p("ngForOf",e.listaDePedidos)}}function sv(n,t){n&1&&(s(0,"div",24),b(1,"i",25),s(2,"h4",26),l(3,"A\xFAn no tienes pedidos"),a(),s(4,"p",27),l(5,"\xA1Es hora de probar lo m\xE1s rico del Per\xFA!"),a(),s(6,"a",2),l(7," Hacer mi primer pedido "),a()())}function lv(n,t){if(n&1&&(s(0,"p",64),l(1),a()),n&2){let e=f(2).$implicit;c(),g(" ",e.personalizacion.descripcionExtra," ")}}function cv(n,t){if(n&1&&(s(0,"li",69)(1,"span"),l(2),a(),s(3,"strong",70),l(4),P(5,"number"),a()()),n&2){let e=t.$implicit;c(2),g("\u2022 ",e.nombre),c(2),g("+ S/ ",A(5,2,e.costoAdicional,"1.2-2"))}}function dv(n,t){if(n&1&&(s(0,"div",65)(1,"strong",66),l(2,"Adicionales:"),a(),s(3,"ul",67),_(4,cv,6,5,"li",68),a()()),n&2){let e=f(2).$implicit;c(4),p("ngForOf",e.personalizacion.adicionalesSeleccionados)}}function uv(n,t){if(n&1&&(s(0,"div",57)(1,"div",58)(2,"div",59)(3,"span",60),l(4,"Personalizaci\xF3n Extra"),a(),_(5,lv,2,1,"p",61)(6,dv,5,1,"div",62),a(),s(7,"strong",63),l(8),P(9,"number"),a()()()),n&2){let e=f().$implicit;c(5),p("ngIf",e.personalizacion.descripcionExtra),c(),p("ngIf",(e.personalizacion.adicionalesSeleccionados==null?null:e.personalizacion.adicionalesSeleccionados.length)>0),c(2),g(" + S/ ",A(9,3,e.personalizacion.costoAdicional,"1.2-2")," ")}}function pv(n,t){if(n&1&&(s(0,"div",48)(1,"div",49)(2,"div",50)(3,"div",51),b(4,"i",52),a(),s(5,"div")(6,"h6",53),l(7),a(),s(8,"small",54),l(9),P(10,"number"),a()()(),s(11,"strong",55),l(12),P(13,"number"),a()(),_(14,uv,10,6,"div",56),a()),n&2){let e=t.$implicit;c(7),S(e.producto==null?null:e.producto.nombre),c(2),Oe("",e.cantidad," \xD7 S/ ",A(10,5,e.precioUnitario,"1.2-2")),c(3),g("S/ ",A(13,8,e.subtotal,"1.2-2")),c(2),p("ngIf",e.personalizacion)}}function mv(n,t){if(n&1&&(s(0,"div",71)(1,"span"),l(2,"+ Personalizaci\xF3n extra"),a(),s(3,"strong"),l(4),P(5,"number"),a()()),n&2){let e=f().ngIf,i=f();c(4),g("S/ ",A(5,1,i.calcularTotalPersonalizacion(e),"1.2-2"))}}function fv(n,t){if(n&1&&(s(0,"div",72)(1,"span"),l(2,"Descuentos"),a(),s(3,"strong"),l(4),P(5,"number"),a()()),n&2){let e=f().ngIf,i=f();c(4),g("- S/ ",A(5,1,i.calcularTotalDescuentos(e),"1.2-2"))}}function gv(n,t){if(n&1&&(s(0,"div",28)(1,"div",29)(2,"div",30)(3,"h5",31),l(4,"Productos y Personalizaci\xF3n"),a(),_(5,pv,15,11,"div",32),a(),s(6,"div",33)(7,"h5",31),l(8,"Resumen del Pedido"),a(),s(9,"div",34)(10,"div",35)(11,"span"),l(12,"Subtotal productos"),a(),s(13,"strong"),l(14),P(15,"number"),a()(),_(16,mv,6,4,"div",36)(17,fv,6,4,"div",37),b(18,"hr",38),s(19,"div",39)(20,"strong",40),l(21,"Total"),a(),s(22,"strong",41),l(23),P(24,"number"),a()(),s(25,"div",42)(26,"div",35)(27,"span",43),l(28,"Garant\xEDa pagada"),a(),s(29,"strong",44),l(30),P(31,"number"),a()(),s(32,"div",45)(33,"span",43),l(34,"Resto al recibir"),a(),s(35,"strong",46),l(36),P(37,"number"),a()()(),s(38,"p",47),l(39),P(40,"date"),P(41,"date"),a()()()()()),n&2){let e=t.ngIf,i=f();c(5),p("ngForOf",e.detalles),c(9),g("S/ ",A(15,9,i.calcularSubtotalSinDescuento(e),"1.2-2")),c(2),p("ngIf",i.calcularTotalPersonalizacion(e)>0),c(),p("ngIf",i.calcularTotalDescuentos(e)>0),c(6),g("S/ ",A(24,12,e.total,"1.2-2")),c(7),g("S/ ",A(31,15,e.garantiaPagada,"1.2-2")),c(6),g("S/ ",A(37,18,e.resto,"1.2-2")),c(3),Oe(" Pedido realizado el ",A(40,21,e.fechaPedido,"dd MMMM yyyy")," a las ",A(41,24,e.fechaPedido,"HH:mm")," ")}}var Fo=class n{constructor(t,e,i){this.pedidoService=t;this.authService=e;this.datePipe=i}listaDePedidos=[];isLoading=!0;pedidoSeleccionado=null;ngOnInit(){let t=this.authService.obtenerUsuarioActual();t?.usuarioId&&this.pedidoService.obtenerPedidosPorUsuario(t.usuarioId).subscribe({next:e=>{this.listaDePedidos=e,this.isLoading=!1},error:()=>{alert("Error al cargar pedidos"),this.isLoading=!1}})}verDetalle(t){this.pedidoSeleccionado=t,new window.bootstrap.Modal(document.getElementById("modalDetalle")).show()}calcularItemsTotales(t){let e=0;return t.detalles?.forEach(i=>{e+=i.cantidad,i.personalizacion&&(e+=1)}),e}calcularSubtotalSinDescuento(t){return t.detalles?.reduce((e,i)=>e+i.precioUnitario*i.cantidad,0)||0}calcularTotalDescuentos(t){return t.detalles?.reduce((e,i)=>e+(i.descuentoAplicado||0),0)||0}calcularSubtotalProductos(t){return t.detalles?.reduce((e,i)=>e+(i.subtotal||0),0)||0}calcularTotalPersonalizacion(t){return t.detalles?.reduce((e,i)=>e+(i.personalizacion?.costoAdicional||0),0)||0}obtenerNombrePromocion(t){return{1:"20% OFF en Tres Leches",2:"Promo Navide\xF1a",3:"Combo Navide\xF1o Familiar",4:"Cupcakes Festivos 2x1",28:"20% OFF en Tres Leches",29:"2x1 en Alfajores de Maicena"}[t]||"Promoci\xF3n especial"}getEstadoClass(t){let e=(t||"").toUpperCase();return e.includes("PENDIENTE")?"bg-warning text-dark":e.includes("ACEPTADO")||e.includes("CONFIRMADO")?"bg-info text-white":e.includes("PREPARACION")||e.includes("CAMINO")?"bg-primary text-white":e.includes("ENTREGADO")?"bg-success text-white":e.includes("CANCELADO")?"bg-danger text-white":"bg-secondary text-white"}getEstadoPagoTexto(t){let e=t.pagos?.[0];return e?e.estado==="validado"&&e.tipoPago==="TOTAL"?"\xA1Pago completo recibido!":e.estado==="validado"?"Garant\xEDa recibida":"Esperando confirmaci\xF3n de pago":"Sin pago registrado"}getEstadoPagoBadge(t){let e=t.pagos?.[0];return e?e.estado==="validado"?e.tipoPago==="TOTAL"?"PAGADO":"GARANT\xCDA":"PENDIENTE":"SIN PAGO"}getEstadoPagoClass(t){let e=t.pagos?.[0];return e?e.estado==="validado"?e.tipoPago==="TOTAL"?"bg-success text-white":"bg-info text-white":"bg-warning text-dark":"bg-secondary"}getDetallePago(t){let e=t.pagos?.[0];return e?`${e.metodo?.toUpperCase()||"M\xE9todo"} ${e.codigoOperacion?"\u2022 Op: "+e.codigoOperacion:""}`:""}static \u0275fac=function(e){return new(e||n)(x(Tt),x(de),x(ce))};static \u0275cmp=M({type:n,selectors:[["app-historial-pedidos"]],features:[Ee([ce])],decls:17,vars:7,consts:[[1,"historial-container"],[1,"header-section"],["routerLink","/cliente/catalogo",1,"btn-nuevo-pedido"],["class","row g-4",4,"ngIf"],["class","no-pedidos",4,"ngIf"],["id","modalDetalle","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-xl"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"mb-0","fw-bold"],["type","button","data-bs-dismiss","modal",1,"btn-close","btn-close-white"],["class","modal-body p-5",4,"ngIf"],[1,"row","g-4"],["class","col-12 col-sm-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-lg-4"],[1,"pedido-card"],[1,"badge","pedido-badge",3,"ngClass"],[1,"pedido-card-body"],[1,"pedido-id"],[1,"pedido-fecha"],[1,"d-flex","justify-content-between","align-items-end","mt-3"],[1,"text-muted","small"],[1,"pedido-total"],[1,"btn-ver-detalle","mt-3",3,"click"],[1,"no-pedidos"],[1,"bi","bi-basket3"],[1,"mt-4","text-muted"],[1,"text-muted","mb-4"],[1,"modal-body","p-5"],[1,"row","g-5"],[1,"col-lg-7"],[1,"fw-bold","text-primary","mb-4"],["class","bg-white rounded-4 shadow-sm p-4 mb-4",4,"ngFor","ngForOf"],[1,"col-lg-5"],[1,"bg-light","rounded-4","shadow","p-5"],[1,"d-flex","justify-content-between","mb-3"],["class","d-flex justify-content-between text-success fw-bold mb-3",4,"ngIf"],["class","d-flex justify-content-between text-danger fw-bold mb-4",4,"ngIf"],[1,"border-primary","border-3"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fs-2","text-primary"],[1,"text-success","fs-2"],[1,"pt-4","border-top"],[1,"fs-5"],[1,"text-success","fs-5"],[1,"d-flex","justify-content-between","text-danger","fw-bold"],[1,"fs-4"],[1,"text-center","text-muted","small","mt-4"],[1,"bg-white","rounded-4","shadow-sm","p-4","mb-4"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"d-flex","align-items-center","gap-3"],[1,"bg-light","rounded-3","d-flex","align-items-center","justify-content-center",2,"width","70px","height","70px"],[1,"bi","bi-cake2","fs-2","text-primary"],[1,"fw-bold","mb-0"],[1,"text-muted"],[1,"fs-4","text-primary"],["class","border-start border-warning border-5 ps-4 pt-3 bg-warning bg-opacity-10 rounded-3",4,"ngIf"],[1,"border-start","border-warning","border-5","ps-4","pt-3","bg-warning","bg-opacity-10","rounded-3"],[1,"d-flex","justify-content-between","align-items-start"],[1,"flex-grow-1"],[1,"badge","bg-warning","text-dark","mb-3"],["class","fw-bold mb-2",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"text-success","fs-3","ms-4"],[1,"fw-bold","mb-2"],[1,"mt-3"],[1,"text-success","d-block","mb-2"],[1,"list-unstyled","mb-0"],["class","d-flex justify-content-between py-1",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","py-1"],[1,"text-success"],[1,"d-flex","justify-content-between","text-success","fw-bold","mb-3"],[1,"d-flex","justify-content-between","text-danger","fw-bold","mb-4"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Mis Pedidos"),a(),s(4,"a",2),l(5," Nuevo Pedido "),a()(),_(6,av,2,1,"div",3)(7,sv,8,0,"div",4),a(),s(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"h4",9),l(13),P(14,"number"),a(),b(15,"button",10),a(),_(16,gv,42,27,"div",11),a()()()),e&2&&(c(6),p("ngIf",i.listaDePedidos.length>0),c(),p("ngIf",i.listaDePedidos.length===0&&!i.isLoading),c(6),g(" Pedido #ORD",A(14,4,i.pedidoSeleccionado==null?null:i.pedidoSeleccionado.pedidoId,"3.0-0")," "),c(3),p("ngIf",i.pedidoSeleccionado))},dependencies:[k,Pe,z,N,oe,xe,_e,ce],styles:[".historial-container[_ngcontent-%COMP%]{padding:1.5rem 1rem;background:linear-gradient(135deg,#f8f9fa,#fff);min-height:100vh}.header-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:2rem;text-align:center}@media (min-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center;text-align:left}}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;color:#2c3e50;margin:0}.btn-nuevo-pedido[_ngcontent-%COMP%]{background:linear-gradient(45deg,#fd7e14,#ff8c42);color:#fff;border:none;padding:.8rem 2rem;border-radius:50px;font-weight:700;font-size:1.1rem;box-shadow:0 8px 20px #fd7e1466;transition:all .3s ease}.btn-nuevo-pedido[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 15px 30px #fd7e1480}.pedido-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#f7e4d1);border-radius:1.5rem;overflow:hidden;box-shadow:0 10px 30px #0000001a;transition:all .4s ease}.pedido-card[_ngcontent-%COMP%]:hover{transform:translateY(-12px);box-shadow:0 25px 50px #0003}.pedido-badge[_ngcontent-%COMP%]{top:15px;right:15px;font-size:.85rem;padding:.5rem 1.2rem;border-radius:50px;font-weight:700}.pedido-card-body[_ngcontent-%COMP%]{padding:1.8rem}.pedido-id[_ngcontent-%COMP%]{font-size:1.5rem;color:#2d2d2d}.pedido-fecha[_ngcontent-%COMP%]{font-size:.95rem;color:#6c757d}.pedido-total[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:900;color:#525151}.btn-ver-detalle[_ngcontent-%COMP%]{background:transparent;border:2.5px solid #ff7700;color:#ff6a00;font-weight:700;border-radius:50px;padding:.7rem;width:100%;transition:all .3s ease}.btn-ver-detalle[_ngcontent-%COMP%]:hover{background:#fb8d3e;color:#fff;transform:scale(1.02)}.estado-entregado[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.estado-en_preparacion[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.estado-pendiente[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.estado-confirmado[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.modal-content[_ngcontent-%COMP%]{border-radius:1.8rem;overflow:hidden;background:linear-gradient(135deg,#f8f9fa,#eca)}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f19f4e,#ed9b21);padding:1.8rem 2rem}.btn-close-lg[_ngcontent-%COMP%]{width:2.2rem;height:2.2rem;background-size:1.4em;opacity:1}.alert-descuento[_ngcontent-%COMP%]{background:linear-gradient(90deg,#d4edda,#c3e6cb);border-left:6px solid #28a745;border-radius:12px;padding:1rem}.no-pedidos[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:5rem;color:#dee2e6;margin-bottom:1.5rem}"]})};var ha=class n{nombreUsuario="";actividadesRecientes=[];isLoadingActividad=!0;authService=w(de);ngOnInit(){let t=this.authService.obtenerUsuarioActual();t&&(this.nombreUsuario=t.nombre)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-bienvenida"]],decls:26,vars:1,consts:[[1,"welcome-dashboard"],[1,"dashboard-grid"],["routerLink","/cliente/pedidos",1,"dashboard-card"],["routerLink","/cliente/perfil",1,"dashboard-card"],["routerLink","/cliente/consultas",1,"dashboard-card"],["routerLink","/cliente/catalogo",1,"dashboard-card"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h1"),l(2),a(),s(3,"p"),l(4,"Desde aqu\xED puedes gestionar tus pedidos, actualizar tu perfil y mucho m\xE1s."),a(),s(5,"div",1)(6,"a",2)(7,"h3"),l(8,"Mis Pedidos"),a(),s(9,"p"),l(10,"Revisa tu historial de compras y el estado de tus pedidos actuales."),a()(),s(11,"a",3)(12,"h3"),l(13,"Mi Perfil"),a(),s(14,"p"),l(15,"Actualiza tus datos personales, direcci\xF3n y contrase\xF1a."),a()(),s(16,"a",4)(17,"h3"),l(18,"Mis Consultas"),a(),s(19,"p"),l(20,"Revisa el historial y estado de tus consultas enviadas."),a()(),s(21,"a",5)(22,"h3"),l(23,"Ver Cat\xE1logo"),a(),s(24,"p"),l(25,"Explora nuestros productos y encuentra tu pr\xF3ximo postre favorito."),a()()()()),e&2&&(c(2),g("\xA1Bienvenido de vuelta, ",i.nombreUsuario,"!"))},dependencies:[k,oe],styles:[".welcome-dashboard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;margin-bottom:10px}.welcome-dashboard[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:25px}.dashboard-card[_ngcontent-%COMP%]{display:block;padding:25px;border:1px solid #e9ecef;border-radius:8px;text-decoration:none;color:#343a40;transition:all .3s ease}.dashboard-card[_ngcontent-%COMP%]:hover{border-color:#fd7e14;transform:translateY(-5px);box-shadow:0 8px 15px #00000012}.dashboard-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#fd7e14}.dashboard-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:0}.recent-activity-section[_ngcontent-%COMP%]{margin-top:3rem;background-color:#fff;padding:1.5rem 2rem;border-radius:8px;box-shadow:0 4px 15px #00000012}.recent-activity-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:1.5rem;color:#343a40}.activity-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.activity-item[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#f8f9fa;padding:.8rem 1rem;border-radius:6px;border-left:4px solid transparent}.activity-icon[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;margin-right:1rem;flex-shrink:0}.activity-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.activity-description[_ngcontent-%COMP%]{font-size:.95rem;color:#495057;margin:0;font-weight:500}.activity-time[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;margin-top:.2rem}.loading-activity[_ngcontent-%COMP%], .no-activity[_ngcontent-%COMP%]{text-align:center;padding:1rem;color:#6c757d;font-style:italic}"]})};function hv(n,t){if(n&1&&(s(0,"div",29),b(1,"input",30),s(2,"label",31)(3,"span",13),l(4),a(),s(5,"span",32),l(6),a()()()),n&2){let e=t.$implicit,i=f();Z("selected",i.form.value.saborBizcocho===e.nombre),c(),p("id","bizcocho-"+e.adicionalId)("value",e.nombre),c(),p("for","bizcocho-"+e.adicionalId),c(2),S(e.nombre),c(2),g("+ S/ ",e.costoAdicional.toFixed(2))}}function vv(n,t){if(n&1){let e=T();s(0,"div",33)(1,"input",34),h("input",function(){C(e);let o=f();return y(o.calcularPrecio())}),a()()}}function bv(n,t){if(n&1){let e=T();s(0,"div",29)(1,"input",35),h("change",function(o){C(e);let r=f();return y(r.onCheckboxChange(o,"rellenos"))}),a(),s(2,"label",31)(3,"span",13),l(4),a(),s(5,"span",32),l(6),a()()()}if(n&2){let e=t.$implicit;c(),p("id","relleno-"+e.adicionalId)("value",e.nombre),c(),p("for","relleno-"+e.adicionalId),c(2),S(e.nombre),c(2),g("+ S/ ",e.costoAdicional.toFixed(2))}}function _v(n,t){if(n&1){let e=T();s(0,"div",29)(1,"input",35),h("change",function(o){C(e);let r=f();return y(r.onCheckboxChange(o,"toppings"))}),a(),s(2,"label",31)(3,"span",13),l(4),a(),s(5,"span",32),l(6),a()()()}if(n&2){let e=t.$implicit;c(),p("id","topping-"+e.adicionalId)("value",e.nombre),c(),p("for","topping-"+e.adicionalId),c(2),S(e.nombre),c(2),g("+ S/ ",e.costoAdicional.toFixed(2))}}function xv(n,t){if(n&1){let e=T();s(0,"div",29)(1,"input",35),h("change",function(o){C(e);let r=f();return y(r.onCheckboxChange(o,"decorados"))}),a(),s(2,"label",31)(3,"span",13),l(4),a(),s(5,"span",32),l(6),a()()()}if(n&2){let e=t.$implicit;c(),p("id","decorado-"+e.adicionalId)("value",e.nombre),c(),p("for","decorado-"+e.adicionalId),c(2),S(e.nombre),c(2),g("+ S/ ",e.costoAdicional.toFixed(2))}}function Cv(n,t){if(n&1&&(s(0,"span",36),l(1),a()),n&2){let e=f();c(),g(" S/ ",e.precioCalculado.toFixed(2)," ")}}function yv(n,t){n&1&&(s(0,"span",37),l(1," A COTIZAR "),a())}var Ro=class n{constructor(t,e,i,o,r,d){this.fb=t;this.adicionalService=e;this.carritoService=i;this.authService=o;this.router=r;this.location=d;this.form=this.fb.group({saborBizcocho:[""],otroBizcocho:[""],rellenos:this.fb.array([]),toppings:this.fb.array([]),decorados:this.fb.array([]),otroRelleno:[""],otroTopping:[""],otroDecorado:[""],instrucciones:[""]})}form;bizcochos=[];rellenos=[];toppings=[];decorados=[];necesitaCotizacion=!1;precioCalculado=0;ngOnInit(){this.adicionalService.getAdicionales().subscribe(t=>{this.bizcochos=t.filter(e=>e.categoria==="bizcocho"),this.rellenos=t.filter(e=>e.categoria==="relleno"),this.toppings=t.filter(e=>e.categoria==="topping"),this.decorados=t.filter(e=>e.categoria==="decorado"),this.bizcochos.length>0&&this.form.patchValue({saborBizcocho:this.bizcochos[0].nombre}),this.calcularPrecio()}),this.form.valueChanges.subscribe(()=>this.calcularPrecio())}calcularPrecio(){let t=120;this.necesitaCotizacion=!1;let e=this.form.value;if(e.otroBizcocho?.trim())this.necesitaCotizacion=!0;else if(e.saborBizcocho){let i=this.bizcochos.find(o=>o.nombre===e.saborBizcocho);i&&(t+=i.costoAdicional)}e.rellenos.forEach(i=>{let o=this.rellenos.find(r=>r.nombre===i);o&&(t+=o.costoAdicional)}),e.otroRelleno?.trim()&&(this.necesitaCotizacion=!0),e.toppings.forEach(i=>{let o=this.toppings.find(r=>r.nombre===i);o&&(t+=o.costoAdicional)}),e.otroTopping?.trim()&&(this.necesitaCotizacion=!0),e.decorados.forEach(i=>{let o=this.decorados.find(r=>r.nombre===i);o&&(t+=o.costoAdicional)}),e.otroDecorado?.trim()&&(this.necesitaCotizacion=!0),this.precioCalculado=this.necesitaCotizacion?0:t}onCheckboxChange(t,e){let i=this.form.get(e);if(t.target.checked)i.push(new Gn(t.target.value));else{let o=i.controls.findIndex(r=>r.value===t.target.value);o>=0&&i.removeAt(o)}}onSubmit(){if(!this.authService.estaLogueado()){localStorage.setItem("torta_pendiente",JSON.stringify(this.prepararTorta())),alert("Debes iniciar sesi\xF3n para continuar"),this.router.navigate(["/iniciar-sesion"],{queryParams:{returnUrl:"/cliente/personalizar-torta"}});return}let t=this.prepararTorta();localStorage.setItem("torta_pendiente",JSON.stringify(t)),this.router.navigate(["/cliente/entrega"])}prepararTorta(){let t=this.form.value,e=[],i=t.saborBizcocho,o=0;if(t.otroBizcocho?.trim())i=t.otroBizcocho.trim();else if(t.saborBizcocho){let u=this.bizcochos.find(m=>m.nombre===t.saborBizcocho);u&&(e.push(u),o=u.costoAdicional)}t.rellenos.forEach(u=>{let m=this.rellenos.find(v=>v.nombre===u);m&&e.push(m)}),t.otroRelleno?.trim()&&e.push({adicionalId:null,nombre:t.otroRelleno.trim(),categoria:"relleno",costoAdicional:0}),t.toppings.forEach(u=>{let m=this.toppings.find(v=>v.nombre===u);m&&e.push(m)}),t.otroTopping?.trim()&&e.push({adicionalId:null,nombre:t.otroTopping.trim(),categoria:"topping",costoAdicional:0}),t.decorados.forEach(u=>{let m=this.decorados.find(v=>v.nombre===u);m&&e.push(m)}),t.otroDecorado?.trim()&&e.push({adicionalId:null,nombre:t.otroDecorado.trim(),categoria:"decorado",costoAdicional:0});let r=[i,t.rellenos.length>0?`con ${t.rellenos.join(" y ")}`:"",t.otroRelleno?`+ ${t.otroRelleno.trim()}`:"",t.toppings.length>0?`+ ${t.toppings.join(", ")}`:"",t.otroTopping?`+ ${t.otroTopping.trim()}`:"",t.decorados.length>0?`+ ${t.decorados.join(", ")}`:"",t.otroDecorado?`+ ${t.otroDecorado.trim()}`:"",t.instrucciones?`(Nota: ${t.instrucciones.trim()})`:""].filter(Boolean).join(" ").trim(),d=e.reduce((u,m)=>u+(m.costoAdicional||0),0);return{productoId:null,nombre:this.necesitaCotizacion?"Torta Personalizada (A cotizar)":"Torta Personalizada",precioBase:120,precioUnitario:this.precioCalculado,precioCalculado:this.precioCalculado,cantidad:1,categoria:"torta",imagenUrl:"assets/imagenes/torta-personalizada.jpg",esPersonalizada:!0,necesitaCotizacion:this.necesitaCotizacion,descripcionCompleta:r,costoAdicionales:d,adicionales:e,personalizacion:{descripcionExtra:r||"Torta personalizada",costoAdicional:d,adicionalesSeleccionados:e.map(u=>u.adicionalId).filter(Boolean)}}}regresar(){this.location.back()}static \u0275fac=function(e){return new(e||n)(x(it),x(En),x(Ge),x(de),x(pe),x(mt))};static \u0275cmp=M({type:n,selectors:[["app-personalizar-torta"]],decls:68,vars:11,consts:[[1,"customizer-container"],[1,"btn-retroceder",3,"click"],[1,"customizer-header"],[1,"step-indicator"],[1,"step","active"],[1,"step"],[1,"customizer-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"options-grid"],["class","option-card",3,"selected",4,"ngFor","ngForOf"],[1,"option-card","otro-option"],["type","radio","id","bizcocho-otro","formControlName","saborBizcocho",3,"value"],["for","bizcocho-otro",1,"option-content"],[1,"option-name"],[1,"option-price","text-warning"],["class","mt-3",4,"ngIf"],["class","option-card",4,"ngFor","ngForOf"],[1,"mt-4"],["type","text","formControlName","otroRelleno","placeholder","\xBFQuieres un relleno especial? Escr\xEDbelo aqu\xED...",1,"form-control",3,"input"],["type","text","formControlName","otroTopping","placeholder","Ej: Macarons, flores comestibles, chocolate derretido...",1,"form-control",3,"input"],["type","text","formControlName","otroDecorado","placeholder","Ej: Figura 3D, foto comestible, luces LED, nombre en chocolate...",1,"form-control",3,"input"],["rows","3","formControlName","instrucciones","placeholder","Ej: Feliz cumplea\xF1os Juanito, Te amo mam\xE1...",1,"form-control"],[1,"resumen-card","p-4","border","rounded","bg-light"],[1,"mb-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fs-5"],["class","fs-4 fw-bold text-success ms-3",4,"ngIf"],["class","fs-4 fw-bold text-warning ms-3",4,"ngIf"],["type","submit",1,"btn-submit","mt-4"],[1,"option-card"],["type","radio","formControlName","saborBizcocho",3,"id","value"],[1,"option-content",3,"for"],[1,"option-price"],[1,"mt-3"],["type","text","formControlName","otroBizcocho","placeholder","Ej: Bizcocho de maracuy\xE1, caf\xE9, almendra, naranja...",1,"form-control",3,"input"],["type","checkbox",3,"change","id","value"],[1,"fs-4","fw-bold","text-success","ms-3"],[1,"fs-4","fw-bold","text-warning","ms-3"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"a",1),h("click",function(){return i.regresar()}),l(2," \u2190 Volver al cat\xE1logo "),a(),s(3,"div",2)(4,"h2"),l(5,"Personaliza tu torta"),a(),s(6,"div",3)(7,"div",4),l(8,"1. Personalizaci\xF3n"),a(),s(9,"div",5),l(10,"2. Entrega"),a(),s(11,"div",5),l(12,"3. Pago"),a()()(),s(13,"form",6),h("ngSubmit",function(){return i.onSubmit()}),s(14,"div",7)(15,"h3"),l(16,"Sabor del Bizcocho"),a(),s(17,"p"),l(18,"Elige el sabor base de tu torta"),a(),s(19,"div",8),_(20,hv,7,7,"div",9),s(21,"div",10),b(22,"input",11),s(23,"label",12)(24,"span",13),l(25,"Otro sabor personalizado"),a(),s(26,"span",14),l(27,"A cotizar"),a()()()(),_(28,vv,2,0,"div",15),a(),s(29,"div",7)(30,"h3"),l(31,"Rellenos"),a(),s(32,"p"),l(33,"Puedes elegir varios"),a(),s(34,"div",8),_(35,bv,7,5,"div",16),a(),s(36,"div",17)(37,"input",18),h("input",function(){return i.calcularPrecio()}),a()()(),s(38,"div",7)(39,"h3"),l(40,"Toppings y decoraciones"),a(),s(41,"div",8),_(42,_v,7,5,"div",16),a(),s(43,"div",17)(44,"input",19),h("input",function(){return i.calcularPrecio()}),a()()(),s(45,"div",7)(46,"h3"),l(47,"Extras"),a(),s(48,"div",8),_(49,xv,7,5,"div",16),a(),s(50,"div",17)(51,"input",20),h("input",function(){return i.calcularPrecio()}),a()()(),s(52,"div",7)(53,"h3"),l(54,"Mensaje en la torta (opcional)"),a(),b(55,"textarea",21),a(),s(56,"div",7)(57,"div",22)(58,"h4",23),l(59,"Resumen de tu torta:"),a(),s(60,"div",24)(61,"div")(62,"strong",25),l(63,"Total:"),a(),_(64,Cv,2,1,"span",26)(65,yv,2,0,"span",27),a()(),s(66,"button",28),l(67," Continuar \u2192 Entrega "),a()()()()()),e&2&&(c(13),p("formGroup",i.form),c(7),p("ngForOf",i.bizcochos),c(),Z("selected",i.form.value.saborBizcocho===null),c(),p("value",null),c(6),p("ngIf",i.form.value.saborBizcocho===null),c(7),p("ngForOf",i.rellenos),c(7),p("ngForOf",i.toppings),c(7),p("ngForOf",i.decorados),c(15),p("ngIf",!i.necesitaCotizacion),c(),p("ngIf",i.necesitaCotizacion))},dependencies:[k,z,N,ot,Ue,X,Wn,re,ze,Ze,Ke],styles:[".customizer-container[_ngcontent-%COMP%]{max-width:900px;margin:50px auto;font-family:Arial,sans-serif;position:relative}.btn-retroceder[_ngcontent-%COMP%]{display:inline-block;margin-bottom:20px;font-size:16px;font-weight:600;color:#fd7e14;text-decoration:none;cursor:pointer;transition:color .3s ease}.btn-retroceder[_ngcontent-%COMP%]:hover{color:#c7640f}.customizer-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.customizer-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px}.step-indicator[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-top:15px}.step[_ngcontent-%COMP%]{padding:8px 15px;border-radius:20px;background-color:#e9ecef;color:#6c757d;font-weight:700}.step.active[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff}.customizer-form[_ngcontent-%COMP%]{background-color:#fff;padding:40px;border-radius:10px;box-shadow:0 4px 20px #00000014}.form-section[_ngcontent-%COMP%]{margin-bottom:35px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;color:#333}.form-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#777;margin-top:5px;margin-bottom:20px}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ccc;border-radius:5px;font-size:16px;box-sizing:border-box}.options-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}.option-card[_ngcontent-%COMP%]{display:flex;align-items:center;border:2px solid #e9ecef;border-radius:8px;padding:15px;cursor:pointer;transition:all .3s ease}.option-card[_ngcontent-%COMP%]:hover{border-color:#fd7e14;background-color:#fff8f0}.option-card[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;margin-right:15px}.option-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.option-name[_ngcontent-%COMP%]{font-weight:500}.option-price[_ngcontent-%COMP%]{font-weight:700;color:#28a745}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:15px;border:none;border-radius:8px;background-color:#fd7e14;color:#fff;font-size:18px;font-weight:700;cursor:pointer}.buttons-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1}.product-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.option-card.selected[_ngcontent-%COMP%]{border-color:#fd7e14!important;background-color:#fff8f0!important}.option-card[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .option-card[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:15px}.option-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;width:100%;margin:0}.otro-option[_ngcontent-%COMP%]{border-style:dashed}"]})};function wv(n,t){if(n&1){let e=T();s(0,"button",17),h("click",function(){C(e);let o=f().$implicit,r=f();return y(r.establecerPrincipal(o))}),l(1," Hacer Principal "),a()}}function Ev(n,t){if(n&1){let e=T();s(0,"div",8)(1,"div",9)(2,"span",10),l(3),a(),s(4,"span",11),l(5),a()(),s(6,"p",12),l(7),a(),s(8,"div",13),_(9,wv,2,0,"button",14),s(10,"button",15),h("click",function(){let o=C(e).$implicit,r=f();return y(r.abrirModal(o))}),l(11,"Editar"),a(),s(12,"button",16),h("click",function(){let o=C(e).$implicit,r=f();return y(r.toggleActivo(o))}),l(13),a()()()}if(n&2){let e=t.$implicit;Z("principal",e.esPrincipal)("inactiva",!e.activo),c(3),g("",e.porcentaje,"%"),c(),Z("principal",e.esPrincipal),c(),g(" ",e.esPrincipal?"PRINCIPAL":e.activo?"ACTIVA":"INACTIVA"," "),c(2),S(e.descripcion||"Sin descripci\xF3n"),c(2),p("ngIf",!e.esPrincipal),c(4),g(" ",e.activo?"Desactivar":"Activar"," ")}}function Sv(n,t){if(n&1){let e=T();s(0,"div",18),h("click",function(){C(e);let o=f();return y(o.cerrarModal())}),s(1,"div",19),h("click",function(o){return C(e),y(o.stopPropagation())}),s(2,"div",20),l(3),a(),s(4,"div",21)(5,"div",22)(6,"label"),l(7,"Porcentaje (%)"),a(),s(8,"input",23),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.form.porcentaje,o)||(r.form.porcentaje=o),y(o)}),a()(),s(9,"div",22)(10,"label"),l(11,"Descripci\xF3n (opcional)"),a(),s(12,"input",24),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.form.descripcion,o)||(r.form.descripcion=o),y(o)}),a()(),s(13,"div",25)(14,"button",26),h("click",function(){C(e);let o=f();return y(o.cerrarModal())}),l(15,"Cancelar"),a(),s(16,"button",27),h("click",function(){C(e);let o=f();return y(o.guardar())}),l(17),a()()()()()}if(n&2){let e=f();c(3),g(" ",e.esEdicion?"Editar Opci\xF3n":"Nueva Opci\xF3n de Garant\xEDa"," "),c(5),te("ngModel",e.form.porcentaje),c(4),te("ngModel",e.form.descripcion),c(5),g(" ",e.esEdicion?"Actualizar":"Crear"," ")}}var va=class n{garantiaService=w(Sn);opciones=[];garantiaPrincipal=null;modalVisible=!1;esEdicion=!1;form={id:0,porcentaje:50,descripcion:"",activo:!0};ngOnInit(){this.cargarTodo()}cargarTodo(){this.garantiaService.obtenerTodas().subscribe({next:t=>{this.opciones=t,this.garantiaPrincipal=t.find(e=>e.esPrincipal)||t.find(e=>e.activo)||t[0]||null},error:()=>alert("Error al cargar garant\xEDas")})}establecerPrincipal(t){this.garantiaPrincipal?.id!==t.id&&this.garantiaService.establecerPrincipal(t.id).subscribe({next:()=>{alert(`\xA1Garant\xEDa actualizada! Ahora el cliente paga ${t.porcentaje}%`),this.cargarTodo()},error:()=>alert("Error al establecer garant\xEDa principal")})}abrirModal(t){t?(this.esEdicion=!0,this.form=O({},t)):(this.esEdicion=!1,this.form={id:0,porcentaje:50,descripcion:"",activo:!0}),this.modalVisible=!0}cerrarModal(){this.modalVisible=!1}guardar(){if(this.form.porcentaje<1||this.form.porcentaje>100){alert("El porcentaje debe estar entre 1 y 100");return}(this.esEdicion?this.garantiaService.actualizar(this.form.id,this.form):this.garantiaService.crear(this.form)).subscribe({next:()=>{this.cargarTodo(),this.cerrarModal()}})}toggleActivo(t){this.garantiaService.toggleActivo(t.id).subscribe({next:()=>t.activo=!t.activo})}eliminar(t){confirm("\xBFSeguro que quieres eliminar esta opci\xF3n?")&&this.garantiaService.eliminar(t).subscribe({next:()=>this.cargarTodo()})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-garantias"]],decls:16,vars:3,consts:[[1,"container"],[1,"titulo"],[1,"card-principal"],[1,"valor-grande"],[1,"opciones-grid"],[1,"btn-nuevo",3,"click"],["class","opcion-card",3,"principal","inactiva",4,"ngFor","ngForOf"],["class","modal-directo",3,"click",4,"ngIf"],[1,"opcion-card"],[1,"header"],[1,"porcentaje"],[1,"badge"],[1,"descripcion"],[1,"acciones"],["class","btn-principal",3,"click",4,"ngIf"],[1,"btn-edit",3,"click"],[1,"btn-toggle",3,"click"],[1,"btn-principal",3,"click"],[1,"modal-directo",3,"click"],[1,"modal-content-directo",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"form-group"],["type","number","min","1","max","100",3,"ngModelChange","ngModel"],["type","text",3,"ngModelChange","ngModel"],[1,"botones"],[1,"btn-cancel",3,"click"],[1,"btn-guardar",3,"click"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2",1),l(2,"Gesti\xF3n Completa de Garant\xEDas"),a(),s(3,"div",2)(4,"h3"),l(5,"Garant\xEDa que paga el cliente"),a(),s(6,"div",3)(7,"strong"),l(8),a()(),s(9,"p"),l(10,"Este es el porcentaje que el cliente debe pagar al hacer un pedido personalizado"),a()(),s(11,"div",4)(12,"button",5),h("click",function(){return i.abrirModal()}),l(13,"+ Nueva Opci\xF3n"),a(),_(14,Ev,14,11,"div",6),a(),_(15,Sv,18,4,"div",7),a()),e&2&&(c(8),g("",(i.garantiaPrincipal==null?null:i.garantiaPrincipal.porcentaje)||50,"%"),c(6),p("ngForOf",i.opciones),c(),p("ngIf",i.modalVisible))},dependencies:[k,z,N,Me,X,Hn,re,Do,vl,Ie],styles:[".container[_ngcontent-%COMP%]{max-width:1100px;margin:3rem auto;padding:0 1.5rem}.titulo[_ngcontent-%COMP%]{text-align:center;color:#fd7e14;font-size:3.2rem;font-weight:700;margin-bottom:3rem}.card-principal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3e0,#ffe0b2);border:5px solid #fd7e14;border-radius:25px;padding:2.5rem;text-align:center;margin-bottom:4rem;box-shadow:0 20px 50px #fd7e1459}.card-principal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#e65100;margin-bottom:1.2rem;font-size:2rem}.valor-grande[_ngcontent-%COMP%]{font-size:6rem;font-weight:700;color:#fd7e14;margin:1.5rem 0;text-shadow:2px 2px 10px rgba(253,126,20,.3)}.btn-nuevo[_ngcontent-%COMP%]{display:block;margin:0 auto 3rem;background:#fd7e14;color:#fff;padding:18px 60px;border:none;border-radius:50px;font-size:1.6rem;font-weight:700;cursor:pointer;box-shadow:0 12px 40px #fd7e1466;transition:all .3s}.btn-nuevo[_ngcontent-%COMP%]:hover{background:#e66b0d;transform:translateY(-5px)}.opciones-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:2.5rem}.opcion-card[_ngcontent-%COMP%]{background:#fff;border-radius:25px;padding:2rem;box-shadow:0 18px 45px #0000001f;border:4px solid #fd7e14;transition:all .4s;position:relative}.opcion-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 25px 60px #fd7e144d}.opcion-card.principal[_ngcontent-%COMP%]{border:6px solid #ff6d00;transform:scale(1.06);box-shadow:0 25px 70px #ff6d0080}.opcion-card.inactiva[_ngcontent-%COMP%]{opacity:.6;border-color:#ccc}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.porcentaje[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;color:#fd7e14}.badge[_ngcontent-%COMP%]{padding:10px 24px;border-radius:30px;font-weight:700;font-size:1rem}.badge.principal[_ngcontent-%COMP%]{background:#ff6d00;color:#fff}.badge[_ngcontent-%COMP%]:not(.principal){background:#d4edda;color:#155724}.descripcion[_ngcontent-%COMP%]{color:#555;min-height:60px;margin:1.5rem 0;font-size:1.1rem}.acciones[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-top:1.5rem}.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:30px;font-weight:700;cursor:pointer;flex:1;min-width:120px;transition:all .3s}.btn-principal[_ngcontent-%COMP%]{background:#ff6d00;color:#fff}.btn-edit[_ngcontent-%COMP%]{background:#fd7e14;color:#fff}.btn-toggle[_ngcontent-%COMP%]{background:#ffc107;color:#333}.modal-directo[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000c;display:flex;justify-content:center;align-items:center;z-index:99999}.modal-content-directo[_ngcontent-%COMP%]{background:#fff;width:90%;max-width:500px;border-radius:20px;border:5px solid #fd7e14;box-shadow:0 15px 40px #0006;overflow:hidden}.modal-header[_ngcontent-%COMP%]{background:#fd7e14;color:#fff;padding:1.5rem;text-align:center;font-size:1.8rem;font-weight:700}.modal-body[_ngcontent-%COMP%]{padding:2rem}.form-group[_ngcontent-%COMP%]{margin:1.5rem 0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.6rem;font-weight:700;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px;border:3px solid #fd7e14;border-radius:12px;font-size:1.2rem;background:#fff8f0}.botones[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem}.btn-cancel[_ngcontent-%COMP%], .btn-guardar[_ngcontent-%COMP%]{padding:12px 30px;border:none;border-radius:25px;font-weight:700;cursor:pointer}.btn-cancel[_ngcontent-%COMP%]{background:#999;color:#fff}.btn-guardar[_ngcontent-%COMP%]{background:#fd7e14;color:#fff}"]})};function Pv(n,t){n&1&&(s(0,"div",17),l(1,"Cargando tus datos..."),a())}function Mv(n,t){if(n&1&&(s(0,"div",18),l(1),a()),n&2){let e=f();c(),S(e.errorMensajePerfil)}}function Dv(n,t){n&1&&(s(0,"small",27),l(1," El nombre es requerido. "),a())}function Ov(n,t){n&1&&(s(0,"small",27),l(1," El tel\xE9fono debe tener 9 d\xEDgitos num\xE9ricos. "),a())}function Iv(n,t){if(n&1&&(s(0,"div",28),l(1),a()),n&2){let e=f(2);c(),S(e.exitoMensajePerfil)}}function Av(n,t){if(n&1){let e=T();s(0,"form",5),h("ngSubmit",function(){C(e);let o=f();return y(o.guardarPerfil())}),s(1,"div",6)(2,"label",19),l(3,"Nombre Completo"),a(),b(4,"input",20),_(5,Dv,2,0,"small",9),a(),s(6,"div",6)(7,"label",21),l(8,"Correo Electr\xF3nico"),a(),b(9,"input",22),s(10,"small"),l(11,"El correo electr\xF3nico no se puede cambiar."),a()(),s(12,"div",6)(13,"label",23),l(14,"Tel\xE9fono"),a(),b(15,"input",24),_(16,Ov,2,0,"small",9),a(),s(17,"div",6)(18,"label",25),l(19,"Direcci\xF3n"),a(),b(20,"input",26),a(),s(21,"button",14),l(22),a(),_(23,Iv,2,1,"div",16),a()}if(n&2){let e=f();p("formGroup",e.perfilForm),c(5),p("ngIf",e.isControlInvalid(e.perfilForm,"nombre")&&e.getControlError(e.perfilForm,"nombre","required")),c(11),p("ngIf",e.isControlInvalid(e.perfilForm,"telefono")&&e.getControlError(e.perfilForm,"telefono","pattern")),c(5),p("disabled",e.perfilForm.invalid||e.isSavingPerfil),c(),g(" ",e.isSavingPerfil?"Guardando...":"Guardar Cambios"," "),c(),p("ngIf",e.exitoMensajePerfil)}}function Tv(n,t){n&1&&(s(0,"small",27),l(1," La contrase\xF1a actual es requerida. "),a())}function kv(n,t){n&1&&(s(0,"small",27),l(1," La nueva contrase\xF1a es requerida. "),a())}function Fv(n,t){n&1&&(s(0,"small",27),l(1," La contrase\xF1a debe tener al menos 6 caracteres. "),a())}function Rv(n,t){n&1&&(s(0,"small",27),l(1," Confirma la nueva contrase\xF1a. "),a())}function Nv(n,t){n&1&&(s(0,"small",27),l(1," Las contrase\xF1as no coinciden. "),a())}function Lv(n,t){if(n&1&&(s(0,"div",29),l(1),a()),n&2){let e=f();c(),S(e.errorMensajePassword)}}function Vv(n,t){if(n&1&&(s(0,"div",28),l(1),a()),n&2){let e=f();c(),S(e.exitoMensajePassword)}}function jv(n){let t=n.get("nuevaPassword"),e=n.get("confirmarPassword");return!t||!e||!t.value||!e.value||t.value===e.value?null:{passwordMismatch:!0}}var ba=class n{perfilForm;passwordForm;usuarioOriginal=null;isLoading=!0;isSavingPerfil=!1;isSavingPassword=!1;errorMensajePerfil=null;exitoMensajePerfil=null;errorMensajePassword=null;exitoMensajePassword=null;usuarioService=w(Jt);fb=w(it);constructor(){this.perfilForm=this.fb.group({nombre:["",$.required],email:[{value:"",disabled:!0},[$.required,$.email]],telefono:["",[$.pattern("^[0-9]{9}$")]],direccion:[""]}),this.passwordForm=this.fb.group({passwordActual:["",$.required],nuevaPassword:["",[$.required,$.minLength(6)]],confirmarPassword:["",$.required]},{validators:jv})}ngOnInit(){this.cargarDatosUsuario()}cargarDatosUsuario(){this.isLoading=!0,this.errorMensajePerfil=null,this.usuarioService.obtenerMiPerfil().subscribe({next:t=>{this.usuarioOriginal=t,this.perfilForm.patchValue({nombre:t.nombre,email:t.email,telefono:t.telefono||"",direccion:t.direccion||""}),this.isLoading=!1},error:t=>{console.error("Error al cargar el perfil:",t),this.errorMensajePerfil="No se pudieron cargar tus datos. Intenta de nuevo.",this.isLoading=!1}})}guardarPerfil(){if(this.perfilForm.invalid||!this.usuarioOriginal)return;this.isSavingPerfil=!0,this.errorMensajePerfil=null,this.exitoMensajePerfil=null;let t=ae(O({},this.usuarioOriginal),{nombre:this.perfilForm.value.nombre,telefono:this.perfilForm.value.telefono,direccion:this.perfilForm.value.direccion});this.usuarioService.actualizarMiPerfil(t).subscribe({next:e=>{this.usuarioOriginal=e,this.perfilForm.patchValue({nombre:e.nombre,telefono:e.telefono||"",direccion:e.direccion||""}),this.isSavingPerfil=!1,this.exitoMensajePerfil="\xA1Perfil actualizado con \xE9xito!",setTimeout(()=>this.exitoMensajePerfil=null,3e3)},error:e=>{console.error("Error al guardar el perfil:",e),this.errorMensajePerfil="No se pudieron guardar los cambios. Intenta de nuevo.",this.isSavingPerfil=!1}})}cambiarPassword(){if(this.passwordForm.invalid){this.passwordForm.markAllAsTouched();return}this.isSavingPassword=!0,this.errorMensajePassword=null,this.exitoMensajePassword=null;let t={passwordActual:this.passwordForm.value.passwordActual,nuevaPassword:this.passwordForm.value.nuevaPassword};this.usuarioService.cambiarPassword(t).subscribe({next:e=>{this.isSavingPassword=!1,this.exitoMensajePassword=e||"Contrase\xF1a cambiada con \xE9xito.",this.passwordForm.reset(),setTimeout(()=>this.exitoMensajePassword=null,4e3)},error:e=>{console.error("Error al cambiar contrase\xF1a:",e),this.errorMensajePassword=e.error||"Error inesperado al cambiar la contrase\xF1a.",this.isSavingPassword=!1}})}isControlInvalid(t,e){let i=t.get(e);return!!i&&i.invalid&&(i.dirty||i.touched)}getControlError(t,e,i){let o=t.get(e);return!!o&&o.hasError(i)}getPasswordFormError(t){return this.passwordForm.hasError(t)&&(this.passwordForm.get("confirmarPassword")?.touched??!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-mi-perfil"]],decls:35,vars:13,consts:[[1,"perfil-container"],["class","loading",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"separator"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","passwordActual"],["type","password","id","passwordActual","formControlName","passwordActual",1,"form-control"],["class","text-danger",4,"ngIf"],["for","nuevaPassword"],["type","password","id","nuevaPassword","formControlName","nuevaPassword",1,"form-control"],["for","confirmarPassword"],["type","password","id","confirmarPassword","formControlName","confirmarPassword",1,"form-control"],["type","submit",1,"btn-guardar",3,"disabled"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],[1,"loading"],[1,"alert","alert-danger"],["for","nombre"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["for","telefono"],["type","tel","id","telefono","formControlName","telefono",1,"form-control"],["for","direccion"],["type","text","id","direccion","formControlName","direccion","placeholder","Ej: Av. Principal 123, Dpto. 401",1,"form-control"],[1,"text-danger"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2"),l(2,"Mi Perfil"),a(),s(3,"p"),l(4,"Actualiza tu informaci\xF3n personal y de contacto."),a(),_(5,Pv,2,0,"div",1)(6,Mv,2,1,"div",2)(7,Av,24,6,"form",3),b(8,"hr",4),s(9,"h2"),l(10,"Cambiar Contrase\xF1a"),a(),s(11,"p"),l(12,"Establece una nueva contrase\xF1a para tu cuenta."),a(),s(13,"form",5),h("ngSubmit",function(){return i.cambiarPassword()}),s(14,"div",6)(15,"label",7),l(16,"Contrase\xF1a Actual"),a(),b(17,"input",8),_(18,Tv,2,0,"small",9),a(),s(19,"div",6)(20,"label",10),l(21,"Nueva Contrase\xF1a"),a(),b(22,"input",11),_(23,kv,2,0,"small",9)(24,Fv,2,0,"small",9),a(),s(25,"div",6)(26,"label",12),l(27,"Confirmar Nueva Contrase\xF1a"),a(),b(28,"input",13),_(29,Rv,2,0,"small",9)(30,Nv,2,0,"small",9),a(),s(31,"button",14),l(32),a(),_(33,Lv,2,1,"div",15)(34,Vv,2,1,"div",16),a()()),e&2&&(c(5),p("ngIf",i.isLoading),c(),p("ngIf",i.errorMensajePerfil),c(),p("ngIf",!i.isLoading&&i.perfilForm),c(6),p("formGroup",i.passwordForm),c(5),p("ngIf",i.isControlInvalid(i.passwordForm,"passwordActual")&&i.getControlError(i.passwordForm,"passwordActual","required")),c(5),p("ngIf",i.isControlInvalid(i.passwordForm,"nuevaPassword")&&i.getControlError(i.passwordForm,"nuevaPassword","required")),c(),p("ngIf",i.isControlInvalid(i.passwordForm,"nuevaPassword")&&i.getControlError(i.passwordForm,"nuevaPassword","minlength")),c(5),p("ngIf",i.isControlInvalid(i.passwordForm,"confirmarPassword")&&i.getControlError(i.passwordForm,"confirmarPassword","required")),c(),p("ngIf",i.getPasswordFormError("passwordMismatch")),c(),p("disabled",i.passwordForm.invalid||i.isSavingPassword),c(),g(" ",i.isSavingPassword?"Cambiando...":"Cambiar Contrase\xF1a"," "),c(),p("ngIf",i.errorMensajePassword),c(),p("ngIf",i.exitoMensajePassword))},dependencies:[k,N,ot,Ue,X,re,ze,Ze,Ke],styles:[".perfil-container[_ngcontent-%COMP%]{padding:2rem}.perfil-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem}.perfil-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#6c757d;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]{display:block;width:100%;padding:.75rem 1rem;font-size:1rem;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{color:#495057;background-color:#fff;border-color:#fd7e14;outline:0;box-shadow:0 0 0 .2rem #fd7e1440}.form-control[disabled][_ngcontent-%COMP%]{background-color:#e9ecef;opacity:1}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;margin-top:.25rem}.btn-guardar[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff;padding:.75rem 1.5rem;border:none;border-radius:.25rem;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .15s ease-in-out;margin-top:1rem}.btn-guardar[_ngcontent-%COMP%]:hover{background-color:#e66a00}.loading[_ngcontent-%COMP%]{padding:1rem;text-align:center;font-weight:600;color:#6c757d}.alert[_ngcontent-%COMP%]{padding:1rem;margin-top:1.5rem;border-radius:.25rem;border:1px solid transparent}.alert-danger[_ngcontent-%COMP%]{color:#721c24;background-color:#f8d7da;border-color:#f5c6cb}.alert-success[_ngcontent-%COMP%]{color:#155724;background-color:#d4edda;border-color:#c3e6cb}.text-danger[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem;display:block}.separator[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:3rem;border:0;border-top:1px solid #dee2e6}.mt-3[_ngcontent-%COMP%]{margin-top:1rem!important}"]})};var zv=n=>["/cliente/detalle",n];function Uv(n,t){n&1&&(s(0,"div",9),l(1," Cargando tus consultas... "),a())}function Bv(n,t){if(n&1&&(s(0,"div",10),l(1),a()),n&2){let e=f();c(),g(" ",e.errorMensaje," ")}}function Gv(n,t){n&1&&(s(0,"div",11),l(1," \xA1Tu consulta ha sido enviada con \xE9xito! La encontrar\xE1s marcada como **Pendiente**. "),a())}function $v(n,t){n&1&&(s(0,"div",12),l(1," A\xFAn no has enviado ninguna consulta. "),a())}function Hv(n,t){if(n&1&&(s(0,"div",15)(1,"span",16),l(2),P(3,"titlecase"),a(),s(4,"div",17)(5,"h3"),l(6),a(),s(7,"p",18),l(8),P(9,"date"),a(),s(10,"p",19),l(11),a(),s(12,"p",20),l(13),a()(),s(14,"a",21),l(15,` Ver detalle
`),a()()),n&2){let e=t.$implicit,i=f(2);c(),Z("tag-pendiente",e.estado==="pendiente")("tag-respondido",e.estado==="respondido"),c(),g(" ",le(3,10,e.estado)," "),c(4),g("#CONSULTA-",e.contactoId||"N/A"),c(2),S(A(9,12,e.fecha,"dd MMMM yyyy, h:mm a")),c(3),g("Motivo: **",i.obtenerNombreMotivo(e.motivo),"**"),c(2),S(e.mensaje.substring(0,50)+"..."),c(),p("routerLink",Bt(15,zv,e.contactoId))}}function Wv(n,t){if(n&1&&(s(0,"div",13),_(1,Hv,16,17,"div",14),a()),n&2){let e=f();c(),p("ngForOf",e.consultas)}}function qv(n,t){if(n&1&&(s(0,"option",33),l(1),a()),n&2){let e=t.$implicit;p("value",e.valor),c(),g(" ",e.nombre," ")}}function Yv(n,t){if(n&1){let e=T();s(0,"div",22)(1,"div",23)(2,"h3"),l(3,"Nueva Consulta"),a(),s(4,"div",24)(5,"label",25),l(6,"Selecciona el Motivo:"),a(),s(7,"select",26),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.motivoSeleccionado,o)||(r.motivoSeleccionado=o),y(o)}),_(8,qv,2,2,"option",27),a()(),s(9,"div",24)(10,"label",28),l(11,"Tu Mensaje (m\xEDnimo 10 caracteres):"),a(),s(12,"textarea",29),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.nuevoMensaje,o)||(r.nuevoMensaje=o),y(o)}),a()(),s(13,"div",30)(14,"button",31),h("click",function(){C(e);let o=f();return y(o.toggleFormulario())}),l(15,"Cancelar"),a(),s(16,"button",32),h("click",function(){C(e);let o=f();return y(o.enviarNuevaConsulta())}),l(17),a()()()()}if(n&2){let e=f();c(7),te("ngModel",e.motivoSeleccionado),c(),p("ngForOf",e.motivos),c(4),te("ngModel",e.nuevoMensaje),c(4),p("disabled",e.isSending||e.nuevoMensaje.trim().length<10||!e.motivoSeleccionado),c(),g(" ",e.isSending?"Enviando...":"Enviar Consulta"," ")}}var _a=class n{consultas=[];isLoading=!0;errorMensaje=null;contactoService=w(Yt);mostrarFormulario=!1;nuevoMensaje="";motivoSeleccionado="general";isSending=!1;enviadoExito=!1;motivos=[{valor:"cotizacion",nombre:"Cotizaci\xF3n"},{valor:"soporte",nombre:"Soporte T\xE9cnico"},{valor:"general",nombre:"Consulta General"}];ngOnInit(){this.cargarConsultas()}cargarConsultas(){this.isLoading=!0,this.errorMensaje=null,this.contactoService.obtenerMiHistorial().subscribe({next:t=>{this.consultas=t,this.isLoading=!1,this.enviadoExito=!1},error:t=>{console.error("Error al cargar las consultas:",t),this.errorMensaje="No se pudieron cargar tus consultas.",this.isLoading=!1}})}toggleFormulario(){this.mostrarFormulario=!this.mostrarFormulario,this.nuevoMensaje="",this.motivoSeleccionado="general",this.enviadoExito=!1}enviarNuevaConsulta(){let t=this.motivoSeleccionado;if(this.nuevoMensaje.trim().length<10){console.error("El mensaje es muy corto."),this.errorMensaje="El mensaje debe tener al menos 10 caracteres.";return}if(!t){console.error("El motivo no est\xE1 seleccionado."),this.errorMensaje="Por favor, selecciona un motivo para tu consulta.";return}this.isSending=!0,this.errorMensaje=null;let e={motivo:t,mensaje:this.nuevoMensaje.trim()};this.contactoService.registrar(e).subscribe({next:i=>{this.isSending=!1,this.enviadoExito=!0,this.mostrarFormulario=!1,this.nuevoMensaje="",this.motivoSeleccionado="general",this.cargarConsultas()},error:i=>{console.error("Error al enviar la consulta:",i),this.errorMensaje="Error al enviar la consulta. Int\xE9ntalo de nuevo.",this.isSending=!1}})}obtenerNombreMotivo(t){if(!t)return"N/A";let e=this.motivos.find(i=>i.valor===t);return e?e.nombre:"Motivo Desconocido"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-mis-consultas"]],decls:14,vars:6,consts:[[1,"consultas-container"],[1,"header-section"],[1,"btn-nueva-consulta",3,"click"],["class","loading",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","alert alert-info",4,"ngIf"],["class","consultas-list",4,"ngIf"],["class","consulta-form-modal",4,"ngIf"],[1,"loading"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"alert","alert-info"],[1,"consultas-list"],["class","consulta-card card-style-image",4,"ngFor","ngForOf"],[1,"consulta-card","card-style-image"],[1,"card-status-tag"],[1,"card-content-main"],[1,"card-date"],[1,"card-message-summary"],[1,"card-message-summary-msg"],[1,"btn-ver-detalle",3,"routerLink"],[1,"consulta-form-modal"],[1,"modal-content"],[1,"form-group"],["for","motivo"],["id","motivo","required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","mensaje"],["id","mensaje","placeholder","Detalla tu consulta, cotizaci\xF3n o problema aqu\xED...","rows","5",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"btn-cancel",3,"click"],[1,"btn-send",3,"click","disabled"],[3,"value"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Mis Consultas"),a(),s(4,"a",2),h("click",function(){return i.toggleFormulario()}),l(5," + Crear Nueva Consulta "),a()(),s(6,"p"),l(7,"Historial de tus mensajes y el estado en el que se encuentran."),a(),_(8,Uv,2,0,"div",3)(9,Bv,2,1,"div",4)(10,Gv,2,0,"div",5)(11,$v,2,0,"div",6)(12,Wv,2,1,"div",7),a(),_(13,Yv,18,5,"div",8)),e&2&&(c(8),p("ngIf",i.isLoading),c(),p("ngIf",i.errorMensaje),c(),p("ngIf",i.enviadoExito),c(),p("ngIf",!i.isLoading&&i.consultas.length===0&&!i.errorMensaje),c(),p("ngIf",!i.isLoading&&i.consultas.length>0),c(),p("ngIf",i.mostrarFormulario))},dependencies:[k,z,N,oe,Me,tt,nt,X,et,re,ln,Ie,_e,ce],styles:[".consultas-container[_ngcontent-%COMP%]{padding:2rem 1.5rem;background-color:#f8f9fa;min-height:80vh}.header-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:2.5rem;text-align:center}@media (min-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center;text-align:left}}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:800;color:#2c3e50;margin:0}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#7f8c8d;margin:0}.btn-nueva-consulta[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff8c42,#ffb442);color:#fff;border:none;padding:.8rem 2rem;border-radius:50px;font-weight:700;font-size:1.1rem;box-shadow:0 8px 20px #ff8c4266;transition:all .3s ease;text-decoration:none;text-align:center;display:inline-block}.btn-nueva-consulta[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 15px 30px #ff8c4280;filter:brightness(1.1)}.consultas-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem}.consulta-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.25rem;box-shadow:0 10px 30px #00000014;transition:all .4s ease;border:1px solid #f0f0f0;display:flex;flex-direction:column;min-height:180px}.consulta-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 40px #00000026}.consulta-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #f0f0f0;background-color:#fcfcfc;border-top-left-radius:1.25rem;border-top-right-radius:1.25rem}.consulta-fecha[_ngcontent-%COMP%]{font-size:.9rem;color:#95a5a6;font-weight:500}.consulta-estado[_ngcontent-%COMP%]{font-size:.8rem;font-weight:700;padding:.4rem 1rem;border-radius:50px;text-transform:uppercase;letter-spacing:.5px}.estado-pendiente[_ngcontent-%COMP%]{background:#fdf2e9;color:#d35400}.estado-respondido[_ngcontent-%COMP%]{background:#e9f7ef;color:#27ae60}.consulta-body[_ngcontent-%COMP%]{padding:1.5rem;font-size:.95rem;line-height:1.6;color:#34495e;flex-grow:1}.no-consultas-info[_ngcontent-%COMP%]{background:#fff;border-radius:1.25rem;padding:3rem;margin-top:2rem;text-align:center;box-shadow:0 5px 20px #0000000d}.no-consultas-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600;color:#34495e}.no-consultas-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#ff8c42;margin-bottom:1rem}.loading[_ngcontent-%COMP%]{padding:2rem;text-align:center;font-weight:600;color:#95a5a6;font-style:italic}.consulta-form-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:1rem;width:90%;max-width:500px;box-shadow:0 10px 30px #0003}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.5rem;color:#2c3e50}.modal-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:1rem;border:1px solid #ccc;border-radius:.5rem;resize:vertical;margin-bottom:1rem;font-size:1rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem}.btn-cancel[_ngcontent-%COMP%], .btn-send[_ngcontent-%COMP%]{padding:.7rem 1.5rem;border:none;border-radius:50px;font-weight:600;cursor:pointer;transition:background-color .3s}.btn-cancel[_ngcontent-%COMP%]{background-color:#ecf0f1;color:#34495e}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#bdc3c7}.btn-send[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff8c42,#ffb442);color:#fff}.btn-send[_ngcontent-%COMP%]:hover:not(:disabled){filter:brightness(1.1)}.btn-send[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.card-style-image[_ngcontent-%COMP%]{position:relative;padding:2.5rem 1.5rem 1.5rem;display:flex;flex-direction:column;justify-content:space-between;min-height:250px}.card-status-tag[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding:.3rem 1rem;border-top-left-radius:1.25rem;border-bottom-right-radius:10px;font-weight:700;font-size:.8rem}.tag-pendiente[_ngcontent-%COMP%]{background-color:#fdf2e9;color:#d35400}.tag-respondido[_ngcontent-%COMP%]{background-color:#e9f7ef;color:#27ae60}.card-content-main[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;color:#2c3e50;margin-top:.5rem;margin-bottom:.5rem}.card-date[_ngcontent-%COMP%]{font-size:.85rem;color:#95a5a6;margin-bottom:1rem}.card-message-summary[_ngcontent-%COMP%]{font-style:italic;color:#7f8c8d;margin-bottom:1.5rem;flex-grow:1}.btn-ver-detalle[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;padding:.75rem;border:2px solid #ffb442;color:#ff8c42;background-color:#fff;border-radius:50px;font-weight:700;text-decoration:none;transition:all .3s ease}.btn-ver-detalle[_ngcontent-%COMP%]:hover{background-color:#ff8c42;color:#fff;box-shadow:0 5px 15px #ff8c424d}.form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:#34495e;font-size:.95rem}.modal-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #ccc;border-radius:.5rem;font-size:1rem;box-sizing:border-box;background-color:#fff;appearance:none;-webkit-appearance:none;-moz-appearance:none}.modal-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%237f8c8d%22%20d%3D%22M287%20173.5c-4%204-10.4%204-14.4%200L146.2%2057.2%2019.5%20173.5c-4%204-10.4%204-14.4%200-4-4-4-10.4%200-14.4l134.4-134.4c4-4%2010.4-4%2014.4%200l134.4%20134.4c4%204%204%2010.4%200%2014.4z%22%2F%3E%3C%2Fsvg%3E);background-repeat:no-repeat;background-position:right .7em top 50%;background-size:.65em auto}"]})};function Zv(n,t){if(n&1){let e=T();s(0,"div",5)(1,"div",6)(2,"span"),l(3),a(),s(4,"span",7),l(5),a()(),b(6,"img",8),s(7,"div",9)(8,"p")(9,"strong"),l(10,"Tel\xE9fono:"),a(),l(11),a(),s(12,"p")(13,"strong"),l(14,"Propietario:"),a(),l(15),a()(),s(16,"div",10)(17,"button",11),h("click",function(){let o=C(e).$implicit,r=f();return y(r.abrirModal(o))}),l(18,"Editar"),a(),s(19,"button",12),h("click",function(){let o=C(e).$implicit,r=f();return y(r.toggleActivo(o))}),l(20),a()()()}if(n&2){let e=t.$implicit;Z("inactivo",!e.activo),c(2),Qt(Pt("tipo ",e.tipo.toLowerCase())),c(),S(e.tipo),c(),Z("activo",e.activo),c(),g(" ",e.activo?"ACTIVO":"INACTIVO"," "),c(),p("alt",Pt("QR ",e.tipo))("src",e.imagenUrl,ve),c(5),g(" ",e.telefono),c(4),g(" ",e.nombrePropietario),c(5),g(" ",e.activo?"Desactivar":"Activar"," ")}}function Kv(n,t){if(n&1&&(s(0,"div",32),b(1,"img",33),a()),n&2){let e=f(2);c(),p("src",e.imagenPreview,ve)}}function Jv(n,t){if(n&1){let e=T();s(0,"div",13),h("click",function(){C(e);let o=f();return y(o.cerrarModal())}),s(1,"div",14),h("click",function(o){return C(e),y(o.stopPropagation())}),s(2,"div",15)(3,"h3",16),l(4),a(),s(5,"button",17),h("click",function(){C(e);let o=f();return y(o.cerrarModal())}),l(6,"\xD7"),a()(),s(7,"div",18)(8,"div",19)(9,"label"),l(10,"Tipo de pago"),a(),s(11,"select",20),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.form.tipo,o)||(r.form.tipo=o),y(o)}),s(12,"option",21),l(13,"YAPE"),a(),s(14,"option",22),l(15,"PLIN"),a()()(),s(16,"div",19)(17,"label"),l(18,"Imagen del QR"),a(),s(19,"input",23),h("change",function(o){C(e);let r=f();return y(r.onFileSelected(o))}),a(),_(20,Kv,2,1,"div",24),a(),s(21,"div",19)(22,"label"),l(23,"Tel\xE9fono"),a(),s(24,"input",25),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.form.telefono,o)||(r.form.telefono=o),y(o)}),a()(),s(25,"div",19)(26,"label"),l(27,"Nombre del propietario"),a(),s(28,"input",26),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.form.nombrePropietario,o)||(r.form.nombrePropietario=o),y(o)}),a()(),s(29,"div",27)(30,"input",28),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.form.activo,o)||(r.form.activo=o),y(o)}),a(),s(31,"label"),l(32,"Activo (visible para los clientes)"),a()(),s(33,"div",29)(34,"button",30),h("click",function(){C(e);let o=f();return y(o.cerrarModal())}),l(35,"Cancelar"),a(),s(36,"button",31),h("click",function(){C(e);let o=f();return y(o.guardar())}),l(37,"Guardar QR"),a()()()()()}if(n&2){let e=f();c(4),S(e.esEdicion?"Editar QR":"Nuevo QR"),c(7),te("ngModel",e.form.tipo),c(9),p("ngIf",e.imagenPreview),c(4),te("ngModel",e.form.telefono),c(4),te("ngModel",e.form.nombrePropietario),c(2),te("ngModel",e.form.activo)}}var xa=class n{qrs=[];modalVisible=!1;esEdicion=!1;form={tipo:"YAPE",imagenUrl:"",telefono:"999675771",nombrePropietario:"Jessica Chu\xF1e Liza",activo:!0};imagenPreview="";archivoSeleccionado=null;http=w(K);apiUrl=J.apiUrl;ngOnInit(){this.cargarQrs()}cargarQrs(){this.http.get(`${this.apiUrl}/config/qr/admin`).subscribe({next:t=>this.qrs=t,error:t=>console.error("Error cargando QRs:",t)})}abrirModal(t){t?(this.esEdicion=!0,this.form=O({},t),this.imagenPreview=t.imagenUrl,this.archivoSeleccionado=null):(this.esEdicion=!1,this.form={tipo:"YAPE",imagenUrl:"",telefono:"999675771",nombrePropietario:"Jessica Chu\xF1e Liza",activo:!0},this.imagenPreview="",this.archivoSeleccionado=null),this.modalVisible=!0}cerrarModal(){this.modalVisible=!1,this.archivoSeleccionado=null,this.imagenPreview=""}onFileSelected(t){let e=t.target.files[0];if(!e)return;this.archivoSeleccionado=e;let i=new FileReader;i.onload=()=>this.imagenPreview=i.result,i.readAsDataURL(e)}guardar(){if(!this.archivoSeleccionado&&!this.esEdicion){alert("\xA1Debes subir una imagen del QR!");return}if(this.esEdicion&&!this.archivoSeleccionado){this.guardarQrDirecto();return}let t=new FormData;t.append("file",this.archivoSeleccionado),this.http.post(`${this.apiUrl}/cloudinary/subir`,t).subscribe({next:e=>{this.form.imagenUrl=e.url,this.guardarQrDirecto()},error:e=>{console.error("Error subiendo imagen a Cloudinary:",e),alert("No se pudo subir la imagen. Intenta otra vez.")}})}guardarQrDirecto(){(this.esEdicion?this.http.put(`${this.apiUrl}/config/qr/${this.form.id}`,this.form):this.http.post(`${this.apiUrl}/config/qr`,this.form)).subscribe({next:()=>{this.cargarQrs(),this.cerrarModal(),alert(this.esEdicion?"QR actualizado con \xE9xito":"QR creado con \xE9xito")},error:e=>{console.error("Error guardando QR:",e),alert("Error al guardar el QR")}})}toggleActivo(t){this.http.patch(`${this.apiUrl}/config/qr/${t.id}/toggle`,{}).subscribe({next:()=>t.activo=!t.activo})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-qr"]],decls:9,vars:2,consts:[[1,"qr-container"],[1,"btn-nuevo",3,"click"],[1,"qr-grid"],["class","qr-card",3,"inactivo",4,"ngFor","ngForOf"],["class","modal-directo",3,"click",4,"ngIf"],[1,"qr-card"],[1,"qr-header"],[1,"estado"],[1,"qr-imagen",3,"src","alt"],[1,"info"],[1,"acciones"],[1,"btn-edit",3,"click"],[1,"btn-toggle",3,"click"],[1,"modal-directo",3,"click"],[1,"modal-content-directo",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"btn-close-modal",3,"click"],[1,"modal-body"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],["value","YAPE"],["value","PLIN"],["type","file","accept","image/*",1,"form-control",3,"change"],["class","preview",4,"ngIf"],["type","text","placeholder","999 999 999",1,"form-control",3,"ngModelChange","ngModel"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"botones"],[1,"btn-cancel",3,"click"],[1,"btn-guardar",3,"click"],[1,"preview"],["alt","Vista previa",3,"src"]],template:function(e,i){e&1&&(s(0,"div",0),l(1,' 1"> '),s(2,"h2"),l(3,"Gesti\xF3n de QR Yape / Plin"),a(),s(4,"button",1),h("click",function(){return i.abrirModal()}),l(5,"+ Agregar QR"),a(),s(6,"div",2),_(7,Zv,21,15,"div",3),a()(),_(8,Jv,38,6,"div",4)),e&2&&(c(7),p("ngForOf",i.qrs),c(),p("ngIf",i.modalVisible))},dependencies:[k,z,N,Me,tt,nt,X,Po,et,re,Ie],styles:[".qr-container[_ngcontent-%COMP%]{max-width:1100px;margin:3rem auto;padding:0 1.5rem}h2[_ngcontent-%COMP%]{text-align:center;color:#fd7e14;font-size:3rem;font-weight:700;margin-bottom:2.5rem}.btn-nuevo[_ngcontent-%COMP%]{display:block;margin:0 auto 3.5rem;background:#fd7e14;color:#fff;padding:18px 60px;border:none;border-radius:50px;font-size:1.6rem;font-weight:700;cursor:pointer;box-shadow:0 12px 40px #fd7e1466;transition:all .3s}.btn-nuevo[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 20px 50px #fd7e1480;background:#e66b0d}.qr-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(380px,1fr));gap:2.5rem}.qr-card[_ngcontent-%COMP%]{background:#fff;border-radius:25px;padding:2rem;box-shadow:0 20px 50px #0000001f;border:4px solid #fd7e14;transition:all .4s;position:relative;overflow:hidden}.qr-card[_ngcontent-%COMP%]:hover{transform:translateY(-12px);box-shadow:0 30px 70px #fd7e144d}.qr-card.inactivo[_ngcontent-%COMP%]{opacity:.6;border-color:#ccc}.qr-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.tipo[_ngcontent-%COMP%]{padding:12px 28px;border-radius:30px;font-weight:700;color:#fff;font-size:1.3rem}.tipo.yape[_ngcontent-%COMP%]{background:#9c27b0}.tipo.plin[_ngcontent-%COMP%]{background:#00bcd4}.estado[_ngcontent-%COMP%]{padding:10px 20px;border-radius:25px;font-weight:700;font-size:1rem}.estado.activo[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.estado[_ngcontent-%COMP%]:not(.activo){background:#f8d7da;color:#721c24}.qr-imagen[_ngcontent-%COMP%]{width:100%;height:280px;object-fit:contain;background:#fff8f0;border-radius:18px;border:4px dashed #fd7e14;padding:10px;margin:1rem 0}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:1rem 0;font-size:1.2rem;color:#444}.info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#e65100}.acciones[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-top:1.5rem}.acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:14px 32px;border:none;border-radius:30px;font-weight:700;cursor:pointer;font-size:1.1rem;transition:all .3s}.btn-edit[_ngcontent-%COMP%]{background:#fd7e14;color:#fff}.btn-toggle[_ngcontent-%COMP%]{background:#ffc107;color:#333}.modal-directo[_ngcontent-%COMP%]{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;z-index:999999!important;display:flex!important;justify-content:center!important;align-items:center!important;pointer-events:none;background:#000000b3!important;-webkit-backdrop-filter:blur(8px)!important;backdrop-filter:blur(8px)!important}.modal-content-directo[_ngcontent-%COMP%]{background:#fff!important;border-radius:32px!important;width:92%!important;max-width:650px!important;max-height:92vh!important;overflow-y:auto!important;pointer-events:auto!important;border:6px solid #fd7e14!important;box-shadow:0 30px 100px #fd7e1499!important;animation:_ngcontent-%COMP%_modalPop .5s cubic-bezier(.175,.885,.32,1.275)}@keyframes _ngcontent-%COMP%_modalPop{0%{opacity:0;transform:scale(.5) rotate(-15deg)}70%{transform:scale(1.08)}to{opacity:1;transform:scale(1)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:2rem 2.5rem 1.5rem;border-bottom:3px solid #ffd7b5;background:linear-gradient(to bottom,#fff8f0,#fff);border-radius:26px 26px 0 0}.modal-title[_ngcontent-%COMP%]{color:#e65100;font-size:2.6rem;font-weight:700;margin:0}.btn-close-modal[_ngcontent-%COMP%]{background:#ffe0b2;color:#e65100;border:none;width:56px;height:56px;border-radius:50%;font-size:2.4rem;font-weight:700;cursor:pointer;display:flex;justify-content:center;align-items:center;transition:all .4s}.btn-close-modal[_ngcontent-%COMP%]:hover{background:#fd7e14;color:#fff;transform:rotate(180deg) scale(1.1)}.modal-body[_ngcontent-%COMP%]{padding:2.5rem}.form-group[_ngcontent-%COMP%]{margin:2rem 0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:1rem;font-weight:700;color:#333;font-size:1.4rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:18px;border:4px solid #fd7e14;border-radius:20px;font-size:1.4rem;background:#fffaf0;transition:all .3s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#e65100;box-shadow:0 0 0 4px #fd7e144d}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:340px;object-fit:contain;border-radius:20px;margin-top:1.5rem;border:6px dashed #fd7e14;background:#fff8f0;padding:10px}.form-check[_ngcontent-%COMP%]{margin:2rem 0;display:flex;align-items:center;font-size:1.3rem}.form-check[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:24px;height:24px;margin-right:12px;accent-color:#fd7e14}.botones[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:2rem;padding:2rem 2.5rem;background:#fff8f0;border-radius:0 0 26px 26px;border-top:3px solid #ffd7b5}.btn-cancel[_ngcontent-%COMP%], .btn-guardar[_ngcontent-%COMP%]{padding:18px 50px;border:none;border-radius:35px;font-size:1.5rem;font-weight:700;cursor:pointer;min-width:180px;transition:all .3s}.btn-cancel[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-guardar[_ngcontent-%COMP%]{background:#fd7e14;color:#fff;box-shadow:0 12px 40px #fd7e1480}.btn-guardar[_ngcontent-%COMP%]:hover{background:#e66b0d;transform:translateY(-4px)}"]})};var Ai=class n{constructor(t){this.http=t}apiUrl=`${J.apiUrl}/pagos`;obtenerTodos(){return this.http.get(this.apiUrl)}actualizarMetodo(t,e){return this.http.put(`${this.apiUrl}/${t}/metodo`,{metodo:e})}actualizarEstadoPago(t,e){return this.http.put(`${this.apiUrl}/${t}/estado`,{estado:e})}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function Qv(n,t){if(n&1&&(s(0,"span"),l(1,"Garant\xEDa Req: "),s(2,"strong"),l(3),P(4,"number"),a()()),n&2){let e=f();c(3),g("S/ ",A(4,1,e.montoGarantia,"1.2-2"))}}function eb(n,t){if(n&1&&(s(0,"span",15),l(1," Saldo Pendiente: "),s(2,"strong"),l(3),P(4,"number"),a()()),n&2){let e=f();c(3),g("S/ ",A(4,1,e.saldoPendiente,"1.2-2"))}}function tb(n,t){n&1&&(s(0,"span",16)(1,"strong"),l(2,"\xA1Pedido Pagado!"),a()())}function nb(n,t){if(n&1&&(s(0,"div",17),l(1),a()),n&2){let e=f();c(),g(" ",e.errorMensaje," ")}}function ib(n,t){if(n&1&&(s(0,"span")(1,"strong"),l(2,"Op:"),a(),l(3),a()),n&2){let e=f().$implicit;c(3),g(" ",e.codigoOperacion)}}function ob(n,t){n&1&&(s(0,"span"),l(1,"Validar"),a())}function rb(n,t){n&1&&(s(0,"span"),l(1,"Procesando..."),a())}function ab(n,t){n&1&&(s(0,"span"),l(1,"Rechazar"),a())}function sb(n,t){n&1&&(s(0,"span"),l(1,"Procesando..."),a())}function lb(n,t){if(n&1){let e=T();Ne(0),s(1,"div",27)(2,"button",28),h("click",function(){C(e);let o=f().$implicit,r=f(2);return y(r.cambiarEstadoPago(o,"validar"))}),_(3,ob,2,0,"span",8)(4,rb,2,0,"span",8),a(),s(5,"button",29),h("click",function(){C(e);let o=f().$implicit,r=f(2);return y(r.cambiarEstadoPago(o,"rechazar"))}),_(6,ab,2,0,"span",8)(7,sb,2,0,"span",8),a()(),Le()}if(n&2){let e=f().$implicit,i=f(2);c(2),p("disabled",i.isUpdatingPago===e.pagoId),c(),p("ngIf",i.isUpdatingPago!==e.pagoId),c(),p("ngIf",i.isUpdatingPago===e.pagoId),c(),p("disabled",i.isUpdatingPago===e.pagoId),c(),p("ngIf",i.isUpdatingPago!==e.pagoId),c(),p("ngIf",i.isUpdatingPago===e.pagoId)}}function cb(n,t){if(n&1&&(s(0,"a",30),l(1," Ver Comprobante "),a()),n&2){let e=f().$implicit;p("href",e.comprobanteUrl,ve)}}function db(n,t){if(n&1&&(s(0,"div",20)(1,"div",21)(2,"span",22),l(3),P(4,"number"),a(),s(5,"div",23)(6,"span")(7,"strong"),l(8,"M\xE9todo:"),a(),l(9),P(10,"titlecase"),a(),s(11,"span")(12,"strong"),l(13,"Fecha:"),a(),l(14),P(15,"date"),a(),_(16,ib,4,1,"span",8),a()(),s(17,"div",24)(18,"span",25),l(19),a(),_(20,lb,8,6,"ng-container",8)(21,cb,2,1,"a",26),a()()),n&2){let e=t.$implicit,i=f(2);p("ngClass",i.getPagoItemClass(e.estado)),c(3),g("S/ ",A(4,9,e.montoAbonado,"1.2-2")),c(6),g(" ",le(10,12,e.metodo)),c(5),g(" ",A(15,14,e.fechaPago,"dd/MM/yyyy HH:mm")),c(2),p("ngIf",e.codigoOperacion),c(2),p("ngClass",i.getPagoStatusClass(e.estado)),c(),g(" ",i.formatEstadoPago(e.estado)," "),c(),p("ngIf",e.estado==="pendiente_validacion"),c(),p("ngIf",e.comprobanteUrl)}}function ub(n,t){if(n&1&&(s(0,"div",18),_(1,db,22,17,"div",19),a()),n&2){let e=f();c(),p("ngForOf",e.pagos)}}function pb(n,t){n&1&&(s(0,"p",31),l(1,"Este pedido a\xFAn no tiene pagos registrados."),a())}var Ca=class n{pedidoId=null;pagos=[];montoTotal=0;montoGarantia=0;pagoActualizado=new ue;volverADetalles=new ue;isUpdatingPago=null;errorMensaje=null;totalPagadoValidado=0;bsModalRef=w(wn);pagoService=w(Ai);ngOnInit(){this.calcularTotalPagadoValidado()}cambiarEstadoPago(t,e){if(!t?.pagoId||this.isUpdatingPago)return;let i=e==="validar"?"validado":"rechazado";this.isUpdatingPago=t.pagoId,this.errorMensaje=null,this.pagoService.actualizarEstadoPago(t.pagoId,i).subscribe({next:o=>{let r=this.pagos.findIndex(d=>d.pagoId===t.pagoId);r!==-1&&(this.pagos[r]=o),this.calcularTotalPagadoValidado(),this.pagoActualizado.emit(o),this.isUpdatingPago=null},error:o=>{this.errorMensaje=`Error al ${e} el pago`,this.isUpdatingPago=null,console.error(o)}})}calcularTotalPagadoValidado(){this.totalPagadoValidado=this.pagos.filter(t=>t.estado==="validado").reduce((t,e)=>t+e.montoAbonado,0)}get saldoPendiente(){return Math.max(0,this.montoTotal-this.totalPagadoValidado)}volver(){this.volverADetalles.emit(),this.cerrarModal()}cerrarModal(){this.bsModalRef.hide()}getPagoStatusClass(t){switch(t){case"pendiente_validacion":return"pago-pendiente";case"validado":return"pago-validado";case"rechazado":return"pago-rechazado";default:return""}}getPagoItemClass(t){switch(t){case"pendiente_validacion":return"item-pendiente";case"validado":return"item-validado";case"rechazado":return"item-rechazado";default:return""}}formatEstadoPago(t){return t?t.replace(/_/g," ").toUpperCase():""}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-modal-gestion-pago"]],inputs:{pedidoId:"pedidoId",pagos:"pagos",montoTotal:"montoTotal",montoGarantia:"montoGarantia"},outputs:{pagoActualizado:"pagoActualizado",volverADetalles:"volverADetalles"},decls:30,vars:15,consts:[["noPagos",""],[1,"modal-header"],["type","button",1,"btn","btn-link","btn-back",3,"click"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"montos-summary"],[4,"ngIf"],[1,"text-success"],["class","saldo-pendiente",4,"ngIf"],["class","text-success full-paid",4,"ngIf"],[1,"separator"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","payment-list",4,"ngIf","ngIfElse"],[1,"saldo-pendiente"],[1,"text-success","full-paid"],["role","alert",1,"alert","alert-danger"],[1,"payment-list"],["class","payment-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"payment-item",3,"ngClass"],[1,"payment-details-info"],[1,"monto-abonado"],[1,"detail-group"],[1,"payment-status-admin"],[1,"badge","payment-badge",3,"ngClass"],["target","_blank","class","comprobante-link mt-2 d-block",3,"href",4,"ngIf"],[1,"action-buttons"],[1,"btn-pago-accion","btn-validar",3,"click","disabled"],[1,"btn-pago-accion","btn-rechazar",3,"click","disabled"],["target","_blank",1,"comprobante-link","mt-2","d-block",3,"href"],[1,"text-muted"]],template:function(e,i){if(e&1){let o=T();s(0,"div",1)(1,"button",2),h("click",function(){return C(o),y(i.volver())}),l(2," \u2190 Volver a Detalles "),a(),s(3,"h4",3),l(4),a(),s(5,"button",4),h("click",function(){return C(o),y(i.cerrarModal())}),s(6,"span",5),l(7,"\xD7"),a()()(),s(8,"div",6)(9,"div",7)(10,"span"),l(11,"Total Pedido: "),s(12,"strong"),l(13),P(14,"number"),a()(),_(15,Qv,5,4,"span",8),s(16,"span"),l(17,"Pagado (Validado): "),s(18,"strong",9),l(19),P(20,"number"),a()(),_(21,eb,5,4,"span",10)(22,tb,3,0,"span",11),a(),b(23,"hr",12),_(24,nb,2,1,"div",13),s(25,"h5"),l(26,"Historial de Pagos"),a(),_(27,ub,2,1,"div",14)(28,pb,2,0,"ng-template",null,0,en),a()}if(e&2){let o=Nt(29);c(4),g("Gesti\xF3n de Pagos - Pedido ORD-",i.pedidoId),c(9),g("S/ ",A(14,9,i.montoTotal,"1.2-2")),c(2),p("ngIf",i.montoGarantia>0),c(4),g("S/ ",A(20,12,i.totalPagadoValidado,"1.2-2")),c(2),p("ngIf",i.saldoPendiente>0),c(),p("ngIf",i.saldoPendiente===0),c(2),p("ngIf",i.errorMensaje),c(3),p("ngIf",i.pagos.length>0)("ngIfElse",o)}},dependencies:[k,Pe,z,N,xe,_e,ce],styles:["[_nghost-%COMP%]{display:block}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #dee2e6;background-color:#f8f9fa}.modal-title[_ngcontent-%COMP%]{margin-bottom:0;font-size:1.25rem;font-weight:600;color:#343a40}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;opacity:.7;padding:.5rem;line-height:1}.btn-close[_ngcontent-%COMP%]:hover{opacity:1}.btn-back[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;font-size:.9rem;padding:0;margin-right:1rem}.btn-back[_ngcontent-%COMP%]:hover{color:#0056b3;text-decoration:underline}.modal-body[_ngcontent-%COMP%]{padding:1rem 1.5rem}.montos-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;background-color:#e9f5ff;padding:1rem;border-radius:6px;margin-bottom:1.5rem;font-size:.95rem;border:1px solid #cce5ff}.montos-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-basis:48%;margin-bottom:.5rem}.montos-summary[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}.saldo-pendiente[_ngcontent-%COMP%]{color:#dc3545}.full-paid[_ngcontent-%COMP%]{flex-basis:100%;text-align:center;font-size:1.1rem;font-weight:700!important;margin-top:.5rem}.payment-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.payment-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.25rem;border:1px solid #e9ecef;border-radius:8px;background-color:#fff;transition:box-shadow .2s}.payment-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000000d}.payment-details-info[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}.monto-abonado[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#28a745;flex-shrink:0;min-width:100px}.detail-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.9rem;color:#6c757d}.detail-group[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#343a40}.payment-status-admin[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex-shrink:0}.payment-badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.5em .8em;font-weight:600}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:5px}.btn-pago-accion[_ngcontent-%COMP%]{padding:.4rem .75rem;border:none;border-radius:4px;cursor:pointer;font-weight:600;transition:background-color .2s ease;font-size:.9rem;min-width:70px}.btn-pago-accion[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-validar[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-validar[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838}.btn-rechazar[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-rechazar[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#c82333}.comprobante-link[_ngcontent-%COMP%]{font-size:.85rem;color:#007bff;text-decoration:underline;flex-shrink:0}.comprobante-link[_ngcontent-%COMP%]:hover{color:#0056b3}.item-pendiente[_ngcontent-%COMP%]{border-left:5px solid #ffc107}.item-validado[_ngcontent-%COMP%]{border-left:5px solid #28a745}.item-rechazado[_ngcontent-%COMP%]{border-left:5px solid #dc3545}@media (max-width: 768px){.montos-summary[_ngcontent-%COMP%]{flex-direction:column}.montos-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-basis:100%;margin-bottom:.5rem}.payment-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.payment-details-info[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:5px}.payment-status-admin[_ngcontent-%COMP%]{width:100%;justify-content:space-between;margin-top:10px;border-top:1px dashed #e9ecef;padding-top:10px}}"]})};var mb=n=>({"btn-estado":!0,"btn-estado-active":n}),fb=n=>({editable:n}),gb=n=>({"btn-action-gestion":n});function hb(n,t){if(n&1&&(s(0,"p")(1,"strong"),l(2,"Garant\xEDa Req:"),a(),l(3),P(4,"number"),a()),n&2){let e=f(2);c(3),g(" S/ ",A(4,1,e.pedido.montoGarantia,"1.2-2")," ")}}function vb(n,t){if(n&1){let e=T();s(0,"button",21),P(1,"titlecase"),h("click",function(){let o=C(e).$implicit,r=f(3);return y(r.cambiarEstadoPedido(o))}),l(2),P(3,"titlecase"),a()}if(n&2){let e=t.$implicit,i=f(3);p("ngClass",Bt(8,mb,e===i.estadoSeleccionado))("disabled",i.isUpdatingEstadoPedido||e===i.pedido.estado)("title",e===i.pedido.estado?"Este es el estado actual":le(1,4,"Cambiar a "+e)),c(2),g(" ",le(3,6,e)," ")}}function bb(n,t){n&1&&(s(0,"div",22),l(1," Actualizando estado... "),s(2,"span",23),l(3,"\u2699\uFE0F"),a()())}function _b(n,t){if(n&1&&(s(0,"div",24),l(1),a()),n&2){let e=f(3);c(),g(" ",e.errorUpdateEstado," ")}}function xb(n,t){if(n&1&&(Ne(0),s(1,"h5",10),l(2,"Actualizar Estado del Pedido"),a(),s(3,"div",14)(4,"span",15),l(5," Estado Actual: "),s(6,"span",16),l(7),P(8,"titlecase"),a()(),s(9,"div",17),_(10,vb,4,10,"button",18),a(),_(11,bb,4,0,"div",19)(12,_b,2,1,"div",20),a(),b(13,"hr",9),Le()),n&2){let e=f(2);c(6),p("ngClass",e.getEstadoClass(e.pedido.estado)),c(),g(" ",le(8,5,e.pedido.estado)," "),c(3),p("ngForOf",e.posiblesEstados),c(),p("ngIf",e.isUpdatingEstadoPedido),c(),p("ngIf",e.errorUpdateEstado)}}function Cb(n,t){if(n&1&&(s(0,"div",37)(1,"small"),l(2),a()()),n&2){let e=f().$implicit;c(2),g("\u{1F4DD} ",e.personalizacion.descripcionExtra)}}function yb(n,t){if(n&1&&(s(0,"span",38),l(1),P(2,"number"),a()),n&2){let e=f().$implicit;c(),g(" S/ ",A(2,1,e.precioUnitario,"1.2-2")," ")}}function wb(n,t){if(n&1&&(s(0,"span",39),l(1),P(2,"number"),a()),n&2){let e=f().$implicit;c(),g(" + Pers: S/ ",A(2,1,e.personalizacion==null?null:e.personalizacion.costoAdicional,"1.2-2")," ")}}function Eb(n,t){if(n&1&&(s(0,"small",40),l(1),P(2,"number"),a()),n&2){let e=f().$implicit;c(),g(" (- S/ ",A(2,1,e.descuentoAplicado,"1.2-2")," dto.) ")}}function Sb(n,t){if(n&1&&(s(0,"li",27)(1,"div",28)(2,"span",29),l(3),a(),s(4,"span",30),l(5),a(),_(6,Cb,3,1,"div",31),a(),s(7,"div",32),_(8,yb,3,4,"span",33),s(9,"span",34),l(10),P(11,"number"),a(),_(12,wb,3,4,"span",35)(13,Eb,3,4,"small",36),a()()),n&2){let e=t.$implicit;c(3),S((e.producto==null?null:e.producto.nombre)||"Producto Eliminado"),c(2),g("(",e.cantidad," ud.)"),c(),p("ngIf",e.personalizacion),c(2),p("ngIf",e.descuentoAplicado&&e.descuentoAplicado>0),c(2),g(" S/ ",A(11,7,e.precioUnitario*e.cantidad-(e.descuentoAplicado||0)+((e.personalizacion==null?null:e.personalizacion.costoAdicional)||0),"1.2-2")," "),c(2),p("ngIf",e.personalizacion==null?null:e.personalizacion.costoAdicional),c(),p("ngIf",e.descuentoAplicado&&e.descuentoAplicado>0)}}function Pb(n,t){if(n&1&&(s(0,"div",25)(1,"ul"),_(2,Sb,14,10,"li",26),a()()),n&2){let e=f(2);c(2),p("ngForOf",e.pedido.detalles)}}function Mb(n,t){n&1&&(s(0,"p"),l(1,"No se encontraron detalles para este pedido."),a())}function Db(n,t){if(n&1){let e=T();s(0,"div",41)(1,"span",16),l(2),a(),s(3,"button",42),h("click",function(){C(e);let o=f(2);return y(o.abrirModalGestionPago())}),l(4),Ut(),s(5,"svg",43),b(6,"path",44)(7,"path",45),a()()()}if(n&2){let e=f(2);p("ngClass",Bt(5,fb,e.modoEdicion)),c(),p("ngClass",e.getOverallPagoStatusClass()),c(),g(" ",e.getOverallPagoStatusText()," "),c(),p("ngClass",Bt(7,gb,e.modoEdicion)),c(),g(" ",e.modoEdicion?"Gestionar Pagos":"Ver Pagos"," ")}}function Ob(n,t){n&1&&(s(0,"div",46)(1,"span",47),l(2,"Sin Pagos Registrados"),a()())}function Ib(n,t){if(n&1){let e=T();Ne(0),s(1,"div",2)(2,"h4",3),l(3),a(),s(4,"button",4),h("click",function(){C(e);let o=f();return y(o.cerrarModal())}),s(5,"span",5),l(6,"\xD7"),a()()(),s(7,"div",6)(8,"div",7)(9,"div",8)(10,"h5"),l(11,"Informaci\xF3n del Cliente"),a(),s(12,"p")(13,"strong"),l(14,"Nombre:"),a(),l(15),a(),s(16,"p")(17,"strong"),l(18,"Email:"),a(),l(19),a(),s(20,"p")(21,"strong"),l(22,"Tel\xE9fono:"),a(),l(23),a()(),s(24,"div",8)(25,"h5"),l(26,"Detalles del Pedido"),a(),s(27,"p")(28,"strong"),l(29,"Tipo:"),a(),l(30),a(),s(31,"p")(32,"strong"),l(33,"Total:"),a(),l(34),P(35,"number"),a(),s(36,"p")(37,"strong"),l(38,"Fecha Pedido:"),a(),l(39),P(40,"date"),a(),s(41,"p")(42,"strong"),l(43,"Entrega Estimada:"),a(),l(44),a(),_(45,hb,5,4,"p",1),a()(),b(46,"hr",9),_(47,xb,14,7,"ng-container",1),s(48,"h5",10),l(49),a(),_(50,Pb,3,1,"div",11)(51,Mb,2,0,"ng-template",null,0,en),b(53,"hr",9),s(54,"h5",10),l(55,"Estado del Pago"),a(),_(56,Db,8,9,"div",12)(57,Ob,3,0,"div",13),a(),Le()}if(n&2){let e=Nt(52),i=f();c(3),Oe(" ",i.modoEdicion?"Gesti\xF3n de Pedido":"Detalles del Pedido"," - ORD-",i.pedido.pedidoId," "),c(12),g(" ",i.getNombreCliente()),c(4),g(" ",i.getEmailCliente()),c(4),g(" ",i.getTelefonoCliente()),c(7),g(" ",i.pedido.nota&&i.pedido.nota.toLowerCase().includes("personalizada")?"Torta Personalizada":"Productos Cat\xE1logo"),c(4),g(" S/ ",A(35,16,i.pedido.total,"1.2-2")),c(5),g(" ",A(40,19,i.pedido.fechaPedido,"yyyy-MM-dd HH:mm")),c(5),g(" ","-"),c(),p("ngIf",(i.pedido==null?null:i.pedido.montoGarantia)&&i.pedido.montoGarantia),c(2),p("ngIf",i.modoEdicion),c(2),g("Productos del Pedido (",(i.pedido.detalles==null?null:i.pedido.detalles.length)||0,")"),c(),p("ngIf",i.pedido.detalles==null?null:i.pedido.detalles.length)("ngIfElse",e),c(6),p("ngIf",(i.pedido.pagos==null?null:i.pedido.pagos.length)||i.modoEdicion),c(),p("ngIf",!(i.pedido.pagos!=null&&i.pedido.pagos.length)&&!i.modoEdicion)}}var No=class n{pedido=null;modoEdicion=!1;estadoActualizado=new ue;posiblesEstados=["pendiente","aceptado","en_preparacion","entregado","cancelado"];estadoSeleccionado="";isUpdatingEstadoPedido=!1;errorUpdateEstado=null;bsModalRef=w(wn);modalService=w(jt);pedidoService=w(Tt);modalSubscription;ngOnInit(){this.pedido&&(this.estadoSeleccionado=this.pedido.estado||"pendiente")}ngOnDestroy(){this.modalSubscription?.unsubscribe()}cambiarEstadoPedido(t){!this.pedido||this.isUpdatingEstadoPedido||(this.isUpdatingEstadoPedido=!0,this.errorUpdateEstado=null,this.pedidoService.actualizarEstadoPedido(this.pedido.pedidoId,t).subscribe({next:e=>{this.pedido=e,this.estadoSeleccionado=e.estado,this.isUpdatingEstadoPedido=!1,this.estadoActualizado.emit()},error:e=>{console.error("Error al actualizar estado:",e),this.errorUpdateEstado=`Error al actualizar a ${t}: ${e.error?.message||"Error de conexi\xF3n."}`,this.isUpdatingEstadoPedido=!1}}))}abrirModalGestionPago(){if(!this.pedido||!this.pedido.pedidoId)return;let t=this.pedido;this.cerrarModal();let e={pedidoId:this.pedido.pedidoId,pagos:this.pedido.pagos||[],montoTotal:this.pedido.total||0,montoGarantia:this.pedido.montoGarantia||0},i=this.modalService.show(Ca,{initialState:e,class:"modal-lg"});i.content?.pagoActualizado.subscribe(o=>{console.log("Modal de Pago notific\xF3 actualizaci\xF3n:",o),this.estadoActualizado.emit()}),i.content?.volverADetalles&&(this.modalSubscription=i.content.volverADetalles.subscribe(()=>{console.log("Reabriendo modal de detalles para pedido:",t.pedidoId);let o={pedido:t,modoEdicion:this.modoEdicion};this.modalService.show(n,{initialState:o,class:"modal-lg"}).content?.estadoActualizado.subscribe(()=>{this.estadoActualizado.emit()})})),i.onHidden?.subscribe(()=>{this.modalSubscription?.unsubscribe()})}getNombreCliente(){return this.pedido?.usuario?.nombre||"N/A"}getEmailCliente(){return this.pedido?.usuario?.email||"-"}getTelefonoCliente(){return this.pedido?.usuario?.telefono||"-"}getEstadoClass(t){switch(t?.toLowerCase()){case"pendiente":return"estado-pendiente";case"aceptado":case"confirmado":return"estado-confirmado";case"en_preparacion":return"estado-preparacion";case"entregado":return"estado-entregado";case"cancelado":return"estado-cancelado";default:return""}}getOverallPagoStatusText(){if(!this.pedido||!this.pedido.pagos||this.pedido.pagos.length===0)return"Sin Pagos Registrados";let t=this.pedido.pagos.filter(i=>i.estado==="validado").reduce((i,o)=>i+o.montoAbonado,0),e=this.pedido.total||0;return t>=e?"PAGO COMPLETADO":t>0?`ABONO (S/ ${t.toFixed(2)})`:this.pedido.pagos.some(o=>o.estado==="pendiente_validacion")?"PAGOS PENDIENTES DE VALIDACI\xD3N":"PENDIENTE DE PAGO"}getOverallPagoStatusClass(){let t=this.getOverallPagoStatusText();return t==="PAGO COMPLETADO"?"pago-validado":t.includes("ABONO")?"pago-parcial":t==="PAGOS PENDIENTES DE VALIDACI\xD3N"?"pago-pendiente":"pago-no-registrado"}cerrarModal(){this.bsModalRef.hide()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-modal-detalles-pedido"]],inputs:{pedido:"pedido",modoEdicion:"modoEdicion"},outputs:{estadoActualizado:"estadoActualizado"},decls:1,vars:1,consts:[["noDetalles",""],[4,"ngIf"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"pedido-info-grid"],[1,"info-columna"],[1,"separator"],[1,"section-title"],["class","product-list",4,"ngIf","ngIfElse"],["class","payment-summary",3,"ngClass",4,"ngIf"],["class","payment-summary",4,"ngIf"],[1,"estado-gestion-container"],[1,"current-status"],[1,"badge",3,"ngClass"],[1,"estado-actions"],[3,"ngClass","disabled","title","click",4,"ngFor","ngForOf"],["class","loading-status",4,"ngIf"],["class","alert-error",4,"ngIf"],[3,"click","ngClass","disabled","title"],[1,"loading-status"],[1,"spinner-estado"],[1,"alert-error"],[1,"product-list"],["class","product-item",4,"ngFor","ngForOf"],[1,"product-item"],[1,"product-info"],[1,"product-name"],[1,"product-qty"],["class","customization-details",4,"ngIf"],[1,"price-details"],["class","original-price",4,"ngIf"],[1,"product-subtotal"],["class","customization-total-cost",4,"ngIf"],["class","discount-applied",4,"ngIf"],[1,"customization-details"],[1,"original-price"],[1,"customization-total-cost"],[1,"discount-applied"],[1,"payment-summary",3,"ngClass"],["title","Gestionar Pagos y Validaciones",1,"btn-manage-payments",3,"click","ngClass"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16"],["d","M14 3H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1M2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"],["d","M2.5 5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"],[1,"payment-summary"],[1,"badge","pago-no-registrado"]],template:function(e,i){e&1&&_(0,Ib,58,22,"ng-container",1),e&2&&p("ngIf",i.pedido)},dependencies:[k,Pe,z,N,xe,_e,ce],styles:[".modal-header[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;padding-bottom:.8rem;margin-bottom:1.5rem;display:flex;justify-content:space-between;align-items:center}.modal-title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;margin:0}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;opacity:.7;padding:.5rem;line-height:1}.btn-close[_ngcontent-%COMP%]:hover{opacity:1}.modal-body[_ngcontent-%COMP%]{padding:0 .5rem 1rem}.pedido-info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1rem}.pedido-info-grid[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:.8rem;color:#343a40;border-bottom:2px solid #e9ecef;padding-bottom:.3rem}.pedido-info-grid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.3rem;font-size:.95rem}.pedido-info-grid[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.section-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-top:.5rem;margin-bottom:1rem;color:#495057}.product-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.product-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0;border-bottom:1px dashed #e9ecef}.product-info[_ngcontent-%COMP%]{flex-grow:1}.product-name[_ngcontent-%COMP%]{font-weight:600;color:#212529}.product-qty[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;margin-left:.5rem}.customization-details[_ngcontent-%COMP%]{margin-top:.2rem;margin-left:10px;color:#007bff}.price-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;font-weight:500}.product-subtotal[_ngcontent-%COMP%]{font-size:1.05rem;font-weight:700;color:#28a745}.original-price[_ngcontent-%COMP%]{text-decoration:line-through;color:#6c757d;font-size:.85rem}.customization-total-cost[_ngcontent-%COMP%]{font-weight:600;color:#28a745;font-size:.9rem}.discount-applied[_ngcontent-%COMP%]{color:#dc3545;font-size:.8rem;font-style:italic}.product-list[_ngcontent-%COMP%] + p[_ngcontent-%COMP%]{font-style:italic;color:#6c757d;margin-top:.5rem}.payment-summary[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#f8f9fa;padding:1rem 1.5rem;border-radius:6px;border-left:4px solid #6c757d}.payment-summary.editable[_ngcontent-%COMP%]{border-left-color:#007bff}.payment-summary[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.9rem}.btn-manage-payments[_ngcontent-%COMP%]{background-color:transparent;color:#007bff;border:1px solid #007bff;padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-weight:600;transition:all .2s ease;display:flex;align-items:center;gap:.5rem}.btn-manage-payments[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}.btn-manage-payments.btn-action-gestion[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;box-shadow:0 2px 5px #007bff66}.btn-manage-payments.btn-action-gestion[_ngcontent-%COMP%]:hover{background-color:#0056b3}.estado-gestion-container[_ngcontent-%COMP%]{padding:1rem 0}.current-status[_ngcontent-%COMP%]{display:block;margin-bottom:1rem;font-size:1rem;font-weight:500}.estado-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.btn-estado[_ngcontent-%COMP%]{background-color:#e9ecef;color:#495057;border:1px solid #ced4da;padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-weight:500;transition:all .2s ease}.btn-estado[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#ced4da}.btn-estado[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-estado-active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border-color:#007bff;font-weight:700}.btn-estado-active[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff;border-color:#007bff}.loading-status[_ngcontent-%COMP%]{margin-top:1rem;color:#007bff;display:flex;align-items:center;gap:.5rem}.spinner-estado[_ngcontent-%COMP%]{animation:spin 1s linear infinite;display:inline-block}.alert-error[_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb;border-radius:4px}@media (max-width: 768px){.pedido-info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.pago-validado[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.pago-parcial[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;border:1px solid #ffeeba}.pago-pendiente[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460;border:1px solid #bee5eb}.pago-no-registrado[_ngcontent-%COMP%]{background-color:#e9ecef;color:#6c757d;border:1px solid #ced4da}"]})};function Ab(n,t){if(n&1){let e=T();s(0,"tr")(1,"td"),l(2),a(),s(3,"td"),l(4),b(5,"br"),s(6,"small"),l(7),a()(),s(8,"td"),l(9),a(),s(10,"td")(11,"span",8),l(12),P(13,"titlecase"),a()(),s(14,"td"),l(15),P(16,"number"),a(),s(17,"td"),l(18),P(19,"date"),a(),s(20,"td")(21,"span",8),l(22),a()(),s(23,"td")(24,"button",9),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.abrirModalDetalles(o))}),Ut(),s(25,"svg",10),b(26,"path",11)(27,"path",12),a()(),Qn(),s(28,"button",13),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.abrirModalGestion(o))}),Ut(),s(29,"svg",14),b(30,"path",15)(31,"path",16),a()()()()}if(n&2){let e=t.$implicit,i=f(2);c(2),g("#ORD ",e.pedidoId),c(2),g(" ",i.getNombreCliente(e)," "),c(3),S(i.getEmailCliente(e)),c(2),g(" ",e.nota&&e.nota.toLowerCase().includes("personalizada")?"Torta Personalizada":"Productos Cat\xE1logo"," "),c(2),p("ngClass",i.getEstadoClass(e.estado)),c(),g(" ",le(13,10,e.estado)," "),c(3),g("S/ ",A(16,12,e.total,"1.2-2")),c(3),S(A(19,15,e.fechaPedido,"yyyy-MM-dd")),c(3),p("ngClass",i.getPagoClass(e.estado==="entregado"?"Pagado":"Pendiente")),c(),g(" ",e.estado==="entregado"?"Pagado":"Pendiente"," ")}}function Tb(n,t){if(n&1&&(s(0,"div",5)(1,"table",6)(2,"thead")(3,"tr")(4,"th"),l(5,"ID"),a(),s(6,"th"),l(7,"Cliente"),a(),s(8,"th"),l(9,"Tipo"),a(),s(10,"th"),l(11,"Estado"),a(),s(12,"th"),l(13,"Total"),a(),s(14,"th"),l(15,"Fecha"),a(),s(16,"th"),l(17,"Pago"),a(),s(18,"th"),l(19,"Acciones"),a()()(),s(20,"tbody"),_(21,Ab,32,18,"tr",7),a()()()),n&2){let e=f();c(21),p("ngForOf",e.listaDePedidos)}}function kb(n,t){n&1&&(s(0,"div",17),l(1," Cargando pedidos... "),a())}function Fb(n,t){n&1&&(s(0,"div",18),l(1," No se encontraron pedidos. "),a())}function Rb(n,t){if(n&1&&(s(0,"div",19),l(1),a()),n&2){let e=f();c(),g(" Error: ",e.errorMensaje," ")}}var ya=class n{listaDePedidos=[];bsModalRef;isLoading=!0;errorMensaje=null;pedidoService=w(Tt);modalService=w(jt);ngOnInit(){this.cargarPedidos()}cargarPedidos(){this.isLoading=!0,this.errorMensaje=null,this.pedidoService.obtenerTodosLosPedidos().subscribe({next:t=>{this.listaDePedidos=t.sort((e,i)=>(i.pedidoId||0)-(e.pedidoId||0)),this.isLoading=!1},error:t=>{console.error("Error al cargar pedidos:",t),this.errorMensaje="No se pudieron cargar los pedidos.",this.isLoading=!1}})}abrirModalDetalles(t){let e={pedido:t,modoEdicion:!1};this.bsModalRef=this.modalService.show(No,{initialState:e,class:"modal-lg"}),this.bsModalRef.content.estadoActualizado.subscribe(()=>{console.log("Modal notific\xF3 actualizaci\xF3n, recargando pedidos..."),this.cargarPedidos()})}abrirModalGestion(t){let e={pedido:t,modoEdicion:!0};this.bsModalRef=this.modalService.show(No,{initialState:e,class:"modal-lg"}),this.bsModalRef.content.estadoActualizado.subscribe(()=>{console.log("Modal notific\xF3 actualizaci\xF3n, recargando pedidos..."),this.cargarPedidos()})}getNombreCliente(t){return t.usuario&&t.usuario.nombre?t.usuario.nombre:t.usuario&&t.usuario.usuarioId?`Usuario ID: ${t.usuario.usuarioId}`:"Cliente Desconocido"}getEmailCliente(t){return t.usuario?.email||"-"}getEstadoClass(t){switch(t?.toLowerCase()){case"pendiente":return"estado-pendiente";case"aceptado":case"confirmado":return"estado-confirmado";case"en_preparacion":return"estado-preparacion";case"entregado":return"estado-entregado";case"cancelado":return"estado-cancelado";default:return""}}getPagoClass(t){switch(t?.toLowerCase()){case"pagado":return"pago-pagado";case"pendiente":return"pago-pendiente";default:return""}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-pedidos"]],decls:7,vars:4,consts:[[1,"gestion-container"],["class","table-responsive",4,"ngIf"],["class","loading-message",4,"ngIf"],["class","no-data-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],["title","Ver Detalles",1,"btn-action","btn-view",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-eye-fill"],["d","M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"],["d","M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"],["title","Gestionar Pedido",1,"btn-action","btn-edit",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil-fill"],["d","M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.5 8.793V11.5h2.707zm-7.071 3.528l5.31-5.31L13.197 4.15l-5.31 5.31z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11A.5.5 0 0 0 2.5 2h6a.5.5 0 0 0 0-1h-6A1.5 1.5 0 0 0 1 2.5z"],[1,"loading-message"],[1,"no-data-message"],[1,"error-message"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2"),l(2,"Gesti\xF3n de Pedidos"),a(),_(3,Tb,22,1,"div",1)(4,kb,2,0,"div",2)(5,Fb,2,0,"div",3)(6,Rb,2,1,"div",4),a()),e&2&&(c(3),p("ngIf",!i.isLoading&&i.listaDePedidos.length>0),c(),p("ngIf",i.isLoading),c(),p("ngIf",!i.isLoading&&i.listaDePedidos.length===0),c(),p("ngIf",i.errorMensaje))},dependencies:[k,Pe,z,N,xe,_e,ce],styles:[".gestion-container[_ngcontent-%COMP%]{padding:2rem;background-color:#f8f9fa;min-height:calc(100vh - 60px)}.gestion-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:1.5rem;color:#343a40}.search-bar[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:1.5rem;background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #0000000d;padding:10px;max-width:600px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;padding:.75rem 1rem;border:1px solid #ced4da;border-radius:6px;font-size:1rem;outline:none}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.btn-search[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:.75rem 1rem;border-radius:6px;cursor:pointer;transition:background-color .3s ease;display:flex;align-items:center;justify-content:center}.btn-search[_ngcontent-%COMP%]:hover{background-color:#0056b3}.table-responsive[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 15px #00000012;overflow-x:auto;margin-bottom:1.5rem}.table[_ngcontent-%COMP%]{width:100%;margin-bottom:0;color:#212529;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.9rem 1rem;vertical-align:middle;border-top:1px solid #dee2e6}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e9ecef;font-weight:600;color:#495057;text-align:left}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1;cursor:pointer}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.35em .65em;font-size:85%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.375rem;border:1px solid transparent;min-width:80px}.estado-pendiente[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;border-color:#ffeeba}.estado-confirmado[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460;border-color:#bee5eb}.estado-preparacion[_ngcontent-%COMP%]{background-color:#ffeeba;color:#856404;border-color:#ffdf7e}.estado-entregado[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border-color:#c3e6cb}.estado-cancelado[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border-color:#f5c6cb}.pago-pagado[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border-color:#c3e6cb}.pago-pendiente[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border-color:#f5c6cb}td[_ngcontent-%COMP%]:last-child{white-space:nowrap}.btn-action[_ngcontent-%COMP%]{padding:.5rem;margin:0 3px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s,transform .1s;color:#fff;display:inline-flex;align-items:center;justify-content:center}.btn-action[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.btn-view[_ngcontent-%COMP%]{background-color:#6c757d}.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.btn-edit[_ngcontent-%COMP%]{background-color:#ffc107}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#e0a800}.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:1.5rem;gap:10px;padding:1rem;background-color:#fff;border-radius:8px;box-shadow:0 1px 5px #0000000d}.btn-page[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;transition:background-color .3s;font-weight:500}.btn-page[_ngcontent-%COMP%]:disabled{background-color:#b3d7ff;cursor:not-allowed}.page-info[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem;font-weight:500}"]})};function Nb(n,t){n&1&&(s(0,"div",5),l(1,"Cargando consultas..."),a())}function Lb(n,t){if(n&1&&(s(0,"div",6),l(1),a()),n&2){let e=f();c(),g(" ",e.errorMensaje," ")}}function Vb(n,t){if(n&1){let e=T();s(0,"tr")(1,"td"),l(2),a(),s(3,"td"),l(4),b(5,"br"),s(6,"small"),l(7),a()(),s(8,"td"),l(9),P(10,"slice"),a(),s(11,"td")(12,"span",10),l(13),P(14,"titlecase"),a()(),s(15,"td")(16,"span",10),l(17),a()(),s(18,"td"),l(19),P(20,"date"),a(),s(21,"td")(22,"button",11),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.verConsulta(o))}),Ut(),s(23,"svg",12),b(24,"path",13)(25,"path",14),a()(),Qn(),s(26,"button",15),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.editarConsulta(o))}),Ut(),s(27,"svg",16),b(28,"path",17),a()()()()}if(n&2){let e=t.$implicit,i=f(2);c(2),g("CONS-",e.contactoId),c(2),g(" ",e.nombre||"N/A"," "),c(3),S(e.email||"-"),c(2),Oe("",qo(10,10,e.mensaje,0,50),"",e.mensaje.length>50?"...":""),c(3),p("ngClass",i.getEstadoClass(e.estado)),c(),g(" ",le(14,14,e.estado)," "),c(3),p("ngClass",i.getPrioridadClass(e.contactoId)),c(),g(" ",i.getPrioridadTexto(e.contactoId)," "),c(2),S(A(20,16,e.fecha,"yyyy-MM-dd"))}}function jb(n,t){if(n&1&&(s(0,"div",7)(1,"table",8)(2,"thead")(3,"tr")(4,"th"),l(5,"ID"),a(),s(6,"th"),l(7,"Cliente"),a(),s(8,"th"),l(9,"Asunto"),a(),s(10,"th"),l(11,"Estado"),a(),s(12,"th"),l(13,"Prioridad"),a(),s(14,"th"),l(15,"Fecha"),a(),s(16,"th"),l(17,"Acciones"),a()()(),s(18,"tbody"),_(19,Vb,29,19,"tr",9),a()()()),n&2){let e=f();c(19),p("ngForOf",e.listaDeConsultas)}}function zb(n,t){n&1&&(s(0,"div",18),l(1," No hay consultas para mostrar. "),a())}var wa=class n{listaDeConsultas=[];consultaSeleccionada=null;isLoading=!0;errorMensaje=null;esAdministrador=!1;contactoService=w(Yt);authService=w(de);ngOnInit(){let t=this.authService.obtenerUsuarioActual();t?(console.log("Usuario actual:",t.nombre),console.log("Roles del usuario:",t.roles)):console.warn("Usuario no autenticado."),this.esAdministrador=this.authService.userHasRole("Administrador"),this.esAdministrador?this.cargarConsultas():(this.isLoading=!1,this.errorMensaje="Acceso denegado. Se requiere el rol de Administrador para ver todas las consultas.")}cargarConsultas(){this.isLoading=!0,this.errorMensaje=null,this.contactoService.obtenerTodasLasConsultas().subscribe({next:t=>{this.listaDeConsultas=t,this.isLoading=!1,console.log("Consultas cargadas correctamente.")},error:t=>{console.error("Error al cargar todas las consultas (inesperado):",t),t.status===403?this.errorMensaje="No tienes permiso para ver esta secci\xF3n. Aseg\xFArate de haber iniciado sesi\xF3n como Administrador.":this.errorMensaje="No se pudieron cargar las consultas. Intenta m\xE1s tarde.",this.isLoading=!1}})}verConsulta(t){this.consultaSeleccionada=t,console.log("Ver detalles de consulta:",t.contactoId)}editarConsulta(t){this.consultaSeleccionada=t,console.log("Editar consulta:",t.contactoId)}getEstadoClass(t){switch(t?.toLowerCase()){case"pendiente":return"estado-pendiente";case"respondido":case"resuelto":case"en proceso":return"estado-proceso";default:return""}}getPrioridadClass(t){return t%2===0?"prioridad-alta":"prioridad-media"}getPrioridadTexto(t){return t%2===0?"Alta":"Media"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-consultas"]],decls:7,vars:4,consts:[[1,"gestion-container"],["class","loading",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"loading"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],["title","Ver Detalles",1,"btn-action","btn-view",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-eye-fill"],["d","M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"],["d","M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"],["title","Editar Consulta",1,"btn-action","btn-edit",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil-fill"],["d","M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"],[1,"alert","alert-info"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2"),l(2,"Gesti\xF3n de Consultas"),a(),_(3,Nb,2,0,"div",1)(4,Lb,2,1,"div",2)(5,jb,20,1,"div",3)(6,zb,2,0,"div",4),a()),e&2&&(c(3),p("ngIf",i.isLoading),c(),p("ngIf",i.errorMensaje),c(),p("ngIf",!i.isLoading&&i.listaDeConsultas.length>0),c(),p("ngIf",!i.isLoading&&i.listaDeConsultas.length===0&&!i.errorMensaje))},dependencies:[k,Pe,z,N,Hi,_e,ce],styles:[".gestion-container[_ngcontent-%COMP%]{padding:2rem;background-color:#f8f9fa;min-height:calc(100vh - 60px)}.gestion-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:1.5rem;color:#343a40}.table-responsive[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 15px #00000012;overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem;color:#212529;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.9rem 1rem;vertical-align:middle;border-top:1px solid #dee2e6;font-size:.9rem;white-space:nowrap}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;border-bottom:2px solid #dee2e6;text-align:left;font-weight:600;color:#495057}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#0000000a}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-size:.8rem;display:block}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){max-width:300px;white-space:normal;overflow-wrap:break-word}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.35em .65em;font-size:75%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.375rem}.estado-pendiente[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.estado-proceso[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460;border:1px solid #bee5eb}.estado-respondido[_ngcontent-%COMP%], .estado-resuelto[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.prioridad-alta[_ngcontent-%COMP%]{background-color:#f5c6cb;color:#721c24;border:1px solid #f1b0b7}.prioridad-media[_ngcontent-%COMP%]{background-color:#ffeeba;color:#856404;border:1px solid #ffdf7e}.btn-action[_ngcontent-%COMP%]{background:none;border:none;padding:.3rem .5rem;cursor:pointer;color:#495057;opacity:.7;transition:opacity .2s ease;margin-right:5px}.btn-action[_ngcontent-%COMP%]:hover{opacity:1}.btn-view[_ngcontent-%COMP%]:hover{color:#007bff}.btn-edit[_ngcontent-%COMP%]:hover{color:#ffc107}.btn-action[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:1em;vertical-align:-.125em}"]})};function Ub(n,t){if(n&1){let e=T();s(0,"div",22)(1,"div",23)(2,"strong"),b(3,"i",24),l(4),a(),s(5,"button",25),h("click",function(){C(e);let o=f();return y(o.mensaje="")}),a()()()}if(n&2){let e=f();c(),Qt(Pt("alert alert-",e.tipoAlerta," alert-dismissible fade show shadow-lg rounded-4 border-0")),c(2),Z("fa-check-circle",e.tipoAlerta==="success")("fa-exclamation-triangle",e.tipoAlerta==="warning")("fa-times-circle",e.tipoAlerta==="danger")("fa-info-circle",e.tipoAlerta==="info"),c(),g(" ",e.mensaje," ")}}function Bb(n,t){if(n&1){let e=T();s(0,"tr")(1,"td")(2,"div",26)(3,"div",27),l(4),a(),s(5,"div")(6,"strong"),l(7),a(),s(8,"small",28),l(9),a()()()(),s(10,"td"),l(11),a(),s(12,"td"),l(13),a(),s(14,"td"),l(15),P(16,"date"),a(),s(17,"td")(18,"span",29),l(19),a()(),s(20,"td",19)(21,"div",30)(22,"button",31),h("click",function(){let o=C(e).$implicit,r=f();return y(r.abrirEditar(o))}),s(23,"i",32),l(24,"Editar"),a()(),s(25,"button",33),h("click",function(){let o=C(e).$implicit,r=f();return y(r.eliminarUsuario(o))}),s(26,"i",34),l(27,"Eliminar"),a()()()()()}if(n&2){let e=t.$implicit;c(4),g(" ",e.nombre.charAt(0).toUpperCase()," "),c(3),S(e.nombre),c(2),S(e.usuarioId===1?"Administrador":"Cliente"),c(2),S(e.email),c(2),S(e.telefono||"Sin tel\xE9fono"),c(2),S(A(16,12,e.fechaRegistro,"dd/MM/yyyy")),c(3),Z("bg-success",e.estado==="activo")("bg-danger",e.estado==="inactivo"),c(),g(" ",e.estado==="activo"?"Activo":"Inactivo"," "),c(6),p("disabled",e.usuarioId===1)}}function Gb(n,t){if(n&1){let e=T();s(0,"div",35)(1,"div",36)(2,"div",37)(3,"div",38)(4,"h5",39),l(5,"Editar Usuario"),a(),s(6,"button",40),h("click",function(){C(e);let o=f();return y(o.usuarioEditando=null)}),a()(),s(7,"div",41)(8,"div",42)(9,"label",43),l(10,"Nombre"),a(),s(11,"input",44),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.usuarioEditando.nombre,o)||(r.usuarioEditando.nombre=o),y(o)}),a()(),s(12,"div",42)(13,"label",43),l(14,"Tel\xE9fono"),a(),s(15,"input",44),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.usuarioEditando.telefono,o)||(r.usuarioEditando.telefono=o),y(o)}),a()(),s(16,"div",42)(17,"label",43),l(18,"Estado"),a(),s(19,"select",45),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.nuevoEstado,o)||(r.nuevoEstado=o),y(o)}),s(20,"option",46),l(21,"Activo"),a(),s(22,"option",47),l(23,"Inactivo"),a()()()(),s(24,"div",48)(25,"button",49),h("click",function(){C(e);let o=f();return y(o.usuarioEditando=null)}),l(26,"Cancelar"),a(),s(27,"button",50),h("click",function(){C(e);let o=f();return y(o.guardarCambios())}),l(28,"Guardar Cambios"),a()()()()()}if(n&2){let e=f();Z("show",e.usuarioEditando)("d-block",e.usuarioEditando),c(11),te("ngModel",e.usuarioEditando.nombre),c(4),te("ngModel",e.usuarioEditando.telefono),c(4),te("ngModel",e.nuevoEstado)}}var Ea=class n{constructor(t,e){this.http=t;this.router=e}usuarios=[];usuariosFiltrados=[];filtro="";mensaje="";tipoAlerta="";usuarioEditando=null;nuevoEstado="";apiUrl=J.apiUrl;ngOnInit(){this.cargarUsuarios()}mostrarAlerta(t,e="success"){this.mensaje=t,this.tipoAlerta=e,setTimeout(()=>this.mensaje="",4e3)}cargarUsuarios(){this.http.get(`${this.apiUrl}/usuarios/todos`).subscribe({next:t=>{this.usuarios=t,this.usuariosFiltrados=[...t],this.mostrarAlerta("Usuarios cargados correctamente","success")},error:()=>this.mostrarAlerta("Error al cargar usuarios","danger")})}filtrarUsuarios(){let t=this.filtro.toLowerCase().trim();this.usuariosFiltrados=t?this.usuarios.filter(e=>e.nombre?.toLowerCase().includes(t)||e.email?.toLowerCase().includes(t)):[...this.usuarios]}abrirEditar(t){this.usuarioEditando=O({},t),this.nuevoEstado=t.estado}guardarCambios(){if(!this.usuarioEditando)return;let t={nombre:this.usuarioEditando.nombre,telefono:this.usuarioEditando.telefono||null,estado:this.nuevoEstado};this.http.put(`${this.apiUrl}/usuarios/${this.usuarioEditando.usuarioId}`,t).subscribe({next:()=>{let e=this.usuarios.find(i=>i.usuarioId===this.usuarioEditando.usuarioId);e&&(e.nombre=this.usuarioEditando.nombre,e.telefono=this.usuarioEditando.telefono,e.estado=this.nuevoEstado),this.mostrarAlerta("Usuario actualizado correctamente","success"),this.usuarioEditando=null,this.filtrarUsuarios()},error:e=>{console.error(e),this.mostrarAlerta("Error al actualizar usuario","danger")}})}eliminarUsuario(t){if(t.usuarioId===1){this.mostrarAlerta("No puedes eliminar al administrador","danger");return}confirm(`\xBFSeguro que deseas eliminar a ${t.nombre}?`)&&this.http.delete(`${this.apiUrl}/usuarios/${t.usuarioId}`).subscribe({next:()=>{this.usuarios=this.usuarios.filter(e=>e.usuarioId!==t.usuarioId),this.filtrarUsuarios(),this.mostrarAlerta("Usuario eliminado","success")},error:()=>this.mostrarAlerta("Error al eliminar","danger")})}verPedidos(t){this.router.navigate(["/admin/pedidos"],{queryParams:{clienteId:t.usuarioId,nombre:t.nombre}})}static \u0275fac=function(e){return new(e||n)(x(K),x(pe))};static \u0275cmp=M({type:n,selectors:[["app-gestion-usuarios"]],decls:37,vars:4,consts:[[1,"container-fluid","py-4"],["class","position-fixed top-0 end-0 p-4","style","z-index: 9999;",4,"ngIf"],[1,"card","shadow-lg","border-0","rounded-4"],[1,"card-header","bg-primary","text-white","py-4","text-center"],[1,"mb-0"],[1,"fas","fa-users","me-3"],[1,"card-body","p-4"],[1,"row","mb-4"],[1,"col-md-8"],[1,"input-group","input-group-lg"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Buscar por nombre o email...",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-4","text-end"],[1,"btn","btn-success","btn-lg",3,"click"],[1,"fas","fa-sync-alt","me-2"],[1,"table-responsive"],[1,"table","table-hover","align-middle"],[1,"table-dark"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","modal fade","tabindex","-1","style","background: rgba(0,0,0,0.5)",3,"show","d-block",4,"ngIf"],[1,"position-fixed","top-0","end-0","p-4",2,"z-index","9999"],["role","alert"],[1,"fas","me-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"d-flex","align-items-center"],[1,"bg-primary","text-white","rounded-circle","d-flex","align-items-center","justify-content-center","me-3",2,"width","45px","height","45px"],[1,"text-muted","d-block"],[1,"badge","fs-6"],[1,"d-flex","justify-content-center","gap-3"],["title","Editar",1,"btn","btn-icon","btn-primary",3,"click"],[1,"fas","fa-edit"],["title","Eliminar",1,"btn","btn-icon","btn-danger",3,"click","disabled"],[1,"fas","fa-trash"],["tabindex","-1",1,"modal","fade",2,"background","rgba(0,0,0,0.5)"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-4","shadow"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"form-label","fw-bold"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-select",3,"ngModelChange","ngModel"],["value","activo"],["value","inactivo"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,i){e&1&&(s(0,"div",0),_(1,Ub,6,12,"div",1),s(2,"div",2)(3,"div",3)(4,"h3",4),b(5,"i",5),l(6," Gesti\xF3n de Usuarios"),a()(),s(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"span",10),b(12,"i",11),a(),s(13,"input",12),ie("ngModelChange",function(r){return ne(i.filtro,r)||(i.filtro=r),r}),h("ngModelChange",function(){return i.filtrarUsuarios()}),a()()(),s(14,"div",13)(15,"button",14),h("click",function(){return i.cargarUsuarios()}),b(16,"i",15),l(17," Actualizar "),a()()(),s(18,"div",16)(19,"table",17)(20,"thead",18)(21,"tr")(22,"th"),l(23,"Usuario"),a(),s(24,"th"),l(25,"Email"),a(),s(26,"th"),l(27,"Tel\xE9fono"),a(),s(28,"th"),l(29,"Registro"),a(),s(30,"th"),l(31,"Estado"),a(),s(32,"th",19),l(33,"Acciones"),a()()(),s(34,"tbody"),_(35,Bb,28,15,"tr",20),a()()()()(),_(36,Gb,29,7,"div",21),a()),e&2&&(c(),p("ngIf",i.mensaje),c(12),te("ngModel",i.filtro),c(22),p("ngForOf",i.usuariosFiltrados),c(),p("ngIf",i.usuarioEditando))},dependencies:[k,z,N,Me,tt,nt,X,et,re,Ie,ce],styles:[".gestion-container[_ngcontent-%COMP%]{padding:2rem;background-color:#f8f9fa;min-height:calc(100vh - 60px)}.gestion-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:1.5rem;color:#343a40}.table-responsive[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 15px #00000012;overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem;color:#212529;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.9rem 1rem;vertical-align:middle;border-top:1px solid #dee2e6;font-size:.9rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;border-bottom:2px solid #dee2e6;text-align:left;font-weight:600;color:#495057}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#0000000a}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.35em .65em;font-size:75%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.375rem}.estado-activo[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.estado-inactivo[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.btn-action[_ngcontent-%COMP%]{background:none;border:none;padding:.3rem .5rem;cursor:pointer;color:#495057;opacity:.7;transition:opacity .2s ease;margin-right:5px}.btn-action[_ngcontent-%COMP%]:hover{opacity:1}.btn-view[_ngcontent-%COMP%]:hover{color:#007bff}.btn-edit[_ngcontent-%COMP%]:hover{color:#ffc107}.btn-action[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1em;height:1em;vertical-align:-.125em}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000a6;z-index:1050}.modal-usuario[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1060;display:flex;justify-content:center;align-items:center}.modal-content-usuario[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:16px;box-shadow:0 20px 50px #0006;max-width:500px;width:90%}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end;margin-top:1.5rem}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border-radius:8px;font-weight:600}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background:#eee;color:#333}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background:#ff8c42;color:#fff}body.modal-open[_ngcontent-%COMP%]{overflow:hidden}.btn-icon[_ngcontent-%COMP%]{width:90px;height:40px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #00000026;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0003}"]})};function $b(n,t){n&1&&(s(0,"div",17),l(1,"Cargando tus datos..."),a())}function Hb(n,t){if(n&1&&(s(0,"div",18),l(1),a()),n&2){let e=f();c(),S(e.errorMensajePerfil)}}function Wb(n,t){n&1&&(s(0,"small",27),l(1," El nombre es requerido. "),a())}function qb(n,t){n&1&&(s(0,"small",27),l(1," El tel\xE9fono debe tener 9 d\xEDgitos num\xE9ricos. "),a())}function Yb(n,t){if(n&1&&(s(0,"div",28),l(1),a()),n&2){let e=f(2);c(),S(e.exitoMensajePerfil)}}function Zb(n,t){if(n&1){let e=T();s(0,"form",5),h("ngSubmit",function(){C(e);let o=f();return y(o.guardarPerfil())}),s(1,"div",6)(2,"label",19),l(3,"Nombre Completo"),a(),b(4,"input",20),_(5,Wb,2,0,"small",9),a(),s(6,"div",6)(7,"label",21),l(8,"Correo Electr\xF3nico"),a(),b(9,"input",22),s(10,"small"),l(11,"El correo electr\xF3nico no se puede cambiar."),a()(),s(12,"div",6)(13,"label",23),l(14,"Tel\xE9fono"),a(),b(15,"input",24),_(16,qb,2,0,"small",9),a(),s(17,"div",6)(18,"label",25),l(19,"Direcci\xF3n"),a(),b(20,"input",26),a(),s(21,"button",14),l(22),a(),_(23,Yb,2,1,"div",16),a()}if(n&2){let e=f();p("formGroup",e.perfilForm),c(5),p("ngIf",e.isControlInvalid(e.perfilForm,"nombre")&&e.getControlError(e.perfilForm,"nombre","required")),c(11),p("ngIf",e.isControlInvalid(e.perfilForm,"telefono")&&e.getControlError(e.perfilForm,"telefono","pattern")),c(5),p("disabled",e.perfilForm.invalid||e.isSavingPerfil),c(),g(" ",e.isSavingPerfil?"Guardando...":"Guardar Cambios"," "),c(),p("ngIf",e.exitoMensajePerfil)}}function Kb(n,t){n&1&&(s(0,"small",27),l(1," La contrase\xF1a actual es requerida. "),a())}function Jb(n,t){n&1&&(s(0,"small",27),l(1," La nueva contrase\xF1a es requerida. "),a())}function Xb(n,t){n&1&&(s(0,"small",27),l(1," La contrase\xF1a debe tener al menos 6 caracteres. "),a())}function Qb(n,t){n&1&&(s(0,"small",27),l(1," Confirma la nueva contrase\xF1a. "),a())}function e1(n,t){n&1&&(s(0,"small",27),l(1," Las contrase\xF1as no coinciden. "),a())}function t1(n,t){if(n&1&&(s(0,"div",29),l(1),a()),n&2){let e=f();c(),S(e.errorMensajePassword)}}function n1(n,t){if(n&1&&(s(0,"div",28),l(1),a()),n&2){let e=f();c(),S(e.exitoMensajePassword)}}function i1(n){let t=n.get("nuevaPassword"),e=n.get("confirmarPassword");return!t||!e||!t.value||!e.value||t.value===e.value?null:{passwordMismatch:!0}}var Sa=class n{perfilForm;passwordForm;usuarioOriginal=null;isLoading=!0;isSavingPerfil=!1;isSavingPassword=!1;errorMensajePerfil=null;exitoMensajePerfil=null;errorMensajePassword=null;exitoMensajePassword=null;usuarioService=w(Jt);fb=w(it);constructor(){this.perfilForm=this.fb.group({nombre:["",$.required],email:[{value:"",disabled:!0},[$.required,$.email]],telefono:["",[$.pattern("^[0-9]{9}$")]],direccion:[""]}),this.passwordForm=this.fb.group({passwordActual:["",$.required],nuevaPassword:["",[$.required,$.minLength(6)]],confirmarPassword:["",$.required]},{validators:i1})}ngOnInit(){this.cargarDatosUsuario()}cargarDatosUsuario(){this.isLoading=!0,this.errorMensajePerfil=null,this.usuarioService.obtenerMiPerfil().subscribe({next:t=>{this.usuarioOriginal=t,this.perfilForm.patchValue({nombre:t.nombre,email:t.email,telefono:t.telefono||"",direccion:t.direccion||""}),this.isLoading=!1},error:t=>{console.error("Error al cargar el perfil del admin:",t),this.errorMensajePerfil="No se pudieron cargar tus datos. Intenta de nuevo.",this.isLoading=!1}})}guardarPerfil(){if(this.perfilForm.invalid||!this.usuarioOriginal)return;this.isSavingPerfil=!0,this.errorMensajePerfil=null,this.exitoMensajePerfil=null;let t=ae(O({},this.usuarioOriginal),{nombre:this.perfilForm.value.nombre,telefono:this.perfilForm.value.telefono,direccion:this.perfilForm.value.direccion});this.usuarioService.actualizarMiPerfil(t).subscribe({next:e=>{this.usuarioOriginal=e,this.perfilForm.patchValue({nombre:e.nombre,telefono:e.telefono||"",direccion:e.direccion||""}),this.isSavingPerfil=!1,this.exitoMensajePerfil="\xA1Perfil actualizado con \xE9xito!",setTimeout(()=>this.exitoMensajePerfil=null,3e3)},error:e=>{console.error("Error al guardar el perfil del admin:",e),this.errorMensajePerfil="No se pudieron guardar los cambios. Intenta de nuevo.",this.isSavingPerfil=!1}})}cambiarPassword(){if(this.passwordForm.invalid){this.passwordForm.markAllAsTouched();return}this.isSavingPassword=!0,this.errorMensajePassword=null,this.exitoMensajePassword=null;let t={passwordActual:this.passwordForm.value.passwordActual,nuevaPassword:this.passwordForm.value.nuevaPassword};this.usuarioService.cambiarPassword(t).subscribe({next:e=>{this.isSavingPassword=!1,this.exitoMensajePassword=e||"Contrase\xF1a cambiada con \xE9xito.",this.passwordForm.reset(),setTimeout(()=>this.exitoMensajePassword=null,4e3)},error:e=>{console.error("Error al cambiar contrase\xF1a (admin):",e),this.errorMensajePassword=e.error||"Error inesperado al cambiar la contrase\xF1a.",this.isSavingPassword=!1}})}isControlInvalid(t,e){let i=t.get(e);return!!i&&i.invalid&&(i.dirty||i.touched)}getControlError(t,e,i){let o=t.get(e);return!!o&&o.hasError(i)}getPasswordFormError(t){return this.passwordForm.hasError(t)&&(this.passwordForm.get("confirmarPassword")?.touched??!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-admin-perfil"]],decls:35,vars:13,consts:[[1,"perfil-container"],["class","loading",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"separator"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","passwordActual"],["type","password","id","passwordActual","formControlName","passwordActual",1,"form-control"],["class","text-danger",4,"ngIf"],["for","nuevaPassword"],["type","password","id","nuevaPassword","formControlName","nuevaPassword",1,"form-control"],["for","confirmarPassword"],["type","password","id","confirmarPassword","formControlName","confirmarPassword",1,"form-control"],["type","submit",1,"btn-guardar",3,"disabled"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],[1,"loading"],[1,"alert","alert-danger"],["for","nombre"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["for","telefono"],["type","tel","id","telefono","formControlName","telefono",1,"form-control"],["for","direccion"],["type","text","id","direccion","formControlName","direccion","placeholder","Ej: Av. Principal 123, Dpto. 401",1,"form-control"],[1,"text-danger"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2"),l(2,"Mi Perfil"),a(),s(3,"p"),l(4,"Actualiza tu informaci\xF3n personal y de contacto."),a(),_(5,$b,2,0,"div",1)(6,Hb,2,1,"div",2)(7,Zb,24,6,"form",3),b(8,"hr",4),s(9,"h2"),l(10,"Cambiar Contrase\xF1a"),a(),s(11,"p"),l(12,"Establece una nueva contrase\xF1a para tu cuenta."),a(),s(13,"form",5),h("ngSubmit",function(){return i.cambiarPassword()}),s(14,"div",6)(15,"label",7),l(16,"Contrase\xF1a Actual"),a(),b(17,"input",8),_(18,Kb,2,0,"small",9),a(),s(19,"div",6)(20,"label",10),l(21,"Nueva Contrase\xF1a"),a(),b(22,"input",11),_(23,Jb,2,0,"small",9)(24,Xb,2,0,"small",9),a(),s(25,"div",6)(26,"label",12),l(27,"Confirmar Nueva Contrase\xF1a"),a(),b(28,"input",13),_(29,Qb,2,0,"small",9)(30,e1,2,0,"small",9),a(),s(31,"button",14),l(32),a(),_(33,t1,2,1,"div",15)(34,n1,2,1,"div",16),a()()),e&2&&(c(5),p("ngIf",i.isLoading),c(),p("ngIf",i.errorMensajePerfil),c(),p("ngIf",!i.isLoading&&i.perfilForm),c(6),p("formGroup",i.passwordForm),c(5),p("ngIf",i.isControlInvalid(i.passwordForm,"passwordActual")&&i.getControlError(i.passwordForm,"passwordActual","required")),c(5),p("ngIf",i.isControlInvalid(i.passwordForm,"nuevaPassword")&&i.getControlError(i.passwordForm,"nuevaPassword","required")),c(),p("ngIf",i.isControlInvalid(i.passwordForm,"nuevaPassword")&&i.getControlError(i.passwordForm,"nuevaPassword","minlength")),c(5),p("ngIf",i.isControlInvalid(i.passwordForm,"confirmarPassword")&&i.getControlError(i.passwordForm,"confirmarPassword","required")),c(),p("ngIf",i.getPasswordFormError("passwordMismatch")),c(),p("disabled",i.passwordForm.invalid||i.isSavingPassword),c(),g(" ",i.isSavingPassword?"Cambiando...":"Cambiar Contrase\xF1a"," "),c(),p("ngIf",i.errorMensajePassword),c(),p("ngIf",i.exitoMensajePassword))},dependencies:[k,N,ot,Ue,X,re,ze,Ze,Ke],styles:[".perfil-container[_ngcontent-%COMP%]{padding:2rem}.perfil-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem}.perfil-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#6c757d;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]{display:block;width:100%;padding:.75rem 1rem;font-size:1rem;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{color:#495057;background-color:#fff;border-color:#fd7e14;outline:0;box-shadow:0 0 0 .2rem #fd7e1440}.form-control[disabled][_ngcontent-%COMP%]{background-color:#e9ecef;opacity:1}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;margin-top:.25rem}.btn-guardar[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff;padding:.75rem 1.5rem;border:none;border-radius:.25rem;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .15s ease-in-out;margin-top:1rem}.btn-guardar[_ngcontent-%COMP%]:hover{background-color:#e66a00}.loading[_ngcontent-%COMP%]{padding:1rem;text-align:center;font-weight:600;color:#6c757d}.alert[_ngcontent-%COMP%]{padding:1rem;margin-top:1.5rem;border-radius:.25rem;border:1px solid transparent}.alert-danger[_ngcontent-%COMP%]{color:#721c24;background-color:#f8d7da;border-color:#f5c6cb}.alert-success[_ngcontent-%COMP%]{color:#155724;background-color:#d4edda;border-color:#c3e6cb}.text-danger[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem;display:block}.separator[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:3rem;border:0;border-top:1px solid #dee2e6}.mt-3[_ngcontent-%COMP%]{margin-top:1rem!important}"]})};function o1(n,t){if(n&1&&(s(0,"option",15),l(1),P(2,"titlecase"),a()),n&2){let e=t.$implicit;p("value",e),c(),S(le(2,2,e))}}function r1(n,t){n&1&&(s(0,"div",16),l(1,"Cargando productos..."),a())}function a1(n,t){if(n&1&&(s(0,"div",17),l(1),a()),n&2){let e=f();c(),S(e.errorMensaje)}}function s1(n,t){if(n&1){let e=T();s(0,"tr")(1,"td"),b(2,"img",22),a(),s(3,"td"),l(4),a(),s(5,"td"),l(6),P(7,"titlecase"),a(),s(8,"td"),l(9),P(10,"number"),a(),s(11,"td"),l(12),a(),s(13,"td")(14,"span",23),l(15),P(16,"titlecase"),a()(),s(17,"td")(18,"button",24),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.editarProducto(o))}),l(19,"Editar"),a(),s(20,"button",25),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.eliminarProducto(o))}),l(21,"Eliminar"),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(2),p("alt",fc(e.nombre))("src",e.imagenUrl||"https://placehold.co/60x60?text=Sin+Img",ve),c(2),S(e.nombre),c(2),S(le(7,9,e.categoria)),c(3),g("S/ ",A(10,11,e.precioBase,"1.2-2")),c(3),S(e.personalizable?"S\xED":"No"),c(2),p("ngClass",i.getEstadoClass(e.estado)),c(),S(le(16,14,e.estado))}}function l1(n,t){if(n&1){let e=T();s(0,"div",26)(1,"button",27),h("click",function(){C(e);let o=f(2);return y(o.cambiarPagina(o.paginaActual-1))}),l(2,"Anterior"),a(),s(3,"span"),l(4),a(),s(5,"button",28),h("click",function(){C(e);let o=f(2);return y(o.cambiarPagina(o.paginaActual+1))}),l(6,"Siguiente"),a()()}if(n&2){let e=f(2);c(),p("disabled",e.paginaActual===1),c(3),Oe("P\xE1gina ",e.paginaActual," de ",e.totalPaginas()),c(),p("disabled",e.paginaActual===e.totalPaginas())}}function c1(n,t){if(n&1&&(s(0,"div",18)(1,"table",19)(2,"thead")(3,"tr")(4,"th"),l(5,"Imagen"),a(),s(6,"th"),l(7,"Nombre"),a(),s(8,"th"),l(9,"Categor\xEDa"),a(),s(10,"th"),l(11,"Precio"),a(),s(12,"th"),l(13,"Personalizable"),a(),s(14,"th"),l(15,"Estado"),a(),s(16,"th"),l(17,"Acciones"),a()()(),s(18,"tbody"),_(19,s1,22,16,"tr",20),a()(),_(20,l1,7,4,"div",21),a()),n&2){let e=f();c(19),p("ngForOf",e.productosPaginados),c(),p("ngIf",e.totalPaginas()>1)}}function d1(n,t){n&1&&(s(0,"div",29)(1,"p"),l(2,"No se encontraron productos."),a()())}function u1(n,t){if(n&1){let e=T();s(0,"div",30),h("click",function(){C(e);let o=f();return y(o.cancelarEdicion())}),a()}}function p1(n,t){if(n&1&&(s(0,"option",15),l(1),P(2,"titlecase"),a()),n&2){let e=t.$implicit;p("value",e),c(),S(le(2,2,e))}}function m1(n,t){n&1&&(s(0,"small",51),l(1," Imagen subida correctamente a la nube "),a())}function f1(n,t){if(n&1){let e=T();s(0,"div",31)(1,"div",32),h("click",function(o){return C(e),y(o.stopPropagation())}),s(2,"h3",33),l(3),a(),s(4,"form",34),h("ngSubmit",function(){C(e);let o=f();return y(o.guardarEdicion())}),s(5,"div",35)(6,"label"),l(7,"Nombre *"),a(),s(8,"input",36),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.productoSeleccionado.nombre,o)||(r.productoSeleccionado.nombre=o),y(o)}),a()(),s(9,"div",35)(10,"label"),l(11,"Categor\xEDa *"),a(),s(12,"select",37),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.productoSeleccionado.categoria,o)||(r.productoSeleccionado.categoria=o),y(o)}),_(13,p1,3,4,"option",8),a()(),s(14,"div",35)(15,"label"),l(16,"Precio Base (S/)*"),a(),s(17,"input",38),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.productoSeleccionado.precioBase,o)||(r.productoSeleccionado.precioBase=o),y(o)}),a()(),s(18,"div",39)(19,"input",40),ie("ngModelChange",function(o){C(e);let r=f();return ne(r.productoSeleccionado.personalizable,o)||(r.productoSeleccionado.personalizable=o),y(o)}),a(),s(20,"label",41),l(21,"Es personalizable"),a()(),s(22,"div",42)(23,"label"),l(24,"Imagen del producto"),a(),s(25,"div",43),b(26,"input",44),s(27,"input",45,0),h("change",function(o){C(e);let r=f();return y(r.onArchivoSeleccionado(o))}),a(),s(29,"button",46),h("click",function(){C(e);let o=Nt(28);return y(o.click())}),l(30," Seleccionar Foto "),a()(),_(31,m1,2,0,"small",47),a(),s(32,"div",48)(33,"button",49),h("click",function(){C(e);let o=f();return y(o.cancelarEdicion())}),l(34,"Cancelar"),a(),s(35,"button",50),l(36),a()()()()()}if(n&2){let e=f();c(3),g(" ",e.productoSeleccionado.productoId===0?"Nuevo Producto":"Editar Producto"," "),c(5),te("ngModel",e.productoSeleccionado.nombre),c(4),te("ngModel",e.productoSeleccionado.categoria),c(),p("ngForOf",e.categoriasDisponibles),c(4),te("ngModel",e.productoSeleccionado.precioBase),c(2),te("ngModel",e.productoSeleccionado.personalizable),c(7),p("value",e.simularRuta||(e.productoSeleccionado.imagenUrl?"Imagen ya subida":"Sin imagen")),c(5),p("ngIf",e.productoSeleccionado.imagenUrl),c(4),p("disabled",e.isLoading),c(),g(" ",e.productoSeleccionado.productoId===0?"Crear":"Guardar Cambios"," ")}}var Lo=class n{listaDeProductos=[];productosFiltrados=[];isLoading=!0;errorMensaje=null;buscar="";categoriaFiltro="todas";paginaActual=1;itemsPorPagina=10;categoriasDisponibles=[];productoSeleccionado=null;archivoSeleccionado=null;simularRuta="";cloudinaryPublicId="";productoService=w(Ii);renderer=w(We);document=w(me);ngOnInit(){this.cargarProductos()}cargarProductos(){this.isLoading=!0,this.errorMensaje=null,this.productoService.getProductos().subscribe({next:t=>{this.listaDeProductos=t,this.categoriasDisponibles=this.getCategoriasUnicas(),this.filtrarYPaginar(),this.isLoading=!1},error:t=>{this.errorMensaje="Error al cargar productos. Revisa tu conexi\xF3n.",this.isLoading=!1}})}getCategoriasUnicas(){let t=this.listaDeProductos.map(e=>e.categoria);return[...new Set(t)].sort()}filtrarYPaginar(){let t=[...this.listaDeProductos];if(this.buscar.trim()){let e=this.buscar.toLowerCase();t=t.filter(i=>i.nombre.toLowerCase().includes(e))}this.categoriaFiltro!=="todas"&&(t=t.filter(e=>e.categoria===this.categoriaFiltro)),this.productosFiltrados=t,this.paginaActual=1}get productosPaginados(){let t=(this.paginaActual-1)*this.itemsPorPagina;return this.productosFiltrados.slice(t,t+this.itemsPorPagina)}totalPaginas(){return Math.ceil(this.productosFiltrados.length/this.itemsPorPagina)}cambiarPagina(t){t>=1&&t<=this.totalPaginas()&&(this.paginaActual=t)}crearProducto(){this.productoSeleccionado={productoId:0,nombre:"",descripcion:"",precioBase:0,categoria:this.categoriasDisponibles[0]||"torta",imagenUrl:"",cloudinaryPublicId:"",personalizable:!1,estado:"activo"},this.archivoSeleccionado=null,this.simularRuta="",this.cloudinaryPublicId="",this.abrirModal()}editarProducto(t){this.productoSeleccionado=O({},t),this.cloudinaryPublicId=t.cloudinaryPublicId||"",this.simularRuta=t.imagenUrl?"Imagen ya subida":"",this.archivoSeleccionado=null,this.abrirModal()}abrirModal(){this.renderer.addClass(this.document.body,"modal-open")}cancelarEdicion(){this.productoSeleccionado=null,this.archivoSeleccionado=null,this.simularRuta="",this.cloudinaryPublicId="",this.renderer.removeClass(this.document.body,"modal-open")}onArchivoSeleccionado(t){let e=t.target;e.files?.length&&(this.archivoSeleccionado=e.files[0],this.simularRuta=this.archivoSeleccionado.name,this.isLoading=!0,this.productoService.subirImagen(this.archivoSeleccionado).subscribe({next:i=>{this.productoSeleccionado&&(this.productoSeleccionado.imagenUrl=i.url,this.cloudinaryPublicId=i.public_id),this.isLoading=!1,alert("\xA1Foto subida a Cloudinary con \xE9xito!")},error:i=>{console.error("Error Cloudinary:",i),alert("Error al subir la imagen. Intenta otra vez."),this.isLoading=!1}}))}guardarEdicion(){if(!this.productoSeleccionado)return;if(!this.productoSeleccionado.nombre.trim()||this.productoSeleccionado.precioBase<=0){alert("Nombre y precio son obligatorios");return}this.isLoading=!0;let t=ae(O({},this.productoSeleccionado),{cloudinaryPublicId:this.cloudinaryPublicId||this.productoSeleccionado.cloudinaryPublicId});(this.productoSeleccionado.productoId===0?this.productoService.crearProducto(t):this.productoService.actualizarProducto(this.productoSeleccionado.productoId,t)).subscribe({next:()=>{this.cargarProductos(),this.cancelarEdicion(),this.isLoading=!1,alert("\xA1Producto guardado con \xE9xito!")},error:i=>{console.error(i),alert("Error al guardar el producto"),this.isLoading=!1}})}eliminarProducto(t){confirm(`\xBFEliminar "${t.nombre}" permanentemente?`)&&this.productoService.eliminarProducto(t.productoId).subscribe({next:()=>this.cargarProductos(),error:()=>alert("Error al eliminar")})}getEstadoClass(t=""){return t==="activo"?"badge bg-success":"badge bg-secondary"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-productos"]],decls:18,vars:9,consts:[["fileInput",""],[1,"gestion-container"],[1,"header-section"],[1,"btn-accion","btn-crear",3,"click"],[1,"filtros","mb-4"],["type","text","placeholder","Buscar...",1,"form-control","d-inline-block","w-50",3,"ngModelChange","input","ngModel"],[1,"form-control","d-inline-block","w-25","ms-3",3,"ngModelChange","change","ngModel"],["value","todas"],[3,"value",4,"ngFor","ngForOf"],["class","text-center py-4",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","no-data",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","modal-container",4,"ngIf"],[3,"value"],[1,"text-center","py-4"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["class","text-center mt-4",4,"ngIf"],[1,"product-image-thumbnail",3,"src","alt"],[1,"badge",3,"ngClass"],[1,"btn","btn-sm","btn-warning","me-2",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"text-center","mt-4"],[1,"btn","btn-outline-primary","me-3",3,"click","disabled"],[1,"btn","btn-outline-primary","ms-3",3,"click","disabled"],[1,"no-data"],[1,"modal-overlay",3,"click"],[1,"modal-container"],[1,"modal-content",3,"click"],[1,"modal-title"],[3,"ngSubmit"],[1,"form-group","mb-3"],["type","text","name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","categoria","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.50","min","0.01","name","precio","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","form-check","mt-3"],["type","checkbox","name","personalizable",1,"form-check-input",3,"ngModelChange","ngModel"],[1,"form-check-label"],[1,"form-group","mt-4"],[1,"url-input-group"],["type","text","readonly","",1,"form-control",3,"value"],["type","file","hidden","","accept","image/*",3,"change"],["type","button",1,"btn","btn-url-select",3,"click"],["class","text-success",4,"ngIf"],[1,"form-actions","mt-4"],["type","button",1,"btn","btn-cancel","me-3",3,"click"],["type","submit",1,"btn","btn-save",3,"disabled"],[1,"text-success"]],template:function(e,i){e&1&&(s(0,"div",1)(1,"div",2)(2,"h2"),l(3,"Gesti\xF3n de Productos"),a(),s(4,"button",3),h("click",function(){return i.crearProducto()}),l(5,"+ A\xF1adir Producto"),a()(),s(6,"div",4)(7,"input",5),ie("ngModelChange",function(r){return ne(i.buscar,r)||(i.buscar=r),r}),h("input",function(){return i.filtrarYPaginar()}),a(),s(8,"select",6),ie("ngModelChange",function(r){return ne(i.categoriaFiltro,r)||(i.categoriaFiltro=r),r}),h("change",function(){return i.filtrarYPaginar()}),s(9,"option",7),l(10,"Todas las categor\xEDas"),a(),_(11,o1,3,4,"option",8),a()(),_(12,r1,2,0,"div",9)(13,a1,2,1,"div",10)(14,c1,21,2,"div",11)(15,d1,3,0,"div",12)(16,u1,1,0,"div",13)(17,f1,37,10,"div",14),a()),e&2&&(c(7),te("ngModel",i.buscar),c(),te("ngModel",i.categoriaFiltro),c(3),p("ngForOf",i.categoriasDisponibles),c(),p("ngIf",i.isLoading),c(),p("ngIf",i.errorMensaje),c(),p("ngIf",!i.isLoading&&i.productosPaginados.length>0),c(),p("ngIf",!i.isLoading&&i.productosFiltrados.length===0),c(),p("ngIf",i.productoSeleccionado),c(),p("ngIf",i.productoSeleccionado))},dependencies:[k,Pe,z,N,Me,Ue,tt,nt,X,Hn,Po,et,re,ze,ln,Do,Ie,gl,xe,_e],styles:[".gestion-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto;font-family:Inter,sans-serif}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:3px solid #000000;padding-bottom:15px}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f3b020e7;font-weight:700}.btn-crear[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f0dac8,#ff8c42);color:#000;padding:.6rem 1.2rem;border-radius:8px;font-weight:600;font-size:.95rem;border:none;cursor:pointer;box-shadow:0 4px 6px #28a7454d;transition:background-color .2s ease,transform .1s}.btn-crear[_ngcontent-%COMP%]:hover{background-color:#218838;transform:translateY(-1px)}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto;border-radius:10px;box-shadow:0 6px 15px #0000001a}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;border-bottom:1px solid #e0e0e0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e9f5ff;font-weight:700;color:#333;text-transform:uppercase;font-size:.85rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f0f8ff}.product-image-thumbnail[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:8px;border:2px solid #ddd}.badge[_ngcontent-%COMP%]{padding:.4rem .8rem;border-radius:16px;font-weight:600;font-size:.75rem;display:inline-block}.estado-activo[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.estado-inactivo[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.btn-action[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;margin-right:5px;font-size:1.1rem;transition:color .2s;padding:5px;border-radius:4px}.btn-edit[_ngcontent-%COMP%]{color:#007bff}.btn-delete[_ngcontent-%COMP%]{color:#dc3545}.btn-action[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.no-data[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#6c757d;border:2px dashed #ddd;border-radius:10px;margin-top:1.5rem;background-color:#fafafa}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 15px 35px #0000004d;width:95%;max-width:550px;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.modal-title[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.5rem;color:#000;border-bottom:2px solid #000000;padding-bottom:10px;font-weight:600}.product-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}.product-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.4rem;color:#333;font-size:.95rem}.product-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([type=checkbox]), .product-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.8rem 1rem;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;transition:border-color .2s,box-shadow .2s}.product-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .product-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#ff9100;outline:none;box-shadow:0 0 0 3px #007bff33}.url-input-group[_ngcontent-%COMP%]{display:flex;gap:10px}.url-input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;background-color:#f8f8f8;cursor:default}.btn-url-select[_ngcontent-%COMP%]{background:linear-gradient(45deg,#927f70,#e49462);color:#000;padding:.7rem 1rem;border:none;border-radius:8px;cursor:pointer;font-weight:800;transition:background-color .2s}.btn-url-select[_ngcontent-%COMP%]:hover{background-color:#5a6268}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 0}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:15px;margin-bottom:0;font-weight:700}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:2rem;padding-top:1rem;border-top:1px solid #eee}.btn-save[_ngcontent-%COMP%]{background-color:#f3a070;box-shadow:0 4px 6px #eb9e46ea;font-weight:700}.btn-save[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#d18624}.btn-cancel[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#000;font-weight:600}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.alert-danger[_ngcontent-%COMP%]{margin-top:1rem}.alert-danger-inline[_ngcontent-%COMP%]{padding:.75rem;background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb;border-radius:8px;margin-top:1rem;font-size:.9rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ffe4ce,#ffccad);padding:2rem;border-radius:12px;box-shadow:0 15px 35px #0000004d;width:95%;max-width:550px;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_modalAbre .3s ease-out;margin:auto}@keyframes _ngcontent-%COMP%_modalAbre{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000a6;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);display:flex;justify-content:center;align-items:center;z-index:1050}.modal-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;pointer-events:none;z-index:1060}.modal-content[_ngcontent-%COMP%]{pointer-events:all;background:linear-gradient(135deg,#ffe4ce,#ffccad);padding:2.5rem;border-radius:18px;box-shadow:0 25px 70px #00000073;width:95%;max-width:580px;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_modalAbre .4s ease-out}@keyframes _ngcontent-%COMP%_modalAbre{0%{opacity:0;transform:translateY(-50px) scale(.92)}to{opacity:1;transform:translateY(0) scale(1)}}body.modal-open[_ngcontent-%COMP%]{overflow:hidden}.modal-title[_ngcontent-%COMP%]{margin:0 0 1.8rem;padding-bottom:12px;border-bottom:3px solid #000;font-weight:700;color:#000}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;margin-top:2rem;padding-top:1.5rem;border-top:1px solid #ddd}.url-input-group[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.btn-url-select[_ngcontent-%COMP%]{background:linear-gradient(45deg,#927f70,#e49462);color:#000;font-weight:800;padding:.7rem 1.2rem;border:none;border-radius:8px}"]})};function g1(n,t){n&1&&(s(0,"div",16),l(1," Cargando pagos... "),a())}function h1(n,t){if(n&1){let e=T();s(0,"tr")(1,"td")(2,"strong"),l(3),a()(),s(4,"td")(5,"strong",22),l(6),a()(),s(7,"td",23),l(8),P(9,"number"),a(),s(10,"td"),l(11),P(12,"date"),a(),s(13,"td")(14,"select",24),ie("ngModelChange",function(o){let r=C(e).$implicit;return ne(r.metodo,o)||(r.metodo=o),y(o)}),h("change",function(){let o=C(e).$implicit,r=f(2);return y(r.actualizarMetodo(o))}),s(15,"option",25),l(16,"PENDIENTE"),a(),s(17,"option",26),l(18,"YAPE"),a(),s(19,"option",27),l(20,"PLIN"),a(),s(21,"option",28),l(22,"EFECTIVO"),a()()(),s(23,"td")(24,"code",29),l(25),a()(),s(26,"td")(27,"span",30),l(28),a()(),s(29,"td")(30,"span",30),l(31),P(32,"titlecase"),a()(),s(33,"td",20)(34,"button",31),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.cambiarEstado(o,"validado"))}),l(35," Validar "),a(),s(36,"button",32),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.cambiarEstado(o,"rechazado"))}),l(37," Rechazar "),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(3),g("#",e.pagoId),c(3),g("#",e.pedidoId||"-"),c(2),g("S/ ",A(9,13,e.montoAbonado,"1.2-2")),c(3),S(A(12,16,e.fechaPago,"dd/MM/yyyy HH:mm")),c(3),te("ngModel",e.metodo),p("disabled",e.estado==="validado"),c(11),S(e.codigoOperacion||"-"),c(2),p("ngClass",e.tipoPago==="GARANTIA"?"bg-warning text-dark":"bg-success"),c(),g(" ",e.tipoPago||"TOTAL"," "),c(2),p("ngClass",i.estadoColor(e.estado)),c(),g(" ",le(32,19,e.estado.replace("_"," "))," "),c(3),p("disabled",e.estado==="validado"),c(2),p("disabled",e.estado==="rechazado")}}function v1(n,t){if(n&1&&(s(0,"div",17)(1,"table",18)(2,"thead",19)(3,"tr")(4,"th"),l(5,"ID Pago"),a(),s(6,"th"),l(7,"ID Pedido"),a(),s(8,"th"),l(9,"Monto"),a(),s(10,"th"),l(11,"Fecha"),a(),s(12,"th"),l(13,"M\xE9todo"),a(),s(14,"th"),l(15,"C\xF3d. Operaci\xF3n"),a(),s(16,"th"),l(17,"Tipo"),a(),s(18,"th"),l(19,"Estado"),a(),s(20,"th",20),l(21,"Acciones"),a()()(),s(22,"tbody"),_(23,h1,38,21,"tr",21),a()()()),n&2){let e=f();c(23),p("ngForOf",e.pagosPaginados)}}function b1(n,t){if(n&1){let e=T();s(0,"div",33)(1,"button",34),h("click",function(){C(e);let o=f();return y(o.paginaActual=o.paginaActual-1)}),l(2," Anterior "),a(),s(3,"span",35),l(4),a(),s(5,"button",36),h("click",function(){C(e);let o=f();return y(o.paginaActual=o.paginaActual+1)}),l(6," Siguiente "),a()()}if(n&2){let e=f();c(),p("disabled",e.paginaActual===1),c(3),Oe(" P\xE1gina ",e.paginaActual," de ",e.totalPaginas()," "),c(),p("disabled",e.paginaActual===e.totalPaginas())}}function _1(n,t){n&1&&(s(0,"div",37),l(1," No hay pagos registrados a\xFAn. "),a())}var Pa=class n{constructor(t){this.pagoService=t}pagos=[];pagosFiltrados=[];cargando=!0;buscar="";estadoFiltro="todos";paginaActual=1;itemsPorPagina=10;ngOnInit(){this.cargarPagos()}cargarPagos(){this.cargando=!0,this.pagoService.obtenerTodos().subscribe({next:t=>{this.pagos=t,this.filtrarYPaginar(),this.cargando=!1},error:()=>{alert("Error al cargar pagos"),this.cargando=!1}})}filtrarYPaginar(){let t=[...this.pagos];if(this.buscar.trim()){let e=this.buscar.toLowerCase();t=t.filter(i=>i.pagoId.toString().includes(e)||i.pedidoId?.toString().includes(e)||i.codigoOperacion?.toLowerCase().includes(e))}this.estadoFiltro!=="todos"&&(t=t.filter(e=>e.estado===this.estadoFiltro)),this.pagosFiltrados=t,this.paginaActual=1}get pagosPaginados(){let t=(this.paginaActual-1)*this.itemsPorPagina;return this.pagosFiltrados.slice(t,t+this.itemsPorPagina)}totalPaginas(){return Math.ceil(this.pagosFiltrados.length/this.itemsPorPagina)}cambiarEstado(t,e){this.pagoService.actualizarEstadoPago(t.pagoId,e).subscribe({next:i=>{t.estado=i.estado,t.metodo=i.metodo,alert("\xA1Pago "+(e==="validado"?"VALIDADO":"RECHAZADO")+" con \xE9xito!")},error:i=>{console.error(i),alert("Error: "+(i.error?.message||"No se pudo actualizar"))}})}actualizarMetodo(t){if(t.estado==="validado"&&t.metodo==="PENDIENTE"){alert("No se puede cambiar m\xE9todo una vez validado"),this.cargarPagos();return}this.pagoService.actualizarMetodo(t.pagoId,t.metodo).subscribe({next:()=>{},error:()=>{alert("Error al actualizar m\xE9todo"),this.cargarPagos()}})}estadoColor(t){return{pendiente_validacion:"bg-warning text-dark",validado:"bg-success",rechazado:"bg-danger"}[t]||"bg-secondary"}refrescar(){this.cargarPagos()}static \u0275fac=function(e){return new(e||n)(x(Ai))};static \u0275cmp=M({type:n,selectors:[["app-gestion-pagos"]],decls:22,vars:6,consts:[[1,"gestion-container","py-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"text-primary","fw-bold"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"filtros","mb-4","d-flex","gap-3","flex-wrap"],["type","text","placeholder","Buscar por ID pago, ID pedido, c\xF3digo...",1,"form-control",2,"width","380px",3,"ngModelChange","input","ngModel"],[1,"form-select",2,"width","220px",3,"ngModelChange","change","ngModel"],["value","todos"],["value","pendiente_validacion"],["value","validado"],["value","rechazado"],["class","alert alert-info text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","d-flex justify-content-center mt-4",4,"ngIf"],["class","alert alert-info text-center mt-5",4,"ngIf"],[1,"alert","alert-info","text-center"],[1,"table-responsive"],[1,"table","table-hover","align-middle","table-bordered"],[1,"table-primary"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"text-info"],[1,"fw-bold","text-success"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel","disabled"],["value","PENDIENTE"],["value","yape"],["value","plin"],["value","efectivo"],[1,"bg-light","px-2","py-1","rounded"],[1,"badge","fs-6",3,"ngClass"],[1,"btn","btn-success","btn-sm","me-2",3,"click","disabled"],[1,"btn","btn-danger","btn-sm",3,"click","disabled"],[1,"d-flex","justify-content-center","mt-4"],[1,"btn","btn-outline-primary","me-3",3,"click","disabled"],[1,"fw-bold","align-self-center"],[1,"btn","btn-outline-primary","ms-3",3,"click","disabled"],[1,"alert","alert-info","text-center","mt-5"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"h2",2),l(3,"Gesti\xF3n de Pagos"),a(),s(4,"button",3),h("click",function(){return i.refrescar()}),b(5,"i",4),l(6," Actualizar "),a()(),s(7,"div",5)(8,"input",6),ie("ngModelChange",function(r){return ne(i.buscar,r)||(i.buscar=r),r}),h("input",function(){return i.filtrarYPaginar()}),a(),s(9,"select",7),ie("ngModelChange",function(r){return ne(i.estadoFiltro,r)||(i.estadoFiltro=r),r}),h("change",function(){return i.filtrarYPaginar()}),s(10,"option",8),l(11,"Todos los estados"),a(),s(12,"option",9),l(13,"Pendiente"),a(),s(14,"option",10),l(15,"Validado"),a(),s(16,"option",11),l(17,"Rechazado"),a()()(),_(18,g1,2,0,"div",12)(19,v1,24,1,"div",13)(20,b1,7,4,"div",14)(21,_1,2,0,"div",15),a()),e&2&&(c(8),te("ngModel",i.buscar),c(),te("ngModel",i.estadoFiltro),c(9),p("ngIf",i.cargando),c(),p("ngIf",!i.cargando&&i.pagosPaginados.length>0),c(),p("ngIf",i.totalPaginas()>1),c(),p("ngIf",!i.cargando&&i.pagos.length===0))},dependencies:[k,Pe,z,N,Me,tt,nt,X,et,re,Ie,xe,_e,ce],styles:[".gestion-container[_ngcontent-%COMP%]{padding:2rem;background:#f8f9fa;min-height:100vh}h2[_ngcontent-%COMP%]{margin-bottom:.3rem}.tabla-pagos[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:10px;border-collapse:collapse;overflow:hidden;box-shadow:0 4px 10px #0000000d}.tabla-pagos[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f1f3f5;padding:12px;text-align:left;font-size:.9rem}.tabla-pagos[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #ececec}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:8px;font-size:.8rem;font-weight:600}.badge-pendiente[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge-aprobado[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge-rechazado[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.btn[_ngcontent-%COMP%]{padding:6px 10px;border:none;border-radius:8px;cursor:pointer}.btn-sm[_ngcontent-%COMP%]{font-size:.75rem}.btn-primary[_ngcontent-%COMP%]{background:#1971c2;color:#fff}.btn-danger[_ngcontent-%COMP%]{background:#d63031;color:#fff}.btn[_ngcontent-%COMP%]:disabled{opacity:.55;cursor:not-allowed}.comprobante-link[_ngcontent-%COMP%]{color:#0d6efd;text-decoration:underline}"]})};function x1(n,t){n&1&&(s(0,"div",8),l(1,"Cargando adicionales..."),a())}function C1(n,t){if(n&1&&(s(0,"div",9),l(1),a()),n&2){let e=f();c(),S(e.errorMensaje)}}function y1(n,t){if(n&1){let e=T();s(0,"tr")(1,"td"),l(2),a(),s(3,"td"),l(4),a(),s(5,"td")(6,"span",14),l(7),P(8,"titlecase"),a()(),s(9,"td"),l(10),P(11,"number"),a(),s(12,"td")(13,"button",15),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.abrirEditar(o))}),l(14,"Editar"),a(),s(15,"button",16),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.eliminarAdicional(o))}),l(16,"Eliminar"),a()()()}if(n&2){let e=t.$implicit;c(2),S(e.adicionalId),c(2),S(e.nombre),c(3),S(le(8,4,e.categoria)),c(3),g("S/ ",A(11,6,e.costoAdicional,"1.2-2"))}}function w1(n,t){if(n&1&&(s(0,"div",10)(1,"table",11)(2,"thead",12)(3,"tr")(4,"th"),l(5,"ID"),a(),s(6,"th"),l(7,"Nombre"),a(),s(8,"th"),l(9,"Categor\xEDa"),a(),s(10,"th"),l(11,"Costo Adicional"),a(),s(12,"th"),l(13,"Acciones"),a()()(),s(14,"tbody"),_(15,y1,17,9,"tr",13),a()()()),n&2){let e=f();c(15),p("ngForOf",e.listaDeAdicionales)}}function E1(n,t){n&1&&(s(0,"div",17),l(1," No hay adicionales registrados a\xFAn. "),a())}function S1(n,t){n&1&&(s(0,"small",41),l(1," Obligatorio (m\xEDn. 2 caracteres) "),a())}function P1(n,t){if(n&1){let e=T();s(0,"div",18)(1,"div",19),h("click",function(o){return C(e),y(o.stopPropagation())}),s(2,"div",20)(3,"h3",21),l(4),a(),s(5,"button",22),h("click",function(){C(e);let o=f();return y(o.cerrarModal())}),l(6,"X"),a()(),s(7,"form",23),h("ngSubmit",function(){C(e);let o=f();return y(o.guardar())}),s(8,"div",24)(9,"label",25),l(10,"Nombre"),a(),b(11,"input",26),_(12,S1,2,0,"small",27),a(),s(13,"div",24)(14,"label",25),l(15,"Categor\xEDa"),a(),s(16,"select",28)(17,"option",29),l(18,"Seleccionar categor\xEDa"),a(),s(19,"option",30),l(20,"Bizcocho"),a(),s(21,"option",31),l(22,"Relleno"),a(),s(23,"option",32),l(24,"Topping"),a(),s(25,"option",33),l(26,"Decorado"),a(),s(27,"option",34),l(28,"Extra"),a(),s(29,"option",35),l(30,"Mensaje"),a()()(),s(31,"div",36)(32,"label",25),l(33,"Costo Adicional (S/)"),a(),b(34,"input",37),a(),s(35,"div",38)(36,"button",39),h("click",function(){C(e);let o=f();return y(o.cerrarModal())}),l(37," Cancelar "),a(),s(38,"button",40),l(39),a()()()()()}if(n&2){let e,i=f();c(4),g(" ",i.esEdicion?"Editar Adicional":"Nuevo Adicional"," "),c(3),p("formGroup",i.form),c(5),p("ngIf",((e=i.form.get("nombre"))==null?null:e.invalid)&&((e=i.form.get("nombre"))==null?null:e.touched)),c(26),p("disabled",i.form.invalid),c(),g(" ",i.esEdicion?"Actualizar":"Crear"," ")}}var Ma=class n{constructor(t,e){this.fb=t;this.adicionalService=e;this.form=this.fb.group({nombre:["",[$.required,$.minLength(2)]],categoria:["",$.required],costoAdicional:[0,[$.required,$.min(0)]]})}listaDeAdicionales=[];isLoading=!0;errorMensaje=null;modalVisible=!1;esEdicion=!1;adicionalIdActual=null;form;categorias=[{valor:"bizcocho",texto:"Bizcocho"},{valor:"relleno",texto:"Relleno"},{valor:"topping",texto:"Topping"},{valor:"decorado",texto:"Decorado"},{valor:"extra",texto:"Extra"},{valor:"mensaje",texto:"Mensaje"}];ngOnInit(){this.cargarAdicionales()}cargarAdicionales(){this.isLoading=!0,this.adicionalService.getAdicionales().subscribe({next:t=>{this.listaDeAdicionales=t,this.isLoading=!1},error:t=>{this.errorMensaje="Error al cargar adicionales",this.isLoading=!1}})}abrirCrear(){this.esEdicion=!1,this.adicionalIdActual=null,this.form.reset({nombre:"",categoria:"",costoAdicional:0}),this.modalVisible=!0}abrirEditar(t){this.esEdicion=!0,this.adicionalIdActual=t.adicionalId,this.form.patchValue({nombre:t.nombre,categoria:t.categoria,costoAdicional:t.costoAdicional}),this.modalVisible=!0}guardar(){if(this.form.invalid){this.form.markAllAsTouched();return}let t=this.form.value;this.esEdicion&&this.adicionalIdActual?this.adicionalService.actualizar(this.adicionalIdActual,t).subscribe({next:()=>{alert("Adicional actualizado correctamente"),this.cerrarModal(),this.cargarAdicionales()},error:()=>alert("Error al actualizar")}):this.adicionalService.crear(t).subscribe({next:()=>{alert("Adicional creado correctamente"),this.cerrarModal(),this.cargarAdicionales()},error:()=>alert("Error al crear adicional")})}eliminarAdicional(t){confirm(`\xBFSeguro que quieres eliminar "${t.nombre}"?`)&&this.adicionalService.eliminar(t.adicionalId).subscribe({next:()=>{alert("Adicional eliminado"),this.cargarAdicionales()},error:()=>alert("Error al eliminar")})}cerrarModal(){this.modalVisible=!1}static \u0275fac=function(e){return new(e||n)(x(it),x(En))};static \u0275cmp=M({type:n,selectors:[["app-gestion-adicionales"]],decls:11,vars:5,consts:[[1,"gestion-container"],[1,"header-section"],[1,"btn-accion","btn-crear",3,"click"],["class","alert alert-info",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","alert alert-info text-center",4,"ngIf"],["class","modal-directo",4,"ngIf"],[1,"alert","alert-info"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-hover","table-bordered"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"badge","bg-primary"],["title","Editar",1,"btn","btn-sm","btn-warning","me-2",3,"click"],["title","Eliminar",1,"btn","btn-sm","btn-danger",3,"click"],[1,"alert","alert-info","text-center"],[1,"modal-directo"],[1,"modal-content-directo",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close-modal",3,"click"],[1,"p-4",3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label","fw-bold"],["type","text","formControlName","nombre","placeholder","Ej: Relleno de Fudge",1,"form-control"],["class","text-danger",4,"ngIf"],["formControlName","categoria",1,"form-select"],["value",""],["value","bizcocho"],["value","relleno"],["value","topping"],["value","decorado"],["value","extra"],["value","mensaje"],[1,"mb-4"],["type","number","step","0.01","formControlName","costoAdicional","placeholder","0.00",1,"form-control"],[1,"d-flex","justify-content-end","gap-3"],["type","button",1,"btn","btn-secondary","px-4",3,"click"],["type","submit",1,"btn","btn-success","px-5",3,"disabled"],[1,"text-danger"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Gestionar Adicionales"),a(),s(4,"button",2),h("click",function(){return i.abrirCrear()}),l(5," + A\xF1adir Adicional "),a()(),_(6,x1,2,0,"div",3)(7,C1,2,1,"div",4)(8,w1,16,1,"div",5)(9,E1,2,0,"div",6)(10,P1,40,5,"div",7),a()),e&2&&(c(6),p("ngIf",i.isLoading),c(),p("ngIf",i.errorMensaje),c(),p("ngIf",!i.isLoading&&i.listaDeAdicionales.length>0),c(),p("ngIf",!i.isLoading&&i.listaDeAdicionales.length===0),c(),p("ngIf",i.modalVisible))},dependencies:[k,z,N,ot,Ue,tt,nt,X,Hn,et,re,ze,Ze,Ke,xe,_e],styles:[".gestion-container[_ngcontent-%COMP%]{max-width:1100px;margin:2rem auto;padding:0 1rem;position:relative}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.btn-crear[_ngcontent-%COMP%]{background:#fd7e14;color:#fff;padding:12px 24px;border:none;border-radius:8px;font-weight:700;cursor:pointer;transition:all .3s}.btn-crear[_ngcontent-%COMP%]:hover{background:#e66b0d}.modal-directo[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:99999!important;display:flex;justify-content:center;align-items:center;pointer-events:none}.modal-content-directo[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 20px 60px #00000080;width:90%;max-width:550px;pointer-events:auto;animation:_ngcontent-%COMP%_aparecer .3s ease-out}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem 0;border-bottom:1px solid #eee}.modal-title[_ngcontent-%COMP%]{color:#fd7e14;font-size:1.8rem;margin:0}.btn-close-modal[_ngcontent-%COMP%]{background:none;border:none;font-size:2rem;color:#999;cursor:pointer;width:40px;height:40px;display:flex;justify-content:center;align-items:center}.btn-close-modal[_ngcontent-%COMP%]:hover{color:#fd7e14;background:#fff0e6;border-radius:50%}@keyframes _ngcontent-%COMP%_aparecer{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}.modal-content-directo[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{background:#fd7e14!important;border:none!important;font-weight:700}.modal-content-directo[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]:hover{background:#e66b0d!important}"]})};function M1(n,t){n&1&&(s(0,"div",7),l(1,"Cargando promociones..."),a())}function D1(n,t){if(n&1&&(s(0,"div",8),l(1),a()),n&2){let e=f();c(),S(e.errorMensaje)}}function O1(n,t){if(n&1){let e=T();s(0,"tr")(1,"td"),l(2),a(),s(3,"td"),l(4),a(),s(5,"td"),l(6),P(7,"slice"),a(),s(8,"td"),l(9),a(),s(10,"td"),l(11),P(12,"date"),a(),s(13,"td"),l(14),P(15,"date"),a(),s(16,"td")(17,"span",12),l(18),P(19,"titlecase"),a()(),s(20,"td")(21,"button",13),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.editarPromocion(o))}),l(22,"\u270F\uFE0F"),a(),s(23,"button",14),h("click",function(){let o=C(e).$implicit,r=f(2);return y(r.eliminarPromocion(o))}),l(24,"\u{1F5D1}\uFE0F"),a()()()}if(n&2){let e=t.$implicit,i=f(2);c(2),S(e.promocionId),c(2),S(e.titulo),c(2),Oe("",qo(7,9,e.descripcion,0,50),"",((e.descripcion==null?null:e.descripcion.length)||0)>50?"...":""),c(3),g("",e.descuento,"%"),c(2),S(A(12,13,e.fechaInicio,"yyyy-MM-dd")),c(3),S(A(15,16,e.fechaFin,"yyyy-MM-dd")),c(3),p("ngClass",i.getEstadoClass(e.estado)),c(),g(" ",le(19,19,e.estado)," ")}}function I1(n,t){if(n&1&&(s(0,"div",9)(1,"table",10)(2,"thead")(3,"tr")(4,"th"),l(5,"ID"),a(),s(6,"th"),l(7,"T\xEDtulo"),a(),s(8,"th"),l(9,"Descripci\xF3n"),a(),s(10,"th"),l(11,"Descuento (%)"),a(),s(12,"th"),l(13,"Fecha Inicio"),a(),s(14,"th"),l(15,"Fecha Fin"),a(),s(16,"th"),l(17,"Estado"),a(),s(18,"th"),l(19,"Acciones"),a()()(),s(20,"tbody"),_(21,O1,25,21,"tr",11),a()()()),n&2){let e=f();c(21),p("ngForOf",e.listaDePromociones)}}function A1(n,t){n&1&&(s(0,"div",15),l(1," No hay promociones registradas. "),a())}var Da=class n{listaDePromociones=[];promocionSeleccionada=null;isLoading=!0;errorMensaje=null;promocionService=w(Zt);ngOnInit(){this.cargarPromociones()}cargarPromociones(){this.isLoading=!0,this.errorMensaje=null,this.promocionService.obtenerTodasLasPromociones().subscribe({next:t=>{this.listaDePromociones=t,this.isLoading=!1},error:t=>{console.error("Error al cargar promociones:",t),t.status===403?this.errorMensaje="No tienes permiso para ver esta secci\xF3n.":this.errorMensaje="No se pudieron cargar las promociones.",this.isLoading=!1}})}eliminarPromocion(t){confirm(`\xBFEst\xE1s seguro de que deseas eliminar la promoci\xF3n "${t.titulo}" (ID: ${t.promocionId})?`)&&this.promocionService.eliminarPromocion(t.promocionId).subscribe({next:()=>{this.listaDePromociones=this.listaDePromociones.filter(e=>e.promocionId!==t.promocionId)},error:e=>{console.error("Error al eliminar:",e),this.errorMensaje="Error al eliminar la promoci\xF3n."}})}crearPromocion(){alert("Funcionalidad Crear Promoci\xF3n pendiente.")}editarPromocion(t){alert(`Funcionalidad Editar Promoci\xF3n ${t.titulo} pendiente.`)}getEstadoClass(t){return t==="activo"?"estado-activo":"estado-inactivo"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-promociones"]],decls:10,vars:4,consts:[[1,"gestion-container"],[1,"header-section"],[1,"btn-accion","btn-crear",3,"click"],["class","loading",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"loading"],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],["title","Editar",1,"btn-action","btn-edit",3,"click"],["title","Eliminar",1,"btn-action","btn-delete",3,"click"],[1,"alert","alert-info"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Gestionar Promociones"),a(),s(4,"button",2),h("click",function(){return i.crearPromocion()}),l(5,"+ A\xF1adir Promoci\xF3n"),a()(),_(6,M1,2,0,"div",3)(7,D1,2,1,"div",4)(8,I1,22,1,"div",5)(9,A1,2,0,"div",6),a()),e&2&&(c(6),p("ngIf",i.isLoading),c(),p("ngIf",i.errorMensaje),c(),p("ngIf",!i.isLoading&&i.listaDePromociones.length>0),c(),p("ngIf",!i.isLoading&&i.listaDePromociones.length===0&&!i.errorMensaje))},dependencies:[k,Pe,z,N,Hi,_e,ce],encapsulation:2})};function T1(n,t){n&1&&(s(0,"div",8)(1,"p",9),l(2,"Cargando rese\xF1as..."),a()())}function k1(n,t){if(n&1&&(s(0,"div",10),l(1),a()),n&2){let e=f();c(),S(e.errorMensaje)}}function F1(n,t){n&1&&(s(0,"div",11),l(1," No hay rese\xF1as pendientes o registradas. "),a())}function R1(n,t){if(n&1){let e=T();s(0,"button",22),h("click",function(){C(e);let o=f().$implicit,r=f(2);return y(r.abrirModalFoto(o.fotoUrl,o.comentario))}),l(1," Ver foto "),a()}}function N1(n,t){n&1&&(s(0,"span",9),l(1,"\u2014"),a())}function L1(n,t){n&1&&(s(0,"span",27),l(1,"Cargando..."),a())}function V1(n,t){if(n&1){let e=T();s(0,"div",23)(1,"button",24),h("click",function(){C(e);let o=f().$implicit,r=f(2);return y(r.cambiarEstado(o.resenaId,"aprobado"))}),l(2," Aprobar "),a(),s(3,"button",25),h("click",function(){C(e);let o=f().$implicit,r=f(2);return y(r.cambiarEstado(o.resenaId,"rechazado"))}),l(4," Rechazar "),a(),_(5,L1,2,0,"span",26),a()}if(n&2){let e=f().$implicit,i=f(2);c(),p("disabled",i.loadingId===e.resenaId),c(2),p("disabled",i.loadingId===e.resenaId),c(2),p("ngIf",i.loadingId===e.resenaId)}}function j1(n,t){n&1&&(s(0,"span",9),l(1,"\u2014"),a())}function z1(n,t){if(n&1&&(s(0,"tr")(1,"td")(2,"strong"),l(3),a()(),s(4,"td"),l(5),a(),s(6,"td"),l(7),a(),s(8,"td")(9,"span",16),l(10),a()(),s(11,"td",17),l(12),a(),s(13,"td"),_(14,R1,2,0,"button",18)(15,N1,2,0,"span",19),a(),s(16,"td"),l(17),P(18,"date"),a(),s(19,"td")(20,"span",20),l(21),P(22,"titlecase"),a()(),s(23,"td"),_(24,V1,6,3,"div",21)(25,j1,2,0,"span",19),a()()),n&2){let e=t.$implicit,i=f(2);c(3),g("#",e.resenaId),c(2),S(e.nombreUsuario||"An\xF3nimo"),c(2),S(e.fechaPedido?"ORD-"+e.pedidoId:"-"),c(3),Oe(" ","\u2605\u2605\u2605\u2605\u2605".substring(0,e.valoracion)," ","\u2606\u2606\u2606\u2606\u2606".substring(0,5-e.valoracion)," "),c(2),g(" ",e.comentario," "),c(2),p("ngIf",e.fotoUrl),c(),p("ngIf",!e.fotoUrl),c(2),S(A(18,13,e.fecha,"dd/MM/yyyy")),c(3),p("ngClass",i.getEstadoClass(e.estado)),c(),g(" ",le(22,16,e.estado)," "),c(3),p("ngIf",e.estado!=="rechazado"&&e.estado!=="aprobado"||!0),c(),p("ngIf",e.estado!=="pendiente")}}function U1(n,t){if(n&1&&(s(0,"div",12)(1,"table",13)(2,"thead",14)(3,"tr")(4,"th"),l(5,"ID"),a(),s(6,"th"),l(7,"Cliente"),a(),s(8,"th"),l(9,"Pedido"),a(),s(10,"th"),l(11,"Valoraci\xF3n"),a(),s(12,"th"),l(13,"Comentario"),a(),s(14,"th"),l(15,"Foto"),a(),s(16,"th"),l(17,"Fecha"),a(),s(18,"th"),l(19,"Estado"),a(),s(20,"th"),l(21,"Acciones"),a()()(),s(22,"tbody"),_(23,z1,26,18,"tr",15),a()()()),n&2){let e=f();c(23),p("ngForOf",e.resenas)}}function B1(n,t){if(n&1){let e=T();s(0,"div",28),h("click",function(){C(e);let o=f();return y(o.cerrarModalFoto())}),a()}}function G1(n,t){if(n&1&&(s(0,"div",34)(1,"p")(2,"strong"),l(3,"Comentario:"),a()(),s(4,"p"),l(5),a()()),n&2){let e=f(2);c(5),S(e.modalComentario)}}function $1(n,t){if(n&1){let e=T();s(0,"div",29)(1,"div",30),h("click",function(o){return C(e),y(o.stopPropagation())}),s(2,"button",31),h("click",function(){C(e);let o=f();return y(o.cerrarModalFoto())}),l(3,"\xD7"),a(),b(4,"img",32),_(5,G1,6,1,"div",33),a()()}if(n&2){let e=f();c(4),p("src",e.modalFotoUrl,ve),c(),p("ngIf",e.modalComentario)}}var Oa=class n{resenas=[];isLoading=!0;errorMensaje=null;loadingId=null;modalFotoUrl=null;modalComentario=null;resenaService=w(wi);ngOnInit(){this.cargarResenas()}cargarResenas(){this.isLoading=!0,this.resenaService.obtenerTodasLasResenasAdmin().subscribe({next:t=>{this.resenas=t.map(e=>({resenaId:e.resenaId,nombreUsuario:e.nombreUsuario||"An\xF3nimo",pedidoId:e.pedidoId||null,fechaPedido:e.fechaPedido,valoracion:e.valoracion,comentario:e.comentario,fotoUrl:e.fotoUrl,fecha:e.fecha,estado:e.estado||"pendiente"})),this.isLoading=!1},error:t=>{this.errorMensaje=t.status===403?"No tienes permisos de administrador.":"Error al cargar las rese\xF1as.",this.isLoading=!1}})}cambiarEstado(t,e){this.loadingId||(this.loadingId=t,this.resenaService.actualizarEstadoResena(t,e).subscribe({next:()=>{let i=this.resenas.find(o=>o.resenaId===t);i&&(i.estado=e),this.loadingId=null},error:()=>{alert("Error al actualizar el estado"),this.loadingId=null}}))}abrirModalFoto(t,e){this.modalFotoUrl=t,this.modalComentario=e,document.body.classList.add("modal-open")}cerrarModalFoto(){this.modalFotoUrl=null,this.modalComentario=null,document.body.classList.remove("modal-open")}getEstadoClass(t){switch(t){case"aprobado":return"bg-success";case"rechazado":return"bg-danger";case"pendiente":return"bg-warning text-dark";default:return"bg-secondary"}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-gestion-resenas"]],decls:9,vars:6,consts:[[1,"gestion-container"],[1,"mb-4"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-info text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal-foto",4,"ngIf"],[1,"text-center","py-5"],[1,"text-muted"],[1,"alert","alert-danger"],[1,"alert","alert-info","text-center"],[1,"table-responsive"],[1,"table","table-hover","align-middle"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"valoracion"],[1,"comentario-col","text-truncate",2,"max-width","200px"],["class","btn btn-sm btn-link text-primary p-0",3,"click",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"badge",3,"ngClass"],["class","acciones",4,"ngIf"],[1,"btn","btn-sm","btn-link","text-primary","p-0",3,"click"],[1,"acciones"],["title","Aprobar rese\xF1a",1,"btn-action","aprobar",3,"click","disabled"],["title","Rechazar rese\xF1a",1,"btn-action","rechazar",3,"click","disabled"],["class","spinner-small",4,"ngIf"],[1,"spinner-small"],[1,"modal-backdrop",3,"click"],[1,"modal-foto"],[1,"modal-content-foto",3,"click"],[1,"btn-cerrar",3,"click"],["alt","Foto de rese\xF1a",1,"img-foto",3,"src"],["class","comentario-modal",4,"ngIf"],[1,"comentario-modal"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2",1),l(2,"Gestionar Rese\xF1as"),a(),_(3,T1,3,0,"div",2)(4,k1,2,1,"div",3)(5,F1,2,0,"div",4)(6,U1,24,1,"div",5)(7,B1,1,0,"div",6)(8,$1,6,2,"div",7),a()),e&2&&(c(3),p("ngIf",i.isLoading),c(),p("ngIf",i.errorMensaje),c(),p("ngIf",!i.isLoading&&i.resenas.length===0),c(),p("ngIf",!i.isLoading&&i.resenas.length>0),c(),p("ngIf",i.modalFotoUrl),c(),p("ngIf",i.modalFotoUrl))},dependencies:[k,Pe,z,N,_e,ce],styles:[".gestion-container[_ngcontent-%COMP%]{padding:1.5rem;background-color:#f8f9fa;min-height:calc(100vh - 60px);font-family:Inter,sans-serif}.gestion-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.9rem;font-weight:700;margin-bottom:1.8rem;color:#343a40;border-bottom:4px solid #ff8c42;padding-bottom:10px;display:inline-block}.table-responsive[_ngcontent-%COMP%]{background-color:#fff;border-radius:16px;box-shadow:0 10px 30px #0000001a;overflow:hidden;overflow-x:auto;-webkit-overflow-scrolling:touch}.table[_ngcontent-%COMP%]{min-width:800px;margin:0;border-collapse:separate;border-spacing:0}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fdf4e6,#ffe8cc);color:#5d4037;font-weight:700;text-transform:uppercase;font-size:.75rem;letter-spacing:1px;padding:1rem;text-align:left;white-space:nowrap}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;vertical-align:middle;border-top:1px solid #eee;font-size:.95rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#fff8e1!important;transition:background-color .2s}.valoracion[_ngcontent-%COMP%]{font-size:1.5rem;letter-spacing:3px;color:#f3a070}.badge[_ngcontent-%COMP%]{padding:.5em 1.1em;border-radius:50px;font-weight:700;font-size:.85rem;min-width:90px;text-align:center}.bg-success[_ngcontent-%COMP%]{background-color:#d4edda!important;color:#155724}.bg-danger[_ngcontent-%COMP%]{background-color:#f8d7da!important;color:#721c24}.bg-warning[_ngcontent-%COMP%]{background-color:#fff3cd!important;color:#856404}.acciones[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}.btn-action[_ngcontent-%COMP%]{padding:9px 18px;border:none;border-radius:10px;font-size:.9rem;font-weight:700;cursor:pointer;transition:all .25s ease;min-width:85px;box-shadow:0 3px 8px #00000026}.aprobar[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.aprobar[_ngcontent-%COMP%]:hover:not(:disabled){background:#a8e0b5;transform:translateY(-2px);box-shadow:0 6px 15px #28a7454d}.rechazar[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.rechazar[_ngcontent-%COMP%]:hover:not(:disabled){background:#f1b0b7;transform:translateY(-2px);box-shadow:0 6px 15px #dc35454d}.btn-action[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important;box-shadow:none}td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;font-weight:600;text-decoration:none}td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 768px){.table[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:1.5rem;background:#fff;border-radius:12px;box-shadow:0 5px 15px #0000001a;padding:1rem;border:1px solid #eee}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;padding:.6rem 0;position:relative;padding-left:50%;text-align:right}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);position:absolute;left:1rem;width:45%;font-weight:700;color:#5d4037;text-align:left}.acciones[_ngcontent-%COMP%]{justify-content:flex-end;margin-top:1rem}.valoracion[_ngcontent-%COMP%]{font-size:1.8rem}}"]})};var Ia=class n{constructor(t,e,i,o,r){this.carrito=t;this.pedidoService=e;this.auth=i;this.router=o;this.garantiaService=r;this.carrito.items$.subscribe(d=>{this.items=d,this.total=this.items.reduce((u,m)=>u+m.precioUnitario*m.cantidad,0),this.total=Math.round(this.total*100)/100,this.calcularGarantia()}),this.garantiaService.obtener().subscribe(d=>{this.porcentajeGarantia=d,this.calcularGarantia()})}items=[];total=0;porcentajeGarantia=50;garantia=0;resto=0;calcularGarantia(){this.garantia=Math.round(this.total*this.porcentajeGarantia/100*100)/100,this.resto=Math.round((this.total-this.garantia)*100)/100}confirmar(){if(!this.auth.estaLogueado()){alert("Debes iniciar sesi\xF3n para confirmar tu pedido");return}let t=this.auth.obtenerUsuarioActual();if(!t?.usuarioId){alert("Error: No se pudo obtener tu informaci\xF3n");return}let e=this.items.map(o=>({productoId:o.productoId||null,cantidad:o.cantidad,precioUnitario:o.precioUnitario,subtotal:o.precioUnitario*o.cantidad})),i={usuarioId:t.usuarioId,nota:`Pedido desde carrito - ${this.items.length} producto(s)`,detalles:e,subtotal:this.total,total:this.total,garantiaPagada:0,resto:this.resto};this.pedidoService.crear(i).subscribe({next:o=>{localStorage.setItem("pedido_actual_id",o.pedidoId),localStorage.setItem("monto_garantia",this.garantia.toString()),alert(`\xA1PEDIDO #${o.pedidoId} CONFIRMADO!
Paga S/ ${this.garantia} de garant\xEDa ahora`),this.carrito.vaciar(),this.router.navigate(["/cliente/pago-garantia"])},error:o=>{console.error("Error al crear pedido:",o),alert("Error al procesar el pedido. Intenta de nuevo o cont\xE1ctanos por WhatsApp.")}})}static \u0275fac=function(e){return new(e||n)(x(Ge),x(Tt),x(de),x(pe),x(Sn))};static \u0275cmp=M({type:n,selectors:[["app-checkout"]],decls:14,vars:6,consts:[[1,"card"],["pButton","","label","Confirmar Pedido",3,"click"]],template:function(e,i){e&1&&(be(0,"div",0)(1,"h5"),l(2,"Resumen"),ge(),be(3,"p")(4,"strong"),l(5,"Total:"),ge(),l(6),ge(),be(7,"p")(8,"strong"),l(9),ge(),l(10),P(11,"number"),ge(),be(12,"button",1),Ho("click",function(){return i.confirmar()}),l(13,"Confirmar"),ge()()),e&2&&(c(6),g(" S/ ",i.total),c(3),g("Garant\xEDa (",i.porcentajeGarantia,"%):"),c(),g(" S/ ",A(11,3,i.garantia,"1.2-2")))},dependencies:[k,xe],encapsulation:2})};function H1(n,t){if(n&1&&(s(0,"div",17)(1,"div",11)(2,"span"),l(3),a(),s(4,"strong"),l(5),a()()()),n&2){let e=t.$implicit;c(3),Oe("",e.nombre," x",e.cantidad),c(2),g("S/ ",e.subtotal)}}var Aa=class n{constructor(t,e){this.router=t;this.http=e}pedido={};apiUrl=J.apiUrl+"/pedidos";ngOnInit(){let t=localStorage.getItem("pedido_pendiente");t?(this.pedido=JSON.parse(t),localStorage.removeItem("pedido_pendiente")):this.router.navigate(["/cliente/mi-pedido"])}irAPago(){let t=localStorage.getItem("jwt_token");if(!t){alert("No est\xE1s autenticado"),this.router.navigate(["/iniciar-sesion"]);return}let e=new Ot({Authorization:`Bearer ${t}`,"Content-Type":"application/json"}),i={usuarioId:this.pedido.usuarioId,detalles:this.pedido.items.map(o=>({productoId:o.productoId,cantidad:o.cantidad,precioUnitario:o.precio||o.precioUnitario||0,promocionId:o.promocionId||null}))};console.log("ENVIANDO PEDIDO:",i),this.http.post(`${this.apiUrl}/confirmar`,i,{headers:e}).subscribe({next:o=>{localStorage.setItem("pago_garantia",JSON.stringify({pedidoId:o.pedidoId,garantia:this.pedido.garantia,resto:this.pedido.resto,subtotal:this.pedido.subtotal})),alert("\xA1Pedido confirmado exitosamente!"),this.router.navigate(["/cliente/pago-garantia"])},error:o=>{console.error("Error:",o),alert("Error: "+(o.error?.message||"No se pudo confirmar el pedido"))}})}volver(){this.router.navigate(["/cliente/mi-pedido"])}static \u0275fac=function(e){return new(e||n)(x(pe),x(K))};static \u0275cmp=M({type:n,selectors:[["app-confirmar-pedido"]],decls:44,vars:9,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"card","shadow"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],["class","mb-3",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mb-2"],[1,"d-flex","justify-content-between","text-primary","fw-bold","mb-2"],[1,"d-flex","justify-content-between","text-muted","small","mb-3"],[1,"d-flex","justify-content-between"],[1,"text-success"],[1,"alert","alert-warning","mt-4"],[1,"d-grid","gap-2"],[1,"btn","btn-success","btn-lg",3,"click"],[1,"btn","btn-outline-secondary",3,"click"],[1,"mb-3"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),l(6,"Confirmar tu Pedido"),a()(),s(7,"div",6)(8,"h5"),l(9,"Productos:"),a(),_(10,H1,6,3,"div",7),b(11,"hr"),s(12,"div",8)(13,"span"),l(14,"Subtotal"),a(),s(15,"strong"),l(16),a()(),s(17,"div",9)(18,"span"),l(19),a(),s(20,"strong"),l(21),a()(),s(22,"div",10)(23,"span"),l(24,"Resto al recibir"),a(),s(25,"strong"),l(26),a()(),b(27,"hr"),s(28,"div",11)(29,"h5"),l(30,"Total del Pedido"),a(),s(31,"h5",12),l(32),a()(),s(33,"div",13)(34,"strong"),l(35),a(),l(36," para reservar tu pedido."),b(37,"br"),l(38),a(),s(39,"div",14)(40,"button",15),h("click",function(){return i.irAPago()}),l(41),a(),s(42,"button",16),h("click",function(){return i.volver()}),l(43," Volver al Carrito "),a()()()()()()()),e&2&&(c(10),p("ngForOf",i.pedido.items),c(6),g("S/ ",i.pedido.subtotal),c(3),g("Garant\xEDa (",i.pedido.porcentajeGarantia,"% - PAGO AHORA)"),c(2),g("S/ ",i.pedido.garantia),c(5),g("S/ ",i.pedido.resto),c(6),g("S/ ",i.pedido.subtotal),c(3),g("Debes pagar S/ ",i.pedido.garantia," ahora"),c(3),g(" El resto (S/ ",i.pedido.resto,") se paga al recibir. "),c(3),g(" Pagar Garant\xEDa de S/ ",i.pedido.garantia," "))},dependencies:[k,z],encapsulation:2})};var Dp=(n,t)=>({"btn-success":n,"btn-outline-secondary":t});function W1(n,t){if(n&1&&(s(0,"small",44),l(1),a()),n&2){let e=f().$implicit;c(),g(" ",e.nombrePropietario," ")}}function q1(n,t){if(n&1){let e=T();s(0,"div",37)(1,"div",38)(2,"h5",39)(3,"span",40),l(4),a()(),s(5,"img",41),h("click",function(){let o=C(e).$implicit,r=f();return y(r.abrirQr(o.imagenUrl))}),a(),s(6,"p",42),l(7),a(),_(8,W1,2,1,"small",43),a()()}if(n&2){let e=t.$implicit;c(4),g(" ",e.tipo," "),c(),p("alt",Pt("QR ",e.tipo))("src",e.imagenUrl,ve),c(2),g("+51 ",e.telefono),c(),p("ngIf",e.nombrePropietario)}}var Ta=class n{constructor(t,e){this.http=t;this.router=e}garantia=0;resto=0;pedidoId=null;qrList=[];qrAmpliado="";codigoOperacion="";metodoSeleccionado="yape";apiUrl=J.apiUrl;ngOnInit(){this.cargarDatosPedido(),this.cargarQrDesdeBackend()}cargarDatosPedido(){let t=localStorage.getItem("pago_garantia");if(!t){alert("No hay pedido pendiente"),this.router.navigate(["/cliente/mi-pedido"]);return}try{let e=JSON.parse(t);if(this.pedidoId=e.pedidoId||null,this.garantia=Number(e.garantia)||0,this.resto=Number(e.resto)||0,!this.pedidoId)throw new Error}catch{alert("Error en datos del pedido"),this.router.navigate(["/cliente/mi-pedido"])}}cargarQrDesdeBackend(){this.http.get(`${this.apiUrl}/config/qr/activos`).subscribe({next:t=>this.qrList=t,error:()=>alert("No se pudieron cargar los m\xE9todos de pago")})}confirmarPagoGarantia(){if(!this.codigoOperacion?.trim()){alert("Por favor ingresa el c\xF3digo de operaci\xF3n");return}if(!this.pedidoId){alert("Error: pedido no v\xE1lido");return}this.http.post(`${this.apiUrl}/api/pedidos/${this.pedidoId}/pago-garantia`,{codigoOperacion:this.codigoOperacion.trim(),metodo:this.metodoSeleccionado}).subscribe({next:()=>this.mostrarExito(),error:t=>{alert("Error: "+(t.error?.message||"Int\xE9ntalo m\xE1s tarde"))}})}abrirQr(t){this.qrAmpliado=t;let e=document.getElementById("qrModal");if(e){let i=window.bootstrap;new i.Modal(e).show()}}mostrarExito(){let t=document.getElementById("modalPagoExitoso");if(t){let e=window.bootstrap;new e.Modal(t).show()}localStorage.removeItem("pago_garantia")}static \u0275fac=function(e){return new(e||n)(x(K),x(pe))};static \u0275cmp=M({type:n,selectors:[["app-pago-garantia"]],decls:60,vars:20,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-lg-6","col-md-8"],[1,"card","shadow-lg","border-0","rounded-4","overflow-hidden"],[1,"card-body","text-center","p-5"],[1,"mb-4","text-primary","fw-bold"],[1,"bg-light","p-4","rounded-4","mb-5","shadow-sm"],[1,"text-success","fw-bold"],[1,"text-muted","mb-1"],[1,"text-muted","small"],[1,"row","justify-content-center","g-4","mb-5"],["class","col-6",4,"ngFor","ngForOf"],[1,"mb-4"],[1,"form-label","fw-bold"],["role","group",1,"btn-group","w-100"],["type","button",1,"btn","py-3","fw-bold",3,"click","ngClass"],["type","text","placeholder","Ej: 123456789","required","",1,"form-control","form-control-lg","text-center",3,"ngModelChange","ngModel"],[1,"btn","btn-success","btn-lg","w-100","py-4","fw-bold","fs-4","rounded-4","shadow",3,"click"],[1,"mt-4"],["routerLink","/cliente/mis-pedidos",1,"text-muted","small","text-decoration-none"],["id","qrModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content","bg-dark","border-0","rounded-4","overflow-hidden"],[1,"modal-header","border-0","justify-content-end","p-3"],["type","button","data-bs-dismiss","modal",1,"btn-close","btn-close-white"],[1,"modal-body","text-center","p-5"],[1,"img-fluid","rounded-4","border","border-5","border-white","shadow-lg",2,"max-height","75vh",3,"src"],[1,"text-white","mt-4","fw-bold","fs-3"],["id","modalPagoExitoso","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-0","shadow-lg","rounded-4"],[1,"bi","bi-check-circle-fill","text-success",2,"font-size","6rem"],[1,"fw-bold","text-success"],[1,"fs-3","mt-4","text-dark"],[1,"text-primary"],[1,"text-muted","fs-5"],["routerLink","/cliente/historial-pedidos","data-bs-dismiss","modal",1,"btn","btn-success","btn-lg","px-5","py-3","mt-3","rounded-4"],[1,"col-6"],[1,"text-center"],[1,"mb-3"],[1,"badge","bg-gradient","fs-5","px-4","py-2"],[1,"img-fluid","rounded-4","shadow-lg","qr-img",3,"click","src","alt"],[1,"mt-3","fw-bold","text-primary","fs-4"],["class","text-muted d-block",4,"ngIf"],[1,"text-muted","d-block"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),l(6,"Pagar Garant\xEDa"),a(),s(7,"div",6)(8,"h3",7),l(9),P(10,"number"),a(),s(11,"p",8),l(12,"Garant\xEDa a pagar ahora"),a(),s(13,"p",9),l(14),P(15,"number"),a()(),s(16,"div",10),_(17,q1,9,6,"div",11),a(),s(18,"div",12)(19,"label",13),l(20,"Selecciona el m\xE9todo que usaste"),a(),s(21,"div",14)(22,"button",15),h("click",function(){return i.metodoSeleccionado="yape"}),l(23," Yape "),a(),s(24,"button",15),h("click",function(){return i.metodoSeleccionado="plin"}),l(25," Plin "),a()()(),s(26,"div",12)(27,"label",13),l(28,"C\xF3digo de operaci\xF3n (requerido)"),a(),s(29,"input",16),ie("ngModelChange",function(r){return ne(i.codigoOperacion,r)||(i.codigoOperacion=r),r}),a()(),s(30,"button",17),h("click",function(){return i.confirmarPagoGarantia()}),l(31," \xA1YA PAGU\xC9 LA GARANT\xCDA! "),a(),s(32,"div",18)(33,"a",19),l(34," \u2190 Ver mis pedidos "),a()()()()()()(),s(35,"div",20)(36,"div",21)(37,"div",22)(38,"div",23),b(39,"button",24),a(),s(40,"div",25),b(41,"img",26),s(42,"p",27),l(43),a()()()()(),s(44,"div",28)(45,"div",29)(46,"div",30)(47,"div",25)(48,"div",12),b(49,"i",31),a(),s(50,"h2",32),l(51,"\xA1PAGO RECIBIDO!"),a(),s(52,"p",33),l(53," Gracias por confiar en "),s(54,"strong",34),l(55,"D'Juancito Tortas"),a()(),s(56,"p",35),l(57," En minutos te escribimos por WhatsApp para coordinar la entrega de tu torta perfecta "),a(),s(58,"button",36),l(59," Ver mis pedidos "),a()()()()()),e&2&&(c(9),g("S/ ",A(10,8,i.garantia,"1.2-2")),c(5),g("Resto al recibir: S/ ",A(15,11,i.resto,"1.2-2")),c(3),p("ngForOf",i.qrList),c(5),p("ngClass",rs(14,Dp,i.metodoSeleccionado==="yape",i.metodoSeleccionado!=="yape")),c(2),p("ngClass",rs(17,Dp,i.metodoSeleccionado==="plin",i.metodoSeleccionado!=="plin")),c(5),te("ngModel",i.codigoOperacion),c(12),p("src",i.qrAmpliado,ve),c(2),g("Escanea con ",i.qrList.length>1?"Yape o Plin":i.qrList[0]==null?null:i.qrList[0].tipo))},dependencies:[k,Pe,z,N,oe,Me,X,re,ln,Ie,xe],styles:[".bg-gradient[_ngcontent-%COMP%]{background:linear-gradient(45deg,#8b5cf6,#ec4899)!important;color:#fff}.qr-img[_ngcontent-%COMP%]{max-height:280px;cursor:zoom-in;transition:all .3s ease;border-radius:20px!important;box-shadow:0 15px 35px #00000040!important}.qr-img[_ngcontent-%COMP%]:hover{transform:scale(1.08);box-shadow:0 25px 50px #00000059!important}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#20c997)!important;border:none!important;transition:all .3s ease}.btn-success[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 25px #28a74566!important}#qrModal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fffffff2!important}"]})};var ka=class n{constructor(t){this.http=t}apiUrl=J.apiUrl+"/productos";apiRealizadosUrl=J.apiUrl+"/productos-realizados";obtenerPersonalizables(){return this.http.get(`${this.apiUrl}/personalizables`)}obtenerPredeterminados(){return this.http.get(`${this.apiUrl}/predeterminados`)}obtenerProductosRealizados(){return this.http.get(this.apiRealizadosUrl)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function Z1(n,t){if(n&1){let e=T();s(0,"div",19)(1,"button",20),h("click",function(){let o=C(e).$implicit,r=f();return y(r.aplicarFiltro(o))}),l(2),a()()}if(n&2){let e=t.$implicit,i=f();c(),Z("active",i.filtroSeleccionado===e),c(),g(" ",i.getNombreFiltro(e)," ")}}function K1(n,t){if(n&1){let e=T();s(0,"div",21),h("click",function(){let o=C(e).$implicit,r=f();return y(r.mostrarZoom(o))}),b(1,"img",22),s(2,"div",23)(3,"h3"),l(4),a()()()}if(n&2){let e=t.$implicit;c(),p("src",e.imagenUrl,ve)("alt",e.nombre),c(3),S(e.nombre)}}function J1(n,t){if(n&1&&(s(0,"div",24),l(1),a()),n&2){let e=f();c(),g(' No se encontraron productos en la categor\xEDa "',e.getNombreFiltro(e.filtroSeleccionado),'". ')}}function X1(n,t){if(n&1){let e=T();s(0,"nav",25)(1,"ul",26)(2,"li",27)(3,"a",28),h("click",function(o){C(e);let r=f();return r.irAPagina(r.paginaActual-1),y(o.preventDefault())}),l(4,"Anterior"),a()(),s(5,"li",29)(6,"span",30),l(7),a()(),s(8,"li",27)(9,"a",28),h("click",function(o){C(e);let r=f();return r.irAPagina(r.paginaActual+1),y(o.preventDefault())}),l(10,"Siguiente"),a()()()()}if(n&2){let e=f();c(2),Z("disabled",e.paginaActual===1),c(5),Oe("",e.paginaActual," de ",e.totalPaginas),c(),Z("disabled",e.paginaActual===e.totalPaginas)}}var Vo=class n{constructor(t,e){this.location=t;this.ProductoFiltro=e}listaCompletaProductos=[];productosFiltrados=[];filtroSeleccionado="todos";categoriasDisponibles=["todos","torta","postre","bocadito"];productosMostrados=[];paginaActual=1;productosPorPagina=5;totalPaginas=0;imagenZoom="";nombreZoom="";ngOnInit(){this.cargarProductosRealizados()}cargarProductosRealizados(){this.ProductoFiltro.obtenerProductosRealizados().subscribe({next:t=>{this.listaCompletaProductos=t,this.aplicarFiltro("todos")},error:t=>{console.error("Error al cargar productos realizados:",t)}})}volver(){this.location.back()}aplicarFiltro(t){this.filtroSeleccionado=t,t==="todos"?this.productosFiltrados=[...this.listaCompletaProductos]:this.productosFiltrados=this.listaCompletaProductos.filter(e=>e.categoria===t),this.paginaActual=1,this.calcularPaginacion(),this.actualizarProductosMostrados()}getNombreFiltro(t){switch(t){case"torta":return"Tortas";case"postre":return"Postres";case"bocadito":return"Bocaditos";case"otros":return"Otros";case"todos":default:return"Todos"}}calcularPaginacion(){this.totalPaginas=Math.ceil(this.productosFiltrados.length/this.productosPorPagina)}actualizarProductosMostrados(){let t=(this.paginaActual-1)*this.productosPorPagina,e=t+this.productosPorPagina;this.productosMostrados=this.productosFiltrados.slice(t,e)}irAPagina(t){t>=1&&t<=this.totalPaginas&&(this.paginaActual=t,this.actualizarProductosMostrados())}mostrarZoom(t){this.imagenZoom=t.imagenUrl,this.nombreZoom=t.nombre}static \u0275fac=function(e){return new(e||n)(x(mt),x(ka))};static \u0275cmp=M({type:n,selectors:[["app-productos-realizados"]],decls:25,vars:7,consts:[[1,"galeria-productos"],[1,"header-container"],[1,"btn-volver",3,"click"],[1,"arrow"],[1,"subtitle"],[1,"filtros-container"],["class","filtro-item",4,"ngFor","ngForOf"],[1,"productos-grid"],["class","producto-card","data-bs-toggle","modal","data-bs-target","#zoomModal",3,"click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],["class","pagination-container","aria-label","Paginaci\xF3n de productos",4,"ngIf"],["id","zoomModal","tabindex","-1","aria-labelledby","zoomModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","zoomModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","text-center"],[1,"img-fluid",3,"src","alt"],[1,"filtro-item"],[1,"btn-filtro",3,"click"],["data-bs-toggle","modal","data-bs-target","#zoomModal",1,"producto-card",3,"click"],[3,"src","alt"],[1,"card-info"],[1,"no-results"],["aria-label","Paginaci\xF3n de productos",1,"pagination-container"],[1,"pagination"],[1,"page-item"],["href","#",1,"page-link",3,"click"],[1,"page-item","active"],[1,"page-link"]],template:function(e,i){e&1&&(s(0,"section",0)(1,"div",1)(2,"button",2),h("click",function(){return i.volver()}),s(3,"span",3),l(4,"\u2190"),a(),l(5," Volver a la p\xE1gina anterior "),a(),s(6,"h2"),l(7,"Galer\xEDa de Productos Realizados"),a(),s(8,"p",4),l(9,"Insp\xEDrate con las creaciones que hicimos para nuestros clientes."),a()(),s(10,"div",5),_(11,Z1,3,3,"div",6),a(),s(12,"div",7),_(13,K1,5,3,"div",8),a(),_(14,J1,2,1,"div",9)(15,X1,11,6,"nav",10),a(),s(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"h5",15),l(21),a(),b(22,"button",16),a(),s(23,"div",17),b(24,"img",18),a()()()()),e&2&&(c(11),p("ngForOf",i.categoriasDisponibles),c(2),p("ngForOf",i.productosMostrados),c(),p("ngIf",i.productosFiltrados.length===0),c(),p("ngIf",i.totalPaginas>1),c(6),S(i.nombreZoom),c(3),p("src",i.imagenZoom,ve)("alt",i.nombreZoom))},dependencies:[k,z,N,Me],styles:[".galeria-productos[_ngcontent-%COMP%]{padding:40px 20px;max-width:1200px;margin:0 auto;font-family:Arial,sans-serif}.header-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.header-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:38px;color:#333;margin-top:10px}.header-container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:18px;color:#777}.btn-volver[_ngcontent-%COMP%]{background:none;border:none;color:#eb7221;font-size:16px;cursor:pointer;padding:5px 0;display:block;margin:0 auto 20px 0;transition:color .2s}.btn-volver[_ngcontent-%COMP%]:hover{color:#c95d12}.btn-volver[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{margin-right:5px;font-weight:700}.filtros-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-bottom:40px;flex-wrap:wrap}.btn-filtro[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid #eb7221;border-radius:25px;background-color:#fff;color:#eb7221;font-weight:700;cursor:pointer;transition:background-color .3s,color .3s}.btn-filtro.active[_ngcontent-%COMP%]{background-color:#eb7221;color:#fff}.btn-filtro[_ngcontent-%COMP%]:hover:not(.active){background-color:#fff0e9}.productos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:30px}.producto-card[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden;box-shadow:0 4px 15px #0000001a;transition:transform .3s ease}.producto-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 20px #00000026}.producto-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover}.card-info[_ngcontent-%COMP%]{padding:15px;text-align:center;background-color:#fff}.card-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;margin:0;color:#333}.no-results[_ngcontent-%COMP%]{text-align:center;padding:50px;font-size:20px;color:#eb7221;background-color:#f7f7f7;border-radius:8px;margin-top:40px}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:40px}.pagination[_ngcontent-%COMP%]{display:flex;padding-left:0;list-style:none;border-radius:.25rem}.page-item[_ngcontent-%COMP%]{margin:0 5px}.page-link[_ngcontent-%COMP%]{position:relative;display:block;padding:.5rem .75rem;text-decoration:none;border:1px solid #dee2e6;border-radius:5px;color:#eb7221}.page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{z-index:3;color:#fff;background-color:#eb7221;border-color:#eb7221}.page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#6c757d;pointer-events:none;background-color:#fff;border-color:#dee2e6}.page-link[_ngcontent-%COMP%]:hover{background-color:#fff0e9}"]})};var Fa=class n{constructor(t){this.http=t}apiUrl=`${J.apiUrl}/temporada`;getTemporadasActivas(){return this.http.get(`${this.apiUrl}/activas`)}obtenerTodasLasTemporadas(){return this.http.get(`${this.apiUrl}/todas`)}crearOActualizarTemporada(t){return this.http.post(this.apiUrl,t)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var e_=n=>["../ofertas",n];function t_(n,t){if(n&1&&(s(0,"option",15),l(1),P(2,"titlecase"),a()),n&2){let e=t.$implicit;p("value",e),c(),S(le(2,2,e))}}function n_(n,t){if(n&1){let e=T();s(0,"div",17)(1,"input",18),ie("ngModelChange",function(o){C(e);let r=f(2);return ne(r.filtroTemporadaId,o)||(r.filtroTemporadaId=o),y(o)}),h("change",function(){C(e);let o=f(2);return y(o.aplicarFiltros())}),a(),s(2,"label",19),l(3),a()()}if(n&2){let e=t.$implicit,i=f(2);c(),p("value",e.temporadaId),te("ngModel",i.filtroTemporadaId),c(2),S(e.nombre)}}function i_(n,t){if(n&1&&(s(0,"div"),_(1,n_,4,3,"div",16),a()),n&2){let e=f();c(),p("ngForOf",e.temporadasActivas)}}function o_(n,t){n&1&&(s(0,"p",20),l(1,"No hay temporadas especiales vigentes."),a())}function r_(n,t){if(n&1&&(s(0,"div",22)(1,"div",23),b(2,"img",24),s(3,"div",25)(4,"h5",26),l(5),a(),s(6,"p",27),l(7),a(),s(8,"div",28)(9,"p",29),b(10,"i",30),l(11),a()()(),s(12,"div",31)(13,"a",32),l(14,"Ver Detalles"),a()()()()),n&2){let e=t.$implicit;c(2),p("alt",Pt("Imagen de ",e.titulo))("src",e.imagenUrl||"assets/default-promo.png",ve),c(3),S(e.titulo),c(2),S(e.descripcion),c(4),g(" \xA1",e.descuento,"% OFF! "),c(2),p("routerLink",Bt(7,e_,e.promocionId))}}function a_(n,t){if(n&1&&(s(0,"div",3),_(1,r_,15,9,"div",21),a()),n&2){let e=f();c(),p("ngForOf",e.promocionesFiltradas)}}function s_(n,t){n&1&&(s(0,"div",33)(1,"h4",34),l(2,"Sin resultados \u{1F641}"),a(),s(3,"p"),l(4,"No encontramos ofertas activas que coincidan con los criterios de b\xFAsqueda."),a()())}var jo=class n{constructor(t,e){this.promocionService=t;this.temporadaService=e}todasLasPromociones=[];temporadasActivas=[];promocionesFiltradas=[];filtroCategoria="todas";filtroTemporadaId=null;categoriasDisponibles=["torta","postre","bocadito"];ngOnInit(){this.cargarDatosIniciales()}cargarDatosIniciales(){this.promocionService.getPromocionesActivas().subscribe(t=>{this.todasLasPromociones=t,this.promocionesFiltradas=t},t=>console.error("Error al cargar promociones:",t)),this.temporadaService.getTemporadasActivas().subscribe(t=>{this.temporadasActivas=t},t=>console.error("Error al cargar temporadas:",t))}aplicarFiltros(){let t=this.todasLasPromociones;this.filtroTemporadaId!==null&&(t=t.filter(e=>e.temporadaId===this.filtroTemporadaId)),this.filtroCategoria!=="todas"&&(t=t.filter(e=>e.promocionProductos?.some(i=>i.producto.categoria.toLowerCase()===this.filtroCategoria.toLowerCase()))),this.promocionesFiltradas=t}limpiarFiltroTemporada(){this.filtroTemporadaId=null,this.aplicarFiltros()}static \u0275fac=function(e){return new(e||n)(x(Zt),x(Fa))};static \u0275cmp=M({type:n,selectors:[["app-promociones-temporadas"]],decls:26,vars:6,consts:[["noTemporadas",""],["noResultados",""],[1,"container","my-5"],[1,"row"],[1,"col-md-3"],[1,"mb-3"],[1,"card","p-3","mb-4","shadow-sm"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value","todas"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[1,"btn","btn-sm","btn-outline-secondary","mt-3",3,"click"],[1,"col-md-9"],[1,"mb-4"],["class","row",4,"ngIf","ngIfElse"],[3,"value"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio","name","filtroTemporada",1,"form-check-input",3,"ngModelChange","change","value","ngModel"],[1,"form-check-label"],[1,"text-muted","small"],["class","col-lg-4 col-md-6 mb-4",4,"ngFor","ngForOf"],[1,"col-lg-4","col-md-6","mb-4"],[1,"card","h-100","shadow-sm","border-primary"],[1,"card-img-top","promo-image",3,"src","alt"],[1,"card-body"],[1,"card-title","text-primary"],[1,"card-text","small","text-muted"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"text-success","fw-bold","m-0"],[1,"bi","bi-tag-fill"],[1,"card-footer","bg-light","border-top-0"],[1,"btn","btn-warning","w-100","fw-bold",3,"routerLink"],["role","alert",1,"alert","alert-info"],[1,"alert-heading"]],template:function(e,i){if(e&1){let o=T();s(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),l(4,"Filtros \u{1F370}"),a(),s(5,"div",6)(6,"h5"),l(7,"Categor\xEDa de Producto"),a(),s(8,"select",7),ie("ngModelChange",function(d){return C(o),ne(i.filtroCategoria,d)||(i.filtroCategoria=d),y(d)}),h("change",function(){return C(o),y(i.aplicarFiltros())}),s(9,"option",8),l(10,"Todas las categor\xEDas"),a(),_(11,t_,3,4,"option",9),a()(),s(12,"div",6)(13,"h5"),l(14,"Especiales de Temporada"),a(),_(15,i_,2,1,"div",10)(16,o_,2,0,"ng-template",null,0,en),s(18,"button",11),h("click",function(){return C(o),y(i.limpiarFiltroTemporada())}),l(19,"Limpiar Filtro"),a()()(),s(20,"div",12)(21,"h1",13),l(22,"\xA1Super Ofertas y Novedades!"),a(),_(23,a_,2,1,"div",14)(24,s_,5,0,"ng-template",null,1,en),a()()()}if(e&2){let o=Nt(17),r=Nt(25);c(8),te("ngModel",i.filtroCategoria),c(3),p("ngForOf",i.categoriasDisponibles),c(4),p("ngIf",i.temporadasActivas.length>0)("ngIfElse",o),c(8),p("ngIf",i.promocionesFiltradas.length>0)("ngIfElse",r)}},dependencies:[k,z,N,Me,tt,nt,X,et,Wn,re,Ie,oe,_e],encapsulation:2})};function l_(n,t){n&1&&(s(0,"div",6)(1,"p",7),l(2,"Cargando promoci\xF3n..."),a()())}function c_(n,t){if(n&1&&(s(0,"div",8)(1,"h2"),l(2,"\xA1Ups! Algo sali\xF3 mal"),a(),s(3,"p"),l(4),a(),s(5,"a",9),l(6,"Volver a Promociones"),a()()),n&2){let e=f();c(4),S(e.error)}}function d_(n,t){if(n&1&&(s(0,"div",29),l(1),a()),n&2){let e=f(2);c(),g("",e.porcentajeDescuento(),"% OFF")}}function u_(n,t){n&1&&(s(0,"div",30),l(1," \xA1100% GRATIS! "),a())}function p_(n,t){if(n&1&&(s(0,"div",31)(1,"strong"),l(2,"Condici\xF3n:"),a(),l(3," Aplica solo en pedidos mayores a "),s(4,"strong",32),l(5),P(6,"number"),a()()),n&2){let e=f(2);c(5),g("S/ ",A(6,1,e.promocion.montoMinimo,"1.2-2"))}}function m_(n,t){n&1&&(s(0,"div",45)(1,"h3",46),l(2,"\xA1GRATIS!"),a(),s(3,"span",47),l(4,"100% OFF"),a()())}function f_(n,t){if(n&1&&(s(0,"div",45)(1,"h4",48),l(2),P(3,"number"),a(),s(4,"span",49),l(5),a()()),n&2){let e=f().$implicit,i=f(3);c(2),g(" S/ ",A(3,2,i.precioConDescuento(e.producto.precioBase),"1.2-2")," "),c(3),g(" -",(i.promocion.descuento*100).toFixed(0),"% OFF ")}}function g_(n,t){if(n&1&&(s(0,"small",50),l(1),P(2,"number"),a()),n&2){let e=f(4);c(),g(" Agrega m\xE1s productos (m\xEDnimo S/ ",A(2,1,e.promocion.montoMinimo??0,"1.2-2"),") ")}}function h_(n,t){if(n&1){let e=T();s(0,"div",24)(1,"div",37)(2,"img",38),h("click",function(){let o=C(e).$implicit,r=f(3);return y(r.irAProducto(o.producto.productoId))}),a(),s(3,"h5",39),h("click",function(){let o=C(e).$implicit,r=f(3);return y(r.irAProducto(o.producto.productoId))}),l(4),a(),s(5,"div",40)(6,"p",41)(7,"del"),l(8),P(9,"number"),a()(),_(10,m_,5,0,"div",42)(11,f_,6,5,"div",42),s(12,"button",43),h("click",function(){let o=C(e).$implicit,r=f(3);return y(r.agregarAlCarrito(o.producto))}),s(13,"strong"),l(14,"A\xF1adir al Carrito"),a()(),_(15,g_,3,4,"small",44),a()()()}if(n&2){let e=t.$implicit,i=f(3);c(2),p("src",e.producto.imagenUrl,ve)("alt",e.producto.nombre),c(2),g(" ",e.producto.nombre," "),c(4),g("S/ ",A(9,8,e.producto.precioBase,"1.2-2")),c(2),p("ngIf",i.promocion.descuento>=1),c(),p("ngIf",i.promocion.descuento>0&&i.promocion.descuento<1),c(),p("disabled",(i.promocion.montoMinimo??0)>0&&i.subtotalCarritoActual()<(i.promocion.montoMinimo??0)),c(3),p("ngIf",(i.promocion.montoMinimo??0)>0&&i.subtotalCarritoActual()<(i.promocion.montoMinimo??0))}}function v_(n,t){if(n&1&&(s(0,"div",33)(1,"div",20)(2,"h2",34),l(3,"Productos con Descuento"),a(),s(4,"div",35),_(5,h_,16,11,"div",36),a()()()),n&2){let e=f(2);c(5),p("ngForOf",e.promocion.promocionProductos)}}function b_(n,t){n&1&&(s(0,"div",6)(1,"p",22),l(2,"Esta promoci\xF3n aplica autom\xE1ticamente en el carrito"),a(),s(3,"a",51),l(4," Ir al Cat\xE1logo "),a()())}function __(n,t){if(n&1&&(s(0,"div",10)(1,"header",11)(2,"div",12)(3,"h1",13),l(4),a(),_(5,d_,2,1,"div",14)(6,u_,2,0,"div",15),a()(),s(7,"div",16)(8,"div",17)(9,"div",18)(10,"div",19)(11,"div",20)(12,"h2",21),l(13,"Detalles de la Oferta"),a(),s(14,"p",22),l(15),a(),s(16,"div",23)(17,"div",24)(18,"p",25)(19,"strong"),l(20,"V\xE1lida desde:"),a()(),s(21,"p",26),l(22),a()(),s(23,"div",24)(24,"p",25)(25,"strong"),l(26,"V\xE1lida hasta:"),a()(),s(27,"p",26),l(28),a()()(),_(29,p_,7,4,"div",27),a()(),_(30,v_,6,1,"div",28)(31,b_,5,0,"div",3),a()()()()),n&2){let e=f();c(),ni("background-image","url("+(e.promocion.imagenUrl||"assets/imagenes/default-promo.jpg")+")"),c(3),S(e.promocion.titulo),c(),p("ngIf",e.promocion.descuento>0),c(),p("ngIf",e.promocion.descuento>=1),c(9),S(e.promocion.descripcion),c(7),S(e.formatearFecha(e.promocion.fechaInicio)),c(6),S(e.formatearFecha(e.promocion.fechaFin)),c(),p("ngIf",e.promocion.montoMinimo&&e.promocion.montoMinimo>0),c(),p("ngIf",e.promocion.promocionProductos==null?null:e.promocion.promocionProductos.length),c(),p("ngIf",!(e.promocion.promocionProductos!=null&&e.promocion.promocionProductos.length))}}var zo=class n{constructor(t,e,i,o,r,d){this.location=t;this.route=e;this.promocionService=i;this.carritoService=o;this.router=r;this.datePipe=d}promocionId=null;promocion=null;cargando=!0;error=null;ngOnInit(){this.route.paramMap.subscribe(t=>{let e=t.get("id");this.promocionId=e?+e:null,this.promocionId?this.cargarDetallePromocion(this.promocionId):(this.cargando=!1,this.error="Promoci\xF3n no encontrada")})}volver(){this.location.back()}cargarDetallePromocion(t){this.cargando=!0,this.promocionService.getPromocionById(t).subscribe({next:e=>{this.promocion=e,this.cargando=!1},error:()=>{this.error="No se pudo cargar la promoci\xF3n",this.cargando=!1}})}formatearFecha(t){return t?this.datePipe.transform(t,"dd MMMM yyyy",void 0,"es-PE")||"Fecha inv\xE1lida":"Fecha no disponible"}porcentajeDescuento(){if(!this.promocion?.descuento)return 0;let t=this.promocion.descuento;return t>1?Math.round(t):Math.round(t*100)}precioConDescuento(t){if(!this.promocion?.descuento||t<=0)return t;let e=this.promocion.descuento,i=e>1?e/100:e;return i<=0||i>=1?t:Math.max(0,t*(1-i))}subtotalCarritoActual(){return this.carritoService.calcularTotal()}agregarAlCarrito(t){if(!t||!this.promocion)return;let e=this.promocion.descuento??0,i=e>1?e/100:e,o=e>=100||i>=1,r=o?0:Math.max(0,t.precioBase*(1-i)),d={productoId:t.productoId,nombre:t.nombre??"Producto sin nombre",imagenUrl:t.imagenUrl??"",precioBase:t.precioBase??0,precioUnitario:r,cantidad:1,subtotal:r,promocionId:this.promocion.promocionId??null,nombrePromocion:this.promocion.titulo??null,descuentoAplicado:i,esOfertaEspecial:o};this.carritoService.agregarAlCarrito(d),o?alert(`\xA1${t.nombre} A\xD1ADIDO COMO REGALO 100% GRATIS!`):i>0&&i<1?alert(`${t.nombre} a\xF1adido con ${this.porcentajeDescuento()}% OFF`):alert(`${t.nombre} a\xF1adido al carrito`)}irAProducto(t){this.router.navigate(["/producto",t])}static \u0275fac=function(e){return new(e||n)(x(mt),x(ct),x(Zt),x(Ge),x(pe),x(ce))};static \u0275cmp=M({type:n,selectors:[["app-detalle-promocion"]],features:[Ee([ce])],decls:8,vars:3,consts:[[1,"detalle-promocion-container"],[1,"btn-volver",3,"click"],[1,"arrow"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger text-center",4,"ngIf"],["class","detalle-card",4,"ngIf"],[1,"text-center","py-5"],[1,"fs-4"],[1,"alert","alert-danger","text-center"],["routerLink","/promociones",1,"btn","btn-primary"],[1,"detalle-card"],[1,"detalle-header"],[1,"overlay","text-center"],[1,"display-5","fw-bold"],["class","pill-descuento fs-3",4,"ngIf"],["class","pill-regalo fs-3",4,"ngIf"],[1,"container","my-5"],[1,"row"],[1,"col-lg-8","mx-auto"],[1,"card","shadow-sm","mb-4"],[1,"card-body"],[1,"card-title"],[1,"lead"],[1,"row","mt-4"],[1,"col-md-6"],[1,"mb-2"],[1,"fs-5","text-primary"],["class","alert alert-info mt-4",4,"ngIf"],["class","card shadow-sm",4,"ngIf"],[1,"pill-descuento","fs-3"],[1,"pill-regalo","fs-3"],[1,"alert","alert-info","mt-4"],[1,"text-success"],[1,"card","shadow-sm"],[1,"card-title","mb-4"],[1,"row","g-4"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"producto-item-card","border","rounded","p-3","h-100","d-flex","flex-column"],[1,"img-fluid","rounded","mb-3",2,"height","200px","object-fit","cover",3,"click","src","alt"],[1,"text-center","mb-3",3,"click"],[1,"text-center","mt-auto"],[1,"text-muted"],["class","mb-3",4,"ngIf"],[1,"btn","btn-success","w-100","mt-3",3,"click","disabled"],["class","text-muted d-block mt-2",4,"ngIf"],[1,"mb-3"],[1,"text-success","fw-bold"],[1,"badge","bg-success","fs-6"],[1,"text-danger","fw-bold"],[1,"badge","bg-danger"],[1,"text-muted","d-block","mt-2"],["routerLink","/catalogo",1,"btn","btn-lg","btn-primary"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"button",1),h("click",function(){return i.volver()}),s(2,"span",2),l(3,"\u2190"),a(),l(4," Volver "),a(),_(5,l_,3,0,"div",3)(6,c_,7,1,"div",4)(7,__,32,11,"div",5),a()),e&2&&(c(5),p("ngIf",i.cargando),c(),p("ngIf",i.error&&!i.cargando),c(),p("ngIf",i.promocion&&!i.cargando))},dependencies:[k,z,N,oe,xe],styles:[".detalle-promocion-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;font-family:Arial,sans-serif}.detalle-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 30px #0000001a;overflow:hidden}.detalle-header[_ngcontent-%COMP%]{height:350px;background-size:cover;background-position:center;position:relative;display:flex;align-items:center;justify-content:center;text-align:center}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0006;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px}.detalle-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.8rem;margin-bottom:15px;text-shadow:2px 2px 5px rgba(0,0,0,.8)}.pill-descuento[_ngcontent-%COMP%]{background:#e91e63;color:#fff;padding:8px 20px;border-radius:20px;font-size:1.4rem;font-weight:700;box-shadow:0 4px 10px #0000004d}.detalle-body[_ngcontent-%COMP%]{padding:30px}.info-principal[_ngcontent-%COMP%]{margin-bottom:30px}.info-principal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:1.8rem;margin-bottom:15px;border-bottom:2px solid #f0f0f0;padding-bottom:10px}.fechas[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:#555;font-size:1rem}.productos-incluidos[_ngcontent-%COMP%]{margin-top:40px;padding-top:20px;border-top:1px dashed #ccc}.productos-incluidos[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:1.6rem;margin-bottom:20px}.producto-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.producto-item[_ngcontent-%COMP%]{background:#f9f9f9;border:1px solid #eee;border-radius:8px;padding:15px;display:flex;gap:15px;align-items:center;transition:transform .2s}.producto-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #0000001a}.producto-img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border-radius:4px}.producto-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;color:#555;margin-bottom:5px}.precio-original[_ngcontent-%COMP%]{text-decoration:none;color:#999;font-size:.9rem}.btn-ir-tienda[_ngcontent-%COMP%]{display:inline-block;background-color:#ff6f61;color:#fff;padding:12px 30px;border-radius:25px;text-decoration:none;font-weight:700;margin-top:30px;transition:background-color .3s}.btn-ir-tienda[_ngcontent-%COMP%]:hover{background-color:#e65c50}.loading-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{text-align:center;padding:40px;border:1px solid #ff6f61;border-radius:8px;background:#fff0f0;color:#ff6f61;margin-top:30px}.error-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#c0392b}.btn-back[_ngcontent-%COMP%]{color:#ff6f61;text-decoration:underline;margin-top:10px;display:block}.btn-volver[_ngcontent-%COMP%]{background:none;border:none;color:#eb7221;font-size:16px;cursor:pointer;padding:5px 0;display:block;margin:0 auto 30px 0;transition:color .2s}@media (max-width: 768px){.detalle-header[_ngcontent-%COMP%]{height:250px}.detalle-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.pill-descuento[_ngcontent-%COMP%]{font-size:1.2rem}.detalle-body[_ngcontent-%COMP%]{padding:20px}.producto-item[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.producto-info[_ngcontent-%COMP%]{text-align:center}}.precios[_ngcontent-%COMP%]{margin-top:8px}.precio-original[_ngcontent-%COMP%]   del[_ngcontent-%COMP%]{color:#999;font-size:.9rem}.precio-descuento[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#e91e63;font-size:1.3rem}.ahorro[_ngcontent-%COMP%]{background:#e91e63;color:#fff;font-size:.7rem;padding:2px 6px;border-radius:4px;margin-left:8px}.btn-agregar-carrito[_ngcontent-%COMP%]{margin-top:10px;background:#ff6f61;color:#fff;border:none;padding:10px 20px;border-radius:25px;cursor:pointer;font-weight:700;transition:all .3s}.btn-agregar-carrito[_ngcontent-%COMP%]:hover{background:#e65c50;transform:scale(1.05)}"]})};var Ra=class n{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}static \u0275fac=function(e){return new(e||n)(x(Ts,16))};static \u0275pipe=kn({name:"urlSegura",type:n,pure:!0})};var Na=class n{constructor(t){this.http=t}apiUrl=J.apiUrl+"/config-tienda";obtenerConfig(){return this.http.get(this.apiUrl)}static \u0275fac=function(e){return new(e||n)(F(K))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function C_(n,t){if(n&1&&(s(0,"div",26)(1,"label",20),l(2,"Direcci\xF3n de entrega"),a(),b(3,"input",27),s(4,"small",28),l(5,"Tu direcci\xF3n guardada: "),s(6,"strong"),l(7),a()()()),n&2){let e=f();c(7),S((e.usuario==null?null:e.usuario.direccion)||"No registrada")}}function y_(n,t){if(n&1&&(s(0,"div",29),b(1,"i",30),s(2,"h4",31),l(3),a(),s(4,"p",12),l(5),a(),s(6,"p",28),l(7),a(),s(8,"div",32),b(9,"iframe",33),P(10,"urlSegura"),a()()),n&2){let e=f();c(3),S(e.tienda.nombreTienda),c(2),S(e.tienda.direccion),c(2),S(e.tienda.referencia),c(2),p("src",le(10,4,e.tienda.googleMapsEmbed),ac)}}var Uo=class n{constructor(t,e,i,o,r,d){this.fb=t;this.auth=e;this.pedidoService=i;this.tiendaService=o;this.router=r;this.location=d}entregaForm;usuario=null;tortaPersonalizada=null;tienda={nombreTienda:"Cargando...",direccion:"Av. Larco 123, Miraflores",referencia:"Frente al Parque Kennedy",telefono:"999 999 999",googleMapsEmbed:"",latitud:-12.130022,longitud:-77.030722};ngOnInit(){if(!this.auth.estaLogueado()){this.router.navigate(["/iniciar-sesion"],{queryParams:{returnUrl:"/cliente/entrega"}});return}this.usuario=this.auth.obtenerUsuarioActual(),this.tiendaService.obtenerConfig().subscribe({next:e=>this.tienda=e,error:()=>console.log("Tienda no cargada, usando valores por defecto")});let t=localStorage.getItem("torta_pendiente");if(!t){alert("No hay torta seleccionada"),this.router.navigate(["/cliente/personalizar-torta"]);return}this.tortaPersonalizada=JSON.parse(t),localStorage.removeItem("torta_pendiente"),this.entregaForm=this.fb.group({metodo:["delivery",$.required],direccionEntrega:[this.usuario?.direccion||"",$.required],referencia:[""],fechaEntrega:["",$.required]}),this.entregaForm.get("metodo")?.valueChanges.subscribe(e=>{let i=this.entregaForm.get("direccionEntrega");e==="recojo"?(i?.clearValidators(),i?.setValue(this.tienda.direccion)):i?.setValidators($.required),i?.updateValueAndValidity()})}onSubmit(){if(this.entregaForm.invalid||!this.tortaPersonalizada)return;let t=this.entregaForm.value,e=this.tortaPersonalizada.adicionales||[],i={productoId:null,cantidad:1,precioUnitario:Number(this.tortaPersonalizada.precioCalculado?.toFixed(2)||0),subtotal:Number(this.tortaPersonalizada.precioCalculado?.toFixed(2)||0),promocionId:null,personalizacion:{descripcionExtra:this.tortaPersonalizada.descripcionCompleta||"Torta personalizada",costoAdicional:this.tortaPersonalizada.costoAdicionales||0,adicionalesSeleccionados:e.map(r=>r.adicionalId).filter(r=>r!=null)}},o={usuarioId:this.usuario.usuarioId,nota:`Torta Personalizada - ${t.metodo==="recojo"?"RECOJO EN TIENDA":"DELIVERY"}
Fecha: ${t.fechaEntrega}
`+(t.metodo==="delivery"?`Direcci\xF3n: ${t.direccionEntrega}
Referencia: ${t.referencia||"Sin referencia"}`:`Recojo en: ${this.tienda.direccion}`),detalles:[i],subtotal:Number(this.tortaPersonalizada.precioCalculado?.toFixed(2)||0),total:Number(this.tortaPersonalizada.precioCalculado?.toFixed(2)||0),garantiaPagada:0,resto:Number(this.tortaPersonalizada.precioCalculado?.toFixed(2)||0)};console.log("PEDIDO ENVIADO:",JSON.stringify(o,null,2)),this.pedidoService.crear(o).subscribe({next:r=>{let d={pedidoId:r.pedidoId,direccionEntrega:t.metodo==="recojo"?this.tienda.direccion:t.direccionEntrega,referencia:t.referencia||null,fechaEntrega:t.fechaEntrega,metodo:t.metodo.toUpperCase(),estado:"PENDIENTE"};this.pedidoService.crearEntrega(d).subscribe({next:()=>{localStorage.removeItem("torta_pendiente"),localStorage.setItem("pedido_actual_id",r.pedidoId.toString()),localStorage.setItem("pago_garantia",JSON.stringify({garantia:0,resto:this.tortaPersonalizada.precioCalculado,subtotal:this.tortaPersonalizada.precioCalculado})),this.router.navigate(["/cliente/pago-garantia"])},error:u=>{console.error("Error entrega:",u),alert("Error al guardar datos de entrega")}})},error:r=>{console.error("Error al crear pedido:",r),alert("Error al crear el pedido: "+(r.error?.mensaje||"Intenta de nuevo"))}})}regresar(){this.location.back()}static \u0275fac=function(e){return new(e||n)(x(it),x(de),x(Tt),x(Na),x(pe),x(mt))};static \u0275cmp=M({type:n,selectors:[["app-entrega"]],decls:46,vars:12,consts:[[1,"contenedor-entrega"],[1,"text-center","fw-bold","text-primary","mb-4"],[1,"text-center","text-muted","mb-5"],[1,"card","sombra","mx-auto",2,"max-width","900px"],[1,"card-body","p-5"],[3,"ngSubmit","formGroup"],[1,"mb-5"],[1,"fw-bold","mb-4"],[1,"row","g-4"],[1,"col-md-6"],["type","radio","value","delivery","formControlName","metodo",1,"btn-check"],[1,"bi","bi-truck","fs-1","text-primary","mb-3"],[1,"fw-bold"],[1,"small","text-muted"],["type","radio","value","recojo","formControlName","metodo",1,"btn-check"],[1,"bi","bi-shop","fs-1","text-success","mb-3"],[1,"small","fw-bold"],["class","mb-4 animar",4,"ngIf"],["class","text-center py-5 bg-light rounded-4 animar",4,"ngIf"],[1,"mb-4"],[1,"form-label","fw-bold"],["type","text","formControlName","referencia","placeholder","Ej: Casa color crema, port\xF3n negro",1,"form-control"],["type","datetime-local","formControlName","fechaEntrega","required","",1,"form-control","form-control-lg"],["type","submit",1,"btn","btn-success","btn-lg","w-100","py-4","rounded-pill","fw-bold","sombra-boton"],[1,"text-center","mt-3"],["routerLink","/cliente/personalizar-torta",1,"text-muted","small"],[1,"mb-4","animar"],["type","text","formControlName","direccionEntrega","placeholder","Ej: Jr. Los Rosales 456, Surco",1,"form-control","form-control-lg"],[1,"text-muted"],[1,"text-center","py-5","bg-light","rounded-4","animar"],[1,"bi","bi-geo-alt-fill","text-success","fs-1","mb-3"],[1,"text-success","fw-bold"],[1,"ratio","ratio-16x9","rounded-4","overflow-hidden","shadow","mt-4"],["allowfullscreen","","loading","lazy",3,"src"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h2",1),l(2,"Confirmar Entrega"),a(),s(3,"p",2),l(4,"Hola "),s(5,"strong"),l(6),a(),l(7,", completa los datos de tu pedido"),a(),s(8,"div",3)(9,"div",4)(10,"form",5),h("ngSubmit",function(){return i.onSubmit()}),s(11,"div",6)(12,"h4",7),l(13,"\xBFC\xF3mo deseas recibir tu torta?"),a(),s(14,"div",8)(15,"div",9)(16,"label"),b(17,"input",10)(18,"i",11),s(19,"h5",12),l(20,"Delivery"),a(),s(21,"p",13),l(22,"Te la llevamos a tu puerta"),a()()(),s(23,"div",9)(24,"label"),b(25,"input",14)(26,"i",15),s(27,"h5",12),l(28,"Recojo en tienda"),a(),s(29,"p",16),l(30),a()()()()(),_(31,C_,8,1,"div",17)(32,y_,11,6,"div",18),s(33,"div",19)(34,"label",20),l(35,"Referencia (opcional)"),a(),b(36,"input",21),a(),s(37,"div",6)(38,"label",20),l(39,"Fecha y hora de entrega / recojo"),a(),b(40,"input",22),a(),s(41,"button",23),l(42),a(),s(43,"div",24)(44,"a",25),l(45," \u2190 Volver a personalizaci\xF3n "),a()()()()()()),e&2&&(c(6),S(i.usuario==null?null:i.usuario.nombre),c(4),p("formGroup",i.entregaForm),c(6),Qt(Pt(`tarjeta-metodo entrega-card p-4 text-center rounded-4 cursor-pointer
                     `,i.entregaForm.value.metodo==="delivery"?"selected":"")),c(8),Qt(Pt(`tarjeta-metodo entrega-card p-4 text-center rounded-4 cursor-pointer
                     `,i.entregaForm.value.metodo==="recojo"?"selected":"")),c(6),S(i.tienda.direccion),c(),p("ngIf",i.entregaForm.value.metodo==="delivery"),c(),p("ngIf",i.entregaForm.value.metodo==="recojo"),c(10),g(" Confirmar y Pagar Garant\xEDa \u2192 S/ ",(i.tortaPersonalizada==null?null:i.tortaPersonalizada.precioCalculado)||0," "))},dependencies:[k,N,ot,Ue,X,Wn,re,ze,ln,Ze,Ke,Ra],styles:[".contenedor-entrega[_ngcontent-%COMP%]{padding:3rem 1rem;background:linear-gradient(135deg,#fff1eb,#f8f9ff);min-height:100vh}.entrega-card[_ngcontent-%COMP%]{border:3px solid #e9ecef;transition:all .3s ease}.entrega-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 15px 35px #0000001a!important}.entrega-card.selected[_ngcontent-%COMP%]{border-color:#0d6efd!important;background:#f8f9ff;box-shadow:0 10px 30px #0d6efd26}.entrega-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .entrega-card[_ngcontent-%COMP%], .entrega-card[_ngcontent-%COMP%]:has(input:checked){border-color:#0d6efd!important}.sombra[_ngcontent-%COMP%]{border-radius:2rem;box-shadow:0 20px 50px #0000001a}.sombra-boton[_ngcontent-%COMP%]{box-shadow:0 10px 30px #19875466}.sombra-boton[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 20px 40px #19875480}.animar[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .6s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#198754,#20c997);border:none;font-size:1.3rem}"]})};function w_(n,t){n&1&&(s(0,"div",10),l(1," Cargando detalle de la consulta... "),a())}function E_(n,t){if(n&1&&(s(0,"div",11),l(1),a()),n&2){let e=f();c(),g(" ",e.errorMensaje," ")}}function S_(n,t){if(n&1&&(s(0,"div",19)(1,"h5"),l(2,"Respuesta del Equipo"),a(),s(3,"p",20),l(4),P(5,"date"),a(),s(6,"div",21),l(7),a()()),n&2){let e=f(2);c(4),g(" Respondido el ",A(5,2,e.consulta.fechaRespuesta,"dd/MM/yyyy, h:mm a")," "),c(3),g(" ",e.consulta.respuesta," ")}}function P_(n,t){n&1&&(s(0,"div",22),l(1," Tu consulta est\xE1 pendiente de revisi\xF3n. Te contactaremos pronto. "),a())}function M_(n,t){if(n&1&&(Ne(0),s(1,"div",12)(2,"span")(3,"strong"),l(4,"Estado:"),a(),l(5),P(6,"titlecase"),a(),s(7,"span")(8,"strong"),l(9,"Fecha Env\xEDo:"),a(),l(10),P(11,"date"),a()(),b(12,"hr",13),s(13,"div",14)(14,"h5"),l(15,"Motivo"),a(),s(16,"div",15),l(17),P(18,"titlecase"),a()(),s(19,"div",14)(20,"h5"),l(21,"Tu Mensaje"),a(),s(22,"div",16),l(23),a()(),_(24,S_,8,5,"div",17)(25,P_,2,0,"div",18),Le()),n&2){let e=f();c(2),Z("text-success",e.consulta.estado==="respondido")("text-danger",e.consulta.estado==="pendiente"),c(3),g(" ",le(6,10,e.consulta.estado)," "),c(5),g(" ",A(11,12,e.consulta.fecha,"dd/MM/yyyy, h:mm a")," "),c(7),g(" ",le(18,15,e.consulta.motivo)," "),c(6),g(" ",e.consulta.mensaje," "),c(),p("ngIf",e.consulta.estado==="respondido"),c(),p("ngIf",e.consulta.estado==="pendiente")}}var La=class n{route=w(ct);router=w(pe);contactoService=w(Yt);consulta=null;isLoading=!0;errorMensaje=null;contactoId=null;ngOnInit(){this.route.paramMap.subscribe(t=>{let e=t.get("contactoId");e?(this.contactoId=parseInt(e,10),this.cargarDetalleConsulta(this.contactoId)):(this.errorMensaje="ID de consulta no proporcionado.",this.isLoading=!1)})}cargarDetalleConsulta(t){this.isLoading=!0,this.errorMensaje=null,this.contactoService.obtenerPorId(t).subscribe({next:e=>{this.consulta=e,this.isLoading=!1},error:e=>{this.isLoading=!1}})}volverALaLista(){this.router.navigate(["/cliente/consultas"])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-detalle-consulta-modal"]],decls:12,vars:4,consts:[[1,"detalle-modal-wrapper"],[1,"detalle-card-modal"],[1,"modal-header"],[1,"modal-title"],[1,"btn-volver-link",3,"click"],[1,"modal-body"],["class","loading",4,"ngIf"],["class","alert alert-danger mb-3",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[1,"loading"],[1,"alert","alert-danger","mb-3"],[1,"montos-summary"],[1,"separator"],[1,"detalle-seccion"],[1,"contenido-tarjeta","motivo-texto","item-validado"],[1,"contenido-tarjeta","mensaje-texto","item-pendiente"],["class","detalle-seccion detalle-respuesta",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],[1,"detalle-seccion","detalle-respuesta"],[1,"respuesta-fecha"],[1,"contenido-tarjeta","respuesta-texto","item-validado"],[1,"alert","alert-info","mt-3"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),l(4),a(),s(5,"button",4),h("click",function(){return i.volverALaLista()}),l(6," \u2190 Volver a Mis Consultas "),a()(),s(7,"div",5),_(8,w_,2,0,"div",6)(9,E_,2,1,"div",7)(10,M_,26,17,"ng-container",8),a(),b(11,"div",9),a()()),e&2&&(c(4),g("Detalle de la Consulta #",(i.consulta==null?null:i.consulta.contactoId)||"N/A"),c(4),p("ngIf",i.isLoading),c(),p("ngIf",i.errorMensaje),c(),p("ngIf",i.consulta&&!i.isLoading))},dependencies:[k,N,_e,ce],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:flex-start;padding:3rem 1rem;background-color:#f4f6f9;min-height:90vh;font-family:Inter,sans-serif}.detalle-modal-wrapper[_ngcontent-%COMP%]{width:100%;max-width:850px}.detalle-card-modal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#fff);border-radius:1.5rem;overflow:hidden;box-shadow:0 15px 40px #00000026,0 0 0 1px #0000000d}.modal-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1.8rem 2.5rem 1.5rem;border-bottom:1px solid #f0f0f0;background-color:#fefefe}.modal-title-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.2rem}.modal-title[_ngcontent-%COMP%]{margin-bottom:0;line-height:1.5;font-size:1.8rem;font-weight:800;color:#2c3e50}.btn-volver-link[_ngcontent-%COMP%]{background:none;border:none;color:#3498db;font-weight:600;cursor:pointer;font-size:1rem;padding:.5rem 1rem;text-decoration:none;transition:all .2s;border-radius:.5rem}.btn-volver-link[_ngcontent-%COMP%]:hover{color:#2980b9;background-color:#ecf0f1;text-decoration:none}.modal-body[_ngcontent-%COMP%]{position:relative;padding:2.5rem}.separator[_ngcontent-%COMP%]{margin:2.5rem 0;border:0;border-top:1px solid #dee2e6}h5[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:700;margin-bottom:.8rem;color:#34495e;border-bottom:3px solid #ff7700;display:inline-block;padding-bottom:.2rem;line-height:1}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:1.5rem 2.5rem;border-top:1px solid #e9ecef;background-color:#fcfcfc}.montos-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:1.5rem;margin-top:0;font-size:.95rem;color:#6c757d;padding:0;background-color:transparent;border:none;box-shadow:none}.montos-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#495057;font-weight:600;margin-right:.3rem}.estado-badge[_ngcontent-%COMP%]{font-size:.9rem;padding:.4rem 1.2rem;border-radius:50px;font-weight:800;text-transform:uppercase;display:inline-block;letter-spacing:.5px}.estado-pendiente[_ngcontent-%COMP%]{background:#ffe5d9;color:#e67e22;border:1px solid #ffbb99}.estado-respondido[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.montos-summary[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{font-size:1rem;display:flex;align-items:center}.contenido-tarjeta[_ngcontent-%COMP%]{background-color:#fff;padding:1.2rem 1.5rem;border-radius:.8rem;border:1px solid #e9ecef;line-height:1.6;color:#34495e;box-shadow:0 4px 8px #00000008;transition:all .3s ease}.contenido-tarjeta.item-validado[_ngcontent-%COMP%]{border-left:5px solid #3498db}.contenido-tarjeta.item-pendiente[_ngcontent-%COMP%]{border-left:5px solid #ff7700}.motivo-texto[_ngcontent-%COMP%]{font-weight:600;font-size:1.05rem;color:#2c3e50}.mensaje-texto[_ngcontent-%COMP%]{white-space:pre-wrap;font-size:1rem;color:#2c3e50}.detalle-respuesta[_ngcontent-%COMP%]{margin-top:2rem}.respuesta-fecha[_ngcontent-%COMP%]{font-size:.9rem;color:#95a5a6;margin-bottom:.5rem}.respuesta-texto[_ngcontent-%COMP%]{background-color:#e8f5ff;border-left:5px solid #3498db;font-size:1rem;white-space:pre-wrap}.alert[_ngcontent-%COMP%]{padding:1.2rem;border-radius:.8rem;border:1px solid transparent;font-weight:600;text-align:center;font-size:1.05rem}.alert-info[_ngcontent-%COMP%]{color:#0c5460;background-color:#f0f8ff;border:1px solid #d1ecf1;margin-top:1.5rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem!important}.mt-3[_ngcontent-%COMP%]{margin-top:1rem!important}"]})};var Op=[{path:"",component:na},{path:"catalogo",component:To},{path:"registrar",component:da},{path:"iniciar-sesion",component:ua},{path:"personalizar-torta",component:Ro},{path:"mi-pedido",component:ko},{path:"checkout",component:Ia},{path:"productos-realizados",component:Vo},{path:"ofertas",component:jo},{path:"ofertas/:id",component:zo},{path:"entrega",component:Uo},{path:"admin",component:pa,canActivate:[kl],data:{roles:["ROLE_Administrador"]},children:[{path:"dashboard",component:fa},{path:"pedidos",component:ya},{path:"consultas",component:wa},{path:"usuarios",component:Ea},{path:"perfil",component:Sa},{path:"pagos",component:Pa},{path:"productos",component:Lo},{path:"adicionales",component:Ma},{path:"promociones",component:Da},{path:"resenas",component:Oa},{path:"productos/:idProducto",component:Lo},{path:"GestionGarantias",component:va},{path:"GestionQr",component:xa},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"cliente",component:ga,canActivate:[kl],children:[{path:"bienvenida",component:ha},{path:"pedidos",component:Fo},{path:"catalogo",component:To},{path:"personalizar-torta",component:Ro},{path:"productos-destacados",component:yi},{path:"mi-pedido",component:ko},{path:"perfil",component:ba},{path:"confirmar-pedido",component:Aa},{path:"consultas",component:_a},{path:"pago-garantia",component:Ta},{path:"productos-realizados",component:Vo},{path:"entrega",component:Uo},{path:"historial-pedidos",component:Fo},{path:"ofertas",component:jo},{path:"ofertas/:id",component:zo},{path:"detalle/:contactoId",component:La},{path:"",redirectTo:"bienvenida",pathMatch:"full"}]},{path:"**",redirectTo:"",pathMatch:"full"}];var Ip=(n,t)=>{let i=w(de).obtenerToken();if(i){let o=n.clone({setHeaders:{Authorization:`Bearer ${i}`}});return t(o)}return t(n)};var Ap={providers:[nl(Op),Is(As([Ip])),uu(),jt,de]};function D_(n,t){if(n&1&&(s(0,"span",21),l(1),a()),n&2){let e=f(2);c(),g(" ",e.cantidadItems," ")}}function O_(n,t){if(n&1){let e=T();Ne(0),s(1,"a",14),h("click",function(){C(e);let o=f();return y(o.closeMenu())}),l(2,"PROMOCIONES"),a(),s(3,"a",15),h("click",function(){C(e);let o=f();return y(o.closeMenu())}),Ut(),s(4,"svg",16),b(5,"path",17),a(),Qn(),s(6,"span"),l(7,"Mi pedido"),a(),_(8,D_,2,1,"span",18),a(),s(9,"a",19),h("click",function(){C(e);let o=f();return y(o.closeMenu())}),l(10,"Registrar"),a(),s(11,"a",20),h("click",function(){C(e);let o=f();return y(o.closeMenu())}),l(12,"Iniciar Sesi\xF3n"),a(),Le()}if(n&2){let e=f();c(8),p("ngIf",e.cantidadItems>0)}}function I_(n,t){if(n&1){let e=T();Ne(0),s(1,"span",22),l(2),a(),s(3,"a",23),h("click",function(){C(e);let o=f();return y(o.closeMenu())}),l(4,"Mis Pedidos"),a(),s(5,"button",24),h("click",function(){C(e);let o=f();return y(o.cerrarSesion())}),l(6,"Cerrar Sesi\xF3n"),a(),Le()}if(n&2){let e=f();c(2),g("Hola, ",e.authService.obtenerUsuarioActual)}}var Va=class n{constructor(t,e){this.authService=t;this.carritoService=e}isMenuOpen=!1;cantidadItems=0;ngOnInit(){this.carritoService.items$.subscribe(t=>{this.cantidadItems=t.reduce((e,i)=>e+i.cantidad,0)})}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}closeMenu(){this.isMenuOpen=!1}cerrarSesion(){this.authService.cerrarSesion(),this.closeMenu()}static \u0275fac=function(e){return new(e||n)(x(de),x(Ge))};static \u0275cmp=M({type:n,selectors:[["app-header"]],decls:31,vars:4,consts:[[1,"main-header"],[1,"logo"],["routerLink","/"],["src","assets/imagenes/logo.png","alt","Logo de D.Juancito"],[1,"mobile-nav-toggle",3,"click"],[1,"nav-container"],[1,"main-nav"],["href","#carrusel",3,"click"],["href","#productos-realizados",3,"click"],["href","#resenas",3,"click"],["href","#contacto",3,"click"],["routerLink","/catalogo",3,"click"],[1,"user-actions"],[4,"ngIf"],["routerLink","/ofertas",1,"btn","btn-primary",3,"click"],["routerLink","/mi-pedido",1,"btn","btn-secondary","position-relative",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-bag"],["d","M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z"],["class","position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger","style","font-size: 0.65rem; min-width: 18px; height: 18px;",4,"ngIf"],["routerLink","/registrar",1,"btn","btn-light",3,"click"],["routerLink","/iniciar-sesion",1,"btn","btn-primary",3,"click"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger",2,"font-size","0.65rem","min-width","18px","height","18px"],[1,"welcome-message"],["routerLink","/cliente/pedidos",1,"btn","btn-secondary",3,"click"],[1,"btn","btn-light",3,"click"]],template:function(e,i){e&1&&(s(0,"header",0)(1,"div",1)(2,"a",2),b(3,"img",3),s(4,"span"),l(5,"D.Juancito"),a()()(),s(6,"button",4),h("click",function(){return i.toggleMenu()}),b(7,"span")(8,"span")(9,"span"),a(),s(10,"div",5)(11,"nav",6)(12,"ul")(13,"li")(14,"a",7),h("click",function(){return i.closeMenu()}),l(15,"Inicio"),a()(),s(16,"li")(17,"a",8),h("click",function(){return i.closeMenu()}),l(18,"Productos Realizados"),a()(),s(19,"li")(20,"a",9),h("click",function(){return i.closeMenu()}),l(21,"Rese\xF1as"),a()(),s(22,"li")(23,"a",10),h("click",function(){return i.closeMenu()}),l(24,"Contacto"),a()(),s(25,"li")(26,"a",11),h("click",function(){return i.closeMenu()}),l(27,"Nuestro Cat\xE1logo"),a()()()(),s(28,"div",12),_(29,O_,13,1,"ng-container",13)(30,I_,7,1,"ng-container",13),a()()()),e&2&&(c(10),Z("nav-open",i.isMenuOpen),c(19),p("ngIf",!i.authService.estaLogueado()),c(),p("ngIf",i.authService.estaLogueado()))},dependencies:[k,N,oe],styles:[".main-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 40px;background-color:#fff;box-shadow:0 2px 8px #00000014;position:sticky;top:0;width:100%;z-index:1000;height:70px}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;text-decoration:none}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;object-fit:cover;border:2px solid #fd7e14}.logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.nav-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:100px}.main-nav[_ngcontent-%COMP%]{margin:0 auto;flex-grow:1;display:flex;justify-content:center}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;display:flex;gap:40px;justify-content:center}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#333;font-size:16px;font-weight:600;padding-bottom:5px;border-bottom:2px solid transparent;transition:all .3s ease}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fd7e14;border-bottom:2px solid #fd7e14}.user-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;text-decoration:none;font-weight:700;font-size:14px;border:2px solid transparent;transition:all .3s ease;display:flex;align-items:center;gap:8px}.btn-primary[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#e8730f}.btn-secondary[_ngcontent-%COMP%]{background-color:#fff;color:#424242;border-color:#e0e0e0}.btn-secondary[_ngcontent-%COMP%]:hover{border-color:#fd7e14;background-color:#fff8f0}.btn-light[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#424242}.btn-light[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.badge[_ngcontent-%COMP%]{font-size:.65rem;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center;padding:0 4px;background-color:#dc3545;color:#fff;border-radius:50%;border:2px solid white}.mobile-nav-toggle[_ngcontent-%COMP%]{display:none;background:transparent;border:none;cursor:pointer;z-index:1100;padding:0;width:30px;height:25px}.mobile-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:100%;height:3px;background-color:#333;border-radius:2px;transition:all .3s ease-in-out}@media (max-width: 1024px){.nav-container[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:-100%;width:100%;height:100vh;background-color:#212529;flex-direction:column;justify-content:center;align-items:center;z-index:1050;transition:left .4s ease-in-out}.nav-container.nav-open[_ngcontent-%COMP%]{display:flex;left:0}.main-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .user-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:25px}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:22px;color:#f8f9fa}.user-actions[_ngcontent-%COMP%]{margin-top:40px;border-top:1px solid #495057;padding-top:40px;width:80%}.user-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center;padding:12px;font-size:16px}.mobile-nav-toggle[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around}.main-header.nav-open[_ngcontent-%COMP%]   .mobile-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){transform:rotate(45deg) translate(5px,5px);background-color:#fff}.main-header.nav-open[_ngcontent-%COMP%]   .mobile-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){opacity:0}.main-header.nav-open[_ngcontent-%COMP%]   .mobile-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){transform:rotate(-45deg) translate(7px,-6px);background-color:#fff}}"]})};var ja=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-pie-pagina"]],decls:49,vars:0,consts:[[1,"site-footer"],[1,"footer-container"],[1,"footer-column"],["href","#"],[1,"subscribe-form"],["type","email","placeholder","Tu correo electr\xF3nico"],["type","submit"],[1,"footer-bottom"]],template:function(e,i){e&1&&(be(0,"footer",0)(1,"div",1)(2,"div",2)(3,"h4"),l(4,"D.Juancito"),ge(),be(5,"p"),l(6,'"Donde el Sabor se Convierte en Recuerdo"'),ge()(),be(7,"div",2)(8,"h4"),l(9,"Productos"),ge(),be(10,"ul")(11,"li")(12,"a",3),l(13,"Pasteles personalizados"),ge()(),be(14,"li")(15,"a",3),l(16,"Postres especiales"),ge()()()(),be(17,"div",2)(18,"h4"),l(19,"Recursos"),ge(),be(20,"ul")(21,"li")(22,"a",3),l(23,"Preguntas frecuentes"),ge()(),be(24,"li")(25,"a",3),l(26,"Blog de recetas"),ge()()()(),be(27,"div",2)(28,"h4"),l(29,"Compa\xF1\xEDa"),ge(),be(30,"ul")(31,"li")(32,"a",3),l(33,"Sobre Nosotros"),ge()(),be(34,"li")(35,"a",3),l(36,"Nuestro equipo"),ge()()()(),be(37,"div",2)(38,"h4"),l(39,"Suscr\xEDbete"),ge(),be(40,"p"),l(41,"Recibe nuestras promociones especiales."),ge(),be(42,"form",4),$o(43,"input",5),be(44,"button",6),l(45,"Suscribir"),ge()()()(),be(46,"div",7)(47,"p"),l(48,"\xA9 2025 D.Juancito. Todos los derechos reservados."),ge()()())},styles:[".site-footer[_ngcontent-%COMP%]{background-color:#2c2c2c;color:#a7a7a7;padding:40px 0;font-family:Arial,sans-serif}.footer-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-wrap:wrap;max-width:1200px;margin:0 auto;padding:0 20px}.footer-column[_ngcontent-%COMP%]{flex:1;min-width:200px;margin:20px 10px}.footer-column[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-size:18px;margin-bottom:20px;border-bottom:1px solid #eb7221;padding-bottom:10px}.footer-column[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.6}.footer-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.footer-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#a7a7a7;text-decoration:none;display:block;margin-bottom:10px;transition:color .3s ease}.footer-column[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.subscribe-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:5px;border:1px solid #555;background-color:#333;color:#fff;margin-bottom:10px}.subscribe-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:5px;border:none;background-color:#eb7221;color:#fff;font-weight:700;cursor:pointer}.footer-bottom[_ngcontent-%COMP%]{text-align:center;margin-top:40px;border-top:1px solid #444;padding-top:20px}"]})};var za=class n{mensaje="";visible=!0;cerrar(){this.visible=!1}ocultar(){setTimeout(()=>this.visible=!1,3e3)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=M({type:n,selectors:[["app-toast"]],inputs:{mensaje:"mensaje"},decls:6,vars:3,consts:[["role","alert",1,"toast","show","align-items-center","text-bg-success","border-0","fade"],[1,"d-flex"],[1,"toast-body"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"]],template:function(e,i){e&1&&(be(0,"div",0)(1,"div",1)(2,"div",2),$o(3,"i",3),l(4),ge(),be(5,"button",4),Ho("click",function(){return i.cerrar()}),ge()()()),e&2&&(ni("display",i.visible?"flex":"none"),c(4),g(" ",i.mensaje," "))},dependencies:[k],styles:[".toast[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1055;min-width:300px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}"]})};function A_(n,t){n&1&&(Ne(0),b(1,"app-header"),s(2,"main"),b(3,"router-outlet"),a(),b(4,"app-pie-pagina"),Le())}function T_(n,t){if(n&1&&b(0,"app-toast",2),n&2){let e=f();p("mensaje",e.mensajeToast)}}function k_(n,t){n&1&&(Ne(0),b(1,"router-outlet"),Le())}var Ua=class n{constructor(t){this.router=t;this.router.events.pipe(kt(e=>e instanceof It)).subscribe(e=>{this.usaLayoutPrincipal=!e.urlAfterRedirects.startsWith("/admin")&&!e.urlAfterRedirects.startsWith("/cliente")}),window.addEventListener("agregar-al-carrito",e=>{this.mostrarNotificacion(e.detail)})}usaLayoutPrincipal=!0;mostrarToast=!1;mensajeToast="";mostrarNotificacion(t){this.mensajeToast=t,this.mostrarToast=!0,setTimeout(()=>this.mostrarToast=!1,3e3)}static \u0275fac=function(e){return new(e||n)(x(pe))};static \u0275cmp=M({type:n,selectors:[["app-root"]],decls:3,vars:3,consts:[[4,"ngIf"],[3,"mensaje",4,"ngIf"],[3,"mensaje"]],template:function(e,i){e&1&&_(0,A_,5,0,"ng-container",0)(1,T_,1,1,"app-toast",1)(2,k_,2,0,"ng-container",0),e&2&&(p("ngIf",i.usaLayoutPrincipal),c(),p("ngIf",i.mostrarToast),c(),p("ngIf",!i.usaLayoutPrincipal))},dependencies:[k,N,an,Va,ja,za],styles:[".header-fijo-contenedor[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;z-index:1000}.contenido-principal[_ngcontent-%COMP%]{padding-top:10px}"]})};function F_(n){let t=n,e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===1?1:o===0&&e!==0&&e%1e6===0&&i===0||!(o>=0&&o<=5)?4:5}var Tp=["es-PE",[["a.\xA0m.","p.\xA0m."]],void 0,[["d","l","m","m","j","v","s"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["D","L","M","M","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","set.","oct.","nov.","dic."],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","setiembre","octubre","noviembre","diciembre"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["Ene.","Feb.","Mar.","Abr.","May.","Jun.","Jul.","Ago.","Set.","Oct.","Nov.","Dic."],["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Setiembre","Octubre","Noviembre","Diciembre"]],[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],0,[6,0],["d/MM/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}","{1} {0}","{1}, {0}",void 0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","\xA4\xA0#,##0.00","#E0"],"PEN","S/","sol peruano",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],ESP:["\u20A7"],EUR:[void 0,"\u20AC"],FKP:[void 0,"FK\xA3"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PEN:["S/"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],SSP:[void 0,"SD\xA3"],SYP:[void 0,"S\xA3"],TWD:[void 0,"NT$"],USD:[void 0,"$"],VEF:[void 0,"BsF"],VND:[void 0,"\u20AB"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",F_];Jc(Tp);Ss(Ua,Ap).catch(n=>console.error(n));
