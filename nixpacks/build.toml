# FORZAMOS Node.js 20 o 22 (Angular 20 lo necesita)
[phases.setup]
nixPkgs = ["nodejs-20"]

# INSTALAMOS DEPENDENCIAS
[phases.install]
cmds = ["npm ci"]

# COMPILAMOS ANGULAR EN MODO PRODUCCIÓN
[phases.build]
cmds = ["npm run build -- --configuration production"]

# SERVIMOS CON UN SERVIDOR ESTÁTICO (recomendado y más rápido)
[start]
cmd = "npx serve -s dist/angular-temp -l $PORT"

# O SI PREFIERES CON NGINX (más profesional)
# [start]
# cmd = "nginx -g 'daemon off;'"
