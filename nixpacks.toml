# nixpacks.toml - CONFIGURACIÃ“N DEFINITIVA PARA ANGULAR + SPRING BOOT EN RAILWAY 2025
providers = ["nodejs", "java"]  # Detecta tanto frontend (Node) como backend (Java)

[phases.setup]
nixPkgs = ["nodejs-20", "openjdk-21"]  # Node 20 para Angular 20, Java 21 para Spring Boot

[phases.install]
cmds = ["npm ci"]  # Instala dependencias de Node (frontend)

[phases.build]
cmds = [
  "npm run build -- --configuration production",  # Build de Angular
  "./gradlew bootJar"  # Build de Spring Boot (si usas Gradle; si Maven, usa "mvn clean package")
]

[phases.start]
cmd = "java -jar backend/target/*.jar --server.port=$PORT"  # Backend en puerto de Railway
