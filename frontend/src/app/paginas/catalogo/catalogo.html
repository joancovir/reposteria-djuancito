<div class="catalog-container">
  <h1 class="catalog-title">Cat√°logo</h1>

  <div class="filter-bar">
    <div class="search-box">
      <input type="text" placeholder="BUSCAR PRODUCTO" [(ngModel)]="searchTerm">
      <button (click)="buscarProductos()">BUSCAR</button>
    </div>
    
    <select class="filter-select" (change)="filtrarProductos($event)" [value]="filtroActivo">
      <option value="">TODOS</option>
      <option value="torta">Tortas</option>
      <option value="postre">Postres</option>
      <option value="bocadito">Bocaditos</option>
      <option value="personalizable">Personalizables</option>
      <option value="predeterminada">Predeterminadas</option>
    </select>
    
    <a routerLink="../personalizar-torta" class="btn-personalizada">Pide tu Torta Personalizada</a>
  </div>

  <div class="product-grid">
    <div class="product-card" *ngFor="let producto of productosPaginados">
      <span *ngIf="producto.personalizable" class="badge-personalizable">Personalizable</span>
      <img [src]="producto.imagenUrl" [alt]="producto.nombre">
      <div class="product-info">
        <h3>{{ producto.nombre }}</h3>
        <p class="category">{{ producto.categoria }}</p>
        <p class="description">{{ producto.descripcion }}</p>
        <div class="price-action">
          <span class="price">S/ {{ producto.precioBase }}</span>
          <button *ngIf="producto.personalizable" (click)="abrirModalAdicionales()" class="btn-adicionales">Ver Adicionales</button>
          <button (click)="agregarAlCarrito(producto)" class="btn-pide">A√±adir al Carrito</button>
        </div>
      </div>
    </div>
  </div>

  <!-- üîπ PAGINACI√ìN -->
  <div class="pagination" *ngIf="totalPaginas > 1">
    <button (click)="cambiarPagina(paginaActual - 1)" [disabled]="paginaActual === 1">Anterior</button>

    <button 
      *ngFor="let num of [].constructor(totalPaginas); let i = index" 
      (click)="cambiarPagina(i + 1)" 
      [class.active]="paginaActual === i + 1">
      {{ i + 1 }}
    </button>

    <button (click)="cambiarPagina(paginaActual + 1)" [disabled]="paginaActual === totalPaginas">Siguiente</button>
  </div>
</div>
