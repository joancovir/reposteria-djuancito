<div class="container my-5">
  <div class="row">
    
    <div class="col-md-3">
      <h3 class="mb-3">Filtros üç∞</h3>
      
      <div class="card p-3 mb-4 shadow-sm">
        <h5>Categor√≠a de Producto</h5>
        <select class="form-select" [(ngModel)]="filtroCategoria" (change)="aplicarFiltros()">
          <option value="todas">Todas las categor√≠as</option>
          <option *ngFor="let cat of categoriasDisponibles" [value]="cat">{{ cat | titlecase }}</option>
        </select>
      </div>

      <div class="card p-3 mb-4 shadow-sm">
        <h5>Especiales de Temporada</h5>
        <div *ngIf="temporadasActivas.length > 0; else noTemporadas">
            <div *ngFor="let temp of temporadasActivas" class="form-check">
                <input 
                    class="form-check-input" 
                    type="radio" 
                    name="filtroTemporada" 
                    [value]="temp.temporadaId" 
                    [(ngModel)]="filtroTemporadaId"
                    (change)="aplicarFiltros()"
                >
                <label class="form-check-label">{{ temp.nombre }}</label>
            </div>
        </div>
        <ng-template #noTemporadas>
            <p class="text-muted small">No hay temporadas especiales vigentes.</p>
        </ng-template>
        <button class="btn btn-sm btn-outline-secondary mt-3" (click)="limpiarFiltroTemporada()">Limpiar Filtro</button>
      </div>
      
    </div>

    <div class="col-md-9">
      <h1 class="mb-4">¬°Super Ofertas y Novedades!</h1>
      
      <div *ngIf="promocionesFiltradas.length > 0; else noResultados" class="row">
        
        <div *ngFor="let promo of promocionesFiltradas" class="col-lg-4 col-md-6 mb-4">
          <div class="card h-100 shadow-sm border-primary">
            <img [src]="promo.imagenUrl || 'assets/default-promo.png'" class="card-img-top promo-image" alt="Imagen de {{ promo.titulo }}">
            <div class="card-body">
              <h5 class="card-title text-primary">{{ promo.titulo }}</h5>
              <p class="card-text small text-muted">{{ promo.descripcion }}</p>
              
              <div class="d-flex justify-content-between align-items-center mt-3">
                 <p class="text-success fw-bold m-0">
                    <i class="bi bi-tag-fill"></i> ¬°{{ promo.descuento }}% OFF!
                </p>
                </div>
            </div>
            <div class="card-footer bg-light border-top-0">
              <a [routerLink]="['../ofertas', promo.promocionId]" class="btn btn-warning w-100 fw-bold">Ver Detalles</a>
            </div>
          </div>
        </div>
        
      </div>

      <ng-template #noResultados>
        <div class="alert alert-info" role="alert">
          <h4 class="alert-heading">Sin resultados üôÅ</h4>
          <p>No encontramos ofertas activas que coincidan con los criterios de b√∫squeda.</p>
        </div>
      </ng-template>
    </div>
  </div>
</div>